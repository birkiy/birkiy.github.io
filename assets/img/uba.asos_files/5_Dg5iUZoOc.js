__d("VideoPlayerCaptionsDisplayConfigContext",["react"],function(e,t,r,i,n,a,s){"use strict";t=i("react").createContext({liveCaptionsTextAlignment:null,textSizeMapping:null}),s["default"]=t},98),__d("VideoPlayerCaptionsDisplay.react",["VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","recoverableViolation","stylex"],function(e,t,r,i,n,a,s){"use strict";function o(e){switch(e){case"center":return d.captionsCenterAlign;case"left":return d.captionsLeftAlign;case"right":return d.captionsRightAlign;default:r("recoverableViolation")("Unsupported captions text alignment: "+e,"comet_video_player")}}function u(e,t,r){var i={},n=e.captionsBackgroundColor,a=e.captionsBackgroundOpacity,s=e.captionsTextColor;return e=e.captionsTextSize,null!==n&&(a=null!==a?p[a]:1,i.backgroundColor="rgba("+f[n]+","+a+")"),null!==s&&(i.color="rgba("+f[s]+")"),null!==e&&(i.fontSize=null!=t?babelHelpers["extends"]({},c,t)[e]:c[e]),r&&(i.marginBottom=35),i}function e(e){var t=e.activeCaptions,n=e.adjustments;e=e.captionDisplayStyle;var a=null==t?void 0:t.rows,s=h(r("VideoPlayerCaptionsDisplayConfigContext")),c=s.liveCaptionsTextAlignment;s=s.textSizeMapping;var p=h(i("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext);p=null!=(null==p?void 0:p.getBottomRowAddOn());var f={};return e&&(f=u(e,s,p)),e=i("VideoPlayerHooks").useIsLive(),t=null!=(p=null==t?void 0:null==(s=t.styles)?void 0:s.textAlignment)?p:"center",null!=a&&a.length>0&&(s=a.map(function(e){return e.trim()}).filter(function(e){return!!e})).length>0?l.jsx("div",{className:r("stylex")(d.captionsContainer,o(e&&null!=(p=c)?p:t)),style:{paddingLeft:n.left,paddingRight:n.right,transform:"translateY("+-n.bottom+"px)"},children:l.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r xv81d3b xat24cr x5jn1jc xulzisn x1msn8f2 x1uwfbks x1qobr7z",style:f,children:s.map(function(e,t){return l.jsxs("span",{children:[e,l.jsx("br",{})]},t)})})}):null}var l=i("react"),h=i("react").useContext,d={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsDefault:{backgroundColor:"x18l40ae",color:"x14ctfv",fontSize:"x1lkfr7t",fontWeight:"xk50ysn",lineHeight:"x37zpob",marginTop:"xdj266r",marginEnd:"xv81d3b",marginBottom:"xat24cr",marginStart:"x5jn1jc",paddingTop:"xulzisn",paddingEnd:"x1msn8f2",paddingBottom:"x1uwfbks",paddingStart:"x1qobr7z",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},c={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},p={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},f={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};e.displayName=e.name+" [from "+a.id+"]",n=l.memo(e),s["default"]=n},98),__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react"],function(e,t,r,i,n,a,s){"use strict";function e(){var e=i("VideoPlayerHooks").useVideoPlayerCaptionsReservations();return o(function(){var t={bottom:0,left:0,right:0,top:0};return e.length>0&&e.forEach(function(e){t[e.location]+=e.size}),t},[e])}var o=i("react").useMemo;s["default"]=e},98),__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","useVideoPlayerCaptionsDisplayAdjustments"],function(e,t,r,i,n,a,s){"use strict";function e(){var e=i("VideoPlayerHooks").useActiveCaptions(),t=r("useVideoPlayerCaptionsDisplayAdjustments")(),n=i("VideoPlayerHooks").useCaptionDisplayStyle();return o.jsx(r("VideoPlayerCaptionsDisplay.react"),{activeCaptions:e,adjustments:t,captionDisplayStyle:n})}var o=i("react");e.displayName=e.name+" [from "+a.id+"]",s["default"]=e},98),__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react"],function(e,t,r,i,n,a,s){"use strict";function o(e,t){switch(t.type){case"reserve":return e.concat(t.reservation);case"release":return e.filter(function(e){return e!==t.reservation});default:return e}}function e(e){e=e.children;var t=l(o,[]),n=t[0],a=t[1];t=(t=h({release:function(e){a({reservation:e,type:"release"})},reserve:function(e){return a({reservation:e,type:"reserve"}),e}}))[0];var s=i("VideoPlayerHooks").useCaptionsVisible();return u.jsx(i("VideoPlayerContexts").VideoPlayerCaptionsReservationActionsContext.Provider,{value:t,children:u.jsxs(i("VideoPlayerContexts").VideoPlayerCaptionsReservationsContext.Provider,{value:n,children:[s?u.jsx(r("VideoPlayerCaptions.react"),{}):null,e]})})}var u=i("react"),l=(t=i("react")).useReducer,h=t.useState;e.displayName=e.name+" [from "+a.id+"]",s["default"]=e},98),__d("useDebouncedValue",["react"],function(e,t,r,i,n,a,s){"use strict";function e(e,t){var r=u(e),i=r[0],n=r[1];return o(function(){var r=setTimeout(function(){return n(e)},t);return function(){return clearTimeout(r)}},[e,t]),i}var o=(t=i("react")).useEffect,u=t.useState;s["default"]=e},98),__d("VideoPlayerSpinner.react",["CometLoadingAnimation.react","react","useDebouncedValue"],function(e,t,r,i,n,a,s){"use strict";function e(e){e=e.isVisible;var t=r("useDebouncedValue")(e,e?200:500);return o.jsx("div",{className:"xc9qbxq x10l6tqk xtzzx4i xwa60dl x11lhmoz x14qfxbe"+(e?" x1hc1fzr x5w5eug x13dflua x19991ni xl405pv":" xg01cxk x2p8vrm x13dflua x1jl3cmp xl405pv xlshs6z"),children:o.jsx(r("CometLoadingAnimation.react"),{animationPaused:!t,size:u})})}var o=i("react"),u=36;e.displayName=e.name+" [from "+a.id+"]",s["default"]=e},98),__d("oz-player/shims/www/ozReportUnexpectedErrorWWW",["FBLogger","getErrorSafe"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,i){switch(void 0===i&&(i="mustfix"),e=r("getErrorSafe")(e),e=r("FBLogger")("oz_player").catching(e),t="Unexpected error in "+t,i){case"fatal":e.fatal(t);break;case"mustfix":e.mustfix(t);break;case"warn":e.warn(t);break;case"info":e.info(t);break;case"debug":e.debug(t)}}s["default"]=e},98),__d("oz-player/shims/ozReportUnexpectedError",["oz-player/shims/www/ozReportUnexpectedErrorWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/ozReportUnexpectedErrorWWW")},98),__d("oz-player/loggings/OzLoggingUtils",["oz-player/shims/ozReportUnexpectedError"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,r){e=e.getOperationLogger(t).start();try{return r(e)}catch(t){throw e.setError(t),t}finally{e.log()}}function t(e,t,i,n,a){void 0===n&&(n=function(){}),void 0===a&&(a=function(){});var s=t.getOperationLogger(i).start();n(s),e.then(function(){a(s),s.log()},function(e){a(s),s.setError(e),s.log()})["catch"](function(e){r("oz-player/shims/ozReportUnexpectedError")(e,i+" logger")})}s.executeOperationAndLog=e,s.monitorPromiseAndLogOperation=t},98),__d("oz-player/loggings/OzOperationLoggerBase",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e){this.$52=new Map,this.$1=e}var t=e.prototype;return t.start=function(){var e=Date.now();return this.setClientTimeBegin(e),this.setClientTimeEnd(null),this.setClientTimeDuration(null),this},t.log=function(){var e=Date.now(),t=this.getClientTimeBegin(),r=this.getClientTimeEnd();(null==t||0===t)&&(t=e,this.setClientTimeBegin(t)),(null==r||0===r)&&(r=e,this.setClientTimeEnd(r)),this.setClientTimeDuration(r-t)},t.setError=function(e){return this.$2=e,this},t.setPerSessionSampleRate=function(e){return this.$3=e,this},t.setAppendTarget=function(e){return this.$47=e,this},t.setOneObserved=function(e){return this.$44=e,this},t.setOneReqWave=function(e){return this.$45=e,this},t.setOneResWave=function(e){return this.$46=e,this},t.setIsP2pPlayback=function(e){return this.$43=e,this},t.setResult=function(e){return this.$4=e,this},t.setType=function(e){return this.$5=e,this},t.setClientTimeBegin=function(e){return this.$6=e,this},t.setClientTimeDuration=function(e){return this.$7=e,this},t.setClientTimeEnd=function(e){return this.$8=e,this},t.setSegmentCount=function(e){return this.$15=e,this},t.setTimeToFirstByte=function(e){return this.$9=e,this},t.setTimeToLastByte=function(e){return this.$10=e,this},t.setTimeToRequestStart=function(e){return this.$11=e,this},t.setTimeToRequestSent=function(e){return this.$12=e,this},t.setReason=function(e){return this.$13=e,this},t.setResource=function(e){return this.$14=e,this},t.setSegmentStartTime=function(e){return this.$16=e,this},t.setSegmentEndTime=function(e){return this.$17=e,this},t.setLength=function(e){return this.$18=e,this},t.setLiveheadPosition=function(e){return this.$19=e,this},t.setLiveheadSeqNumHeader=function(e){return this.$20=e,this},t.setLiveheadSeqNumMpd=function(e){return this.$21=e,this},t.setManifestType=function(e){return this.$22=e,this},t.setMediaSourceNewDuration=function(e){return this.$23=e,this},t.setMediaSourcePreviousDuration=function(e){return this.$24=e,this},t.setPriorityFloat=function(e){return this.$25=e,this},t.setAppendedBufferMs=function(e){return this.$26=e,this},t.setInitiator=function(e){return this.$27=e,this},t.setPreloadTime=function(e){return this.$28=e,this},t.setConcluder=function(e){return this.$29=e,this},t.setPreviousRepresentationID=function(e){return this.$30=e,this},t.setRepresentationID=function(e){return this.$31=e,this},t.setStreamSwitchReason=function(e){return this.$32=e,this},t.setState=function(e){return this.$33=e,this},t.setContentLengthHeader=function(e){return this.$34=e,this},t.setOriginHitHeader=function(e){return this.$36=e,this},t.setEdgeHitHeader=function(e){return this.$37=e,this},t.setFNAHitHeader=function(e){return this.$38=e,this},t.setCode=function(e){return this.$35=e,this},t.setResponseTimeMsHeader=function(e){return this.$39=e,this},t.setIsTemplatedManifest=function(e){return this.$40=e,this},t.setIsLatencyCachupEnabled=function(e){return this.$41=e,this},t.setPlayerFormat=function(e){return this.$42=e,this},t.setIsRingBufferSample=function(e){return this.$48=e,this},t.setIsOnline=function(e){return this.$49=e,this},t.setProxyStatusHeader=function(e){return this.$50=e,this},t.setPlaybackFbmsParam=function(){return this},t.setPreferredEdgeLatency=function(e){return this.$51=e,this},t.setUserInfo=function(){return this},t.setDynamicStatusHeader=function(){return this},t.getPerSessionSampleRate=function(){return this.$3},t.setMediaSourceSourceBuffer=function(e,t){return this.$52.set(e,t),this},t.unsetMediaSourceSourceBuffers=function(){return this.$52.clear(),this},t.getError=function(){return this.$2},t.getResult=function(){return this.$4},t.getType=function(){return this.$5},t.getClientTimeBegin=function(){return this.$6},t.getClientTimeEnd=function(){return null!=this.$7?null!=this.$6?this.$6+this.$7:null:this.$8},t.getTimeToRequestStart=function(){return this.$11},t.getTimeToRequestSent=function(){return this.$12},t.getReason=function(){return this.$13},t.getResource=function(){return this.$14},t.getOperationName=function(){return this.$1},t.getSegmentStartTime=function(){return this.$16},t.getSegmentEndTime=function(){return this.$17},t.getLength=function(){return this.$18},t.getLiveheadPosition=function(){return this.$19},t.getManifestType=function(){return this.$22},t.getPriorityFloat=function(){return this.$25},t.getAppendedBufferMs=function(){return this.$26},t.getInitiator=function(){return this.$27},t.getPreloadTime=function(){return this.$28},t.getConcluder=function(){return this.$29},t.getContentLengthHeader=function(){return this.$34},t.getOriginHitHeader=function(){return this.$36},t.getEdgeHitHeader=function(){return this.$37},t.getFNAHitHeader=function(){return this.$38},t.getCode=function(){return this.$35},t.getResponseTimeMsHeader=function(){return this.$39},t.getIsTemplatedManifest=function(){return this.$40},t.getOneObserved=function(){return this.$44},t.getOneReqWave=function(){return this.$45},t.getOneResWave=function(){return this.$46},t.getAppendTarget=function(){return this.$47},t.getIsRingBufferSample=function(){return this.$48},t.getIsOnline=function(){return this.$49},t.getProxyStatusHeader=function(){return this.$50},t.getMediaSourceSourceBuffers=function(){return this.$52},e}(),a["default"]=e},66),__d("oz-player/shims/www/OzMaybeNativePromiseWWW",["cr:3014"],function(e,t,r,i,n,a,s){"use strict";s["default"]=t("cr:3014")},98),__d("oz-player/shims/OzMaybeNativePromise",["oz-player/shims/www/OzMaybeNativePromiseWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/OzMaybeNativePromiseWWW")},98),__d("oz-player/utils/OzErrorEmitter",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t){var i;return void 0===t&&(t=!1),(i=e.call(this)||this).$OzErrorEmitter1=!1,i.$OzErrorEmitter2=!1,i.$OzErrorEmitter3=[],i.emitError=function(e){i.$OzErrorEmitter1?i.emit("error",e):i.$OzErrorEmitter2?i.$OzErrorEmitter3.push(e):i.$OzErrorEmitter1||r("oz-player/shims/ozvariant")(0,14038)},i.$OzErrorEmitter2=t,i}return babelHelpers.inheritsLoose(t,e),t.prototype.onError=function(e){return this.$OzErrorEmitter1=!0,e=this.addListener("error",e),this.$OzErrorEmitter2&&this.$OzErrorEmitter3.length>0&&this.$OzErrorEmitter3.forEach(this.emitError),e},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/drm/OzDrmManager",["oz-player/drm/OzDrmUtils","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzDOMEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,n){var a=this;void 0===n&&(n=null),this.$1=null,this.$2=new Map,this.$4=!1,this.$6=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$7=new(r("oz-player/utils/OzErrorEmitter")),this.$8=!1,this.$9=null,this.$10=0,this.$12=[],this.$14=[],this.$24=function(e,t){e instanceof r("oz-player/loggings/OzOperationLoggerBase")&&e.getError()&&e.setResult("failed"),null!=t&&e.setReason(t)},this.$21=function(e){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed before call to mediaKeySystemAccess.createMediaKeys()."));var t=null!=a.$5.mediaKeys?r("oz-player/shims/OzMaybeNativePromise").resolve(a.$5.mediaKeys):e.createMediaKeys();return t=t.then(function(t){return{mediaKeySystemAccess:e,mediaKeys:t}}),i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(t,a.$3,"drm_create_media_keys",function(){},a.$24),t},this.$22=function(e){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed before call to setMediaKeys()"));var t=e.mediaKeySystemAccess,n=e.mediaKeys;if(!n)throw new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});return e=a.$5.setMediaKeys(n).then(function(){if(a.$4)return r("oz-player/shims/OzMaybeNativePromise").reject(new Error("OzDrmManager destroyed after setMediaKeys() called."));var e=Array.from(a.$2.values()).find(function(e){return e.getKeySystem()===t.keySystem});if(!e)throw new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+t.keySystem});var i=e.getServerCertificate();return i?n.setServerCertificate(i).then(function(){return{mediaKeys:n,provider:e}}):{mediaKeys:n,provider:e}}),i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(e,a.$3,"drm_set_media_keys",function(){},a.$24),e},this.$23=function(e){var t=e.mediaKeys,n=e.provider;return 0===(e=n.getInitDatas()).length?(a.$6.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a.$5,"encrypted",function(e){a.$25(t,n,e)["catch"](function(e){a.$17(e,"encrypted")})})),r("oz-player/shims/OzMaybeNativePromise").resolve([])):(e=e.map(function(e){return a.$25(t,n,{initData:e.data,initDataType:e.type})}),e=r("oz-player/shims/OzMaybeNativePromise").all(e),i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(e,a.$3,"drm_request_license",function(){},a.$24),e)},this.$5=t,this.$1=n,this.$3=e.cloneContext().setType("drm_manager")}var t=e.prototype;return t.hasContentProtections=function(){return this.$9},t.onError=function(e){return this.$7.onError(e)},t.$15=function(e,t){var i;return e instanceof r("oz-player/utils/OzError")?i=e:e instanceof Error?(e.stack,i=new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:e.message,extra:{originalError:e}})):i=null!=e&&"string"==typeof e.message?new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:e.message,extra:{}}):new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM "+t+" error",extra:{}}),i},t.$16=function(e){this.$7.emitError(e)},t.$17=function(e,t){var r;r=null!=(r=null==(r=this.$1)?void 0:r.maxStartEMEAttempts)?r:-1,this.$10<r?this.$18():this.$16(this.$15(e,t))},t.addProvider=function(e){this.$2.set(e.getSchemeId(),e)},t.getProviderForSchemeId=function(e){return this.$2.get(e)},t.parseContentProtectionForRepresentation=function(e){if(!e.ContentProtection)return null;for(var t=[],r=0;r<e.ContentProtection.length;r++){var n=e.ContentProtection[r],a=n.$.schemeIdUri;if(a=this.getProviderForSchemeId(a)){var s=a.getInitDatas();0==s.length&&n["cenc:pssh"]&&1===n["cenc:pssh"].length&&(n=null!=(n=n["cenc:pssh"][0]._)?n:"",s=[{data:n=i("oz-player/drm/OzDrmUtils").base64ToUint8Array(n.replace(/-/g,"+").replace(/_/g,"/")),type:"cenc"}],a.setInitDatas(s)),t.push({provider:a,initDatas:s})}}return t},t.$18=function(){try{this.$8=!1,this.startEME(this.$11,this.$12,this.$13,this.$14)}catch(t){var e=t;this.$16(new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Restart EME failed with: "+String(e),extra:{}}))}},t.startEME=function(e,t,i,n){var a=this;if(!this.$8){this.$8=!0,this.$10+=1,this.$11=e,this.$12=t,this.$13=i,this.$14=n;var s,o=new Map;if(this.$19(i,n,o,"audio"),this.$19(e,t,o,"video"),o.forEach(function(e,t){s=s?s["catch"](function(){return a.$20(t,e)}):a.$20(t,e)}),s){this.$9=!0;var u=this.$3.getOperationLogger("drm_setup").start();s.then(this.$21).then(this.$22).then(this.$23).then(function(){return u.log()},function(e){e=null!=e?a.$15(e,"keypromisechain"):new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Unknown DRM setup error",extra:{}}),a.$16(e),u.setResult("failed").setError(e).log()})}else this.$9=!1}},t.$19=function(e,t,r,i){var n=this;t.forEach(function(t){var a;a=e&&e.ContentProtection?n.parseContentProtectionForRepresentation(e):t.getCustomField("drmProtections");var s=t.getMimeCodecs();null!=a&&a.forEach(function(e){var t=(e=e.provider).getKeySystem(),n=r.get(t);n||(n={audioCapabilities:new Map,videoCapabilities:new Map,distinctiveIdentifier:e.getRequireDistinctiveIdentifier(),persistentState:e.getRequirePersistentState(),sessionTypes:e.getDrmSessionTypes(),initDataTypes:e.getInitDataTypes()},r.set(t,n)),"audio"===i&&!n.audioCapabilities.has(s)&&n.audioCapabilities.set(s,{contentType:s,robustness:e.getAudioRobustness()}),"video"===i&&!n.videoCapabilities.has(s)&&n.videoCapabilities.set(s,{contentType:s,robustness:e.getVideoRobustness()})})})},t.destroy=function(){this.$6.release(),this.$4=!0},t.$20=function(e,t){var n=this,a={audioCapabilities:Array.from(t.audioCapabilities.values()),videoCapabilities:Array.from(t.videoCapabilities.values()),distinctiveIdentifier:t.distinctiveIdentifier,persistentState:t.persistentState,sessionTypes:t.sessionTypes,initDataTypes:t.initDataTypes};return t=window.navigator.requestMediaKeySystemAccess(e,[a]),i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(t,this.$3,"drm_request_media_key_system_access",function(){},function(t){var i=null;return t instanceof r("oz-player/loggings/OzOperationLoggerBase")&&t.getError()&&(i="keySystem: "+e+";domConfig: "+JSON.stringify(a)),n.$24(t,i)}),t},t.$25=function(e,t,i){var n=this,a=e.createSession();return this.$6.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a,"message",function(e){n.$26(a,t,e)["catch"](function(e){n.$17(e,"message")})}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(a,"keystatuseschange",function(){n.$27(a)["catch"](function(e){n.$17(e,"keystatuseschange")})})),a.generateRequest(i.initDataType,i.initData)},t.$26=function(e,t,i){var n=this;i=t.getLicenseRequestInfo(i.message.slice(0));var a=this.$3.getOperationLogger("drm_fetch_license").setResource(i.url).start();return window.fetch(i.url,i).then(function(i){return(null==i?void 0:i.ok)?a.setResult("success").setCode(null==i?void 0:i.status).log():a.setResult("failed").setCode(null==i?void 0:i.status).setError(new Error("HTTP status not OK")).log(),i.arrayBuffer().then(function(a){var s=new Uint8Array(a);if(null==(s=t.parseLicenseResponse(s))||0===s.byteLength){var o=new Error("License is null, undefined, or 0 bytes.");if(o=(null==i?void 0:i.ok)?o:new Error("HTTP status not OK"),o=(null==i?void 0:i.ok)&&0!==a.byteLength?o:new Error("Received an OK response, but response body is 0 bytes"),a=new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No license for "+t.getKeySystem(),extra:{originalError:o,code:null==i?void 0:i.status.toString(),headers:null==i?void 0:i.headers,url:null==i?void 0:i.url}}),o=null!=(o=null==(o=n.$1)?void 0:o.throwNoLicenseError)&&o)throw a;n.$16(a)}else e.update(s)})})},t.$27=function(e){return e.expiration<Date.now()?e.close():r("oz-player/shims/OzMaybeNativePromise").resolve()},e}(),s.OzDrmManager=e},98),__d("oz-player/loggings/OzPerfLoggerProviderBase",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(){}var t=e.prototype;return t.cloneContext=function(){var e=this.createLoggerProvider();return this.$11(e),e},t.setType=function(e){return this.$1=e,this},t.setInitiator=function(e){return this.$2=e,this},t.setResource=function(e){return this.$4=e,this},t.setRepresentationID=function(e){return this.$3=e,this},t.setSegmentStartTime=function(e){return this.$5=e,this},t.setSegmentEndTime=function(e){return this.$6=e,this},t.setStreamSwitchReason=function(e){return this.$7=e,this},t.setIsP2pPlayback=function(e){return this.$8=e,this},t.setIsRingBufferSample=function(e){return this.$9=e,this},t.setPerSessionSampleRate=function(e){return this.$10=e,this},t.getType=function(){return this.$1},t.getInitiator=function(){return this.$2},t.getRepresentationID=function(){return this.$3},t.getStreamSwitchReason=function(){return this.$7},t.getResource=function(){return this.$4},t.getSegmentStartTime=function(){return this.$5},t.getSegmentEndTime=function(){return this.$6},t.getIsP2pPlayback=function(){return this.$8},t.getIsRingBufferSample=function(){return this.$9},t.getOperationLogger=function(e){return e=this.createOperationLogger(e),this.setOperationContext(e)},t.setOperationContext=function(e){return this.$11(e),e},t.createOperationLogger=function(){throw new Error("Not implemented: createOperationLogger")},t.createLoggerProvider=function(){throw new Error("Not implemented: createLoggerProvider")},t.$11=function(e){this.getType()&&e.setType(this.getType()),this.getInitiator()&&e.setInitiator(this.getInitiator()),this.getResource()&&e.setResource(this.getResource()),this.getRepresentationID()&&e.setRepresentationID(this.getRepresentationID()),this.getStreamSwitchReason()&&e.setStreamSwitchReason(this.getStreamSwitchReason()),"number"==typeof this.getSegmentStartTime()&&e.setSegmentStartTime(this.getSegmentStartTime()),"number"==typeof this.getSegmentEndTime()&&e.setSegmentEndTime(this.getSegmentEndTime()),"boolean"==typeof this.getIsP2pPlayback()&&e.setIsP2pPlayback(this.getIsP2pPlayback()),"boolean"==typeof this.getIsRingBufferSample()&&e.setIsRingBufferSample(this.getIsRingBufferSample())},e}(),a["default"]=e},66),__d("oz-player/loggings/OzDevConsolePerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],function(e,t,r,i,n,a,s){"use strict";function o(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).debug.apply(e,["[oz]"].concat(r))}function u(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).error.apply(e,["[oz]"].concat(r))}function l(e,t){return Math.floor(e).toString().padStart(t,"0")}function h(e,t){void 0===t&&(t=null);var r=function(e){return l(e.getHours(),2)+":"+l(e.getMinutes(),2)+":"+l(e.getSeconds(),2)+" "+l(e.getMilliseconds(),3)},i=t?t-e:0;return"["+r(e)+(t?" - "+r(t):"")+" ("+i+" ms)]"}function d(e){return"failed"===e?u:o}function c(e){return null==e||0===e?null:e.toFixed(2)}e=function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.createOperationLogger=function(e){return new p(e)},r.createLoggerProvider=function(){return new t},t}(r("oz-player/loggings/OzPerfLoggerProviderBase"));var p=function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t.prototype.log=function(){e.prototype.log.call(this);var t=this.getClientTimeBegin()||0,r=this.getClientTimeEnd();r=null!=r&&0!==r?new Date(r):null;var i=this.getResult()||"success",n=this.getType(),a=this.getInitiator(),s=this.getResource(),o=c(this.getSegmentStartTime()),u=c(this.getSegmentEndTime());d(i)("["+i+"]",this.getOperationName()+": "+h(new Date(t),r),null!=n&&""!==n?"["+n+"]":"",null!=o&&""!==o&&null!=u&&""!==u?"[segment time range: "+o+" - "+u+"]":"",a||"",s||"")},t}(r("oz-player/loggings/OzOperationLoggerBase"));s.OzDevConsolePerfLoggerProvider=e,s.OzDevConsoleOperationLogger=p},98),__d("oz-player/loggings/OzMultiDestinationPerfLogger",["oz-player/loggings/OzOperationLoggerBase","oz-player/loggings/OzPerfLoggerProviderBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t){var r;return(r=e.call(this)||this).$OzMultiDestinationPerfLoggerProvider1=t,r}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.createOperationLogger=function(e){return new o(e,this.$OzMultiDestinationPerfLoggerProvider1.map(function(t){return t.getOperationLogger(e)}))},r.createLoggerProvider=function(){return new t(this.$OzMultiDestinationPerfLoggerProvider1)},t}(r("oz-player/loggings/OzPerfLoggerProviderBase"));var o=function(e){function t(t,r){return(t=e.call(this,t)||this).$OzMultiDestinationOperationLogger1=r,t}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.start=function(){return e.prototype.start.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.start()}),this},r.setPerSessionSampleRate=function(t){return e.prototype.setPerSessionSampleRate.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPerSessionSampleRate(t)}),this},r.setResult=function(t){return e.prototype.setResult.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setResult(t)}),this},r.setError=function(t){return e.prototype.setError.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setError(t)}),this},r.setType=function(t){return e.prototype.setType.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setType(t)}),this},r.setMediaSourcePreviousDuration=function(t){return e.prototype.setMediaSourcePreviousDuration.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setMediaSourcePreviousDuration(t)}),this},r.setMediaSourceNewDuration=function(t){return e.prototype.setMediaSourceNewDuration.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setMediaSourceNewDuration(t)}),this},r.setClientTimeBegin=function(t){return e.prototype.setClientTimeBegin.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setClientTimeBegin(t)}),this},r.setClientTimeDuration=function(t){return e.prototype.setClientTimeDuration.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setClientTimeDuration(t)}),this},r.setClientTimeEnd=function(t){return e.prototype.setClientTimeEnd.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setClientTimeEnd(t)}),this},r.setSegmentCount=function(t){return e.prototype.setSegmentCount.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setSegmentCount(t)}),this},r.setTimeToFirstByte=function(t){return e.prototype.setTimeToFirstByte.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setTimeToFirstByte(t)}),this},r.setTimeToLastByte=function(t){return e.prototype.setTimeToLastByte.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setTimeToLastByte(t)}),this},r.setTimeToRequestStart=function(t){return e.prototype.setTimeToRequestStart.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setTimeToRequestStart(t)}),this},r.setTimeToRequestSent=function(t){return e.prototype.setTimeToRequestSent.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setTimeToRequestSent(t)}),this},r.setReason=function(t){return e.prototype.setReason.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setReason(t)}),this},r.setResource=function(t){return e.prototype.setResource.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setResource(t)}),this},r.setSegmentStartTime=function(t){return e.prototype.setSegmentStartTime.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setSegmentStartTime(t)}),this},r.setSegmentEndTime=function(t){return e.prototype.setSegmentEndTime.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setSegmentEndTime(t)}),this},r.setAppendedBufferMs=function(t){return e.prototype.setAppendedBufferMs.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setAppendedBufferMs(t)}),this},r.setLength=function(t){return e.prototype.setLength.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setLength(t)}),this},r.setLiveheadPosition=function(t){return e.prototype.setLiveheadPosition.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setLiveheadPosition(t)}),this},r.setLiveheadSeqNumHeader=function(t){return e.prototype.setLiveheadSeqNumHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setLiveheadSeqNumHeader(t)}),this},r.setLiveheadSeqNumMpd=function(t){return e.prototype.setLiveheadSeqNumMpd.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setLiveheadSeqNumMpd(t)}),this},r.setManifestType=function(t){return e.prototype.setManifestType.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setManifestType(t)}),this},r.setPriorityFloat=function(t){return e.prototype.setPriorityFloat.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPriorityFloat(t)}),this},r.setInitiator=function(t){return e.prototype.setInitiator.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setInitiator(t)}),this},r.setPreloadTime=function(t){return e.prototype.setPreloadTime.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPreloadTime(t)}),this},r.setConcluder=function(t){return e.prototype.setConcluder.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setConcluder(t)}),this},r.setPreviousRepresentationID=function(t){return e.prototype.setPreviousRepresentationID.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPreviousRepresentationID(t)}),this},r.setRepresentationID=function(t){return e.prototype.setRepresentationID.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setRepresentationID(t)}),this},r.setState=function(t){return e.prototype.setState.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setState(t)}),this},r.setContentLengthHeader=function(t){return e.prototype.setContentLengthHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setContentLengthHeader(t)}),this},r.setEdgeHitHeader=function(t){return e.prototype.setEdgeHitHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setEdgeHitHeader(t)}),this},r.setFNAHitHeader=function(t){
return e.prototype.setFNAHitHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setFNAHitHeader(t)}),this},r.setOriginHitHeader=function(t){return e.prototype.setOriginHitHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setOriginHitHeader(t)}),this},r.setCode=function(t){return e.prototype.setCode.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setCode(t)}),this},r.setResponseTimeMsHeader=function(t){return e.prototype.setResponseTimeMsHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setResponseTimeMsHeader(t)}),this},r.setIsTemplatedManifest=function(t){return e.prototype.setIsTemplatedManifest.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setIsTemplatedManifest(t)}),this},r.setIsLatencyCachupEnabled=function(t){return e.prototype.setIsLatencyCachupEnabled.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setIsLatencyCachupEnabled(t)}),this},r.setPlayerFormat=function(t){return e.prototype.setPlayerFormat.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPlayerFormat(t)}),this},r.setIsP2pPlayback=function(t){return e.prototype.setIsP2pPlayback.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setIsP2pPlayback(t)}),this},r.setOneObserved=function(t){return e.prototype.setOneObserved.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setOneObserved(t)}),this},r.setOneReqWave=function(t){return e.prototype.setOneReqWave.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setOneReqWave(t)}),this},r.setOneResWave=function(t){return e.prototype.setOneResWave.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setOneResWave(t)}),this},r.setAppendTarget=function(t){return e.prototype.setAppendTarget.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setAppendTarget(t)}),this},r.setIsRingBufferSample=function(t){return e.prototype.setIsRingBufferSample.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setIsRingBufferSample(t)}),this},r.setIsOnline=function(t){return e.prototype.setIsOnline.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setIsOnline(t)}),this},r.setProxyStatusHeader=function(t){return e.prototype.setProxyStatusHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setProxyStatusHeader(t)}),this},r.setPlaybackFbmsParam=function(t){return e.prototype.setPlaybackFbmsParam.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPlaybackFbmsParam(t)}),this},r.setPreferredEdgeLatency=function(t){return e.prototype.setPreferredEdgeLatency.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setPreferredEdgeLatency(t)}),this},r.setUserInfo=function(t){return e.prototype.setUserInfo.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setUserInfo(t)}),this},r.setDynamicStatusHeader=function(t){return e.prototype.setDynamicStatusHeader.call(this,t),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setDynamicStatusHeader(t)}),this},r.setMediaSourceSourceBuffer=function(t,r){return e.prototype.setMediaSourceSourceBuffer.call(this,t,r),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.setMediaSourceSourceBuffer(t,r)}),this},r.unsetMediaSourceSourceBuffers=function(){return e.prototype.unsetMediaSourceSourceBuffers.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.unsetMediaSourceSourceBuffers()}),this},r.log=function(){e.prototype.log.call(this),this.$OzMultiDestinationOperationLogger1.forEach(function(e){return e.log()})},t}(r("oz-player/loggings/OzOperationLoggerBase"));s.OzMultiDestinationPerfLoggerProvider=e},98),__d("oz-player/loggings/OzOperationLoggerObserver",["oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(){this.$1=new(r("oz-player/shims/OzSubscriptionsHandler"))}var t=e.prototype;return t.observe=function(e,t){var r;e=e.map(function(e){var r=e.setOperationLoggedListener(function(e){var r=e.getClientTimeBegin()||0,i=e.getClientTimeEnd()||0;t.getOperationLogger(e.getOperationName()).setClientTimeBegin(r).setClientTimeDuration(i-r).setClientTimeEnd(i).setLength(e.getLength()).setResult(e.getResult()||"success").setInitiator(e.getInitiator()).setType(e.getType()).log()});return e.activate(),r}),(r=this.$1).addSubscriptions.apply(r,e)},t.destroy=function(){this.$1.release()},e}(),s["default"]=e},98),__d("oz-player/shims/www/OzNetworkDiagnosticsWWW",["VideoPlayerOzWWWGlobalConfig"],function(e,t,r,i,n,a,s){"use strict";function o(e,t){return e?(e=parseInt(e.get(t),10),!isNaN(e)&&isFinite(e)?e:null):null}function u(e,t,r){if(!e||""===t||""===r)return null;for(t=null!=(e=e.get(t))?e:"",e=t.split(";"),t=0;t<e.length;t++){var i=e[t].split(":");if(2===i.length&&i[0]===r)return i=parseInt(i[1],10),isFinite(i)?i:null}return null}t={getNextValidSegmentId:function(e){return o(e,"x-fb-next-valid-segment-id")},getResponseTimeMs:function(e){return o(e,"x-fb-response-time-ms")},getDvlSegmentPTS:function(e){return o(e,"x-fb-segment-pts-start")},getDvlStatus:function(e){return null==e?void 0:e.get("x-fb-dynamic-status")},getUsableResponseSizeForBandwidthEstimation:function(e){return o(e,"x-fb-dynamic-predictive-response-chunk-size")},getBandwidthMeanEstimate:function(e){return u(e,r("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_header_key",""),r("VideoPlayerOzWWWGlobalConfig").getString("bandwidth_estimate_key",""))},getBandwidthStandardDeviationEstimate:function(e){return o(e,"x-bwe-std-dev")},getTimeToFirstByteMsEstimate:function(e){return o(e,"x-mrtt-ms")}},s["default"]=t},98),__d("oz-player/shims/OzNetworkDiagnostics",["oz-player/shims/www/OzNetworkDiagnosticsWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/OzNetworkDiagnosticsWWW")},98),__d("oz-player/manifests/OzDynamicVideoLibrary",["oz-player/shims/OzNetworkDiagnostics"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$4=null,this.$5=null,this.$6=new RegExp(/(.*)\.(m4v|m4a)(\?|$)/),this.$7={m4a:{time:0},m4v:{time:0}},this.$8={audio:"m4a",video:"m4v"},this.$9={},e=e.config,this.$3=e}var t=e.prototype;return t.getLastSegmentStartPTS=function(){return this.$1},t.getLast200RequestedTime=function(){return this.$5},t.getLast200RequestedUrlDecisionMinTime=function(){var e=[];for(var t in this.$7)e.push(this.$7[t].time);return Math.min.apply(Math,e)},t.getLast200RequestedUrlDecisionTimeByMimeType=function(e){return null==(e=this.$7[this.$8[e]])?void 0:e.time},t.updateWithResponse=function(e,t,i,n){var a;n.headers&&200==n.status&&(this.$5=t,this.$1=null!=(a=r("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(n.headers))?a:this.$1,this.$2=r("oz-player/shims/OzNetworkDiagnostics").getDvlStatus(n.headers),this.$10(e,i),(null!=this.$2||"200"===this.$2)&&(this.$4=t))},t.$10=function(e,t){null!=(e=this.$6.exec(e))&&(e=e[2],null!=t&&(this.$7[e]={time:t}))},t.shouldRequestDynamicInfo=function(e){return"video"===e&&(this.$11(e),!(null!=(e=this.$12(e))&&e<=this.$3.getNumber("dvl_initial_segment_ignore_count"))&&(0==this.$3.getNumber("dvl_update_interval_ms")||null==this.$4||this.$4+this.$3.getNumber("dvl_update_interval_ms")<=Date.now()))},t.$11=function(e){return null==this.$9[e]&&(this.$9[e]={segmentCount:0}),this.$9[e].segmentCount=null!=this.$9[e].segmentCount?this.$9[e].segmentCount+1:0},t.$12=function(e){return this.$9[e].segmentCount},e}(),s["default"]=e},98),__d("oz-player/manifests/OzRepresentationBase",["oz-player/shims/ozvariant","oz-player/utils/OzError"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,r,i,n,a,s,o,u){this.$1=e,this.$7=t,this.$2=r,this.$3=i,this.$4=n,this.$5=a,this.$6=s,this.$8=o,this.$9=u}var t=e.prototype;return t.getID=function(){return this.$7},t.getBandwidth=function(){return this.$6},t.getMimeCodecs=function(){return this.$2},t.getLang=function(){return this.$3},t.getQualityLabel=function(){return this.$7},t.getInitSegment=function(){return this.$4},t.getCustomFieldFirstSegment=function(){return this.$8},t.getCustomField=function(e){if(null==this.$9||!this.$9[e])throw new(r("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Custom field "+e+" is not specified by caller",extra:{code:"OZ_RP-8"}});e=this.$9[e];try{return e(this.$1)}catch(e){return null}},t.updateWith=function(t){t instanceof e||r("oz-player/shims/ozvariant")(0,229),this.$5.updateWith(t.$5)},t.getSegmentByTime=function(e){return this.$5.getSegmentByTime(e)},t.getSegment=function(e){return this.$5.getSegment(e)},t.getPredictedSegmentAfter=function(e){return this.$5.getPredictedSegmentAfter(e)},t.canPredict=function(){return this.$5.canPredict()},t.canApproximateId=function(){return this.$5.canApproximateId()},t.getSegmentAfter=function(e){return this.$5.getSegmentAfter(e)},t.isEndingSegment=function(e){return this.$5.isEndingSegment(e)},t.addUpdateListener=function(e){return this.$5.addUpdateListener(e)},t.getTimeRanges=function(){return this.$5.getTimeRanges()},t.blockTimeRange=function(e){this.$5.blockTimeRange(e)},t.getEndingSegment=function(){return this.$5.getEndingSegment()},t.getMaxGopSec=function(){return this.$5.getMaxGopSec()},e}(),s["default"]=e},98),__d("oz-player/manifests/OzVideoRepresentation",["oz-player/manifests/OzRepresentationBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u,l,h,d){return(r=e.call(this,t,r,i,n,a,s,o,u,l)||this).$OzVideoRepresentation5=null,r.$OzVideoRepresentation1=h,r.$OzVideoRepresentation2=d,r.$OzVideoRepresentation4=l,r.$OzVideoRepresentation3=t,r}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.getWidth=function(){return this.$OzVideoRepresentation1},r.getHeight=function(){return this.$OzVideoRepresentation2},r.getQualityLabel=function(){if(null!=this.$OzVideoRepresentation5)return this.$OzVideoRepresentation5;var e=this.$OzVideoRepresentation4?this.$OzVideoRepresentation4.qualityLabel:null;return e&&(this.$OzVideoRepresentation5=e(this.$OzVideoRepresentation3)),(null==this.$OzVideoRepresentation5||""==this.$OzVideoRepresentation5)&&(this.$OzVideoRepresentation5=this.getHeight().toString()+"p"),this.$OzVideoRepresentation5||""},t}(r("oz-player/manifests/OzRepresentationBase")),s["default"]=e},98),__d("oz-player/media_source/OzMSESourceBufferImpl",["oz-player/shims/OzDOMEventListener"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.registerOnUpdateStartListener=function(e){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updatestart",e)},t.registerOnUpdateEndListener=function(e){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"updateend",e)},t.registerOnUpdateListener=function(e){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"update",e)},t.registerOnErrorListener=function(e){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",e)},t.getIsUpdating=function(){return this.$1.updating},t.getBuffered=function(){return this.$1.buffered},t.setAppendWindowEnd=function(e){this.$1.appendWindowEnd=e},t.appendBuffer=function(e){this.$1.appendBuffer(e)},t.abort=function(){this.$1.abort()},t.remove=function(e,t){this.$1.remove(e,t)},e}(),s["default"]=e},98),__d("oz-player/media_source/OzMediaErrorProvider",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.hasError=function(){return null!==this.$1.error},t.getMediaErrorName=function(){var e=this.$1.error;return e&&e.message?this.$2(e.message):null},t.getErrorCode=function(){var e=this.$1.error;return e&&e.code?e.code:null},t.getVideoNode=function(){return this.$1},t.$2=function(e){return e.replace(/([0-9]{2,})/g,function(e){for(var t="";t.length<e.length;)t+="#";return t})},e}(),a["default"]=e},66),__d("oz-player/shims/www/OzDeferredWWW",["Deferred"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("Deferred")},98),__d("oz-player/shims/OzDeferred",["oz-player/shims/www/OzDeferredWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/OzDeferredWWW")},98),__d("oz-player/shims/www/OzSourceBufferManagerWWW",["cr:3493"],function(e,t,r,i,n,a,s){"use strict";s.OzSourceBufferManager=t("cr:3493")},98),__d("oz-player/shims/OzSourceBufferManager",["oz-player/shims/www/OzSourceBufferManagerWWW"],function(e,t,r,i,n,a){"use strict";Object.keys(importNamespace("oz-player/shims/www/OzSourceBufferManagerWWW")).forEach(function(e){"default"!==e&&"__esModule"!==e&&(a[e]=importNamespace("oz-player/shims/www/OzSourceBufferManagerWWW")[e])})},null),__d("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW",["JSResourceForInteraction"],function(e,t,r,i,n,a,s){"use strict";function e(){return o.load()}var o=r("JSResourceForInteraction")("OzVTTSourceBufferImpl").__setRef("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW");s["default"]=e},98),__d("oz-player/shims/www/getOzVTTSourceBufferImplWWW",["oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/getOzVTTSourceBufferImplLazyWWW")},98),__d("oz-player/shims/getOzVTTSourceBufferImpl",["oz-player/shims/www/getOzVTTSourceBufferImplWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/getOzVTTSourceBufferImplWWW")},98),__d("oz-player/shims/www/ozClearTimeoutWWW",["clearTimeout"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("clearTimeout")},98),__d("oz-player/shims/ozClearTimeout",["oz-player/shims/www/ozClearTimeoutWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/ozClearTimeoutWWW")},98),__d("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW",["setTimeoutAcrossTransitions"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("setTimeoutAcrossTransitions")},98),__d("oz-player/shims/ozSetTimeoutAcrossTransitions",["oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/ozSetTimeoutAcrossTransitionsWWW")},98),__d("oz-player/utils/OzCustomErrorCode",[],function(e,t,r,i,n,a){"use strict";t={APPEND_BUFFER_UNKNOWN_ERROR:"21539",APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"21540",APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:"21541",APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"21542",SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR:"21543",SOURCE_BUFFER_MANAGER_CREATE_ERROR:"21544",SETUP_STREAMS_PROMISE_REJECTION:"21545",APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:"21546",APPEND_BUFFER_INVALID_STATE_ERROR:"21547",SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR:"21548",NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR:"21549",STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR:"21550",SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED:"21551"},a["default"]=t},66),__d("oz-player/utils/OzMimeUtil",[],function(e,t,r,i,n,a){"use strict";function e(e){return(e.split("/")[0]||"").trim()}a.getMimeType=e},66),__d("oz-player/utils/ozGetErrorNameFromMediaErrorCode",[],function(e,t,r,i,n,a){"use strict";function e(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED"}return"MEDIA_ERR_UNKNOWN"}a["default"]=e},66),__d("oz-player/media_source/MediaSourceManager",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/media_source/OzMSESourceBufferImpl","oz-player/media_source/OzMediaErrorProvider","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSourceBufferManager","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/getOzVTTSourceBufferImpl","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozThrottle","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil","oz-player/utils/ozGetErrorNameFromMediaErrorCode"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){var t=this,n=e.videoNode,a=e.config,s=e.perfLoggerProvider;s=void 0===s?new(i("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([]):s;var o=e.handleVttCaptionsUpdated,u=e.onClearVideoNodeError;e=e.onRetryVideoElementError,this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$6=[],this.$7=new Map,this.$8=[],this.$10=!1,this.$12=!1,this.$13=!1,this.$14=!1,this.$15=!1,this.$18=null,this.$19=null,this.$20=new(r("oz-player/utils/OzErrorEmitter")),this.$22="undetected",this.$28=function(){if(t.$30()||(t.$10=!1),t.$31()){var e=t.$8.shift();e&&(e(t.$2),t.$10=!0)}},this.$5=s,this.$11=a,this.$1=n,this.$21=o,this.$16=u,this.$17=e,this.$9=new(r("oz-player/media_source/OzMediaErrorProvider"))(this.$1),this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"error",function(){var e;t.$5.getOperationLogger("media_element_error").setError(null!=(e=t.$9.getMediaErrorName())?e:void 0).setCode(t.$9.getErrorCode()).setResult("failed").setUserInfo({av1HardwareSupport:t.$22}).log(),t.$8=[],t.$6=[],t.$4.release(),t.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),t.$15=t.$15||t.$14||t.$13;var i=(null==(e=t.$1.error)?void 0:e.code)||0,n=new(r("oz-player/utils/OzError"))({type:r("oz-player/utils/ozGetErrorNameFromMediaErrorCode")(i),description:null!=(null==e?void 0:e.message)?e.message:"",extra:{originalError:e,code:String(i)}});if(null!=t.$19)return t.$5.getOperationLogger("media_element_error").setError(e).setCode(i).setReason("mitigation_failed").setResult("failed").setUserInfo({av1HardwareSupport:t.$22}).log(),void t.$20.emitError(n);t.$19=t.$1.currentTime,null==t.$18&&(t.$18=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){t.$18=null,t.$11.getBool("retry_video_element_error")&&(null!=t.$17&&t.$17(n),t.$23())},0))}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"play",function(){t.$14=!0}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",function(){t.$14=!1,t.$15=!1,t.$19=null,t.$13=!0}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",function(){t.$14=!1,t.$13=!1,t.$15=!!t.$1.error}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"ended",function(){t.$14=!1,t.$13=!1})),this.$2=new MediaSource,this.$5.getOperationLogger("media_source_new").log(),this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){t.$5.getOperationLogger("media_source_open").log()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){t.$5.getOperationLogger("media_source_ended").log()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceclose",function(){t.$5.getOperationLogger("media_source_close").log()})),this.$24(this.$2)}var t=e.prototype;return t.$24=function(e){var t=this.$1,r=t.src;""!==r&&URL.revokeObjectURL(r),e?t.src=URL.createObjectURL(e):(t.removeAttribute("src"),t.removeAttribute("srcObject"))},t.$23=function(){var e=this;this.$7.forEach(function(e){e.cancelOperationAndCleanQueue()}),this.$2=new MediaSource,this.$24(this.$2),this.$7.forEach(function(e){e.setSourceBuffer(null)}),this.$25().then(function(){var t=[];return e.$7.forEach(function(r,i){var n=e.$26(i).then(function(t){r.setSourceBuffer(t),e.$27(t,i)});t.push(n)}),r("oz-player/shims/OzMaybeNativePromise").all(t)}).then(function(){if(e.$16&&e.$16(),null!=e.$19&&(e.$1.currentTime=e.$19),e.$15){var t=e.$1.play();return null==t?void 0:t["catch"](function(){})}})["catch"](function(t){e.$20.emitError(t)})},t.$25=function(){var e=this;if("open"===this.$2.readyState)return r("oz-player/shims/OzMaybeNativePromise").resolve();var t=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceopen",function(){t.resolve(),e.$28()})),t.getPromise()},t.$26=function(e){var t=this;try{return(e.includes("vtt")?this.$29(e):this.$25().then(function(){return new(r("oz-player/media_source/OzMSESourceBufferImpl"))(t.$2.addSourceBuffer(e))})).then(function(r){if(t.$11.getBool("stub_safari_source_buffer_abort"))try{var n=r.abort,a=function(){t.$13&&n.call(r)};r.abort=function(){a()}}catch(e){}return t.$6.push(r),r.registerOnUpdateListener(function(){t.$5.cloneContext().getOperationLogger("source_buffer_update_start").setType(i("oz-player/utils/OzMimeUtil").getMimeType(e)).setMediaSourceSourceBuffer(i("oz-player/utils/OzMimeUtil").getMimeType(e),r).setType(i("oz-player/utils/OzMimeUtil").getMimeType(e)).log()}),t.$5.getOperationLogger("add_source_buffer").setMediaSourceSourceBuffer(i("oz-player/utils/OzMimeUtil").getMimeType(e),r).log(),r})}catch(t){throw new(r("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+e+'"): '+(t.message||String(t)),extra:{originalError:t,code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})}},t.$27=function(e){var t=this;this.$4.addSubscriptions(e.registerOnUpdateEndListener(function(){t.$28()}))},t.$29=function(e){var t=this;return r("oz-player/shims/getOzVTTSourceBufferImpl")().then(function(i){if(null!=t.$21){var n=new i({onCaptionsChanged:t.$21}),a=r("oz-player/shims/ozThrottle")(function(){n.setCurrentVideoTime(t.$1.currentTime)},200);return t.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(t.$1,"timeupdate",function(){a()}),{remove:function(){a=function(){}}}),n}throw new(r("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:'Failed to addSourceBuffer("'+e+'"): No handleVttCaptionsUpdated callback provided',extra:{code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_ADD_SOURCE_BUFFER_ERROR.toString()}})})},t.createSourceBufferManager=function(e){var t=this;return r("oz-player/shims/OzMaybeNativePromise").all([this.$25(),this.$26(e)]).then(function(r){r[0],r=r[1];var n=new(i("oz-player/shims/OzSourceBufferManager").OzSourceBufferManager)(r,t.$11,t.$9,function(){return"closed"!==t.$2.readyState&&!0},function(){return t.$2.readyState},t.$5.cloneContext().setType(i("oz-player/utils/OzMimeUtil").getMimeType(e)));return t.$27(r,e),t.$7.set(e,n),n})["catch"](function(e){throw e instanceof r("oz-player/utils/OzError")?e:e=new(r("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:"Failed to create SBM: "+(e.message||String(e))+", support AAC-LC="+(MediaSource.isTypeSupported("audio/mp4; codecs=mp4a.40.2")?"true":"false")+", readyState="+t.$2.readyState,extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CREATE_ERROR.toString()}})})},t.getReadyState=function(){return this.$2.readyState},t.getMediaSource=function(){return this.$2},t.notifyEndOfStream=function(e,t){var i=this,n=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$3.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$2,"sourceended",function(){n.resolve()})),this.$8.push(function(r){if("open"===r.readyState){var n=i.$5.getOperationLogger("end_of_stream");n.setInitiator(e).setReason(t),n.log(),r.endOfStream()}}),this.$28(),n.getPromise()},t.updateDuration=function(e,t){var i=this,n=this.$2.duration;Number.isFinite(n)&&(!t||n>=e)||(this.$8.push(function(t){t.duration!==n&&(!isNaN(t.duration)||!isNaN(n))&&r("oz-player/shims/ozReportUnexpectedError")(new Error("mediaSource duration discrepancy"),t.duration+" != "+n,"warn"),e<t.duration||(i.$5.getOperationLogger("media_source_update_duration").setMediaSourcePreviousDuration(t.duration).setMediaSourceNewDuration(e).log(),t.duration=e)}),this.$28())},t.detach=function(){this.$18&&(r("oz-player/shims/ozClearTimeout")(this.$18),this.$18=null),this.$5.getOperationLogger("source_buffer_detach").unsetMediaSourceSourceBuffers(),this.$24(null);for(var e=0;e<this.$2.sourceBuffers.length;e++){var t=this.$2.sourceBuffers[e];this.$2.removeSourceBuffer(t)}this.$3.release(),this.$3.engage(),this.$4.release(),this.$4.engage(),this.$8=[],this.$10=!1,this.$12=!0},t.$31=function(){return!this.$30()&&"open"===this.$2.readyState&&!this.$10&&!this.$12},t.$30=function(){return this.$6.some(function(e){return e.getIsUpdating()})},t.onError=function(e){return this.$20.onError(e)},e}(),s["default"]=e},98),__d("oz-player/media_source/OzMediaSeekableRangeManager",["oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){var i=this;this.$5=function(e){void 0===e&&(e=!0);var t=i.$2;t&&(t=t.getTimeRanges()).length&&(t=t[t.length-1],i.$1.updateDuration(t.endTime,e))},this.$1=e,this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=t}var t=e.prototype;return t.setTimeRangeProvider=function(e){this.$3.release(),this.$3.engage(),this.$3.addSubscriptions(e.addUpdateListener(this.$5)),this.$2=e},t.listenToMediaStreamInitAppended=function(e){var t=this;return e.addListener("initAppended",function(){t.$5(!1)})},t.destroy=function(){this.$3.release()},e}(),s["default"]=e},98),__d("oz-player/networks/OzCreateErrorStream",["oz-player/shims/OzStreams"],function(e,t,r,i,n,a,s){"use strict";function e(e){return new(i("oz-player/shims/OzStreams").OzReadableStream)({pull:function(t){t.error(e)}})}s["default"]=e},98),__d("oz-player/shims/OzFetchAPI",[],function(e,t,r,i,n,a){"use strict";t=function(t,r){return e.fetch(t,r)},r=function(t,r){return new e.Response(t,r)},a.fetch=t,a.Response=r},66),__d("oz-player/networks/FetchWithTimeout",["oz-player/shims/OzFetchAPI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions"],function(e,t,r,i,n,a,s){"use strict";function t(t,n,a,s){if(!i("oz-player/shims/OzFetchAPI").fetch)throw new Error("fetch api is missing");var o=null;if("AbortController"in e&&null!=a&&0!=a){var u=new AbortController;o=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return u.abort()},a),a={credentials:n,signal:u.signal}}else a={credentials:n};return null!=s&&(a=babelHelpers["extends"]({},a,{referrer:s})),i("oz-player/shims/OzFetchAPI").fetch(t,a).then(function(e){return r("oz-player/shims/ozClearTimeout")(o),e})}s["default"]=t},98),__d("oz-player/networks/OzHTTPHeaders",["oz-player/shims/ozvariant"],function(e,t,r,i,n,a,s){"use strict";function t(e){if(null==e)return null;if("object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.get&&"function"==typeof e.has){if("function"==typeof e.entries)return e;if("function"==typeof e.forEach){var t=new o;return e.forEach(function(e,r){t.append(r,e)}),t}}return r("oz-player/shims/ozvariant")(!1,"Malformed Headers object: %s %s",typeof e,String(e)),null}i=function(){function e(){this.$1=new Map}var t=e.prototype;return t.append=function(e,t){e=e.toLowerCase();var r=this.$1.get(e);null!=r?this.$1.set(e,r+", "+t):this.$1.set(e,t)},t.get=function(e){return e=e.toLowerCase(),null!=(e=e=this.$1.get(e))?e:null},t.entries=function(){return this.$1.entries()},t.has=function(e){return null!==this.get(e)},e}(),a=(n=e.Headers)&&n.prototype;var o=n&&a&&"function"==typeof a.append&&"function"==typeof a.entries&&"function"==typeof a.get&&"function"==typeof a.has?n:i;s.OzHTTPHeaders=o,s.maybeConvertHeadersToOzHTTPHeaders=t},98),__d("oz-player/utils/arrayBuffer2OzReadableStream",["oz-player/shims/OzStreams"],function(e,t,r,i,n,a,s){"use strict";function e(e){return new(i("oz-player/shims/OzStreams").OzReadableStream)({start:function(t){var r=new Uint8Array(e);t.enqueue(r),t.close()}})}s["default"]=e},98),__d("oz-player/utils/maybeConvertReadableStreamToOzReadableStream",["asyncToGeneratorRuntime","oz-player/shims/OzStreams"],function(e,t,r,i,n,a,s){"use strict";function e(e){if(!i("oz-player/shims/OzStreams").OzReadableStreamIsPolyfilled)return e;var r=e.getReader();return new(i("oz-player/shims/OzStreams").OzReadableStream)({start:function(){function e(){return i.apply(this,arguments)}var i=t("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(;;){var t=yield r.read();if(t.done)break;e.enqueue(t.value)}e.close()});return e}()})}s["default"]=e},98),__d("oz-player/utils/processFetchResponse",["oz-player/networks/OzHTTPHeaders","oz-player/shims/OzMaybeNativePromise","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/maybeConvertReadableStreamToOzReadableStream"],function(e,t,r,i,n,a,s){"use strict";function e(e){var t=e.body,n=e.ok,a=e.status,s=e.headers;return null!=t?r("oz-player/shims/OzMaybeNativePromise").resolve({ok:n,status:a,headers:i("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(s),body:r("oz-player/utils/maybeConvertReadableStreamToOzReadableStream")(t),arrayBuffer:function(){return e.arrayBuffer()}}):e.arrayBuffer().then(function(e){return{ok:n,status:a,headers:i("oz-player/networks/OzHTTPHeaders").maybeConvertHeadersToOzHTTPHeaders(s),body:r("oz-player/utils/arrayBuffer2OzReadableStream")(e),arrayBuffer:function(){return r("oz-player/shims/OzMaybeNativePromise").resolve(e)}}})}s["default"]=e},98),__d("oz-player/networks/OzFetchRequestImplementation",["oz-player/networks/FetchWithTimeout","oz-player/utils/processFetchResponse"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,i,n,a){return a=i?i.networkTimeoutMs:null,r("oz-player/networks/FetchWithTimeout")(e,t.credentials,a).then(function(e){var t=e.ok,i=e.status,a=e.headers;return null==n||t||"function"!=typeof e.text?r("oz-player/utils/processFetchResponse")(e):e.text().then(function(r){return{ok:t,status:i,headers:a,body:r,arrayBuffer:function(){return e.arrayBuffer()}}})})}i=e,s["default"]=i},98),__d("oz-player/networks/withRetries",["Promise","asyncToGeneratorRuntime","oz-player/shims/ozSetTimeoutAcrossTransitions"],function(e,t,r,i,n,a,s){"use strict";function e(e,i,n){return new(t("Promise"))(function(a,s){function o(){return u.apply(this,arguments)}function u(){return(u=t("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{a(yield e())}catch(e){if(t>0){var u="function"==typeof n?n(i-t):n;r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){o(t-1)},u)}else s(e)}})).apply(this,arguments)}o(i)})}s["default"]=e},98),__d("oz-player/networks/OzFetchWithCache",["oz-player/networks/OzFetchRequestImplementation","oz-player/networks/withRetries","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzError","oz-player/utils/arrayBuffer2OzReadableStream","oz-player/utils/processFetchResponse"],function(e,t,r,i,n,a,s){"use strict";function e(e){var t,i,n=e.config,a=e.url,s=e.http,o=e.overrideOzRequestImplementation,u=e.options,l=e.prefetchCache,h=e.mediaStreamType,d=e.onPerfEntryAvailable,c=e.dataAppendedCallback,p=e.dataAppendedErrorCallback,f=null!=o?function(){return o.apply(void 0,arguments)}:r("oz-player/networks/OzFetchRequestImplementation");(l=e=l?l.getCacheValue(a):null,e=!1,l)?(e=!0,l=l.then(function(e){if("FETCH"===e.initiator){var t=e.response,i=t.ok,n=t.status,a=t.headers;return i||"function"!=typeof e.response.text?r("oz-player/utils/processFetchResponse")(e.response):e.response.text().then(function(t){return{ok:!1,status:n,headers:a,body:t,arrayBuffer:function(){return e.response.arrayBuffer()}}})}if("XHR_REQUEST"===e.initiator)return{body:t=r("oz-player/utils/arrayBuffer2OzReadableStream")(e.response),status:200,headers:null,ok:!0,arrayBuffer:function(){return r("oz-player/shims/OzMaybeNativePromise").resolve(e.response)}};throw new(r("oz-player/utils/OzError"))({type:"OZ_UNEXPECTED_CACHE_INITIATOR",description:"Unable to handle request initiator: "+e.initiator})})["catch"](function(){return f(a,s,null,null,h,d,c,p)})):(t=null!=(t=null==u?void 0:u.retryAttempts_SIDX_USE_ONLY)?t:0)>0?(i=null!=(i=null==u?void 0:u.retryTimeoutMs_SIDX_USE_ONLY)?i:100,l=r("oz-player/networks/withRetries")(function(){return f(a,s,u,n,h,d,c,p)},t,i)):l=f(a,s,u,n,h,d,c,p);return{promise:l,retrievedFromCache:e}}s["default"]=e},98),__d("oz-player/networks/createNetworkError",["oz-player/utils/OzError"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,i,n,a){return new(r("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:a,extra:{originalError:e,code:t.toString(),headers:i,url:n}})}s["default"]=e},98),
__d("oz-player/networks/OzNetworkRequestStream",["oz-player/networks/OzCreateErrorStream","oz-player/networks/OzFetchWithCache","oz-player/networks/createNetworkError","oz-player/shims/ozvariant","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzResourceTimingUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$7=!1;var t=e.config,r=e.baseUri,i=e.baseUriDecisionTime,n=e.options,a=e.requestParamCreator,s=e.networkRequestStreamHandlers,o=e.overrideOzRequestImplementation,u=e.prefetchCache,l=e.networkRequestStreamRetryHandler,h=e.dynamicVideoLibrary,d=e.mediaStreamType,c=e.dataAppendedCallback;e=e.dataAppendedErrorCallback,this.$1=r,this.$2=n,this.$3=a,this.$9=null!=(r=s)?r:[],this.$10=l,this.$8=o,this.$11=u,this.$12=t,this.$13=h,this.$14=i,this.$15=d,this.$16=c,this.$17=e}var t=e.prototype;return t.$18=function(e){var t=this,i=(e=this.$3.createRequestParam(this.$1,e)).uri;e=e.http,i=i.toString(),this.$4=i;var n=(e=r("oz-player/networks/OzFetchWithCache")({config:this.$12,url:i,http:e,overrideOzRequestImplementation:this.$8,options:this.$2,prefetchCache:this.$11,mediaStreamType:this.$15,onPerfEntryAvailable:function(e){t.$19(e)},dataAppendedCallback:this.$16,dataAppendedErrorCallback:this.$17})).promise;return e=e.retrievedFromCache,this.$7=e,{requestPromise:n,requestUrl:i}},t.startStream=function(e){var t=this,i=this.$18(e),n=i.requestPromise,a=i.requestUrl,s=a,o=Date.now();return n.then(function(i){var n;return null==(n=t.$13)||n.updateWithResponse(a,o,t.$14,i),t.$6=i,null!=t.$10&&!1===i.ok?t.$10(i,function(){var r=t.$18(e),i=r.requestPromise;return r=r.requestUrl,s=r,i},s)["catch"](function(e){throw new(r("oz-player/utils/OzError"))({type:"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR",description:e.message,extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR,url:s}})}):i}).then(function(e){for(var i=[],n=0;n<t.$9.length;n++)try{var a=t.$9[n].onResponse(e,s);a&&i.push(a)}catch(e){return r("oz-player/networks/OzCreateErrorStream")(e)}a=e.body,n=e.headers;var o=e.ok;if(e=e.status,!o)return r("oz-player/networks/OzCreateErrorStream")(r("oz-player/networks/createNetworkError")(new Error("HTTP status not OK"),e,n,s,"string"==typeof a&&a.length>0?a:"HTTP error."));for("string"!=typeof a&&"function"==typeof a.getReader||r("oz-player/shims/ozvariant")(0,3287),o=a,e=0;e<i.length;e++)o=o.pipeThrough(i[e]);return o},function(e){for(var i=[],n=0;n<t.$9.length;n++)try{var a=t.$9[n].onError(e,s);a&&i.push(a)}catch(e){return r("oz-player/networks/OzCreateErrorStream")(e)}if(e instanceof TypeError){for(a=e.message?e.message:e.stack?String(e.stack):"null",n=r("oz-player/networks/OzCreateErrorStream")(r("oz-player/networks/createNetworkError")(e,0,null,s,"Network failure: "+a)),a=0;a<i.length;a++)n=n.pipeThrough(i[a]);return n}throw e})["catch"](function(e){if(e instanceof r("oz-player/utils/OzError")&&"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"===e.getType())throw e;if("AbortError"===e.name){var i=t.$12.getBool("fix_dom_exception_as_message")?e.message:e;return r("oz-player/networks/OzCreateErrorStream")({type:e.name,status:e.code,url:s,message:i})}return r("oz-player/networks/OzCreateErrorStream")({type:"stream_processing",status:0,url:s,message:"Stream processing error. "+e})})},t.$19=function(e){this.$5=e},t.getLastPerformanceEntry=function(){return null!=this.$5?this.$5:null==this.$4?null:i("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(this.$4)},t.getLastRequestUrl=function(){return this.$4},t.getLastResponse=function(){return this.$6},t.retrievedFromCache=function(){return this.$7},e}(),s["default"]=e},98),__d("oz-player/manifests/OzByteRange",[],function(e,t,r,i,n,a){"use strict";function e(e,t){return e.startByte===t.startByte}function t(e,t){return null!==t.endByte&&e.startByte===t.endByte+1}function r(e,t){return!(e.startByte<t.startByte)&&(null==t.endByte||t.endByte>=e.startByte)}function i(e,t){if(e=e,(t=t).startByte<e.startByte){var r=e;e=t,t=r}return null==e.endByte?{startByte:e.startByte,endByte:null}:t.startByte>e.endByte+1?null:(r=null==t.endByte||t.endByte>e.endByte?t.endByte:e.endByte,{startByte:e.startByte,endByte:r})}function n(e,t){return null==t.endByte?null:e.startByte>t.endByte?{startByte:e.startByte,endByte:e.endByte}:null!=e.endByte&&e.endByte<=t.endByte?null:{startByte:t.endByte+1,endByte:e.endByte}}function s(e){return null==e.endByte?null:e.endByte-e.startByte+1}a.startsAtSame=e,a.startsImmediateAfter=t,a.startsDuring=r,a.union=i,a.disjoinAfter=n,a.getLength=s},66),__d("oz-player/networks/OzProducerInterruptedError",[],function(e,t,r,i,n,a){"use strict";e=function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t}(babelHelpers.wrapNativeSuper(Error)),a["default"]=e},66),__d("oz-player/networks/OzDeferredBuffer",["oz-player/networks/OzProducerInterruptedError","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){void 0===e&&(e={}),this.$2=[],this.$3=!1,this.$5=0,e=(e=e).disableArrayShift,this.$1=!!e}var t=e.prototype;return t.produce=function(e){this.$6(e)},t.signalProducerInterruption=function(){this.$6(new(r("oz-player/networks/OzProducerInterruptedError"))("producer interrupted"))},t.consume=function(e){var t=this;if(this.$3)throw new Error("A buffer can only be consumed by one client at a time");this.$3=!0;var i=r("oz-player/shims/OzMaybeNativePromise").resolve();return this.isEmpty()&&(this.$4=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),i=this.$4.getPromise()),i.then(function(){if(t.$1){if(void 0===t.$2[t.$5])throw new Error("buffer has no value at position "+t.$5)}else if(0===t.$2.length)throw new Error("buffer length must not be 0");t.$4=null,t.$3=!1;var r=t.$1?t.$7(e):t.$8(e);if(r instanceof Uint8Array)return r;throw r})},t.$6=function(e){this.$2.push(e),this.$4&&this.$4.resolve()},t.$7=function(e){var t=this.$2[this.$5];if(void 0===t)return new Uint8Array([]);if(!((t=t)instanceof Uint8Array))return this.$2[this.$5]=void 0,this.$5++,t;if(void 0!==e&&t.length>e){var r=t.slice(e);t=t.slice(0,e),this.$2[this.$5]=r}else this.$2[this.$5]=void 0,this.$5++;return t},t.$8=function(e){if(0===this.$2.length)return new Uint8Array([]);var t=this.$2[0];if(!(t instanceof Uint8Array))return this.$2.shift(),t;if(void 0!==e&&t.length>e){var r=t.slice(e);t=t.slice(0,e),this.$2[0]=r}else this.$2.shift();return t},t.isEmpty=function(){return this.$1?void 0===this.$2[this.$5]:0===this.$2.length},e}(),s["default"]=e},98),__d("oz-player/utils/ozPipeErrorTo",[],function(e,t,r,i,n,a){"use strict";function e(e,t){try{null==e||e.error(t)}catch(e){}}a["default"]=e},66),__d("oz-player/networks/OzPausableRangeStream",["oz-player/manifests/OzByteRange","oz-player/networks/OzDeferredBuffer","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/ozPipeErrorTo"],function(e,t,r,i,n,a,s){"use strict";function o(){return new Error("Upstream has an inconsistent range")}var u=function(){function e(){this.$1=0}var t=e.prototype;return t.setBytesToSkip=function(e){this.$1=e},t.setBytesSkipped=function(e){this.$1-=e},t.getBytesToSkip=function(){return this.$1},t.hasMoreBytesToSkip=function(){return this.$1>0},e}();(e=function(){function e(t,i,n,a,s){var l=this;this.$5=!1,this.$7=0,this.$8=0,this.$13=!1,this.$14=new u,this.$15=!1,this.$16=!1,this.$17=!1,this.startStream=function(){l.$13=!0;var t={startByte:l.$1.startByte,endByte:l.$1.endByte};l.$15?l.$8&&(l.$3.produce("skip_buffered_bytes"),l.$8=0):t.startByte+=l.$8;var i=l.$4;return l.$2.startStream(t).then(function(t){return t.pipeTo(l.$16?i:l.$4).then(function(){l.$12&&l.$12.resolve("stream_done")})["catch"](function(t){l.$12&&!l.$12.isSettled()&&(l.$16&&t===e.STREAM_PAUSED?l.$12.resolve("stream_paused"):l.$12.reject(t))}),l.$12=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),{statusPromise:l.$12.getPromise()}})},this.$18=t,this.$19=i,this.$1=n,this.$2=a,i=(t=s||{}).fixStreamingUndefinedEndByte,n=t.disableDeferredBufferArrayShift,a=t.enablePausableStreamResumeFromStartDangerously,s=t.fixPausePreReadableStream,t=t.throwErrorWhenAborted,this.$11=!!i,this.$15=!!a,this.$16=!!s,this.$17=!!t,this.$3=new(r("oz-player/networks/OzDeferredBuffer"))({disableArrayShift:!!n}),this.$6=new this.$18({start:function(e){l.$10=e},pull:function(e){return(l.$11&&null===l.$1.endByte&&l.$5||l.$7===l.$20())&&l.$3.isEmpty()?(e.close(),r("oz-player/shims/OzMaybeNativePromise").resolve()):function t(){var i=l.$14.hasMoreBytesToSkip()?l.$14.getBytesToSkip():void 0;return l.$3.consume(i).then(function(i){if(l.$14.hasMoreBytesToSkip())return l.$14.setBytesSkipped(i.length),t();l.$7+=i.length;var n=l.$20();null!==n&&l.$7>(n||0)&&r("oz-player/utils/ozPipeErrorTo")(l.$10,o()),e.enqueue(i)})["catch"](function(e){if("skip_buffered_bytes"===e)return l.$14.setBytesToSkip(l.$7),t();throw e})}()},cancel:function(e){l.$12&&l.$12.resolve("stream_cancelled"),r("oz-player/utils/ozPipeErrorTo")(l.$9,e)}}),this.$4=this.$21()}var t=e.prototype;return t.$20=function(){var e=this.$1,t=e.startByte;return null!=(e=e.endByte)?e-t+1:null},t.$21=function(){var e=this;return new this.$19({start:function(t){e.$9=t},write:function(t){e.$3.produce(t),e.$8+=t.length},close:function(){e.$5=!0;var t=e.$1,i=t.endByte;t=t.startByte,e.$11&&null===i&&e.$3.produce(new Uint8Array([])),null!==i&&e.$8!==(i||0)-t+1&&r("oz-player/utils/ozPipeErrorTo")(e.$10,o())},abort:function(t){e.$12&&(e.$17?e.$12.reject(t):e.$12.resolve("stream_aborted")),r("oz-player/utils/ozPipeErrorTo")(e.$10,t)}})},t.getStream=function(){return this.$6},t.pauseStream=function(){r("oz-player/utils/ozPipeErrorTo")(this.$9,e.STREAM_PAUSED),this.$12&&this.$12.resolve("stream_paused"),this.$4=this.$21()},t.getByteRange=function(){return this.$1},t.getBytesStreamed=function(){return this.$7},t.tryConcatByteRange=function(e){return!(this.$13||!i("oz-player/manifests/OzByteRange").startsImmediateAfter(e,this.$1))&&(this.$1={startByte:this.$1.startByte,endByte:e.endByte},!0)},e}()).STREAM_PAUSED="streamPaused",s["default"]=e},98),__d("oz-player/networks/RequestParamCreator",["oz-player/shims/OzURI"],function(e,t,r,i,n,a,s){"use strict";e=function(e,t){var i=this;this.createRequestParam=function(e,t){var n=new(r("oz-player/shims/OzURI"))(e.toString());if(t){e=t.startByte;var a=t.endByte;0===e&&null==a||(n.addQueryData({bytestart:t.startByte}),null!=a&&n.addQueryData({byteend:a}))}if(i.$2){var s=i.$2(n);s&&Object.keys(s).forEach(function(e){var t=s[e];n.addQueryData(e,t)})}return e=i.$1&&i.$1(n)?"include":"same-origin",{uri:n,http:{credentials:e}}},this.$1=e,this.$2=t},s["default"]=e},98),__d("oz-player/networks/getOzSegmentStreamableRange",[],function(e,t,r,i,n,a){"use strict";function e(e){if(!e.length)return null;var t=e[0].getURI().toString(),r=e[0].getByteRange();if(!r)return null;for(var i=r,n=1;n<e.length;n++){var a=e[n];if(a.getURI().toString()!==t)return null;if(a=a.getByteRange(),!i||!a)return null;if(null===i.endByte||a.startByte!==i.endByte+1)return null;i=a}return{startByte:r.startByte,endByte:i.endByte}}a["default"]=e},66),__d("oz-player/utils/OzNetworkRequestLoggingUtils",["oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzResourceTimingUtils"],function(e,t,r,i,n,a,s){"use strict";var o=function(e){return e?parseInt(e.get("content-length"),10):null},u=function(e){return e?e.get("x-fb-fna-hit"):null},l=function(e){return e?e.get("x-fb-edge-hit"):null},h=function(e){return e?e.get("x-fb-origin-hit"):null},d=function(e){return e?parseInt(e.get("x-fb-dynamic-latest-segment-id"),10):null},c=function(e,t){(t=i("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(t))&&e.setTimeToFirstByte(Math.round(t.responseStart-t.startTime)).setTimeToLastByte(Math.round(t.responseEnd-t.startTime)).setTimeToRequestStart(Math.round(t.requestStart-t.startTime))};e=function(e,t,i,n,a,s,p){n.length&&e.setSegmentCount(n.length),null!=t&&""!==t&&c(e,t),e.setResource(null!=t&&""!==t?t:null).setInitiator(i?"prefetch":"fetch").setTimeToRequestSent(Math.round(Math.floor(a))).setLiveheadSeqNumHeader(d(null==p?void 0:p.headers)).setContentLengthHeader(o(null==p?void 0:p.headers)).setEdgeHitHeader(l(null==p?void 0:p.headers)).setOriginHitHeader(h(null==p?void 0:p.headers)).setFNAHitHeader(u(null==p?void 0:p.headers)).setResponseTimeMsHeader(r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(null==p?void 0:p.headers)).setUserInfo({segmentPTSHeader:String(r("oz-player/shims/OzNetworkDiagnostics").getDvlSegmentPTS(null==p?void 0:p.headers))}).setCode(null==p?void 0:p.status).setLength(s)},t=function(e,t,i,n,a,s,u){null!=t&&""!==t&&c(e,t),e.setResource(null!=t&&""!==t?t:null).setLiveheadSeqNumHeader(d(null==n?void 0:n.headers)).setContentLengthHeader(o(null==n?void 0:n.headers)).setEdgeHitHeader(l(null==n?void 0:n.headers)).setOriginHitHeader(h(null==n?void 0:n.headers)).setResponseTimeMsHeader(r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(null==n?void 0:n.headers)).setCode(null==n?void 0:n.status).setLength(i).setClientTimeBegin(a).setClientTimeDuration(s-a).setClientTimeEnd(s).setUserInfo(null!=u&&u>0?{chunkSize:String(u)}:null)},s.setPerformanceLoggingAttributes=c,s.setFetchStreamLoggingAttributes=e,s.setBandwidthSampledLoggingAttributes=t},98),__d("oz-player/networks/OzNetworkManager",["oz-player/loggings/OzLoggingUtils","oz-player/networks/OzNetworkRequestStream","oz-player/networks/OzPausableRangeStream","oz-player/networks/RequestParamCreator","oz-player/networks/getOzSegmentStreamableRange","oz-player/shims/OzStreams","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNetworkRequestLoggingUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$9=null;var t=e.config,i=e.prefetchCache,n=e.networkRequestStreamHandlers,a=e.getOverrideOzRequestImplementation,s=e.getShouldIncludeCredentials,o=e.getCustomRequestParametersForURI,u=e.networkRequestStreamRetryHandler,l=e.setCustomFetchStreamLoggingAttributes,h=e.dynamicVideoLibrary,d=e.configureCustomRequestParametersForSegment;e=e.onResourceTimingBufferFull,this.$2=t,this.$7=s,this.$8=o,this.$1=new(r("oz-player/networks/RequestParamCreator"))(this.$7,this.$8),this.$3=i,this.$4=n,this.$5=u,this.$6=a,this.$9=l,this.$10=h,this.$11=d,this.$12=e}var t=e.prototype;return t.destroy=function(){},t.request=function(e,t,i,n,a,s,o){void 0===i&&(i=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null),e.length>0||r("oz-player/shims/ozvariant")(0,212);var u=r("oz-player/networks/getOzSegmentStreamableRange")(e)||{startByte:0,endByte:null},l=this.$6?this.$6():null,h=this.$13(e[0]);return h=new(r("oz-player/networks/OzNetworkRequestStream"))({config:this.$2,baseUri:h,baseUriDecisionTime:null,options:n,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:l,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,mediaStreamType:a,dataAppendedCallback:s,dataAppendedErrorCallback:o}),this.$14(u,h,t,i,e)},t.createPausableStream=function(e,t,i,n,a,s){void 0===a&&(a=null),void 0===s&&(s=null),e.length>0||r("oz-player/shims/ozvariant")(0,212);var o=r("oz-player/networks/getOzSegmentStreamableRange")(e)||{startByte:0,endByte:null},u=null,l=this.$2.getNumber("network_seg_timeout_ms");l>0&&(u={networkTimeoutMs:l}),l=this.$6?this.$6():null;var h=new(r("oz-player/networks/OzNetworkRequestStream"))({config:this.$2,baseUri:this.$13(e[0]),baseUriDecisionTime:e[0].getOptions().getSegmentNumDecisionTime(),options:u,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:l,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$10,mediaStreamType:n,dataAppendedCallback:a,dataAppendedErrorCallback:s});return{pausableStream:this.$15(o,h,t||null,i),loggingPayloads:{getRequestUrl:function(){return h.getLastRequestUrl()||null},isPrefetch:function(){return h.retrievedFromCache()},segments:e,getResponse:function(){return h.getLastResponse()}}}},t.requestRawUrl=function(e,t,i){void 0===i&&(i=null);var n=this.$6?this.$6():null;return e=new(r("oz-player/networks/OzNetworkRequestStream"))({config:this.$2,baseUri:new(r("oz-player/shims/OzURI"))(e),baseUriDecisionTime:null,options:t,requestParamCreator:this.$1,networkRequestStreamHandlers:this.$4,overrideOzRequestImplementation:n,prefetchCache:this.$3,networkRequestStreamRetryHandler:this.$5,dynamicVideoLibrary:this.$10,mediaStreamType:null,dataAppendedCallback:null,dataAppendedErrorCallback:null}),t={startByte:0,endByte:null},this.$14(t,e,[],i)},t.$15=function(e,t,n,a){if(t=t,null!=n)for(var s=0;s<n.length;s++){t=(0,n[s])(this.$2,t,a,this.$12)}return new(r("oz-player/networks/OzPausableRangeStream"))(i("oz-player/shims/OzStreams").OzReadableStream,i("oz-player/shims/OzStreams").OzWritableStream,e,t,{fixStreamingUndefinedEndByte:!0,enablePausableStreamResumeFromStartDangerously:!0,fixPausePreReadableStream:!0,throwErrorWhenAborted:!0})},t.$14=function(e,t,r,n,a){var s=this;void 0===a&&(a=[]);var o=this.$15(e,t,r,n);e=o.startStream();var u=this.$16(e);return n&&i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(u,n,"fetch_stream",function(){},function(e){i("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(e,t.getLastRequestUrl(),t.retrievedFromCache(),a,0,o.getBytesStreamed(),t.getLastResponse());var r=s.$9;r&&r(e,t.getLastRequestUrl(),t.getLastResponse())}),{getStream:function(){return o.getStream()},cancel:function(){return o.pauseStream()},getStatusChangePromise:function(){return u}}},t.$16=function(e){return e.then(function(e){return(e=e.statusPromise).then(function(){return"done"})})},t.$13=function(e){var t=this.$11,i=new(r("oz-player/shims/OzURI"))(e.getURI().toString());if(t){var n=t(e);n&&Object.keys(n).forEach(function(e){var t=n[e];i.addQueryData(e,t)})}return i},e.getStreamableSegmentsRange=function(e){return e.length?r("oz-player/networks/getOzSegmentStreamableRange")(e)?e.slice(0):[e[0]]:[]},e}(),s["default"]=e},98),__d("oz-player/manifests/Mpd",["oz-player/shims/OzEventEmitter"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u){var l;return(l=e.call(this)||this).$Mpd9=!1,l.$Mpd1=t,l.$Mpd5=s,l.$Mpd2=r,l.$Mpd3=i,l.$Mpd4=n,l.$Mpd6=a,l.$Mpd7=o,l.$Mpd8=u,l}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.markRefreshed=function(){this.$Mpd10=Date.now()},r.getRefreshDate=function(){return this.$Mpd10},r.updateLocation=function(e){this.$Mpd6=e,this.$Mpd9=!0,this.emit("locationUpdated")},r.getLocation=function(){return this.$Mpd6},r.getMinimumUpdatePeriod=function(){return this.$Mpd5},r.getVideoRepresentations=function(){return this.$Mpd2},r.getAudioRepresentations=function(){return this.$Mpd3},r.getApplicationRepresentations=function(){return this.$Mpd4},r.getCustomField=function(e){var t=this.$Mpd7.get(e);if(!t)throw new Error("Custom parser not specified for field "+e);try{return t(this.$Mpd1)}catch(e){return null}},r.isStaticMpd=function(){return this.$Mpd8},r.updateWith=function(e){this.$Mpd9&&(this.$Mpd9=!1,this.$Mpd2.splice(0,this.$Mpd2.length),this.$Mpd3.splice(0,this.$Mpd3.length),this.$Mpd4.splice(0,this.$Mpd4.length)),this.$Mpd1=e.$Mpd1,this.$Mpd11(this.$Mpd2,e.getVideoRepresentations()),this.$Mpd11(this.$Mpd3,e.getAudioRepresentations()),this.$Mpd11(this.$Mpd4,e.getApplicationRepresentations()),this.$Mpd8=e.isStaticMpd(),this.$Mpd5=e.getMinimumUpdatePeriod(),this.emit("updated")},r.blockTimeRange=function(e){this.$Mpd2.forEach(function(t){return t.blockTimeRange(e)}),this.$Mpd3.forEach(function(t){return t.blockTimeRange(e)}),this.$Mpd4.forEach(function(t){return t.blockTimeRange(e)})},r.unblockTimeRange=function(){this.blockTimeRange({startTime:0,endTime:0})},r.$Mpd11=function(e,t){for(var r=0;r<t.length;r++){for(var i=t[r],n=!1,a=0;a<e.length;a++){var s=e[a];if(i.getID()===s.getID()){s.updateWith(i),n=!0;break}}n||e.push(i)}},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/manifests/OzApplicationRepresentation",["oz-player/manifests/OzRepresentationBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t}(r("oz-player/manifests/OzRepresentationBase")),s["default"]=e},98),__d("oz-player/parsers/OzSegmentTemplateParser",["oz-player/manifests/OzSegmentOptions","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],function(e,t,r,i,n,a,s){"use strict";var o=function(){function e(e,t){this.$3=new(r("oz-player/manifests/OzSegmentOptions")),this.$2=e,this.$1=t}var t=e.prototype;return t.getData=function(){return this.$1},t.getTimeRange=function(){return{startTime:0,endTime:0}},t.getByteRange=function(){return null},t.getURI=function(){return this.$2},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$3},e}();e=function(){function e(e,t,i,n,a){this.$2=i,this.$1=t,this.$3=e,this.$4=n||new(r("oz-player/parsers/OzDefaultSegmentTimelineParser")),this.$5=a}var t=e.prototype;return t.parseInitializationSegment=function(){var e=i("oz-player/utils/OzUrlHelper").joinUrlPaths(this.$2.baseUrl,this.$1.$.initialization);return new o(new(r("oz-player/shims/OzURI"))(e),this.$5)},t.parseSegmentsContainer=function(){return this.$4.parseSegmentsContainer(this.$3,this.$2,this.$1)},e}(),s["default"]=e},98),__d("oz-player/manifests/OzZeroTimeRangeSegment",["oz-player/manifests/OzSegmentOptions"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i){this.$4=new(r("oz-player/manifests/OzSegmentOptions")),this.$1=e,this.$2=t,this.$3=i}var t=e.prototype;return t.getData=function(){return null},t.getURI=function(){return this.$1},t.getTimeRange=function(){return{startTime:0,endTime:0}},t.getByteRange=function(){return{startByte:this.$2,endByte:this.$3}},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$4},e}(),s["default"]=e},98),__d("oz-player/networks/OzNetworkRequestStreamBandwidthReporter",["oz-player/networks/OzTransformStream","oz-player/shims/OzNetworkDiagnostics","oz-player/utils/OzNetworkRequestLoggingUtils"],function(e,t,r,i,n,a,s){"use strict";t=function(){function t(t){var i=this;this.$8=Date.now(),this.$9=Date.now(),this.$10=0,this.$11=0,this.$12=function(){},this.$13=function(){},this.$14=function(){},this.$16=new(r("oz-player/networks/OzTransformStream")),this.$19=!1,this.$20=!1,this.$21=null,this.$22=function(e){i.$25(),null!=e.length&&(i.$11+=e.length),i.$26(),i.$18||i.$27()},this.$23=function(){if(!(null!=i.$21&&i.$21>0)){var t=Date.now()-i.$8,r=i.$1.getLastPerformanceEntry();r&&i.$13(r.responseStart-r.requestStart,r.responseEnd-r.requestStart,i.$11),!r&&e.__isresourcetimingbufferfull&&i.$15&&i.$15(),i.$3>0&&t>0&&0===i.$10&&i.$11>=i.$3&&i.$28(i.$11,t)}};var n=t.stream,a=t.loggerProvider,s=t.byteCountPerSample,o=t.minimumBytesToSampleOnClose,u=t.minimumSampleDuration,l=t.maximumSampleBandwidth,h=t.useResponseTimeMs,d=t.responseTimeHandicapMs,c=t.ignoreOnStreamWriteSamples;t=t.onResourceTimingBufferFull,this.$1=n,this.$17=a,this.$2=s,this.$3=o,this.$4=u,this.$5=l,this.$6=h,this.$7=d,this.$18=c,this.$16.addListener("writableWrite",this.$22),this.$16.addListener("writableClose",this.$23),this.$15=t}var n=t.prototype;return n.getTransformStream=function(){return this.$16},n.onBandwidthSample=function(e){this.$12=e},n.onNavigationTimingSample=function(e){this.$13=e},n.onEstimateFromHeaders=function(e){this.$14=e},n.$24=function(e,t,r){if(t-=r,r=this.$17?this.$17.getOperationLogger("bandwidth_sampled"):null){var n=Date.now(),a=n-t;i("oz-player/utils/OzNetworkRequestLoggingUtils").setBandwidthSampledLoggingAttributes(r,this.$1.getLastRequestUrl(),e,this.$1.getLastResponse(),a,n,this.$21),r.log()}this.$12(e,t)},n.$29=function(e,t,r){return t-r<=0||(r=8*e/(t/1e3),t<this.$4&&r>this.$5)},n.$28=function(e,t){var i=this.$1.getLastResponse();i=this.$6&&r("oz-player/shims/OzNetworkDiagnostics").getResponseTimeMs(null==i?void 0:i.headers)||0,this.$29(e,t,i)||this.$24(e,t,Math.max(i-this.$7,0))},n.$25=function(){var e;e=null==(e=this.$1.getLastResponse())?void 0:e.headers,this.$20||null==e||(this.$20=!0,null!=(e=r("oz-player/shims/OzNetworkDiagnostics").getBandwidthMeanEstimate(e))&&this.$14(e))},n.$26=function(){if(!this.$19){if(null==this.$21){var e=this.$1.getLastResponse();this.$21=r("oz-player/shims/OzNetworkDiagnostics").getUsableResponseSizeForBandwidthEstimation(null==e?void 0:e.headers)||0}null!=this.$21&&this.$21>0&&this.$11>=this.$21&&(this.$19=!0,this.$28(this.$11,Date.now()-this.$9))}},n.$27=function(){var e=Date.now(),t=e-this.$8;this.$2>0&&this.$11>=this.$10+this.$2&&!this.$29(this.$11,t,0)&&(this.$24(this.$11-this.$10,t,0),this.$8=e,this.$10=this.$11)},t}(),s["default"]=t},98),__d("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator",["oz-player/networks/OzNetworkRequestStreamBandwidthReporter"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,i,n,a){return{startStream:function(s){var u=new(r("oz-player/networks/OzNetworkRequestStreamBandwidthReporter"))({stream:t,loggerProvider:i,byteCountPerSample:e.getNumber("byte_count_per_sample",o),minimumBytesToSampleOnClose:e.getNumber("minimum_bytes_to_sample_on_close",25e3),minimumSampleDuration:e.getNumber("minimum_bandwidth_sample_duration",10),maximumSampleBandwidth:e.getNumber("maximum_bandwidth_sample_bandwidth",1e8),useResponseTimeMs:e.getBool("bandwidth_use_response_time_adjustment",!1),responseTimeHandicapMs:e.getNumber("bandwidth_response_time_handicap",0),ignoreOnStreamWriteSamples:e.getBool("bandwidth_ignore_on_stream_write_samples",!1),onResourceTimingBufferFull:a});return u.onBandwidthSample(function(e,t){n.addBandwidthSample(e,t)}),u.onNavigationTimingSample(function(t,r,i){var a=e.getNumber("time_to_first_byte_ignore_above_threshold_ms",0);(0===a||t<=a)&&n.addNavigationTimingSample(t,r,i)}),u.onEstimateFromHeaders(function(e){n.setBandwidthEstimateFromHeaders({meanEstimate:e})}),t.startStream(s).then(function(e){return t.retrievedFromCache()?e:e.pipeThrough(u.getTransformStream())})}}}var o=2e5;s.pipeStreamThroughBandwidthEstimator=e},98),__d("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter",["oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzNetworkRequestStream","oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator"],function(e,t,r,i,n,a,s){"use strict";function e(e){return function(t,n,a,s){var o="video"===e;return n instanceof r("oz-player/networks/OzNetworkRequestStream")&&o?i("oz-player/networks/bandwidth/pipeStreamThroughBandwidthEstimator").pipeStreamThroughBandwidthEstimator(t.getLegacyConfig(),n,a,r("oz-player/networks/OzBandwidthEstimator"),s):n}}s["default"]=e},98),__d("oz-player/manifests/OzDataSegment",["oz-player/manifests/OzSegmentOptions"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n,a){this.$6=new(r("oz-player/manifests/OzSegmentOptions")),this.$1=e,this.$2=t,this.$3=i,this.$4=n,this.$5=a}var t=e.prototype;return t.getData=function(){return null},t.getURI=function(){return this.$1},t.getTimeRange=function(){return{startTime:this.$2,endTime:this.$3}},t.getByteRange=function(){return{startByte:this.$4,endByte:this.$5}},t.getSequenceNumber=function(){return null},t.getOptions=function(){return this.$6},e}(),s["default"]=e},98),__d("oz-player/shims/www/OzDataViewReaderWWW",["DataViewReader"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("DataViewReader")},98),__d("oz-player/shims/OzDataViewReader",["oz-player/shims/www/OzDataViewReaderWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/OzDataViewReaderWWW")},98),__d("oz-player/parsers/OzMp4SidxParser",["oz-player/manifests/OzDataSegment","oz-player/manifests/OzSegmentOptions","oz-player/shims/OzDataViewReader"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,i,n){var a=new(r("oz-player/shims/OzDataViewReader"))(new DataView(n.buffer));n=a.readUint32();var s=a.readUint32();if(s!==o)throw new Error('Invalid box type, expected "sidx".');1==n&&(n=a.readUint64()),s=a.readUint8(),a.skip(3),a.skip(4);var u,l=a.readUint32();if(!l)throw new Error("Invalid timescale.");0==s?(s=a.readUint32(),u=a.readUint32()):(s=a.readUint64(),u=a.readUint64()),a.skip(2);var h=a.readUint16(),d=s,c=i+n+u,p=0,f=e.getBool("sidx_parser_memory_optimization"),g=[];for(s=function(e){var i=a.readUint32(),n=(2147483648&i)>>>31;i&=2147483647;var s=a.readUint32();if(a.readUint32(),1==n)throw new Error("Heirarchical SIDXs are not supported.");var o=d/l,u=(d+s)/l;0===e&&(p=o);var h=c,m=h+i-1,$=new(r("oz-player/manifests/OzSegmentOptions"));g.push(f?new(r("oz-player/manifests/OzDataSegment"))(t,o-p,u-p,h,m):{getData:function(){return null},getURI:function(){return t},getTimeRange:function(){return{startTime:o-p,endTime:u-p}},getByteRange:function(){return{startByte:h,endByte:m}},getSequenceNumber:function(){return null},getOptions:function(){return $}}),d+=s,c+=i},i=0;i<h;i++)s(i);return g}var o=1936286840;s.parse=e},98),__d("oz-player/parsers/OzSidxSegmentsContainer",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.getSegmentByTime=function(e){for(var t=this.$1(),r=0;r<t.length;r++){var i=t[r],n=i.getTimeRange();if(n.startTime<=e&&n.endTime>e)return i}return null},t.getSegmentAfter=function(e){var t=this.$1(),r=t.findIndex(function(t){return t.getTimeRange().startTime===e.getTimeRange().startTime&&t.getTimeRange().endTime===e.getTimeRange().endTime});return r>=0&&r+1<t.length?t[r+1]:null},t.getPredictedSegmentAfter=function(){return null},t.canPredict=function(){return!1},t.canApproximateId=function(){return!1},t.isEndingSegment=function(e){var t=this.$1();return!(!t||!t.length)&&(t=t[t.length-1].getTimeRange(),e=e.getTimeRange(),t.startTime===e.startTime&&t.endTime===e.endTime)},t.getSegment=function(e){return this.$1()[e]||null},t.updateWith=function(){throw new Error("Not implemented: updatedWith")},t.addUpdateListener=function(e){return this.$2.addListener("segment_updated",e)},t.getTimeRanges=function(){var e=this.$1();if(0===e.length)return[];var t=e[0];return e=e[e.length-1],[{startTime:t.getTimeRange().startTime,endTime:e.getTimeRange().endTime}]},t.blockTimeRange=function(){},t.getEndingSegment=function(){var e=this.$1();return e.length>0?e[e.length-1]:null},t.getMaxGopSec=function(){return null},e}(),a["default"]=e},66),__d("oz-player/parsers/OzWebmSidxParser",["oz-player/manifests/OzDataSegment","oz-player/shims/OzDataViewReader","oz-player/shims/ozvariant"],function(e,t,r,i,n,a,s){"use strict";function o(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!=t[r])return!1;return!0}function u(e){e=e.createParser();for(var t=1e6,r=null;e.hasMoreData();){var i=e.parseElement();i.id==m?t=i.getUint():i.id==$&&(r=i.getFloat())}return null==r?null:{timecodeScale:i=t/1e9,duration:e=r*i}}function l(e,t,i,n,a,s){e=[],t=t.createParser();for(var o=-1,u=-1;t.hasMoreData();){var l=t.parseElement();if(l.id==z&&(l=h(l))){var d=n*l.unscaledTime;l=i+l.relativeOffset,o>=0&&(u>=0||r("oz-player/shims/ozvariant")(0,4010),e.push(new(r("oz-player/manifests/OzDataSegment"))(s,o,d,u,l-1))),o=d,u=l}}return o>=0&&(u>=0||r("oz-player/shims/ozvariant")(0,4010),d=a,e.push(new(r("oz-player/manifests/OzDataSegment"))(s,o,d,u,null))),e}function h(e){var t=(e=e.createParser()).parseElement();if(t.id!=O)return null;if(t=t.getUint(),(e=e.parseElement()).id!=S)return null;e=e.createParser();for(var r=0;e.hasMoreData();){var i=e.parseElement();if(i.id==v){r=i.getUint();break}}return{unscaledTime:t,relativeOffset:r}}function d(e){e=e.createParser();for(var t=null;e.hasMoreData();){var r=e.parseElement();if(r.id==g){t=r;break}}return t?u(t):null}function c(e){var t=(e=new M(e)).parseElement();return t.id!=p?null:(t=e.parseElement()).id!=f?null:(e=t.getOffset(),(t=d(t))?{segmentOffset:e,timecodeScale:t.timecodeScale,duration:t.duration}:null)}function e(e,t,r,i){return i=new DataView(i.buffer),r=new DataView(r.buffer),(i=c(i))?(r=(r=new M(r)).parseElement()).id!=y?[]:l(e,r,i.segmentOffset,i.timecodeScale,i.duration,t):[]}var p=440786851,f=408125543,g=357149030,m=2807729,$=17545,y=475249515,z=187,O=179,S=183,v=241,P=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])],_=function(){function e(e,t){this.id=e,this.$1=t}var t=e.prototype
;return t.getOffset=function(){return this.$1.byteOffset},t.createParser=function(){return new M(this.$1)},t.getUint=function(){if(this.$1.byteLength>8)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==this.$1.byteLength&&224&this.$1.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var e=0,t=0;t<this.$1.byteLength;t++){e=256*e+this.$1.getUint8(t)}return e},t.getFloat=function(){if(4==this.$1.byteLength)return this.$1.getFloat32(0);if(8==this.$1.byteLength)return this.$1.getFloat64(0);throw new RangeError("EbmlElement: floating point numbers must be 4 or 8 bytes.")},e}(),M=function(){function e(e){this.$1=e,this.$2=new(r("oz-player/shims/OzDataViewReader"))(this.$1)}var t=e.prototype;return t.hasMoreData=function(){return this.$2.hasMoreData()},t.parseElement=function(){var t,r=this.$3(),i=this.$4();return t=e.$5(i)?this.$1.byteLength-this.$2.getCursor():e.$6(i),i=this.$2.getCursor()+t<=this.$1.byteLength?t:this.$1.byteLength-this.$2.getCursor(),t=new DataView(this.$1.buffer,this.$1.byteOffset+this.$2.getCursor(),i),this.$2.skip(i),new _(r,t)},t.$3=function(){var e=this.$4();if(e.length>7)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var t=0,r=0;r<e.length;r++)t=256*t+e[r];return t},t.$4=function(){var e,t=this.$2.readUint8();for(e=1;e<=8;e++){var r=1<<8-e;if(t&r)break}if(e>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");for((r=new Uint8Array(e))[0]=t,t=1;t<e;t++)r[t]=this.$2.readUint8();return r},e.$6=function(e){if(8==e.length&&224&e[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");var t=1<<8-e.length;t=e[0]&t-1;for(var r=1;r<e.length;r++)t=256*t+e[r];return t},e.$5=function(e){for(var t=0;t<P.length;t++)if(o(e,P[t]))return!0;return!1},e}();s.parse=e},98),__d("oz-player/parsers/OzSidxSegmentsParser",["oz-player/loggings/OzLoggingUtils","oz-player/manifests/OzSegmentOptions","oz-player/manifests/OzZeroTimeRangeSegment","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/parsers/OzMp4SidxParser","oz-player/parsers/OzSidxSegmentsContainer","oz-player/parsers/OzWebmSidxParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzURI","oz-player/utils/OzErrorEmitter","oz-player/utils/OzReadableStreamUtils"],function(e,t,r,i,n,a,s){"use strict";function o(e){return e=e.split("-"),{startByte:Number.parseInt(e[0],10),endByte:Number.parseInt(e[1],10)}}e=function(){function e(e,t,i,n,a,s,o){this.$6=new(r("oz-player/utils/OzErrorEmitter")),this.$7=[],this.$9=new(r("oz-player/shims/OzEventEmitter")),this.$1=t,this.$2=new(r("oz-player/shims/OzURI"))(i),this.$3=n,this.$5=a,this.$4=s,this.$8=o.cloneContext().setType("sidx"),this.$10=e}var t=e.prototype;return t.onError=function(e){return this.$6.onError(e)},t.parseInitializationSegment=function(){var e=this,t=o(this.$1.Initialization[0].$.range),i=new(r("oz-player/manifests/OzSegmentOptions"));return this.$10.getBool("sidx_parser_memory_optimization")?new(r("oz-player/manifests/OzZeroTimeRangeSegment"))(this.$2,t.startByte,t.endByte):{getData:function(){return null},getURI:function(){return e.$2},getTimeRange:function(){return{startTime:0,endTime:0}},getByteRange:function(){return t},getSequenceNumber:function(){return null},getOptions:function(){return i}}},t.parseSegmentsContainer=function(){var e=this,t=this.$11();return i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(t,this.$8,"process_sidx"),t["catch"](this.$6.emitError),new(r("oz-player/parsers/OzSidxSegmentsContainer"))(function(){return e.$7},this.$9)},t.$12=function(e,t,n){return e=new(r("oz-player/manifests/OzZeroTimeRangeSegment"))(e,t.startByte,t.endByte),t=this.$5+";sidx",t=(e=this.$4.request([e],[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(t)],this.$8,{networkTimeoutMs:null,retryAttempts_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_attempts"),retryTimeoutMs_SIDX_USE_ONLY:this.$10.getNumber("sidx_segment_retry_interval_ms")},n)).getStream().getReader(),i("oz-player/utils/OzReadableStreamUtils").pumpAllData(t)},t.$11=function(){var e=this,t=this.$1.$.indexRange,n=o(t);if(t=[this.$12(this.$2,n,null)],"webm"===this.$3){var a=o(this.$1.Initialization[0].$.range);t.push(this.$12(this.$2,a,null)),a=r("oz-player/shims/OzMaybeNativePromise").all(t).then(function(t){var r=t[0];t=t[1],e.$7=i("oz-player/parsers/OzWebmSidxParser").parse(e.$10,e.$2,r,t)})}else a=t[0].then(function(t){e.$7=i("oz-player/parsers/OzMp4SidxParser").parse(e.$10,e.$2,n.startByte,t)});return a.then(function(){e.$9.emit("segment_updated")})},e}(),s["default"]=e},98),__d("oz-player/parsers/OzVideoContainerType",[],function(e,t,r,i,n,a){"use strict";function e(e){return(e.split("/")[1]||"").trim()}a.parse=e},66),__d("oz-player/parsers/OzRepresentationParserBase",["oz-player/manifests/OzRepresentationBase","oz-player/parsers/OzSegmentTemplateParser","oz-player/parsers/OzSidxSegmentsParser","oz-player/parsers/OzVideoContainerType","oz-player/parsers/getMIMECodecs","oz-player/shims/ozvariant","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMimeUtil"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n,a,s,o,u,l,h,d,c){this.$6=new(r("oz-player/utils/OzErrorEmitter")),this.$1=t,this.$7=n,this.$8=a,this.$10=i,this.$11=e,this.$12=s,this.$2=o,this.$3=u,this.$4=l,this.$5=h,this.$13=d,this.$14=c;try{this.$8=this.$8.cloneContext().setRepresentationID(this.parseID())}catch(e){}}var t=e.prototype;return t.$15=function(){var e=this,t=this.$9;if(t)return t;if(this.$1.SegmentBase){var n=this.$1.SegmentBase[0],a=this.$1.BaseURL[0]._;"string"==typeof a||r("oz-player/shims/ozvariant")(0,29051),(t=new(r("oz-player/parsers/OzSidxSegmentsParser"))(this.$11,n,a,i("oz-player/parsers/OzVideoContainerType").parse(this.$1.$.mimeType),i("oz-player/utils/OzMimeUtil").getMimeType(this.$1.$.mimeType),this.$7,this.$8)).onError(function(t){var r;if(null==(r=e.$14)||!r.handleError(e.parseID(),t))return e.$6.emitError(t)})}else if(this.$1.SegmentTemplate)t=this.$16(this.$1.SegmentTemplate[0],{isShared:!1});else{if(!this.$2)throw n=new(r("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Unrecognized representation type",extra:{code:"OZ_RP-7"}});t=this.$16(this.$2[0],{isShared:!0})}return this.$9=t,t},t.$16=function(e,t){var i;e=e,t.isShared&&(e=babelHelpers["extends"]({},e,{$:babelHelpers["extends"]({},e.$,{initialization:e.$.initialization.replace("$RepresentationID$",this.$1.$.id),media:e.$.media.replace("$RepresentationID$",this.$1.$.id)})})),t=this.$10.mpdUrl;var n=this.$1.BaseURL&&this.$1.BaseURL[0]?this.$1.BaseURL[0]._:null;if(null==(n=null!=n?n:t)){var a=new(r("oz-player/utils/OzError"))({type:"OZ_REPRESENTATION_PARSER",description:"Missing mpd url for template manifest",extra:{code:"OZ_RP-6"}});throw a}return a=this.$10.customSegmentTimelineParser,i=(i=null==(i=this.$10.customRepresentationParsers)?void 0:i.initializationBinary)?i(this.$1):null,new(r("oz-player/parsers/OzSegmentTemplateParser"))(this.$11,e,{baseUrl:n,mpdUrl:t,isStaticMpd:"static"===this.$12.manifestType,isTemplatedMpd:this.$12.manifestIsTemplated},a,i)},t.onError=function(e){return this.$6.onError(e)},t.parseInitSegment=function(){return this.$15().parseInitializationSegment()},t.parseBandwidth=function(){return Number(this.$1.$.bandwidth)},t.parseMimeCodecs=function(){var e,t;return e=null!=(e=null!=(e=this.$1.$.mimeType)?e:this.$3)?e:"",t=null!=(t=null!=(t=this.$1.$.codecs)?t:this.$4)?t:"",r("oz-player/parsers/getMIMECodecs")(e,t)},t.parseLang=function(){return this.$5},t.parseSegmentsContainer=function(){return this.$15().parseSegmentsContainer()},t.parseID=function(){return""+this.$1.$.id},t.parseCustomFieldFirstSegment=function(){var e=this.$10.customRepresentationParsers?this.$10.customRepresentationParsers.firstSegmentParser:null;return e?e(this.$1):null},t.parse=function(){return new(r("oz-player/manifests/OzRepresentationBase"))(this.$1,this.parseID(),this.parseMimeCodecs(),this.parseLang(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),this.$10.customRepresentationParsers)},e}(),s["default"]=e},98),__d("oz-player/parsers/OzApplicationRepresentationParser",["oz-player/manifests/OzApplicationRepresentation","oz-player/parsers/OzRepresentationParserBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u,l,h,d){return(t=e.call(this,t,r,i,n,a,s,o,u,l,h,d)||this).$OzApplicationRepresentationParser1=r,t.$OzApplicationRepresentationParser2=i,t}return babelHelpers.inheritsLoose(t,e),t.prototype.parse=function(){var e=this.$OzApplicationRepresentationParser2.customRepresentationParsers;return new(r("oz-player/manifests/OzApplicationRepresentation"))(this.$OzApplicationRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseLang(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),e)},t}(r("oz-player/parsers/OzRepresentationParserBase")),s["default"]=e},98),__d("oz-player/manifests/OzAudioRepresentation",["oz-player/manifests/OzRepresentationBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u,l){return(i=e.call(this,t,r,i,n,a,s,o,u,l)||this).$OzAudioRepresentation1=t,i.$OzAudioRepresentation2=r,i.$OzAudioRepresentation3=o,i}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.getBitrateKbps=function(){var e=1024;return(this.$OzAudioRepresentation3/e).toFixed(1)+"Kbps"},r.getQualityLabel=function(){return this.$OzAudioRepresentation2},t}(r("oz-player/manifests/OzRepresentationBase")),s["default"]=e},98),__d("oz-player/parsers/OzAudioRepresentationParser",["oz-player/manifests/OzAudioRepresentation","oz-player/parsers/OzRepresentationParserBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u,l,h,d){return(t=e.call(this,t,r,i,n,a,s,o,u,l,h,d)||this).$OzAudioRepresentationParser1=r,t.$OzAudioRepresentationParser2=i,t}return babelHelpers.inheritsLoose(t,e),t.prototype.parse=function(){var e=this.$OzAudioRepresentationParser2.customRepresentationParsers;return new(r("oz-player/manifests/OzAudioRepresentation"))(this.$OzAudioRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseLang(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),e)},t}(r("oz-player/parsers/OzRepresentationParserBase")),s["default"]=e},98),__d("oz-player/parsers/OzVideoRepresentationParser",["oz-player/manifests/OzVideoRepresentation","oz-player/parsers/OzRepresentationParserBase"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r,i,n,a,s,o,u,l,h,d,c){return(t=e.call(this,t,r,i,n,a,s,o,u,l,h,d,c)||this).$OzVideoRepresentationParser1=r,t.$OzVideoRepresentationParser2=i,t}return babelHelpers.inheritsLoose(t,e),t.prototype.parse=function(){var e=Number.parseInt(this.$OzVideoRepresentationParser1.$.height,10),t=Number.parseInt(this.$OzVideoRepresentationParser1.$.width,10),i=this.$OzVideoRepresentationParser2.customRepresentationParsers;return new(r("oz-player/manifests/OzVideoRepresentation"))(this.$OzVideoRepresentationParser1,this.parseID(),this.parseMimeCodecs(),this.parseLang(),this.parseInitSegment(),this.parseSegmentsContainer(),this.parseBandwidth(),this.parseCustomFieldFirstSegment(),i,t,e)},t}(r("oz-player/parsers/OzRepresentationParserBase")),s["default"]=e},98),__d("oz-player/parsers/OzMpdParser",["oz-player/manifests/Mpd","oz-player/parsers/OzApplicationRepresentationParser","oz-player/parsers/OzAudioRepresentationParser","oz-player/parsers/OzVideoRepresentationParser","oz-player/utils/OzErrorEmitter"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n,a,s,o){void 0===s&&(s=[]),void 0===o&&(o=null),this.$2=new(r("oz-player/utils/OzErrorEmitter")),this.$5=e,this.$1=i,this.$3=n,this.$4=t,this.$6=a,this.$7=s,this.$8=o}var t=e.prototype;return t.onError=function(e){return this.$2.onError(e)},t.parse=function(e){e=e;var t=this.$4.createXmlParser().parse(e);if(!(t=t.MPD&&t.MPD.length>0?t.MPD[0]:null)){var i=2e3;throw new Error("parsed manifest XML missing MPD node; truncated xml ("+i+"/"+e.length+"): "+e.substring(0,i))}if(!(i=t.Period&&t.Period.length>0?t.Period[0]:null)){var n=2e3;throw new Error("parsed manifest XML missing Period node; truncated xml ("+n+"/"+e.length+"): "+e.substring(0,n))}e=i.AdaptationSet||[],n=this.$9(t),i=this.$10(t);var a=this.$11(e,"video"),s=this.$12(this.$13(e,"video"),r("oz-player/parsers/OzVideoRepresentationParser"),{manifestType:n,manifestIsTemplated:i});s.sort(function(e,t){return e.getHeight()-t.getHeight()});var o=this.$11(e,"audio"),u=this.$14(o,r("oz-player/parsers/OzAudioRepresentationParser"),{manifestType:n,manifestIsTemplated:i});u.sort(function(e,t){return e.getBandwidth()-t.getBandwidth()});var l=[];return this.$5.getBool("vtt_caption_representation")&&(e=this.$13(e,"application"),l=this.$14(e[0],r("oz-player/parsers/OzApplicationRepresentationParser"),{manifestType:n,manifestIsTemplated:i})),e=this.$4.mpdUrl,i=new(r("oz-player/manifests/Mpd"))(t,s,u,l,e,this.$15(t),this.$4.customParsers||new Map,"static"===n),this.$6&&(l=this.$6).startEME(a,s,o,u),i},t.$15=function(e){return e=e.$.minimumUpdatePeriod||"",(e=/\d+/g.exec(e))&&e.length&&(e=e[0])?Number.parseInt(e,10):null},t.$9=function(e){return e.$.type||"static"},t.$10=function(e){var t;return!!(t=null==(t=this.$4.customParsers)?void 0:t.get("isLiveTemplated"))&&("boolean"==typeof(t=t(e))&&t)},t.$11=function(e,t){return e.find(this.$16(t))},t.$13=function(e,t){return e.filter(this.$16(t))},t.$16=function(e){return function(t){return null!=t.$.mimeType?-1!==t.$.mimeType.indexOf(e):(t=t.Representation)&&t.length>0&&-1!==t[0].$.mimeType.indexOf(e)}},t.$14=function(e,t,r){var i=this;return e?e.Representation.map(function(n){return(n=new t(i.$5,n,i.$4,i.$1,i.$3,r,e.SegmentTemplate,e.$.mimeType,e.$.codecs,e.$.lang,i.$7,i.$8)).onError(i.$2.emitError),n.parse()}):[]},t.$12=function(e,t,r){var i=this,n=[],a=new Set,s=0;return e.filter(Boolean).forEach(function(e,o,u){o=o===u.length-1,u=s;var l=e.Representation,h=Array.isArray(l),d=0;for(l=h?l:l["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var c,p;if(h){if(d>=l.length)break;p=l[d++]}else{if((d=l.next()).done)break;p=d.value}p=p;var f=parseInt(p.$.height,10);f<=s||(null!=(c=p.$.FBAbrPolicyTags)&&c.includes("avoid_on_abr")&&!o||((c=new t(i.$5,p,i.$4,i.$1,i.$3,r,e.SegmentTemplate,e.$.mimeType,e.$.codecs,e.$.lang,i.$7,i.$8)).onError(i.$2.emitError),p=c.parse(),MediaSource.isTypeSupported(p.getMimeCodecs())?(n.push(p),u=Math.max(f,u)):a.add(p.getMimeCodecs())))}s=u}),n},e}(),s["default"]=e},98),__d("oz-player/utils/OzErrorUtils",["oz-player/utils/OzError"],function(e,t,r,i,n,a,s){function e(e,t){return new(r("oz-player/utils/OzError"))({type:e.getType(),description:e.getDescription(),extra:babelHelpers["extends"]({},e.getExtra(),{mimeType:t})})}function t(e){var t,i;return e instanceof r("oz-player/utils/OzError")?(t=e.getExtra().code||"",i=e):(t=null!=e.status&&""!==e.status?e.status.toString():"0",i=new(r("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:e.message,extra:{originalError:e,code:t,url:e.url}})),[i,t]}s.getOzErrorWithMIMEType=e,s.getNormalizedErrorAndCode=t},98),__d("oz-player/utils/OzMpdUtils",[],function(e,t,r,i,n,a){"use strict";function s(e){var t=null;return e.forEach(function(e){if(e){var r=e.endTime;r<(null!=(r=null==(r=t)?void 0:r.endTime)?r:Infinity)&&(t=e)}}),t}function e(e,t){return(t=[]).push.apply(t,e.getVideoRepresentations().concat(e.getAudioRepresentations())),t.length?s(e=t.map(function(e){return(e=e.getEndingSegment())?e.getTimeRange():null})):null}function t(e){var t=[];return t.push.apply(t,e.getVideoRepresentations().concat(e.getAudioRepresentations())),t.length&&(e=t[0].getEndingSegment())?e.getSequenceNumber():null}a.getLeastEndTimeTimeRange=s,a.getMpdLastTimeRange=e,a.getMpdLastSequenceNumber=t},66),__d("oz-player/utils/OzStreamInterruptChecker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzMpdUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r){var i;return(i=e.call(this)||this).$OzStreamInterruptChecker4=0,i.$OzStreamInterruptChecker5=null,i.$OzStreamInterruptChecker6=!1,i.$OzStreamInterruptChecker2=t,i.$OzStreamInterruptChecker3=r,i.$OzStreamInterruptChecker1=i.$OzStreamInterruptChecker3.getNumber("live_numerical_error_epsilon"),i}return babelHelpers.inheritsLoose(t,e),t.prototype.notifyMpdUpdated=function(){var e=i("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(this.$OzStreamInterruptChecker2,this.$OzStreamInterruptChecker3),t=e?e.endTime:null,r=!1;null!==t&&(r=t===this.$OzStreamInterruptChecker5),r?this.$OzStreamInterruptChecker4++:(this.$OzStreamInterruptChecker4=0,this.$OzStreamInterruptChecker6&&null!==this.$OzStreamInterruptChecker5&&void 0!==this.$OzStreamInterruptChecker5&&null!=e&&this.emit("streamResumedAt",e.startTime),this.$OzStreamInterruptChecker6=!1),r=this.$OzStreamInterruptChecker3.getNumber("stream_interrupt_check_mpd_stale_count_threshold"),!this.$OzStreamInterruptChecker6&&r>0&&this.$OzStreamInterruptChecker4>=r&&null!=t&&(this.emit("streamInterruptAt",t),this.$OzStreamInterruptChecker6=!0),this.$OzStreamInterruptChecker5=t},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/parsers/OzMpdUpdater",["oz-player/parsers/OzMpdParser","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzURI","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMpdUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/OzStreamInterruptChecker"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,n,a,s,o,u,l,h){var d;(d=e.call(this)||this).$OzMpdUpdater8=new(r("oz-player/utils/OzErrorEmitter")),d.$OzMpdUpdater10=new(r("oz-player/shims/OzSubscriptionsHandler")),d.$OzMpdUpdater11=!1,d.$OzMpdUpdater16=0,d.$OzMpdUpdater18=0,d.$OzMpdUpdater19=null,d.$OzMpdUpdater21=!0,d.$OzMpdUpdater22=0,d.$OzMpdUpdater25=function(){var e,t=d.$OzMpdUpdater2.getLocation();if(d.$OzMpdUpdater21=!1,null!=t&&""!==t){var n=new(r("oz-player/shims/OzURI"))(t),a=String(null!=(e=null!=(e=n.getQueryData().ms)?e:n.getQueryData().msdev)?e:n.getQueryData().mstest);if(d.$OzMpdUpdater12.isPlaying()){var s=d.$OzMpdUpdater5.getOperationLogger("update_manifest").start();d.$OzMpdUpdater27(t).then(function(e){var n;if(d.$OzMpdUpdater18=0,d.$OzMpdUpdater28(),d.$OzMpdUpdater7=0,!d.$OzMpdUpdater21){var o=babelHelpers["extends"]({},d.$OzMpdUpdater13,{mpdUrl:t});(o=new(r("oz-player/parsers/OzMpdParser"))(d.$OzMpdUpdater6,o,d.$OzMpdUpdater1,d.$OzMpdUpdater5,d.$OzMpdUpdater14)).onError(function(e){d.$OzMpdUpdater8.emitError(e),s.setError(e).log()}),o=o.parse(e),e=d.$OzMpdUpdater2.isStaticMpd(),d.$OzMpdUpdater2.updateWith(o),d.$OzMpdUpdater2.markRefreshed(),o.isStaticMpd()&&!e&&d.emit("streamTransitionToStatic"),e=(o=i("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(d.$OzMpdUpdater2,d.$OzMpdUpdater6))&&0!=o.endTime?o.endTime:null,o={currentServerTimeMs:o=String(null!=(o=null==(o=d.$OzMpdUpdater2)?void 0:o.getCustomField("currentServerTimeMs"))?o:""),ingestLastVideoFrameTs:n=String(null!=(n=null==(n=d.$OzMpdUpdater2)?void 0:n.getCustomField("lastVideoFrameTs"))?n:""),nowMs:String(Date.now())},s.setLiveheadPosition(e).setLiveheadSeqNumMpd(i("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(d.$OzMpdUpdater2)).setManifestType(d.$OzMpdUpdater2.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(d.$OzMpdUpdater2.getCustomField("isLiveTemplated"))).setPlaybackFbmsParam(a).setUserInfo(o).log(),d.$OzMpdUpdater9.notifyMpdUpdated(),d.setupUpdateLoop()}})["catch"](function(e){d.$OzMpdUpdater28(),s.setError(e).log();var n=null;if(e instanceof r("oz-player/utils/OzError"))n=e;else{var a,o=null,u="Caught an unknown error when fetching the manifest.";if(null!=e)if(d.$OzMpdUpdater6.getBool("normalize_mpd_fetch_errors")){var l=i("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(e),h=l[0];l[1],n=h}else o=null!=(a=e).code?String(a.code):null,u=a.name+"; "+a.message+"; "+a.description+";";null==n&&(l={originalError:a,url:t},null!==o&&(l.code=o),n=new(r("oz-player/utils/OzError"))({type:"OZ_NETWORK",description:u,extra:l}))}d.$OzMpdUpdater26(n,t)})}else d.setupUpdateLoop()}};var c=n.getMinimumUpdatePeriod();return d.$OzMpdUpdater7=0,d.$OzMpdUpdater1=a,d.$OzMpdUpdater2=n,d.$OzMpdUpdater12=s,d.$OzMpdUpdater3=c,d.$OzMpdUpdater5=o.cloneContext().setType("manifest"),d.$OzMpdUpdater6=t,d.$OzMpdUpdater13=u,d.$OzMpdUpdater14=l,d.$OzMpdUpdater15=h,d.$OzMpdUpdater2.addListener("locationUpdated",function(){d.$OzMpdUpdater23(),d.setupUpdateLoop()}),d.$OzMpdUpdater9=new(r("oz-player/utils/OzStreamInterruptChecker"))(d.$OzMpdUpdater2,d.$OzMpdUpdater6),d.$OzMpdUpdater10.addSubscriptions(d.$OzMpdUpdater9.addListener("streamResumedAt",function(e){d.emit("streamResumedAt",e)}),d.$OzMpdUpdater9.addListener("streamInterruptAt",function(e){d.emit("streamInterruptAt",e)})),d}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$OzMpdUpdater23=function(){r("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater4=null,this.$OzMpdUpdater24(),this.$OzMpdUpdater21=!0},n.setupUpdateLoop=function(){var e,t=!this.$OzMpdUpdater11;t&&(t=!this.$OzMpdUpdater2.isStaticMpd(),this.$OzMpdUpdater3=this.$OzMpdUpdater2.getMinimumUpdatePeriod()),e=null==this.$OzMpdUpdater17&&this.$OzMpdUpdater6.getNumber("manifest_initial_update_delay_ms")>0?this.$OzMpdUpdater6.getNumber("manifest_initial_update_delay_ms"):this.$OzMpdUpdater6.getNumber("manifest_update_frequency_ms")||1e3*(null!=(e=this.$OzMpdUpdater3)?e:0),t&&e&&this.$OzMpdUpdater2.getLocation()&&(this.$OzMpdUpdater4=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(this.$OzMpdUpdater25,e))},n.onError=function(e){return this.$OzMpdUpdater8.onError(e)},n.$OzMpdUpdater26=function(e,t){var r=this;t=!0;var i=this.$OzMpdUpdater18-1,n=e.getExtra().code;this.$OzMpdUpdater19!==n?(this.$OzMpdUpdater19=n,this.$OzMpdUpdater16=1):this.$OzMpdUpdater16++;var a=function(){t=!1};n={endStream:function(){a(),r.$OzMpdUpdater11=!0,r.emit("streamGone")},consecutiveFailuresForErrorCode:this.$OzMpdUpdater16,error:e,isInitialRequest:!1,retry:function(){r.emit("manifestFetchErrorRetry",e),a(),r.setupUpdateLoop()},retryAttemptCount:i},this.emit("manifestFetchError",n),t&&this.$OzMpdUpdater8.emitError(e)},n.$OzMpdUpdater29=function(e,t){return(e=new(r("oz-player/shims/OzURI"))(e)).addQueryData("_nc_expid",t),e.toString()},n.$OzMpdUpdater30=function(e){return this.$OzMpdUpdater15?((e=new(r("oz-player/shims/OzURI"))(e)).addQueryData("_nc_tsid","mpd-"+this.$OzMpdUpdater22++),e.toString()):e},n.$OzMpdUpdater27=function(e){this.$OzMpdUpdater24(),this.$OzMpdUpdater18++;var t=this.$OzMpdUpdater6.getString("cdn_experiment_id");return e=0===t.length?e:this.$OzMpdUpdater29(e,t),e=this.$OzMpdUpdater30(e),t=this.$OzMpdUpdater1.requestRawUrl(e,{networkTimeoutMs:this.$OzMpdUpdater6.getNumber("mpd_updater_network_request_timeout_ms")},this.$OzMpdUpdater5),this.$OzMpdUpdater17=Date.now(),this.$OzMpdUpdater20=t,e=t.getStream().getReader(),i("oz-player/utils/OzReadableStreamUtils").pumpString(e)},n.$OzMpdUpdater24=function(){this.$OzMpdUpdater20&&(this.$OzMpdUpdater20.cancel(),this.$OzMpdUpdater18=0),this.$OzMpdUpdater28()},n.$OzMpdUpdater28=function(){this.$OzMpdUpdater20=null},n.destroy=function(){this.$OzMpdUpdater4&&r("oz-player/shims/ozClearTimeout")(this.$OzMpdUpdater4),this.$OzMpdUpdater10.release()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/parsers/OzXmlParserImplDOMParser",["oz-player/utils/OzError"],function(e,t,r,i,n,a,s){function o(){return{$:{}}}function u(e){for(var t=o(),r=e.attributes,i=0;i<r.length;++i){var n=r[i];t.$[n.name]=n.value}for(n=e.childNodes,r=0;r<n.length;++r)(i=n[r])instanceof Element?(e=i.nodeName,Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(u(i))):(e=i.nodeValue.trim())&&(t._=e);return t}e=function(){function e(){this.$1=new DOMParser}return e.prototype.parse=function(e){try{var t=o(),i=this.$1.parseFromString(e,"application/xml"),n=i.querySelector("parsererror");if(n){n=n.innerHTML;var a=2e3;throw new(r("oz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:n+"; truncated xml ("+a+"/"+e.length+"): "+e.substring(0,a),extra:{}})}return null!=(n=i.documentElement)&&(t[n.nodeName]=[u(n)]),t}catch(t){throw t instanceof r("oz-player/utils/OzError")?t:(a=2e3,new(r("oz-player/utils/OzError"))({type:"OZ_XML_PARSER",description:t.message+"; truncated xml ("+a+"/"+e.length+"): "+e.substring(0,a)+"\n\n"+t.stack,extra:{originalError:t}}))}},e}(),s["default"]=e},98),__d("oz-player/playback_controls/OzClearSourceBufferOnSeekManager",["oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n){void 0===n&&(n=null),this.$3=new(r("oz-player/utils/OzErrorEmitter")),this.$4=new Map,this.$5=!1,this.$6=!1,this.$7=!1,this.$8=null,this.$9=[],this.$10=null,this.$11=null,this.$1=e,this.$2=t,this.$4=i,this.$11=n}var t=e.prototype;return t.$12=function(e){var t;return this.$5=!0,null!=(t=this.$8)?t:e.call(this.$1)},t.$13=function(e,t){this.$6=!0,this.$9.push({t:t}),this.$8=t,1===this.$9.length&&this.$14(e)},t.$15=function(e){return this.$7=!0,null!=this.$8||e.call(this.$1)},t.$16=function(e,t){var i=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),n=[];return this.$4.forEach(function(r,i){i=r.clearSourceBufferRange(e,t),n.push(i)}),r("oz-player/shims/OzMaybeNativePromise").all(n).then(function(){i.resolve()})["catch"](function(e){i.reject(e)}),i.getPromise()},t.$14=function(e){var t=this,i=this.$9.length>0?this.$9[0]:null,n=this.$2.getNumber("clear_buffer_on_seek_epsilon_s");if(i){for(var a=i.t,s=(i=this.$1.buffered).length,o=i.length<=0,u=-1,l=!1,h=0;u<0&&h<s;++h)u=a-n>=i.start(h)&&a+n<i.end(h)?h:u,l=a<i.start(h)-n;h=u>-1;var d=this.$2.getNumber("clear_buffer_on_seek_nudge_s");if(h&&u>=0&&u<s&&d>0&&(a=Math.min(a,i.end(u)-d),a=Math.max(a,i.start(u)+d)),o||h||!l)this.$11&&this.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(1e3*a)).setInitiator("no_clear").log(),e.call(this.$1,a),this.$9.shift(),this.$14(e);else{var c=null;this.$11&&(c=this.$11.getOperationLogger("clear_buffer_before_seek").setLength(Math.round(1e3*a)).setUserInfo({bufferRangesLength:String(s),nudgeSec:String(d)}).start()),(u=this.$16(Math.max(a-n,0),i.end(s-1)+n)).then(function(){c&&c.log(),t.$11&&t.$11.getOperationLogger("seek_to_next_time").setLength(Math.round(1e3*a)).setInitiator("after_clear").log(),e.call(t.$1,a),t.$9.shift(),t.$14(e)})["catch"](function(e){c&&c.setError(e).log(),t.$3.emitError(e instanceof r("oz-player/utils/OzError")?e:new(r("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:e?e.name+": "+e.message:"Unknown error while clearing the buffer.",extra:{code:r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_CLEAR_RANGE_FAILED,originalError:e}}))})}}else this.$8=null},t.maybeOverwriteVideoCurrentTimeProperty=function(){var e,t,r=this,i=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"currentTime");i=null!=(e=i)?e:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime"),e=null!=(t=e=Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(this.$1,"seeking"))?t:Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"seeking");var n=i&&"function"==typeof i.get?i.get:null,a=i&&"function"==typeof i.set?i.set:null,s=e&&"function"==typeof e.get?e.get:null;if(n&&a&&s&&Object.defineProperty){try{Object.defineProperty(this.$1,"currentTime",{get:function(){return r.$12(n)},set:function(e){r.$13(a,e)},configurable:!0,enumerable:!0}),Object.defineProperty(this.$1,"seeking",{get:function(){return r.$15(s)},configurable:!0,enumerable:!0}),t=this.$1.currentTime,this.$1.currentTime=t,this.$1.seeking}catch(e){}this.$17(function(){r.getCurrentTimePropertyOverwriteSuccess()&&Object.defineProperty(r.$1,"currentTime",{get:n,set:a,configurable:!0,enumerable:!0}),r.getSeekingPropertyOverwriteSuccess()&&Object.defineProperty(r.$1,"seeking",{get:s,configurable:!0,enumerable:!0})})}},t.getCurrentTimePropertyOverwriteSuccess=function(){return this.$5&&this.$6},t.getSeekingPropertyOverwriteSuccess=function(){return this.$7},t.$17=function(e){this.$10=e},t.onError=function(e){return this.$3.onError(e)},t.destroy=function(){try{this.$10&&this.$10()}catch(e){}},e}(),s["default"]=e},98),__d("oz-player/playback_controls/OzSteadyStateManager",["oz-player/shims/ozvariant"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){this.$1=[],this.$2=e,this.$3=t}var t=e.prototype;return t.addSample=function(e){var t,r=Math.floor(Date.now()/(1e3*this.$3)),i=r%this.$2;(null==(t=this.$1[i])?void 0:t.bucketNumber)!=r&&(this.$1[i]={bucketNumber:0,val:null}),this.$1[i]={bucketNumber:r,val:Math.min(e,null!=(t=this.$1[i].val)?t:e)}},t.min=function(){var e=this,t=Date.now(),i=this.$1.filter(function(r){return null!=r&&null!=r.val&&t-1e3*e.$2*e.$3<1e3*r.bucketNumber*e.$3});return i.length<this.$2?null:null==(i=i.reduce(function(e,t){if(null==e)return t;var i=t.val;null!=i||r("oz-player/shims/ozvariant")(0,56011);var n=e.val;return null!=n||r("oz-player/shims/ozvariant")(0,56011),i<n?t:e},null))?void 0:i.val},t.reset=function(){this.$1=[]},e}(),s["default"]=e},98),__d("oz-player/utils/OzSourceBufferUtil",["oz-player/utils/OzNumericalRangeUtil"],function(e,t,r,i,n,a,s){"use strict";function e(e){for(var t=0,r=0;r<e.getBuffered().length;r++)t+=e.getBuffered().end(r)-e.getBuffered().start(r);return t}function t(e){return e.reduce(function(e,t){return e+(t.endTime-t.startTime)},0)}function r(e){return 0==e.getBuffered().length?0:e.getBuffered().start(0)}function n(e){var t=null;try{t=e.getBuffered()}catch(e){return 0}return 0==t.length?0:t.end(t.length-1)}function a(e){for(var t=[],r=0;r<e.length;r++)t.push({startTime:e.start(r),endTime:e.end(r)});return t}function o(e,t,r){return{bufferAheadSec:t=(r=i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(r,t,e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}})))>=0?parseFloat((e[r].endTime-t).toFixed(3)):0,bufferedOffset:e=r>=0?e.length-1-r:-1}}function u(e,t,r){var n=e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}});return r=i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(r,t,n),{bufferAheadSec:n=parseFloat(n.reduce(function(e,r){var n=r.rangeEnd;return null==n?e:e+(i("oz-player/utils/OzNumericalRangeUtil").isWithin(t,r)?n-t:i("oz-player/utils/OzNumericalRangeUtil").isLargerThan(r.rangeStart,t)?n-r.rangeStart:0)},0).toFixed(3)),bufferedOffset:e=r>=0?e.length-1-r:-1}}s.getTotalBufferedTime=e,s.getTotalInBufferedRanges=t,s.getStartBufferedTime=r,s.getEndBufferedTime=n,s.convertToBufferedTimeRangeArray=a,s.getBufferAheadInBufferedRanges=o,s.getTotalBufferAheadOfPosition=u},98),__d("oz-player/playback_controls/OzLiveLatencyManager",["oz-player/playback_controls/OzSteadyStateManager","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzSourceBufferUtil"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){var t=this;this.$8=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$9=null,this.$11=!1,this.$12=null,this.$13=null,this.$14=null,this.$15=!0;var i=e.config,n=e.mpd,a=e.playbackState,s=e.bufferingDetector,o=e.video;e=e.loggerProvider,this.$1=i,this.$2=n,this.$3=a,i.getNumber("steadystate_minbuffer_buckets")>0&&(this.$7=new(r("oz-player/playback_controls/OzSteadyStateManager"))(this.$1.getNumber("steadystate_minbuffer_buckets"),this.$1.getNumber("steadystate_minbuffer_buckets_sec"))),null!=s&&(this.$8.addSubscriptions(s.addListener("enterBuffering",function(e){"in_play"===e&&(t.$9=0,null==(e=t.$7)||e.reset()),t.$11=!1,null==(e=t.$6)||e.log(),t.$6=null})),this.$8.addSubscriptions(s.addListener("leaveBuffering",function(){0===t.$9&&(t.$9=Date.now()),t.$11=!1}))),this.$4=o,this.$5=e,this.$16()&&this.$8.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"timeupdate",r("oz-player/shims/ozThrottle")(function(){t.$17(),t.$18()},this.$1.getNumber("playhead_manager_timeupdate_throttle_ms"))),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"waiting",function(){t.$17()
}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"durationchange",function(){t.$17()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"seeking",function(){var e;t.$14=Date.now(),t.$12=null,null==(e=t.$7)||e.reset()}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$4,"playing",function(){t.$14=Date.now(),t.$12=null}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(o,"pause",function(){var e;return null==(e=t.$7)?void 0:e.reset()}))}var t=e.prototype;return t.enabled=function(){var e=this.$1.getNumber("catchup_timeout_after_buffering_sec");return 0===e||null==this.$9||0!==this.$9&&this.$9+1e3*e<=Date.now()},t.isBehindPreferredLiveHeadLatencyWithTolerance=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()-this.getPreferredLiveHeadLatencyToleranceSec()},t.$19=function(){return this.$3.getCurrentTime()<this.getInitialPlayHeadPosition()},t.$20=function(){var e;return e=null==(e=this.$7)?void 0:e.min(),!this.$21()&&null!=e&&e>this.$1.getNumber("steadystate_minbuffer_sec")},t.getInitialPlayHeadPosition=function(){return this.getLiveHeadTimeSec()-this.getPreferredLiveHeadLatencySec()},t.getLiveHeadTimeSec=function(){var e=this.$22();return(null==e?void 0:null==(e=e.getEndingSegment())?void 0:e.getTimeRange().endTime)||0},t.$21=function(){return null!=this.$9&&this.$1.getBool("latencymanager_stalled_edgelatency_sec_on")},t.getPreferredLiveHeadLatencySec=function(){var e=this.$21()?this.$1.getNumber("latencymanager_stalled_edgelatency_sec"):this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec");return e=this.$23(e),this.$5.getOperationLogger("latency_manager").setPreferredEdgeLatency(1e3*e),e},t.getPreferredLiveHeadLatencyToleranceSec=function(){return this.$1.getNumber("pdash_download_cursor_catchup_tolerance_sec")},t.shouldEnableManifestTimeRangeCatchup=function(){return!this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")},t.shouldEnableCursorBasedCatchup=function(){var e=this.$2.getVideoRepresentations()[0];return(e=e&&e.canPredict())&&this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")>0},t.setEnableCatchup=function(e){!this.$15&&!0===e&&(this.$9=null),this.$15=e},t.$24=function(e,t,r){var i=this.$1.getNumber("playback_speed_min_sharpness_factor");return 1-e+(r=2*e/(1+Math.pow(Math.E,-(r-t)*i)))},t.$16=function(){return this.$1.getNumber("playback_speed_latency_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate")>0||this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate")>0},t.$17=function(){var e,t=i("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(i("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1).bufferAheadSec;null==(e=this.$7)||e.addSample(t)},t.$18=function(){var e=i("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(i("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$4.buffered),this.$3.getCurrentTime(),this.$1),t=e.bufferAheadSec;e=e.bufferedOffset,this.$25(t,e)},t.$25=function(e,t){var r=this.$1.getNumber("playback_speed_enabled_delay_sec"),i=this.$1.getNumber("playback_speed_min_buffer_sec");e>i&&(this.$11=!0);var n,a=this.$1.getNumber("playback_speed_min_duration_sec"),s=this.$1.getNumber("playback_speed_restore_min_duration_sec"),o=this.$1.getNumber("playback_speed_latency_adjustment_rate"),u=this.$1.getNumber("playback_speed_latency_slowdown_adjustment_rate"),l=this.$1.getNumber("playback_speed_latency_speedup_adjustment_rate");0===this.$4.playbackRate?(this.$10=null,null==(n=this.$6)||n.log(),this.$6=null):this.$15&&this.$11&&e<i&&(o>0||u>0)&&0===t&&(0===r||null!=this.$14&&this.$14+1e3*r<Date.now())?(n=u>0?1-u:this.$24(o,i,e),null==this.$6&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("slow").setUserInfo({newPlaybackRate:String(n),oldPlaybackRate:String(this.$4.playbackRate)})),this.$26(n)):this.$15&&this.$11&&(this.$19()||this.$20())&&l>0&&0===t&&(null==this.$13||this.$13+1e3*s<Date.now())&&(0===r||null!=this.$14&&this.$14+1e3*r<Date.now())?(u=1+l,null==this.$6&&(this.$6=this.$5.getOperationLogger("latency_manager").start().setInitiator("speed_adjustment").setReason("fast").setUserInfo({newPlaybackRate:String(u),oldPlaybackRate:String(this.$4.playbackRate)})),this.$26(u)):(!1===this.$15||null==this.$12||this.$12+1e3*a<Date.now())&&(o=this.$4.playbackRate,this.$4.playbackRate=1,null==(i=this.$6)||i.log(),this.$6=null,o!==this.$4.playbackRate&&(this.$13=Date.now()))},t.$26=function(e){try{this.$4.playbackRate=e,this.$12=Date.now()}catch(t){null==(e=this.$6)||e.setError(t).setResult("failed").log(),this.$6=null}},t.$22=function(){var e=this.$2.getVideoRepresentations().concat(this.$2.getAudioRepresentations());return 0===e.length?null:e.reduce(function(e,t){var r;return((null==(r=e.getEndingSegment())?void 0:r.getTimeRange().endTime)||0)>((null==(r=t.getEndingSegment())?void 0:r.getTimeRange().endTime)||0)?e:t})},t.$23=function(e){var t;if(e<=0)return e;var r=this.$22();return(t=null==r?void 0:null==(t=r.getEndingSegment())?void 0:t.getTimeRange())&&(r=null==r?void 0:null==(r=r.getSegmentByTime((null==t?void 0:t.endTime)-e))?void 0:r.getTimeRange())?(null==t?void 0:t.endTime)-(null==r?void 0:r.startTime):e},t.destroy=function(){this.$8.release()},e}(),s["default"]=e},98),__d("oz-player/playback_controls/OzPlaybackTimeRangeManager",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzBufferingUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){var t=this;this.$4=null,this.$5=0,this.$6=0,this.$7=!0,this.$8=0,this.$9=0,this.$10=!1,this.$12=0,this.$13=0,this.$15=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$17=function(){t.$10!=t.$14.isPlaying()&&(t.$14.isPlaying()&&(t.$11=Date.now()),t.$10=t.$14.isPlaying())};var i=e.video,n=e.config,a=e.mpd,s=e.liveheadFallBehindBlockThreshold,o=e.liveheadFallBehindBlockMargin,u=e.playbackState;e=e.perfLoggerProvider,this.$1=n,this.$2=i,this.$3=a,this.$8=s,this.$9=o,this.$14=u,this.$16=e,0!==this.$1.getNumber("catchup_timeout_after_play_sec")&&this.$15.addSubscriptions(this.$14.addEventListener("play",this.$17),this.$14.addEventListener("pause",this.$17))}var t=e.prototype;return t.setTimelineBlockingEnabled=function(e){this.$7=e,this.$7||this.$3.unblockTimeRange()},t.setTimeRangeProvider=function(e){var t=this;null!=this.$4&&this.$4.remove(),this.$4=e.addUpdateListener(function(){var r=e.getTimeRanges(),i=0;0!==r.length&&(i=(r=r[r.length-1]).endTime),t.$18(i)})},t.$18=function(e){var t;if(this.$7&&this.$5!==e&&(this.$5=e,!(this.$2.currentTime<=this.$6))){e=this.$1.getBool("catchup_use_timeline_range_end_time_as_end")?e:this.$2.duration;var r=0!==this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold")?this.$1.getNumber("overwrite_livehead_fall_behind_block_threshold"):this.$8,n=0!==this.$1.getNumber("overwrite_live_time_range_block_margin")?this.$1.getNumber("overwrite_live_time_range_block_margin"):this.$9;if(this.$17(),this.$1.getBool("reset_catchup_timeout_after_play_sec_on_overwrite")&&(this.$13!=n||this.$12!=r)&&(this.$13=n,this.$12=r,this.$11=Date.now()),(t=0===this.$1.getNumber("catchup_timeout_after_play_sec")||Date.now()-(null!=(t=this.$11)?t:0)<1e3*this.$1.getNumber("catchup_timeout_after_play_sec"))&&0===this.$1.getNumber("pdash_download_cursor_catchup_threshold_sec")&&0!==n&&0!==r&&e-this.$2.currentTime>r){for(t=[],r=0;r<this.$2.buffered.length;r++)t.push({startTime:this.$2.buffered.start(r),endTime:this.$2.buffered.end(r)});r=i("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(this.$2.currentTime,t),this.$6=this.$2.currentTime+Math.min(r,n),t={startTime:this.$6,endTime:e-n},this.$16.getOperationLogger("latency_manager").setInitiator("time_range_manager").setReason("blocked_range").setLength(t.endTime-t.startTime).setUserInfo({blockedRangeStart:String(t.startTime),blockedRangeEnd:String(t.endTime)}).log(),this.$3.blockTimeRange(t)}}},t.destroy=function(){null!=this.$4&&(this.$4.remove(),this.$4=null),this.$15.release()},e}(),s["default"]=e},98),__d("oz-player/strategies/LiveheadSeekaheadStrategy",[],function(e,t,r,i,n,a){"use strict";function e(e,t){return(t=Math.max.apply(Math,t.map(function(e){return e.startTime})))-e>0?t-e+s:0}var s=.05;a.computeSeekAhead=e},66),__d("oz-player/utils/OzTimelineGapUtil",["oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],function(e,t,r,i,n,a,s){"use strict";function e(e,t,r,n){return t=t.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),-1===i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(r,e,t,n)}function t(e,t,r,n,a){void 0===a&&(a=o);var s=t.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}});return-1!==(r=i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(r,e,s,n))&&(s=t[r],i("oz-player/utils/OzNumericalHelper").lessThanOrEqual(e,s.endTime)&&s.endTime-e<a)}var o=1.5;s.isInGap=e,s.isNearGap=t},98),__d("oz-player/playback_controls/OzPlayheadManager",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/shims/ozvariant","oz-player/strategies/LiveheadSeekaheadStrategy","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzSourceBufferUtil","oz-player/utils/OzTimelineGapUtil"],function(e,t,r,i,n,a,s){"use strict";var o=function(){function e(e){this.$1=e.perfLoggerProvider,this.$2=e.video,this.$4=e.config}return e.prototype.markState=function(e,t){var r=i("oz-player/utils/OzSourceBufferUtil").convertToBufferedTimeRangeArray(this.$2.buffered),n=this.$3;if(null!=n){var a=i("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(r,t.getCurrentTime(),this.$4);-1!==(n=i("oz-player/utils/OzSourceBufferUtil").getBufferAheadInBufferedRanges(n,t.getCurrentTime(),this.$4)).bufferedOffset&&-1===a.bufferedOffset&&this.$1.getOperationLogger("playhead_adjustment").setError("buffer_deleted").setResult("failed").setUserInfo({vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null}).setInitiator(e).log(),this.$3=r}else this.$3=r},e}(),u=function(){function e(e){this.$5=!1,this.$6={},this.$1=e.perfLoggerProvider,this.$2=e.video}return e.prototype.markState=function(e,t){var r=this;if(this.$2.paused)return this.$3=null,this.$4=null,this.$5=!1,void(this.$6={});(null==this.$3||this.$2.currentTime>this.$3)&&(this.$4=Date.now(),this.$3=this.$2.currentTime,this.$5=!1,this.$6={}),this.$6[e]=null==this.$6[e]?1:this.$6[e]+1;var i=this.$4;if(!this.$5&&!this.$2.paused&&null!=i&&i+1e4<Date.now()){this.$5=!0;var n={};Object.keys(this.$6).forEach(function(e){n[e]=String(r.$6[e])}),this.$1.getOperationLogger("playhead_adjustment").setError("not_advancing").setResult("failed").setLength(Date.now()-i).setUserInfo(babelHelpers["extends"]({},n,t,{lastCurrentTime:String(this.$3),lastCurrentTimeChanged:String(i-Date.now()),vidSeeking:String(this.$2.seeking),vidErrCode:this.$2.error?String(this.$2.error.code):null})).setInitiator(e).log()}},e}();e=function(e){function t(t){var n;(n=e.call(this)||this).$OzPlayheadManager2=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPlayheadManager3=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPlayheadManager4=new Set,n.$OzPlayheadManager10=new Set,n.$OzPlayheadManager12=function(e){n.$OzPlayheadManager1.currentTime=e},n.$OzPlayheadManager14=!1,n.$OzPlayheadManager15=!1,n.$OzPlayheadManager16=!0,n.$OzPlayheadManager17=!1,n.$OzPlayheadManager23=function(e,t){if(void 0===t&&(t=null),null==n.$OzPlayheadManager20||n.$OzPlayheadManager20.shouldEnableManifestTimeRangeCatchup()){var r=n.$OzPlayheadManager9;if(r&&r.isEnabled(n.$OzPlayheadManager1,n.$OzPlayheadManager8)&&"number"==typeof(r=r.computeNewPlayheadPosition(n.$OzPlayheadManager1,n.$OzPlayheadManager8)))n.$OzPlayheadManager27(r,"live_catch_up_strategy",e,t);else if(0!==(r=n.$OzPlayheadManager6.getNumber("auto_seek_playhead_slack"))){var a=n.$OzPlayheadManager5;if(a){var s=n.$OzPlayheadManager7.getCurrentTime(),o=a.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),u=i("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(s,o);(i("oz-player/utils/OzTimelineGapUtil").isNearGap(s,a.getTimeRanges(),n.$OzPlayheadManager6)||i("oz-player/utils/OzTimelineGapUtil").isInGap(s,a.getTimeRanges(),n.$OzPlayheadManager6))&&-1!==u&&(s=o[u],n.$OzPlayheadManager27(s.rangeStart+r,"jump_over_timeline_gap",e,t))}}}};var a=t.video,s=t.mpd,l=t.playheadCatchup,h=t.playbackState,d=t.config,c=t.perfLoggerProvider,p=t.seekHandler,f=t.initialPlaybackPosition,g=t.canSupportSkipVideobufferGaps,m=t.liveLatencyManager;return t=t.dynamicVideoLibrary,n.$OzPlayheadManager1=a,n.$OzPlayheadManager6=d,n.$OzPlayheadManager7=h,n.$OzPlayheadManager8=s,n.$OzPlayheadManager9=l,n.$OzPlayheadManager11=c,p&&(n.$OzPlayheadManager12=p),n.$OzPlayheadManager17=g,n.$OzPlayheadManager20=m,n.$OzPlayheadManager13=f,n.$OzPlayheadManager21=t,n.$OzPlayheadManager18=new u({video:a,perfLoggerProvider:c}),n.$OzPlayheadManager19=new o({video:a,perfLoggerProvider:c,config:d}),n.$OzPlayheadManager2.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"durationchange",function(){n.setPlaybackPositionOnFirstDurationChange("durationchange",n.$OzPlayheadManager1.duration),n.$OzPlayheadManager23("durationchange"),n.$OzPlayheadManager24("durationchange")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"pause",function(){n.$OzPlayheadManager23("pause")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"play",function(){n.$OzPlayheadManager23("play")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"playing",function(){n.$OzPlayheadManager23("playing")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"waiting",function(){n.$OzPlayheadManager23.bind(babelHelpers.assertThisInitialized(n),"waiting"),n.$OzPlayheadManager24("waiting")}),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"timeupdate",r("oz-player/shims/ozThrottle")(function(){n.$OzPlayheadManager23("timeupdate"),n.$OzPlayheadManager6.getBool("playhead_manager_buffered_timerange_update_on_timeupdate")&&n.$OzPlayheadManager24("timeupdate")},n.$OzPlayheadManager6.getNumber("playhead_manager_timeupdate_throttle_ms"))),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadManager1,"seeking",function(){n.$OzPlayheadManager22=Date.now()})),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.$OzPlayheadManager25=function(){return 0===this.$OzPlayheadManager1.playbackRate},n.observeSourceBufferState=function(e,t){var i=this;this.$OzPlayheadManager4.has(e)&&r("oz-player/shims/ozvariant")(0,4179),this.$OzPlayheadManager4.add(e),this.$OzPlayheadManager2.addSubscriptions(e.addEventListener("buffer_updated",function(){i.$OzPlayheadManager26(e,t),i.$OzPlayheadManager6.getBool("skip_videobuffer_gaps_on_buffer_updated")&&i.$OzPlayheadManager17&&i.$OzPlayheadManager24("buffer_updated")}))},n.$OzPlayheadManager26=function(e,t){var r=[];this.$OzPlayheadManager4.forEach(function(e){(e=e.getBufferedRanges()).length&&r.push(e[0])}),r.length>0&&this.$OzPlayheadManager10.add(e),e=this.$OzPlayheadManager1.currentTime,e=i("oz-player/strategies/LiveheadSeekaheadStrategy").computeSeekAhead(e,r);var n=this.$OzPlayheadManager6.getNumber("timeline_offset_threshold");e>0&&(0===n||e<n)&&this.$OzPlayheadManager27(this.$OzPlayheadManager1.currentTime+e,"first_available_buffer","source_buffer",t)},n.setTimeRangeProvider=function(e){var t=this;this.$OzPlayheadManager3.release(),this.$OzPlayheadManager3.engage(),this.$OzPlayheadManager3.addSubscriptions(e.addUpdateListener(function(){t.$OzPlayheadManager23("time_range_updated")})),this.$OzPlayheadManager5=e,this.$OzPlayheadManager23("time_range_set")},n.resetCurrentTime=function(){this.$OzPlayheadManager15=!1,this.setPlaybackPositionOnFirstDurationChange("reset",this.$OzPlayheadManager1.duration)},n.setPlaybackPositionOnFirstDurationChange=function(e,t){if(0!==this.$OzPlayheadManager13&&!this.$OzPlayheadManager15&&!isNaN(t)&&t!==Infinity){var r;if(t=this.$OzPlayheadManager13>0?this.$OzPlayheadManager13:t+this.$OzPlayheadManager13,null!=this.$OzPlayheadManager20)t=null==(r=this.$OzPlayheadManager20)?void 0:r.getInitialPlayHeadPosition();this.$OzPlayheadManager15=!0,this.$OzPlayheadManager6.getBool("playhead_manager_clamp_initial_playback_position")&&null!=(r=null==(r=this.$OzPlayheadManager5)?void 0:r.getTimeRanges())&&r.length>0&&r[0].startTime>t&&(t=r[0].startTime),this.$OzPlayheadManager27(t,"initial_playback_position",e),this.emit("initialPlaybackPositionSet",t)}},n.$OzPlayheadManager24=function(e){var t,r,n=this;if(this.$OzPlayheadManager6.getBool("skip_videobuffer_gaps")&&this.$OzPlayheadManager17){var a=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_auto_seek_playhead_slack");if(0!==a){for(var s=this.$OzPlayheadManager7.getCurrentTime(),o=[],u=0;u<this.$OzPlayheadManager1.buffered.length;u++)o.push({startTime:this.$OzPlayheadManager1.buffered.start(u),endTime:this.$OzPlayheadManager1.buffered.end(u)});u=o.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),this.$OzPlayheadManager19&&this.$OzPlayheadManager19.markState(e,this.$OzPlayheadManager7);var l=i("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(s,u),h=i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager6,s,u),d=this.$OzPlayheadManager16?0:this.$OzPlayheadManager6.getNumber("skip_videobuffer_gaps_max_gap_size_sec"),c=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_is_near_gap_threshold"),p=this.$OzPlayheadManager6.getNumber("playhead_manager_buffered_numerical_error"),f=null!=(t=null==(t=this.$OzPlayheadManager21)?void 0:t.getLastSegmentStartPTS())?t/1e3:null,g=null==(r=this.$OzPlayheadManager21)?void 0:r.getLast200RequestedUrlDecisionMinTime(),m=(r=null!=f?i("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$OzPlayheadManager6,f,u):-1)>=0?u[r]:null,$=function(t){var r=null==n.$OzPlayheadManager22||null==g||n.$OzPlayheadManager22<g;return!r&&null!=t&&n.$OzPlayheadManager11.getOperationLogger("playhead_adjustment").setError("ignore_before_seek_main_"+t).setResult("failed").setInitiator(e).setUserInfo({last200RequestedUrlDecisionMinTime:String(g),lastSeekTime:String(n.$OzPlayheadManager22)}).log(),r};if(null!=f&&this.$OzPlayheadManager25()&&0==this.$OzPlayheadManager16&&$("buf")){if(f<s&&null!=m&&m.rangeStart<=f&&null!=m.rangeEnd&&m.rangeEnd>f)return void this.$OzPlayheadManager27(f,"reverse_jump_over_buffer_gap",e,null,{lastSegmentStartPTS:String(t),last200RequestedUrlDecisionMinTime:String(g),lastSeekTime:String(this.$OzPlayheadManager22)});if(null!=m&&r!=h)return void this.$OzPlayheadManager27(m.rangeStart,"jump_over_buffer_gap_last_dl_range",e,null,{lastSegmentStartPTS:String(t),last200RequestedUrlDecisionMinTime:String(g),lastSeekTime:String(this.$OzPlayheadManager22)})}if((i("oz-player/utils/OzTimelineGapUtil").isNearGap(s,o,this.$OzPlayheadManager6,p,c)||i("oz-player/utils/OzTimelineGapUtil").isInGap(s,o,this.$OzPlayheadManager6,p))&&-1!==l&&(0===d||u[l].rangeStart-s<d)&&(1==this.$OzPlayheadManager16||$("main")))return f=u[l],void this.$OzPlayheadManager27(f.rangeStart+a,"jump_over_buffer_gap",e,null,{lastSegmentStartPTS:String(t),last200RequestedUrlDecisionMinTime:String(g),lastSeekTime:String(this.$OzPlayheadManager22)});this.$OzPlayheadManager18&&this.$OzPlayheadManager18.markState(e,{nextBufferedRangeIndex:String(l),limitMaxGapSize:String(d),rangeStart:-1!==l?String(u[l].rangeStart):null,isNearGapThreshold:String(c),numericalError:String(p)})}}},n.setEnableLiveheadCatchup=function(e){this.$OzPlayheadManager16=e},n.destroy=function(){this.$OzPlayheadManager2.release(),this.$OzPlayheadManager3.release(),this.$OzPlayheadManager4.clear()},n.$OzPlayheadManager27=function(e,t,r,i,n){var a=e-this.$OzPlayheadManager1.currentTime,s=this.$OzPlayheadManager6.getNumber("seek_ahead_epsilon");s>0&&Math.abs(a)<=s||(this.$OzPlayheadManager11.getOperationLogger("playhead_adjustment").setLength(Math.round(1e3*e)).setReason(t).setInitiator(r).setType(i).setUserInfo(babelHelpers["extends"]({},n,{seekAdjustment:String(Math.round(1e3*a))})).log(),this.$OzPlayheadManager12(e),"initial_playback_position"===t&&(this.$OzPlayheadManager14=!0))},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/shims/www/OzUuidWWW",["uuid"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("uuid")},98),__d("oz-player/shims/OzUuid",["oz-player/shims/www/OzUuidWWW"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/shims/www/OzUuidWWW")},98),__d("oz-player/states/OzObservedPlaybackState",["oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/shims/OzDOMEventListener","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,n){var a=this;void 0===n&&(n=new(i("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)([])),this.$2=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=function(){a.$3.getOperationLogger("pause").setState("paused").log()},this.$5=function(){a.$3.getOperationLogger("playing").setState("playing").log()},this.$1=t,this.$3=n,this.$2.addSubscriptions(r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"pause",this.$4),r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,"playing",this.$5))}var t=e.prototype;return t.isPlaying=function(){return!this.$1.paused},t.getCurrentTime=function(){return this.$1.currentTime},t.getCurrentTimeUpdateTime=function(){return Date.now()},t.getDuration=function(){return this.$1.duration},t.addEventListener=function(e,t){return r("oz-player/shims/OzDOMEventListener").listenDOMEvent(this.$1,e,t)},t.destroy=function(){this.$2.release()},e}(),s["default"]=e},98),__d("oz-player/utils/OzPositionToViewportUtils",[],function(e,t,r,i,n,a){"use strict";function e(e,t,r){return(t=t.filter(function(e){if(null==(e=e.position))return!1;var t=e.y-window.scrollY;return t>=0||(e.height+t)/e.height>r}).sort(function(e,t){return null==e.position||null==t.position?0:e.position.y-t.position.y})).findIndex(function(t){return t.video===e})}a.determinePositionIndexOfVideoFromViewportVertically=e},66),__d("oz-player/states/OzPositionToViewportTracker",["oz-player/shims/OzEventEmitter","oz-player/utils/OzPositionToViewportUtils"],function(e,t,r,i,n,a,s){"use strict";var o=null,u=.5;e=function(e){function t(t){var r;return(r=e.call(this)||this).$OzPositionToViewportTracker1=[],r.$OzPositionToViewportTracker5=function(e){e.forEach(function(e){var t=r.$OzPositionToViewportTracker1.find(function(t){return e.target===t.video});null!=t&&(e.isIntersecting?t.position=r.$OzPositionToViewportTracker7(e):r.$OzPositionToViewportTracker1.map(function(t){e.target===t.video&&(t.position=null)})),r.$OzPositionToViewportTracker1.forEach(function(e){e.positionIndexToViewportVertically=r.$OzPositionToViewportTracker6(e.video)})}),r.emit("state_changed")},r.$OzPositionToViewportTracker2=t,r}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.$OzPositionToViewportTracker4=function(){null==this.$OzPositionToViewportTracker3&&(this.$OzPositionToViewportTracker3=new IntersectionObserver(this.$OzPositionToViewportTracker5,{rootMargin:this.$OzPositionToViewportTracker2.getNumber("pixels_above_viewport_to_observe")+"px 0px "+this.$OzPositionToViewportTracker2.getNumber("pixels_below_viewport_to_observe")+"px 0px",threshold:0}))},r.registerVideo=function(e){this.$OzPositionToViewportTracker1.push({video:e,position:null,positionIndexToViewportVertically:-1}),this.$OzPositionToViewportTracker4(),null!=this.$OzPositionToViewportTracker3&&this.$OzPositionToViewportTracker3.observe(e)},r.getPositionIndexOfVideoFromViewportVertically=function(e){var t=this.$OzPositionToViewportTracker1.find(function(t){return t.video===e});return null!=t?t.positionIndexToViewportVertically:-1},r.$OzPositionToViewportTracker6=function(e){return i("oz-player/utils/OzPositionToViewportUtils").determinePositionIndexOfVideoFromViewportVertically(e,this.$OzPositionToViewportTracker1,u)},r.$OzPositionToViewportTracker7=function(e){return{x:(e=e.boundingClientRect).x+window.scrollX,y:e.y+window.scrollY,width:e.width,height:e.height}},t.getInstance=function(e){return null==o&&(o=new t(e)),o},r.unregisterVideo=function(e){var t=this,r=[];this.$OzPositionToViewportTracker1.forEach(function(i){i.video===e&&null!=t.$OzPositionToViewportTracker3?t.$OzPositionToViewportTracker3.unobserve(e):r.push(i)}),this.$OzPositionToViewportTracker1=r,0===this.$OzPositionToViewportTracker1.length&&null!=this.$OzPositionToViewportTracker3&&(this.$OzPositionToViewportTracker3.disconnect(),this.$OzPositionToViewportTracker3=null)},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/states/OzPositionToViewport",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzPositionToViewportTracker"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,i){var n;return(n=e.call(this)||this).$OzPositionToViewport1=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPositionToViewport3=t,n.$OzPositionToViewport2=r("oz-player/states/OzPositionToViewportTracker").getInstance(i),n.$OzPositionToViewport2.registerVideo(t),n.$OzPositionToViewport1.addSubscriptions(n.$OzPositionToViewport2.addListener("state_changed",function(){n.emit("state_changed")})),n}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.getPositionIndexOfVideoFromViewportVertically=function(){return null!=this.$OzPositionToViewport3?this.$OzPositionToViewport2.getPositionIndexOfVideoFromViewportVertically(this.$OzPositionToViewport3):-1},i.destroy=function(){null!=this.$OzPositionToViewport3&&this.$OzPositionToViewport2.unregisterVideo(this.$OzPositionToViewport3),this.$OzPositionToViewport3=null},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzPlaybackConfidenceUtils",[],function(e,t,r,i,n,a){"use strict";function e(e,t,r,i,n){return r=1+(1-Math.min(1,r/i))*n,(i=e.getBandwidth()*r)>t?s*(t/i):1-(1-s)*i/t}var s=.8;a.getPlaybackConfidence=e},66),__d("oz-player/strategies/OzAbrManager",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzPlaybackConfidenceUtils","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,r,i,n,a,s,o){this.$2=0,this.$3=Date.now(),this.$4=!1,this.$10=null,this.$1=e,this.$5=t,this.$6=this.$14(t,r),this.$7=i,this.$8=n,this.$11=a,this.$12=s,this.$13=o}var t=e.prototype;return t.setSourceBuffer=function(e){this.$9=e},t.$14=function(e,t){var r=this.$1.getNumber("abr_restrict_from_index"),i=this.$1.getNumber("abr_restrict_to_index");if(0===i&&0===r)return t;var n=t.findIndex(function(t){return e.getID()===t.getID()});return-1===n?t:t.filter(function(e,t){return t-n>=r&&t-n<=i})},t.$15=function(e){return e=i("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(this.$1,e,this.$12(),this.$11),e=i("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$1,this.$7,this.$12(),e)},t.getBestRepresentation=function(e){e=null!=(e=null==e?void 0:e.length)?e:null;var t=i("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates(this.$9,this.$8),n=i("oz-player/utils/OzAbrUtils").getReasonToPreventEvaluation(this.$1,this.$4,t,r("oz-player/networks/OzBandwidthEstimator").getSampleCount(),this.$2,this.$3);if(null!=n)return this.$10=n,this.$5;n=Date.now(),this.$2=n;var a=r("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig()),s=this.$15(this.$6);return a=this.$16(s,a,t,e),e=s[0],a=a||e,this.$17(t,a)?(this.$10="high_buffer",this.$5):(this.$5!==a&&(this.$4=!0,this.$3=n,this.$5=a),this.$10="bandwidth",a)},t.$16=function(e,t,r,n){void 0===n&&(n=null);for(var a=null,s=0;s<e.length;s++){i("oz-player/strategies/OzPlaybackConfidenceUtils").getPlaybackConfidence(e[s],t,r,this.$1.getNumber("low_buffer_bandwidth_target_threshold"),this.$1.getNumber("low_buffer_bandwidth_target_increase_factor"),n)>this.$1.getNumber("abr_confidence_threshold")&&(!a||a.getBandwidth()<e[s].getBandwidth())&&(a=e[s])}return a},t.$17=function(e,t){var r=this.$1.getNumber("abr_prevent_down_switch_buffer_threshold");return r>0&&e>=r&&this.$5.getBandwidth()>t.getBandwidth()},t.getLastEvaluationReason=function(){return this.$10},t.updateRepresentations=function(e){var t=this;this.$6=e,e=this.$6.find(function(e){return e.getQualityLabel()===t.$5.getQualityLabel()}),this.$5=null!=(e=e)?e:this.$6[0]},e}(),s["default"]=e},98),__d("oz-player/strategies/OzAudioIBRManager",["oz-player/networks/OzBandwidthEstimator"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t}return e.prototype.getInitialAudioRepresentation=function(e){var t=r("oz-player/networks/OzBandwidthEstimator").getAdjustedBandwidth(this.$1.getLegacyConfig());(e=e.slice(0)).sort(function(e,t){return e.getBandwidth()-t.getBandwidth()});var i=this.$1.getNumber("live_audio_ibr_bandwidth_percentage");i*=t;for(var n=e.length-1;n>=0;n--)if(e[n].getBandwidth()<=i)return this.$2.getOperationLogger("audio_ibr_success").setRepresentationID(e[n].getID()).setReason(t.toString()).log(),e[n];return this.$2.getOperationLogger("audio_ibr_no_op").setReason(t.toString()).log(),null},e}(),s["default"]=e},98),__d("oz-player/strategies/getSegmentsCount",[],function(e,t,r,i,n,a){"use strict";function e(e,t,r,i){for(var n=0,a=e.getTimeRange().startTime,s=(e=e).getTimeRange().startTime;null!==e&&s<r+a;){var o=s;if(n++,!(e=t.getSegmentAfter(e)))break;if((s=e.getTimeRange().startTime)<=o)return i}return Math.max(n,1)}a["default"]=e},66),__d("oz-player/strategies/OzStaticStreamSegmentsStrategy",["oz-player/strategies/getSegmentsCount"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!0},t.getSegmentsCount=function(e,t,i){e=this.$1.getNumber("seconds_to_stream");var n=this.$1.getNumber("segments_to_stream");return e>0&&(n=r("oz-player/strategies/getSegmentsCount")(t,i,e,n)),n},e}(),s["default"]=e},98),__d("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy",["oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/getSegmentsCount"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t,this.$3=new(r("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(e)}var t=e.prototype;return t.isActive=function(){return!0},t.getSegmentsCount=function(e,t,i){var n=r("oz-player/networks/OzBandwidthEstimator").getBandwidth(this.$1.getLegacyConfig()),a=r("oz-player/networks/OzBandwidthEstimator").getStandardDeviationOfBandwidth(),s=this.$1.getNumber("bandwidth_boundary_standard_deviation_factor"),o=this.$2.some(function(e){return e=e.getBandwidth(),Math.abs(e-n)<a*s});return o=o?this.$4(e,t,i):this.$3.getSegmentsCount(e,t,i),e=this.$5(t,n),Math.min(o,e)},t.$4=function(e,t,i){e=this.$1.getNumber("seconds_to_stream_near_bandwidth_boundary");var n=this.$1.getNumber("segments_to_stream_near_bandwidth_boundary");return e>0&&(n=r("oz-player/strategies/getSegmentsCount")(t,i,e,n)),n},t.$5=function(e,t){var r=Infinity;if(e=e.getByteRange()){var i=e.endByte;if(null!=i){var n=this.$1.getNumber("per_stream_duration_target");i-=e.startByte,n>1e-5&&0!==i&&(r=Math.ceil(n*t/(8*i)))}}return r},e}(),s["default"]=e},98),__d("oz-player/strategies/OzBlockedRepresentationsManager",["oz-player/shims/OzEventEmitter","oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/utils/OzError"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){this.$2=new Map,this.$3=new Set,this.$4=new Set,this.$5=new(r("oz-player/shims/OzEventEmitter")),this.$6(e),this.$7(e)}var t=e.prototype;return t.isBlocked=function(e){return this.$3.has(e)},t.handleError=function(e,t){return(null==this.$1||this.$3.size!==this.$1-1)&&(!!(t instanceof r("oz-player/utils/OzError")&&"OZ_NETWORK"===t.getType()&&(t=Number(t.getExtra().code),!isNaN(t)&&this.$2.has(t)))&&(this.$3.has(e)||this.$8(e,t),!0))},t.$8=function(e,t){var i,n=this;if(this.$3.add(e),null==(i=this.$5)||i.emit("representation_blocked",e),(i=this.$2.get(t)||0)>0){var a=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){n.$3["delete"](e),n.$4["delete"](a)},i);this.$4.add(a)}},t.applyRestriction=function(e){
var t=this;return e.filter(function(e){return!t.$3.has(e.getID())})},t.onRepresentationBlocked=function(e){return this.$5?this.$5.addListener("representation_blocked",e):{remove:function(){}}},t.setAvailableRepresentationsCount=function(e){this.$1=e},t.destroy=function(){null==(e=this.$5)||e.removeAllListeners(),this.$5=null;var e=this.$4,t=Array.isArray(e),i=0;for(e=t?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var n;if(t){if(i>=e.length)break;n=e[i++]}else{if((i=e.next()).done)break;n=i.value}n=n,r("oz-player/shims/ozClearTimeout")(n)}this.$4.clear()},t.$6=function(e){var t=this;try{e=JSON.parse(e.getString("block_representation_status_codes_json")),Array.isArray(e)&&e.forEach(function(e){e=parseInt(e,10),isNaN(e)||t.$2.set(e,-1)})}catch(e){}},t.$7=function(e){var t=this;try{e=JSON.parse(e.getString("block_representation_status_codes_temporarily_json")),Object.entries(e).forEach(function(e){var r=e[0];e=e[1],r=parseInt(r,10),e=parseInt(e,10),!isNaN(r)&&!isNaN(e)&&t.$2.set(r,e)})}catch(e){}},e}(),s["default"]=e},98),__d("oz-player/strategies/OzBufferAheadPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/utils/OzBufferingUtils"],function(e,t,r,i,n,a,s){"use strict";var o=6,u=1e3;e=function(e){function t(t,i){var n;return(n=e.call(this)||this).$OzBufferAheadPriorityStrategy3=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzBufferAheadPriorityStrategy5=function(){n.emit("state_changed")},n.$OzBufferAheadPriorityStrategy4=t,n.$OzBufferAheadPriorityStrategy1=i,n.$OzBufferAheadPriorityStrategy3.addSubscriptions(n.$OzBufferAheadPriorityStrategy1.addEventListener("progress",r("oz-player/shims/ozThrottle")(n.$OzBufferAheadPriorityStrategy5,u)),n.$OzBufferAheadPriorityStrategy1.addEventListener("timeupdate",r("oz-player/shims/ozThrottle")(n.$OzBufferAheadPriorityStrategy5,u))),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getName=function(){return"buffer_ahead"},n.setSourceBufferState=function(e){this.$OzBufferAheadPriorityStrategy2||(this.$OzBufferAheadPriorityStrategy2=e,this.$OzBufferAheadPriorityStrategy3.addSubscriptions(e.addEventListener("buffer_updated",r("oz-player/shims/ozThrottle")(this.$OzBufferAheadPriorityStrategy5,u))))},n.isActive=function(){return!0},n.getPriority=function(){var e=this.$OzBufferAheadPriorityStrategy2;if(!e)return 1;var t=this.$OzBufferAheadPriorityStrategy1.getCurrentTime();return e=e.getBufferedRanges(),(t=i("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(t,e))>=o?0:1},n.destroy=function(){this.$OzBufferAheadPriorityStrategy3.release()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzBufferAheadTargetStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!0},t.getBufferTarget=function(){return this.$1.getNumber("buffer_ahead_target")},e}(),a["default"]=e},66),__d("oz-player/strategies/OzBufferEndLimitStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(){return!0},t.getBufferTarget=function(){var e=this.$3();return this.$2>=e?this.$2-e:0},t.$3=function(){return 0===this.$1.buffered.length?0:this.$1.buffered.end(0)},e}(),a["default"]=e},66),__d("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(e){return!e.isPlaying()},t.getSegmentsCount=function(e,t,r){e=e.getCurrentTime();var i=this.$1.computeBufferTarget(),n=1,a=t;for(t=t.getTimeRange().startTime;null!==a&&t<i+e&&(a=r.getSegmentAfter(a));)t=a.getTimeRange().startTime,n++;return n},e}(),a["default"]=e},66),__d("oz-player/strategies/OzBufferTargetCalculator",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=0,this.$2=e,this.$3=t}var t=e.prototype;return t.computeBufferTarget=function(){var e=this.$1,t=this.$2,r=Array.isArray(t),i=0;for(t=r?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{if((i=t.next()).done)break;n=i.value}if((n=n).isActive()){e=n.getBufferTarget();break}}for(n=this.$3,r=0,n=(i=Array.isArray(n))?n:n["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(i){if(r>=n.length)break;t=n[r++]}else{if((r=n.next()).done)break;t=r.value}e=(t=t).adjustBufferTargetInSeconds(e)}return this.$1=e,e},t.handleEvent=function(e){var t=this.$3,r=Array.isArray(t),i=0;for(t=r?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var n;if(r){if(i>=t.length)break;n=t[i++]}else{if((i=t.next()).done)break;n=i.value}(n=n).handleEvent(e)}},e}(),a["default"]=e},66),__d("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e){var t=e.config;e=e.minimumBufferTargetSec,this.$2=1,this.$1=t,this.$3=e}var t=e.prototype;return t.adjustBufferTargetInSeconds=function(e){var t;return Math.max(null!=(t=this.$3)?t:this.$1.getNumber("buffer_target_constraint_minimum_sec"),e*this.$2)},t.handleEvent=function(e){var t=this.$2;switch(e){case"append_succeeded":t=Math.max(0,Math.min(1,t+this.$1.getNumber("buffer_target_constraint_append_succeeded_reward")));break;case"append_quota_exceeded":t=Math.max(0,Math.min(1,t-this.$1.getNumber("buffer_target_constraint_quota_exceeded_penalty")))}this.$2=t},e}(),a["default"]=e},66),__d("oz-player/strategies/OzPausedStreamSegmentsCountStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.isActive=function(){return!this.$1.isPlaying()},t.getSegmentsCount=function(){return this.$2.getNumber("paused_stream_segments_count")},e}(),a["default"]=e},66),__d("oz-player/strategies/OzPlayheadAtInterruptionDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";var o=1;e=function(e){function t(t,i){var n;return(n=e.call(this)||this).$OzPlayheadAtInterruptionDetector2=null,n.$OzPlayheadAtInterruptionDetector3=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPlayheadAtInterruptionDetector4=null,n.$OzPlayheadAtInterruptionDetector1=t,t=i?i.addListener("enterBuffering",function(){n.$OzPlayheadAtInterruptionDetector5()}):r("oz-player/shims/OzDOMEventListener").listenDOMEvent(n.$OzPlayheadAtInterruptionDetector1,"waiting",function(){n.$OzPlayheadAtInterruptionDetector5()}),n.$OzPlayheadAtInterruptionDetector3.addSubscriptions(t),n.$OzPlayheadAtInterruptionDetector4=i,n}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.notifyStreamInterrupted=function(e){this.$OzPlayheadAtInterruptionDetector2=e,this.$OzPlayheadAtInterruptionDetector5()},i.notifyStreamResumed=function(){this.$OzPlayheadAtInterruptionDetector2=null},i.$OzPlayheadAtInterruptionDetector5=function(){if(null!=this.$OzPlayheadAtInterruptionDetector2){var e=this.$OzPlayheadAtInterruptionDetector2||0;Math.abs(this.$OzPlayheadAtInterruptionDetector1.currentTime-e)<o&&this.emit("playheadAtInterruption",e)}},i.destroy=function(){this.$OzPlayheadAtInterruptionDetector3.release(),this.$OzPlayheadAtInterruptionDetector4=null},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzPlayingStatePriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t){var i;return(i=e.call(this)||this).$OzPlayingStatePriorityStrategy1=new(r("oz-player/shims/OzSubscriptionsHandler")),i.$OzPlayingStatePriorityStrategy3=function(){i.emit("state_changed")},i.$OzPlayingStatePriorityStrategy2=t,i.$OzPlayingStatePriorityStrategy1.addSubscriptions(i.$OzPlayingStatePriorityStrategy2.addEventListener("playing",i.$OzPlayingStatePriorityStrategy3),i.$OzPlayingStatePriorityStrategy2.addEventListener("play",i.$OzPlayingStatePriorityStrategy3),i.$OzPlayingStatePriorityStrategy2.addEventListener("pause",i.$OzPlayingStatePriorityStrategy3)),i}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.isActive=function(){return!0},i.getName=function(){return"playing_state"},i.setSourceBufferState=function(){},i.getPriority=function(){return this.$OzPlayingStatePriorityStrategy2.isPlaying()?1:0},i.destroy=function(){this.$OzPlayingStatePriorityStrategy1.release()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzPositionToViewportPriorityStrategy",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,i){var n;return(n=e.call(this)||this).$OzPositionToViewportPriorityStrategy3=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzPositionToViewportPriorityStrategy4=function(){n.emit("state_changed")},n.$OzPositionToViewportPriorityStrategy2=t,n.$OzPositionToViewportPriorityStrategy1=i,n.$OzPositionToViewportPriorityStrategy3.addSubscriptions(t.addListener("state_changed",n.$OzPositionToViewportPriorityStrategy4)),n}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.isActive=function(){return!0},i.getName=function(){return"position_to_viewport"},i.setSourceBufferState=function(){},i.getPriority=function(){var e=this.$OzPositionToViewportPriorityStrategy1.getNumber("prioritize_by_viewport_static_penalty"),t=this.$OzPositionToViewportPriorityStrategy2.getPositionIndexOfVideoFromViewportVertically();return e>0?-1===t?-1*e:0:-1===t?-Infinity:-1*t},i.destroy=function(){this.$OzPositionToViewportPriorityStrategy3.release()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzPriorityCalculator",["oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t){var i;return(i=e.call(this)||this).$OzPriorityCalculator2=new(r("oz-player/shims/OzSubscriptionsHandler")),i.$OzPriorityCalculator1=t,(t=i.$OzPriorityCalculator2).addSubscriptions.apply(t,i.$OzPriorityCalculator1.map(function(e){return e.addListener("state_changed",function(){i.emit("state_changed",i.compute(),e.getName())})})),i}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.setSourceBufferState=function(e){this.$OzPriorityCalculator1.forEach(function(t){return t.setSourceBufferState(e)}),this.emit("state_changed",this.compute(),"source_buffer")},i.compute=function(){var e=this.$OzPriorityCalculator1.reduce(function(e,t){return e+(t=t.isActive()?t.getPriority():0)},0);return Math.max(e,0)},i.destroy=function(){this.$OzPriorityCalculator2.release()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/strategies/OzSingleCodecRestriction",[],function(e,t,r,i,n,a){"use strict";function s(e){return e.getMimeCodecs().replace(/\..*$/,"")}e=function(){function e(){}return e.prototype.applyRestriction=function(e,t){if(e.length<=0)return e;var r="av01",i=(t=new Set(e.map(function(e){return s(e)}))).has(r)?r:t.values().next().value;return null==i?e:e.filter(function(e){return s(e)===i})},e}(),a["default"]=e},66),__d("oz-player/strategies/OzStaleManifestBufferTargetStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=t,this.$2=e}var t=e.prototype;return t.isActive=function(){return null==this.$2.getRefreshDate()&&this.$1.getNumber("stale_mpd_buffer_ahead_target")>0},t.getBufferTarget=function(){return this.$1.getNumber("stale_mpd_buffer_ahead_target")},e}(),a["default"]=e},66),__d("oz-player/strategies/OzStartupBufferTargetStrategy",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(e,t){this.$1=e,this.$3=t}var t=e.prototype;return t.isActive=function(){return this.$1.isPlaying()&&(this.$2=!0),!this.$2},t.getBufferTarget=function(){return this.$3.getNumber("pre_start_buffer_ahead_target")},e}(),a["default"]=e},66),__d("oz-player/strategies/OzStreamSegmentsCountCalculator",[],function(e,t,r,i,n,a){"use strict";var s=1;e=function(){function e(e){this.$1=e}return e.prototype.computeMin=function(e,t,r){var i=Number.MAX_VALUE,n=this.$1,a=Array.isArray(n),o=0;for(n=a?n:n["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var u;if(a){if(o>=n.length)break;u=n[o++]}else{if((o=n.next()).done)break;u=o.value}(u=u).isActive(e)&&(i=Math.min(i,u.getSegmentsCount(e,t,r)))}return i===Number.MAX_VALUE?s:Math.max(i,s)},e}(),a["default"]=e},66),__d("oz-player/strategies/OzSupportedMimeCodecsRestriction",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(){}return e.prototype.applyRestriction=function(e){return e.filter(function(e){return!!(e=MediaSource.isTypeSupported(e.getMimeCodecs()))})},e}(),a["default"]=e},66),__d("oz-player/streams/OzEndOfStreamWatcher",["oz-player/shims/OzEventEmitter","oz-player/shims/ozvariant"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,r){var i;return(i=e.call(this)||this).$OzEndOfStreamWatcher1=new Map,i.$OzEndOfStreamWatcher4=!1,i.$OzEndOfStreamWatcher2=t,i.$OzEndOfStreamWatcher3=r,i}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.registerMediaStream=function(e){this.$OzEndOfStreamWatcher1.has(e)&&r("oz-player/shims/ozvariant")(0,5191),this.$OzEndOfStreamWatcher1.set(e,!1)},i.notifyRepresentationSwitched=function(e){this.$OzEndOfStreamWatcher1.has(e)||r("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher5("end_of_stream_watcher","representation_switched")},i.notifyMediaStreamEnded=function(e){this.$OzEndOfStreamWatcher1.has(e)||r("oz-player/shims/ozvariant")(0,5192),this.$OzEndOfStreamWatcher1.set(e,!0),this.$OzEndOfStreamWatcher5("end_of_stream_watcher","media_stream_ended")},i.$OzEndOfStreamWatcher5=function(e,t){var r=this;this.$OzEndOfStreamWatcher3.getBool("do_not_end_stream")?!this.$OzEndOfStreamWatcher4&&this.$OzEndOfStreamWatcher6()&&(this.$OzEndOfStreamWatcher4=!0,this.emit("streamEnd")):"open"===this.$OzEndOfStreamWatcher2.getReadyState()&&this.$OzEndOfStreamWatcher6()&&this.$OzEndOfStreamWatcher2.notifyEndOfStream(e,t).then(function(){r.emit("streamEnd")})["catch"](function(){r.emit("streamEnd")})},i.$OzEndOfStreamWatcher6=function(){if(0===this.$OzEndOfStreamWatcher1.size)return!1;var e=this.$OzEndOfStreamWatcher1.values(),t=Array.isArray(e),r=0;for(e=t?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(t){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}if(!(i=i))return!1}return!0},i.destroy=function(){this.$OzEndOfStreamWatcher1.clear()},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/streams/OzHandleUserRepresentationSwitch",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzErrorEmitter"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n,a,s){var o=this;this.$2=new(r("oz-player/utils/OzErrorEmitter")),this.$5=null,this.$6=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$1=e,this.$3=t,this.$4=i,this.$7=n,this.$8=s,a.then(function(e){o.$5=e}),this.$6.addSubscriptions(n.addListener("switchRepresentation",function(e,t){o.$9(e,t)}))}var t=e.prototype;return t.cleanup=function(){this.$6.release(),this.$6.engage()},t.onError=function(e){return this.$2.onError(e)},t.$9=function(e,t){if("user"===e&&null!=(e=this.$5)){for(var r,i=this.$7.getRepresentationIDAtTime(this.$3.getCurrentTime()),n=0;n<this.$4.length;n++)this.$4[n].getID()===i&&(r=this.$4[n]);r&&t&&(this.$8||r.getBandwidth()<t.getBandwidth())&&(i=r.getSegmentByTime(this.$3.getCurrentTime()))&&e.clearRangeWithWait([{fromTime:this.$3.getCurrentTime(),toTime:this.$3.getDuration()}])["catch"](function(){})}},e}(),s["default"]=e},98),__d("oz-player/manifests/IOzSegment",[],function(e,t,r,i,n,a){"use strict";function e(e,t){return((null==e?void 0:e.getSequenceNumber())||0)===((null==t?void 0:t.getSequenceNumber())||0)}function t(e,t){return((null==e?void 0:e.getSequenceNumber())||0)>=((null==t?void 0:t.getSequenceNumber())||0)}a.isSequenceNumberEqual=e,a.isSequenceNumberGreaterOrEqual=t},66),__d("oz-player/networks/OzReadableStreamDataReader",["oz-player/networks/OzTransformStream","oz-player/utils/ozConcatUint8Arrays"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t){var r;return(r=e.call(this)||this).$OzReadableStreamDataReader1=[],r.$OzReadableStreamDataReader2=t,r}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.onDataWritten=function(e){this.$OzReadableStreamDataReader1.push(e)},i.onClose=function(){var e=this.$OzReadableStreamDataReader1,t=r("oz-player/utils/ozConcatUint8Arrays")(e);t=t.buffer,e.length=0,this.$OzReadableStreamDataReader2(t)},t}(r("oz-player/networks/OzTransformStream")),s["default"]=e},98),__d("oz-player/networks/OzStreamingTask",["oz-player/loggings/OzLoggingUtils","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/utils/OzError","oz-player/utils/OzNetworkRequestLoggingUtils"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i){this.$3=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),this.$5=!1,this.$9=null,this.$1=this.$2=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),this.$6=r("oz-player/shims/OzPerformance").now(),this.$7=t,this.$8=e,this.$9=i}var t=e.prototype;return t.run=function(){var e=this.$3.getPromise(),t=this.$7;if(t){var n=r("oz-player/shims/OzPerformance").now()-this.$6;i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(e,t,"streaming_task",function(){},function(e){e.setTimeToRequestSent(Math.floor(n))})}return this.$2.resolve(),e},t.getPromise=function(){return this.$3.getPromise()},t.cancel=function(){this.$3.getPromise()["catch"](function(){}),this.$3.reject(new(r("oz-player/utils/OzError"))({type:"OZ_STREAMING_TASK",description:"task cancelled",extra:{code:"OZ_ST-1"}})),this.$5=!0},t.finish=function(){this.$3.resolve()},t.isCancelled=function(){return this.$5},t.addStreamDeferred=function(e,t){var i=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),n=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$10({createStreamResult:e,changeStatusDeferred:i,createStreamDeferred:n,loggerProviderWithStreamContext:t}),{genStream:t=function(){return n.getPromise()},cancel:function(){if(e)return e.pausableStream.pauseStream()},getStatusChangePromise:function(){return i.getPromise()}}},t.$10=function(e){var t=this,n=e.createStreamResult,a=e.changeStatusDeferred,s=e.createStreamDeferred,o=e.loggerProviderWithStreamContext,u=e.loggingPayloads;e=this.$1.getPromise();var l=r("oz-player/shims/OzPerformance").now(),h=this.$1=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));h.getPromise()["catch"](function(){}),e.then(function(){if(n){var e=n.pausableStream;n.loggingPayloads&&(u=n.loggingPayloads),s.resolve(e.getStream()),t.$4=e;var a=r("oz-player/shims/OzPerformance").now(),h=t.$11(e.startStream());return o&&i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(h,o,"fetch_stream",function(){},function(r){if(u){i("oz-player/utils/OzNetworkRequestLoggingUtils").setFetchStreamLoggingAttributes(r,u.getRequestUrl(),u.isPrefetch(),u.segments,a-l,e.getBytesStreamed(),u.getResponse());var n=t.$9;n&&n(r,u.getRequestUrl(),u.getResponse())}}),h}return null}).then(function(e){t.$4=null,h.resolve(),a.resolve(e||"cancelled")})["catch"](function(e){t.$4=null,t.$3.reject(e),h.reject(e),a.reject(e)})},t.$11=function(e){return e.then(function(e){return(e=e.statusPromise).then(function(e){return"stream_done"===e?"done":"error"})})},e}(),s["default"]=e},98),__d("oz-player/scheduling/OzRoundRobinPriorityTaskQueue",["oz-player/shims/ozReportUnexpectedError"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){void 0===t&&(t=-1),this.$3=function(){},this.$4=[],this.$5=new Map,this.$1=e,this.$2=t}var t=e.prototype;return t.getHighestPriority=function(){return Math.max.apply(Math,this.$4.map(function(e){return e.queue.length?e.priority:-Infinity}))},t.enqueue=function(e,t){var i=this;t=t,t=this.$6(t);var n=this.$5.get(e);if(n!==t){this.$5.has(e)&&this.remove(e),n=this.$7(t);var a=this.$4[n];a&&a.priority===t||(a={priority:t,queue:[]},this.$4.splice(n,0,a)),this.$5.set(e,t),a.queue.push(e),e.getPromise().then(function(){i.remove(e)},function(){i.remove(e)})["catch"](function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzRoundRobinPriorityTaskQueue remove after task run")}),this.$3(e,t>=this.$1?"immediate":"normal")}},t.updatePriority=function(e,t){this.$5.has(e)&&this.enqueue(e,t)},t.dequeue=function(){for(var e=0;e<this.$4.length;e++){var t=this.$4[e];if(t.queue.length)return t=t.queue.shift(),this.$5["delete"](t),t}return null},t.remove=function(e){var t=this.$5.get(e);if(void 0!==t){if(t=this.$7(t),(t=this.$4[t])&&t.queue){var r=t.queue.findIndex(function(t){return t===e});r>-1&&t.queue.splice(r,1)}this.$5["delete"](e)}},t.setOnTaskUpdated=function(e){this.$3=e},t.clearOnTaskUpdated=function(){this.setOnTaskUpdated(function(){})},t.getLength=function(){return this.$5.size},t.test_isEmpty=function(){return 0===this.$5.size&&this.$4.every(function(e){return 0===e.queue.length})},t.$7=function(e){var t;for(e=e,e=this.$6(e),t=0;t<this.$4.length;t++)if(e>=this.$4[t].priority)return t;return t},t.$6=function(e){return e=e,this.$2>=0&&(e=Number.parseFloat(e.toFixed(this.$2))),e},e}(),s["default"]=e},98),__d("oz-player/scheduling/OzSequentialTaskScheduler",["oz-player/shims/OzMaybeNativePromise","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){this.$3=0,this.$1=e,t=(e=t||{}).taskTimeout,this.$4=t||0}var t=e.prototype;return t.start=function(){this.$1.setOnTaskUpdated(this.$5.bind(this));var e=this.$1.dequeue();e&&this.$6(e,"immediate")},t.destroy=function(){this.$2&&this.$2.cancel(),this.$1.clearOnTaskUpdated()},t.$5=function(e,t){(t=this.$6(e,t))&&this.$1.remove(e)},t.$6=function(e,t){var i=this;return(!this.$2||"immediate"===t)&&(this.$2&&this.$2.cancel(),t=e.run()["catch"](function(){}),this.$4>0&&(t=r("oz-player/shims/OzMaybeNativePromise").race([t,new(r("oz-player/shims/OzMaybeNativePromise"))(function(e){r("oz-player/shims/ozSetTimeoutAcrossTransitions")(e,i.$4)})])),this.$3++,this.$2=e,(t=t.then(function(){if(i.$3--,i.$2===e&&(i.$2=null),0===i.$3){var t=i.$1.dequeue();t&&i.$6(t,"immediate")}}))["catch"](function(e){r("oz-player/shims/ozReportUnexpectedError")(e,"OzSequentialTaskScheduler task complete")}),!0)},e}(),s["default"]=e},98),__d("oz-player/networks/OzStreamingTaskQueueProvider",["oz-player/scheduling/OzRoundRobinPriorityTaskQueue","oz-player/scheduling/OzSequentialTaskScheduler"],function(e,t,r,i,n,a,s){"use strict";function e(e){var t=o.get(e);if(!t){t=new(r("oz-player/scheduling/OzRoundRobinPriorityTaskQueue"))(l,h);var i=new(r("oz-player/scheduling/OzSequentialTaskScheduler"))(t,{taskTimeout:d});o.set(e,t),u.set(e,i),i.start()}return t}var o=new Map,u=new Map,l=2,h=2,d=6e4;s.OZ_QUEUE_MAX_PRIORITY=l,s.getQueue=e},98),__d("oz-player/networks/OzStreamingTaskStateManager",["Promise","oz-player/networks/OzStreamingTask","oz-player/networks/OzStreamingTaskQueueProvider","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzSubscriptionsHandler"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e){var t=this;this.$3=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4=0,this.$9=!1,this.$10=null;var n=e.mimeType,a=e.priorityCalculator,s=e.loggerProvider,o=e.setCustomFetchStreamLoggingAttributes;e=e.config,this.$5=n,this.$1=a,this.$6=i("oz-player/networks/OzStreamingTaskQueueProvider").getQueue(this.$5),this.$7=s,this.$8=e,this.$10=o,this.$3.addSubscriptions(this.$1.addListener("state_changed",function(e,r){t.$11(e,r),t.$2&&t.$6.updatePriority(t.$2,t.$4)}))}var n=e.prototype;return n.$12=function(){var e=[];return e.push(r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$5)),e},n.startStreamDeferred=function(e){var t=e.segments,r=e.networkManager,i=e.segmentsLoggerProvider,n=e.mediaStreamType,a=e.dataAppendedCallback;e=e.dataAppendedErrorCallback;var s=this.$13(i),o=this.$12();return r=t.length>0?r.createPausableStream(t,o,i,n,a,e):null,this.$9=!0,{genStream:(t=s.addStreamDeferred(r,i)).genStream,cancel:t.cancel,getStatusChangePromise:this.$14(t.getStatusChangePromise)}},n.$13=function(e){var t=this.$2;return this.$11(this.$1.compute(),"start_stream"),!t||t.isCancelled()?(t=this.$2=new(r("oz-player/networks/OzStreamingTask"))(this.$8,e,this.$10),this.$6.enqueue(t,this.$4)):this.$6.updatePriority(t,this.$4),t},n.$14=function(e){var r=this;return function(){return e().then(function(e){return r.$15(),e})["catch"](function(e){return r.$15(),t("Promise").reject(e)})}},n.finishTaskIfNoOngoingStream=function(){this.$9||this.$16()},n.destroy=function(){this.$3.release();var e=this.$2;this.$2=null,e&&this.$6.remove(e)},n.$15=function(){this.$9=!1,this.$11(this.$1.compute(),"end_stream"),this.$4<i("oz-player/networks/OzStreamingTaskQueueProvider").OZ_QUEUE_MAX_PRIORITY&&this.$16()},n.$16=function(){this.$2&&(this.$2.finish(),this.$2=null)},n.$11=function(e,t){e!==this.$4&&(this.$4=e,this.$7&&this.$7.getOperationLogger("priority_changed").setPriorityFloat(this.$4).setInitiator(t).log())},e}(),s["default"]=e},98),__d("oz-player/strategies/OzStreamLengthStrategy",[],function(e,t,r,i,n,a){"use strict";function e(e,t,r,i,n){t=t,n=n;var a=e.getNumber("segments_to_stream_under_playhead_threshold");for(e=e.getNumber("low_segment_stream_playhead_threshold"),a>0&&i.getCurrentTime()<e&&(t=a),(i=[]).push(n),e=1;e<t&&(a=r.getSegmentAfter(n));e++)n=a,i.push(n);return i}a.getStreamingSegments=e},66),__d("oz-player/streams/OzMediaStreamLoopDriver",["oz-player/shims/ozClearTimeout","oz-player/shims/ozSetTimeoutAcrossTransitions"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t){var i=this;this.$2=null,this.$3=!1,this.$6=function(){var e;if(i.$7(),!i.$3){null==(e=i.$5)||e.start(),e=i.$1.execute();var t=i.$1.getLoopInterval();t&&(i.$2=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){i.$6()},t)),e&&e.then(i.$6)["catch"](function(e){i.$7();var t=i.$1.handleError(e);t?i.$2=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(i.$6,t):(null==(t=i.$5)||t.setError(e),null==(t=i.$5)||t.log(),i.$5=null,i.$3=!0)})}},this.$1=e,this.$4=t}var t=e.prototype;return t.start=function(){if(this.$3)throw new Error("restart is not implemented");this.$5=this.$4.getOperationLogger("media_stream").start(),this.$6()},t.stop=function(){var e;this.$7(),this.$3=!0,null==(e=this.$5)||e.log(),this.$5=null},t.$7=function(){this.$2&&(r("oz-player/shims/ozClearTimeout")(this.$2),this.$2=null)},e}(),s["default"]=e},98),__d("oz-player/utils/OzRangeUtils",[],function(e,t,r,i,n,a){"use strict";function e(e,t){return null!=(t=t.filter(function(t){return t.startTime<=e&&t.endTime>=e}))&&t.length>0?t[0]:null}a.getRangeForTime=e},66),__d("oz-player/streams/OzSegmentLocator",["oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzRangeUtils"],function(e,t,r,i,n,a,s){"use strict";function e(e){return null!=(e=e.getEndingSegment())&&null!=e.getSequenceNumber()?e.getSequenceNumber():0}var o=function(e,t){return e=e.getCurrentTime(),t?i("oz-player/utils/OzRangeUtils").getRangeForTime(e,t.getBufferedRanges()):null},u=function(e,t,r){return t=o(e,t),r=r?r.getTimeRange().endTime:0,e=e.getCurrentTime()||0,r?e=r:t&&(e=t.endTime),e};t=function(e,t,r,n,a,s,o,l){return(o=e.getPredictedSegmentAfter(s))&&t.isPlaying()?o:(l=u(t,n,s),o=a.getTimeRanges(),(n=i("oz-player/utils/OzNumericalRangeUtil").findDiffCoveredByRanges(t.getCurrentTime(),l,o.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}})))>r?null:((s=e.getSegment(0))&&s.getTimeRange().startTime>l&&(l=s.getTimeRange().startTime),e.getSegmentByTime(l)))},s.getEndingSequenceNumber=e,s.getTimeToQuery=u,s.getSegment=t},98),__d("oz-player/streams/OzSegmentUtils",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI"],function(e,t,r,i,n,a,s){"use strict";function e(e){return e.reduce(function(e,t){var r;return(null!=(r=null==t?void 0:t.getSequenceNumber())?r:0)>(null!=(r=null==e?void 0:e.getSequenceNumber())?r:0)?t:e})}function t(e,t){var i=new(r("oz-player/manifests/OzSegmentOptions"));return e.getPredictedSegmentAfter({getData:function(){return null},getByteRange:function(){return null},getSequenceNumber:function(){return t-1},getTimeRange:function(){return{endTime:0,startTime:0}},getURI:function(){return new(r("oz-player/shims/OzURI"))("")},getOptions:function(){return i}})}function i(e){return e.getOptions().setSegmentNumDecisionTime(Date.now()),e}s.getMaxSegment=e,s.getSegmentForSequenceNumber=t,s.markSegmentCreateTime=i},98),__d("oz-player/utils/OzTaggedTimeRanges",[],function(e,t,r,i,n,a){e=function(){function e(e){this.$1=[],this.$2=0,this.$3=0,this.$4=e||function(e,t){return e===t}}var t=e.prototype;return t.add=function(e,t,r){if(!(t<e)&&t!==e)if(0!==this.$1.length){for(var i=0,n=0,a=0;a<this.$1.length;a++){if(e===this.$1[a].startTime&&t===this.$1[a].endTime){i=a,n=a+1;break}if(e>=this.$1[a].startTime&&(i=a+1),t<=this.$1[a].endTime&&(n=a),t<this.$1[a].startTime)break}this.$1.splice(i,n-i,{startTime:e,endTime:t,tag:r}),this.$5(i)}else this.$1.push({startTime:e,endTime:t,tag:r})},t.$5=function(e){e=e;var t=this.$1[e],r=null;0!==e&&(r=this.$1[e-1]),null!==r&&(this.$4(r.tag,t.tag)?r.endTime>=t.startTime&&(this.$1.splice(e-1,2,{startTime:r.startTime,endTime:Math.max(t.endTime,r.endTime),tag:t.tag}),e--):(r.endTime>t.startTime&&r.startTime===t.startTime?(this.$1.splice(e-1,1),e--):r.endTime>t.startTime&&this.$1.splice(e-1,1,{startTime:r.startTime,endTime:t.startTime,tag:r.tag}),r.endTime>t.endTime&&this.$1.splice(e+1,0,{startTime:t.endTime,endTime:r.endTime,tag:r.tag}))),r=null,e!==this.$1.length-1&&(r=this.$1[e+1]),r&&(this.$4(r.tag,t.tag)?r.startTime<=t.endTime&&this.$1.splice(e,2,{startTime:t.startTime,endTime:Math.max(r.endTime,t.endTime),tag:t.tag}):r.startTime<=t.endTime&&(r.endTime<t.endTime?(this.$1.splice(e,1,{startTime:t.startTime,endTime:r.startTime,tag:t.tag}),this.$1.push({startTime:r.endTime,endTime:t.endTime,tag:t.tag})):this.$1.splice(e+1,1,{startTime:t.endTime,endTime:r.endTime,tag:r.tag})))},t.get=function(e){var t=e>=this.$3?this.$2:0,r=null;for(t=t;t<this.$1.length;t++)if(this.$1[t].startTime<=e&&e<this.$1[t].endTime){r=t;break}return this.$2=null===r?0:r,this.$3=e,null===r?null:this.$1[r].tag},t.getLength=function(){return this.$1.length},e}(),a["default"]=e},66),__d("oz-player/streams/OzMediaStream",["oz-player/manifests/IOzSegment","oz-player/networks/OzNetworkManager","oz-player/networks/OzReadableStreamDataReader","oz-player/networks/OzStreamingTaskStateManager","oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter","oz-player/shims/OzDeferred","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzNetworkDiagnostics","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/strategies/OzStreamLengthStrategy","oz-player/streams/OzMediaStreamLoopDriver","oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzErrorUtils","oz-player/utils/OzMimeUtil","oz-player/utils/OzTaggedTimeRanges"],function(e,t,r,i,n,a,s){"use strict";var o=1e3,u=.2,l={AUDIO:1,CAPTION:3,VIDEO:0};e=function(e){function t(t){var n;(n=e.call(this)||this).$OzMediaStream2=0,n.$OzMediaStream3=0,n.$OzMediaStream4=null,n.$OzMediaStream13=null,n.$OzMediaStream15=!1,n.$OzMediaStream16=null,n.$OzMediaStream17=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzMediaStream19=[],n.$OzMediaStream22=0,n.$OzMediaStream29=!0,n.$OzMediaStream31=!1,n.$OzMediaStream32=null,n.$OzMediaStream33=new(r("oz-player/utils/OzErrorEmitter")),n.$OzMediaStream35=!0,n.$OzMediaStream38=0,n.$OzMediaStream39=null,n.$OzMediaStream40=null;var a=t.config,s=t.sourceBufferManagerPromise,o=t.networkManager,u=t.playbackState,l=t.endOfStreamWatcher,h=t.bufferTargetCalculator,d=t.priorityCalculator,c=t.streamSegmentsCountCalculator,p=t.abrManager,f=t.representation,g=t.loggerProvider,m=t.segmentLocator,$=t.setCustomFetchStreamLoggingAttributes,y=t.blockedRepresentationsManager,z=t.dynamicVideoLibrary,O=t.shouldAppendOncePerStream;return t=t.mediaStreamType,n.$OzMediaStream1=a,n.$OzMediaStream5=s,n.$OzMediaStream5.then(function(e){
n.$OzMediaStream6=e,n.$OzMediaStream16&&n.$OzMediaStream16.setSourceBuffer(e),n.$OzMediaStream27.setSourceBufferState(e.getSourceBufferState()),n.$OzMediaStream45()}),n.$OzMediaStream12=o,n.$OzMediaStream7=u,n.$OzMediaStream14=l,null==(a=n.$OzMediaStream14)||a.registerMediaStream(babelHelpers.assertThisInitialized(n)),n.$OzMediaStream26=h,n.$OzMediaStream27=d,n.$OzMediaStream28=c,n.$OzMediaStream16=p,n.$OzMediaStream18=g.cloneContext(),n.$OzMediaStream36=m,n.$OzMediaStream25=new(r("oz-player/utils/OzTaggedTimeRanges"))(function(e,t){return e.id===t.id}),n.$OzMediaStream39=$,n.$OzMediaStream40=y,n.$OzMediaStream42=z,n.$OzMediaStream43=O,n.$OzMediaStream44=t,n.$OzMediaStream17.addSubscriptions(n.$OzMediaStream7.addEventListener("seeking",function(){var e=u.getCurrentTime(),t=null;n.$OzMediaStream1.getBool("ignore_reset_after_seek_if_bufferahead")&&n.$OzMediaStream8.canPredict()&&n.$OzMediaStream6&&i("oz-player/utils/OzBufferingUtils").getBufferAheadFromCurrentTime(e,n.$OzMediaStream6.getSourceBufferState().getBufferedRanges())>0?t="no_reset_anchor":(t="reset_anchor",n.$OzMediaStream41=Date.now(),null!=n.$OzMediaStream9&&(n.$OzMediaStream46(),n.$OzMediaStream31=!1,n.$OzMediaStream24&&n.$OzMediaStream24.resolve())),n.$OzMediaStream18.cloneContext().getOperationLogger("media_element_event").setInitiator("seeking").setLength(1e3*e).setReason(t).setUserInfo({streamAnchorSegmentNumber:String(null==(e=n.$OzMediaStream9)?void 0:e.getSequenceNumber())}).log()})),null!=n.$OzMediaStream40&&n.$OzMediaStream17.addSubscriptions(n.$OzMediaStream40.onRepresentationBlocked(function(e){return n.$OzMediaStream47(e)})),n.$OzMediaStream21=i("oz-player/utils/OzMimeUtil").getMimeType(f.getMimeCodecs()),n.$OzMediaStream30=new(r("oz-player/networks/OzStreamingTaskStateManager"))({mimeType:n.$OzMediaStream21,priorityCalculator:n.$OzMediaStream27,loggerProvider:n.$OzMediaStream18,setCustomFetchStreamLoggingAttributes:n.$OzMediaStream39,config:n.$OzMediaStream1}),n.$OzMediaStream23=new(r("oz-player/streams/OzMediaStreamLoopDriver"))(babelHelpers.assertThisInitialized(n),n.$OzMediaStream18),n.$OzMediaStream48(f),n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.start=function(){this.$OzMediaStream23.start()},n.getCurrentRepresentation=function(){return this.$OzMediaStream8},n.switchRepresentation=function(e){this.$OzMediaStream48(e,"user")},n.onError=function(e){return this.$OzMediaStream33.onError(e)},n.updateRunTimeConfigs=function(e){var t=e.streamDataHandler;e=e.resetStreamAnchor,void 0!==t&&(this.$OzMediaStream34=t),!0===e&&this.$OzMediaStream8.canApproximateId()&&(this.$OzMediaStream46(),this.$OzMediaStream10=null)},n.$OzMediaStream48=function(e,t){var i,n=this;void 0===t&&(t="internal"),"user"===t&&this.$OzMediaStream46(),null==(i=this.$OzMediaStream20)||i.remove(),this.$OzMediaStream20=null;var a=(i=this.$OzMediaStream18.cloneContext().setType(this.$OzMediaStream21+";init")).cloneContext().setRepresentationID(e.getID()),s=e.getInitSegment(),o=s.getData(),u=i.getOperationLogger("stream_switch").setPreviousRepresentationID(this.$OzMediaStream8?this.$OzMediaStream8.getID():null).setInitiator(t).setRepresentationID(e.getID()).setReason("internal"===t?this.$OzMediaStream16&&this.$OzMediaStream16.getLastEvaluationReason():t).start();this.$OzMediaStream8=e,i=function(){var e;u.log(),n.$OzMediaStream26.handleEvent("append_succeeded"),n.emit("initAppended"),null==(e=n.$OzMediaStream14)||e.notifyRepresentationSwitched(n)};var l=function(t){var r;u.setError(t).log(),n.$OzMediaStream49(t),null==(r=n.$OzMediaStream40)||r.handleError(e.getID(),t),e.getID()!==n.$OzMediaStream8.getID()&&(null==(r=n.$OzMediaStream24)||r.resolve())};null==o&&(o=(s=this.$OzMediaStream12.request([s],[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream21)],a,null,this.$OzMediaStream44,i,l)).getStream()),this.emit("switchRepresentation",t,e),this.$OzMediaStream50({data:o,dataAppendedCallback:i,dataAppendedErrorCallback:l,loggerProvider:a.cloneContext(),appendTarget:0})},n.getLoopInterval=function(){return this.$OzMediaStream22},n.execute=function(){var e=this.$OzMediaStream51();if(e){var t=this.$OzMediaStream24=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return e.then(function(){return t.resolve()})["catch"](function(e){return t.reject(e)}),t.getPromise()}return null},n.$OzMediaStream52=function(e){return this.$OzMediaStream16&&this.$OzMediaStream29&&this.$OzMediaStream15&&(e=this.$OzMediaStream16.getBestRepresentation(e),this.$OzMediaStream8!==e)?e:null},n.$OzMediaStream53=function(e){var t=this.$OzMediaStream6?this.$OzMediaStream6.getSourceBufferState():null,r=this.$OzMediaStream26.computeBufferTarget();if(r<=0)return null;var n=null;return e&&(n=this.$OzMediaStream8.getCustomFieldFirstSegment()),!n&&this.$OzMediaStream8.canPredict()&&null!=this.$OzMediaStream36?(e=this.$OzMediaStream35&&this.$OzMediaStream7.isPlaying(),this.$OzMediaStream36.getSegment(this.$OzMediaStream8,this.$OzMediaStream7,r,t,this.$OzMediaStream9,this.$OzMediaStream10,this.$OzMediaStream1,e,this.$OzMediaStream21)):(n||(n=i("oz-player/streams/OzSegmentLocator").getSegment(this.$OzMediaStream8,this.$OzMediaStream7,r,t,this.$OzMediaStream8,this.$OzMediaStream9,this.$OzMediaStream1,this.$OzMediaStream32)),this.$OzMediaStream8.canPredict()&&(e=this.$OzMediaStream10&&this.$OzMediaStream10.getSequenceNumber()||0,r=n&&n.getSequenceNumber()||0,n&&this.$OzMediaStream10&&e>=r)?((r=i("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(this.$OzMediaStream8))||0)>=e?this.$OzMediaStream10:null:(n||this.$OzMediaStream54()||(r=this.$OzMediaStream8.getEndingSegment())&&this.$OzMediaStream8.isEndingSegment(r)&&(e=r.getTimeRange().endTime,(t=i("oz-player/streams/OzSegmentLocator").getTimeToQuery(this.$OzMediaStream7,t,this.$OzMediaStream9))>=e&&!this.$OzMediaStream54()&&(n=r)),n))},n.$OzMediaStream55=function(){return!this.$OzMediaStream15},n.$OzMediaStream56=function(e,t){var n;n=null!=(n=t.fetchSingleSegment)&&n,t=null!=(t=t.preventRepresentationSwitch)&&t;var a=[];if(n)a=[e];else if(n=this.$OzMediaStream28.computeMin(this.$OzMediaStream7,e,this.$OzMediaStream8),a=i("oz-player/strategies/OzStreamLengthStrategy").getStreamingSegments(this.$OzMediaStream1,n,this.$OzMediaStream8,this.$OzMediaStream7,e),a=r("oz-player/networks/OzNetworkManager").getStreamableSegmentsRange(a),!t&&(n=this.$OzMediaStream52(a)))return this.$OzMediaStream48(n),(e=this.$OzMediaStream53(!1))?this.$OzMediaStream56(e,{fetchSingleSegment:!1,preventRepresentationSwitch:!0}):[];return a},n.$OzMediaStream57=function(){var e=this,t=function(t){null==t||t.remove(),e.$OzMediaStream20===t&&(e.$OzMediaStream20=null)};t(this.$OzMediaStream20);var i=null;return new(r("oz-player/shims/OzMaybeNativePromise"))(function(r){i=e.getCurrentRepresentation().addUpdateListener(function(){t(i),r()}),e.$OzMediaStream20=i})["catch"](function(e){throw t(i),e})},n.$OzMediaStream51=function(){var e=this,t=this.$OzMediaStream6?this.$OzMediaStream6.getSourceBufferState():null;if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream10&&this.$OzMediaStream8.isEndingSegment(this.$OzMediaStream10))return this.endStream(),void this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end1").setRepresentationID(this.$OzMediaStream8.getID()).log();if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream9&&this.$OzMediaStream8.isEndingSegment(this.$OzMediaStream9))return this.endStream(),void this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("end2").setRepresentationID(this.$OzMediaStream8.getID()).log();var n=this.$OzMediaStream55(),a=this.$OzMediaStream53(n);if(!this.$OzMediaStream8.canPredict()||null==this.$OzMediaStream11||!i("oz-player/manifests/IOzSegment").isSequenceNumberGreaterOrEqual(a,this.$OzMediaStream11)){var s;if(i("oz-player/manifests/IOzSegment").isSequenceNumberEqual(a,this.$OzMediaStream37)?this.$OzMediaStream38++:this.$OzMediaStream38=0,this.$OzMediaStream37=a,this.$OzMediaStream7.isPlaying()&&this.$OzMediaStream38>0&&this.$OzMediaStream18.cloneContext().getOperationLogger("get_segment_to_stream_same_segment").setReason(null!=(null==a?void 0:a.getSequenceNumber())?String(null==a?void 0:a.getSequenceNumber()):null).setLength(this.$OzMediaStream38).setRepresentationID(this.$OzMediaStream8.getID()).setSegmentStartTime(null==a?void 0:a.getTimeRange().startTime).setSegmentEndTime(null==a?void 0:a.getTimeRange().endTime).log(),this.$OzMediaStream31)return this.$OzMediaStream22=o,this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("ongoing_stream").setReason(null!=(null==(s=this.$OzMediaStream9)?void 0:s.getSequenceNumber())?String(null==(s=this.$OzMediaStream9)?void 0:s.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream8.getID()).log(),null;if(!a||this.$OzMediaStream31){if(this.$OzMediaStream8.canPredict()&&this.$OzMediaStream1.getBool("ms_promise_for_null")){var u=this.$OzMediaStream1.getNumber("ms_promise_for_null_ms");return new(r("oz-player/shims/OzMaybeNativePromise"))(function(t){var i=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){r("oz-player/shims/ozClearTimeout")(i),t()},u||1e3*(e.$OzMediaStream8.getMaxGopSec()||1))})}return this.$OzMediaStream22=o,this.$OzMediaStream31||this.$OzMediaStream30.finishTaskIfNoOngoingStream(),this.$OzMediaStream57()}this.$OzMediaStream22=0;var l=this.$OzMediaStream56(a,{fetchSingleSegment:n});if(0===l.length)return this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("no_stream_segments").setReason(null!=(null==(s=this.$OzMediaStream9)?void 0:s.getSequenceNumber())?String(null==(a=this.$OzMediaStream9)?void 0:a.getSequenceNumber()):null).setRepresentationID(this.$OzMediaStream8.getID()).log(),this.$OzMediaStream57();this.$OzMediaStream15=!0;var h=l[l.length-1]||null,d=this.$OzMediaStream8,c=function(){return d.isEndingSegment(h)};0!==l.length||r("oz-player/shims/ozvariant")(0,23148),a=(s=l[0]).getTimeRange().startTime;var p,f,g=h.getTimeRange().endTime,m={startTime:a,endTime:g,tag:{id:this.$OzMediaStream8.getID()}},$=function(t){S.setAppendedBufferMs(Math.round(1e3*t.appendedSec)),S.log(),e.$OzMediaStream26.handleEvent("append_succeeded"),l.forEach(function(t){e.emit("SegmentAppended",e.$OzMediaStream58(t,m))}),c()&&e.endStream(),e.$OzMediaStream59(m,t)},y=function(t){S.setError(t).log();var r=f||p;r&&r.cancel(),e.$OzMediaStream49(t)},z=this.$OzMediaStream18.cloneContext();z.setRepresentationID(this.$OzMediaStream8.getID()),z.setSegmentStartTime(a).setSegmentEndTime(g),n?(p=this.$OzMediaStream12.request(l,[r("oz-player/networks/getOzBandwidthEstimatorPipeThroughReporter")(this.$OzMediaStream21)],z.cloneContext(),null,this.$OzMediaStream44,$,y),this.$OzMediaStream13=p):(f=this.$OzMediaStream30.startStreamDeferred({segments:l,networkManager:this.$OzMediaStream12,sourceBufferState:t,playbackState:this.$OzMediaStream7,segmentsLoggerProvider:z.cloneContext(),mediaStreamType:this.$OzMediaStream44,dataAppendedCallback:$,dataAppendedErrorCallback:y}),this.$OzMediaStream13=p),this.$OzMediaStream31=!0;var O=this.$OzMediaStream60(s,h,l.length),S=z.getOperationLogger("queued_append");S.start().setReason(this.$OzMediaStream16&&this.$OzMediaStream16.getLastEvaluationReason());var v,P=function(t){e.$OzMediaStream50({data:t,dataAppendedCallback:$,dataAppendedErrorCallback:y,loggerProvider:z.cloneContext(),appendTarget:O})};return f||p||r("oz-player/shims/ozvariant")(0,23147),f?(f.genStream().then(function(e){return P(e)})["catch"](function(t){return e.$OzMediaStream33.emitError(t)}),v=f.getStatusChangePromise()):p&&(P(p.getStream()),v=p.getStatusChangePromise()),!v&&r("oz-player/shims/ozvariant")(0,51928),(a=v.then(function(t){return e.$OzMediaStream61(t,h),e.$OzMediaStream62()}).then(function(){e.$OzMediaStream2=0}))["catch"](function(t){var r,i=e.$OzMediaStream9;return e.$OzMediaStream63(h),null==(r=e.$OzMediaStream40)||r.handleError(d.getID(),t),e.$OzMediaStream64(t,h,i)})}this.$OzMediaStream18.cloneContext().getOperationLogger("media_loop_end").setInitiator("segment_end").setRepresentationID(this.$OzMediaStream8.getID()).log()},n.handleError=function(e){return this.$OzMediaStream18.getOperationLogger("media_stream_loop_error").setError(e).setResult("failed").log(),this.$OzMediaStream1.getNumber("loop_body_handle_error_interval_ms")},n.$OzMediaStream64=function(e,t,n){var a=this;this.$OzMediaStream31=!1;var s=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),o=i("oz-player/utils/OzErrorUtils").getNormalizedErrorAndCode(e),u=o[0],l=o[1],h=i("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(u,this.$OzMediaStream21),d=function(t){if(a.$OzMediaStream2++,a.$OzMediaStream18.getOperationLogger("media_stream").setInitiator("fetch_stream_"+(null!=t.behavior?t.behavior:"default")).setLength(t.timeoutMs).setReason(""+h.getDescription()).setError(h).setCode(l.length>0?Number.parseInt(l,10):null).setType(a.$OzMediaStream21).log(),"retry_failed_request"===t.behavior)a.$OzMediaStream9=n;else if("recover_failed_request"===t.behavior&&e instanceof r("oz-player/utils/OzError")){var o;o=null==(o=e.getExtra())?void 0:o.headers,null!=(o=r("oz-player/shims/OzNetworkDiagnostics").getNextValidSegmentId(o))&&(a.$OzMediaStream9=i("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(a.$OzMediaStream8,o-1))}r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){return a.emit("streamErrorRetry",h),s.resolve()},t.timeoutMs)};this.$OzMediaStream4!==l?(this.$OzMediaStream4=l,this.$OzMediaStream3=1):this.$OzMediaStream3++,o=!0;var c=function(){o=!1};return u={consecutiveFailuresForErrorCode:this.$OzMediaStream3,endStream:function(){c(),a.$OzMediaStream10=t,a.$OzMediaStream11=t,a.endStream(),s.resolve()},error:h,isInitialRequest:!1,retry:function(e){var t;c(),d({timeoutMs:null!=(t=null==e?void 0:e.waitMs)?t:0,behavior:null==e?void 0:e.behavior})},retryAttemptCount:this.$OzMediaStream2},this.emit("streamError",u),o&&(this.$OzMediaStream33.emitError(h),this.$OzMediaStream2=0,s.resolve()),s.getPromise()},n.$OzMediaStream63=function(e){this.$OzMediaStream46(),this.$OzMediaStream10=e,this.$OzMediaStream30.finishTaskIfNoOngoingStream(),(e=this.$OzMediaStream6)&&e.cancelOperationAndCleanQueue(this.$OzMediaStream18)},n.$OzMediaStream61=function(e,t){"done"===e&&(this.$OzMediaStream9=t)},n.$OzMediaStream62=function(){this.$OzMediaStream31=!1},n.$OzMediaStream50=function(e){this.$OzMediaStream19.push(e),this.$OzMediaStream6&&this.$OzMediaStream45()},n.$OzMediaStream59=function(e,t){null!=e&&(this.$OzMediaStream8.canPredict()&&t.startTime_UNSAFE&&t.endTime_UNSAFE?this.$OzMediaStream25.add(t.startTime_UNSAFE,t.endTime_UNSAFE,e.tag):this.$OzMediaStream25.add(e.startTime,e.endTime,e.tag))},n.$OzMediaStream45=function(){var e=this;this.$OzMediaStream19.forEach(function(t){var i=t.data,n=t.dataAppendedCallback,a=t.dataAppendedErrorCallback,s=t.loggerProvider;t=t.appendTarget,i=i instanceof Uint8Array||null==e.$OzMediaStream34?i:i.pipeThrough(new(r("oz-player/networks/OzReadableStreamDataReader"))(e.$OzMediaStream34.bind(e,e.$OzMediaStream8))),e.$OzMediaStream6&&e.$OzMediaStream6.queueData(i,s,t).then(function(e){e&&n(e)})["catch"](function(e){a(e)})}),this.$OzMediaStream19=[]},n.$OzMediaStream65=function(){var e=this.$OzMediaStream6;if(!e)return r("oz-player/shims/OzMaybeNativePromise").resolve();var t=this.$OzMediaStream7.getCurrentTime(),i=[{fromTime:0,toTime:t}],n=this.$OzMediaStream1.getNumber("clear_buffer_around_playhead_boundary_ms");if(n>0){n/=1e3;var a=e.getSourceBufferState();a=(a=a.getBufferedRanges()).length>=1?a[a.length-1].endTime:t,i=[{fromTime:0,toTime:Math.max(0,t-n)}],t+n<a&&i.push({fromTime:t+n,toTime:a})}return e.clearRangeWithWait(i)},n.$OzMediaStream66=function(){return!1},n.$OzMediaStream49=function(e){var t=this;e instanceof r("oz-player/utils/OzError")&&"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED"===e.getType()?(this.emit("streamErrorRetry",i("oz-player/utils/OzErrorUtils").getOzErrorWithMIMEType(e,this.$OzMediaStream21)),this.$OzMediaStream26.handleEvent("append_quota_exceeded"),this.$OzMediaStream65().then(function(){t.restartLoopBody()})["catch"](function(e){e=new(r("oz-player/utils/OzError"))({type:"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR",description:e.name+": "+e.message,extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR}}),t.$OzMediaStream33.emitError(e)})):(r("oz-player/shims/ozReportUnexpectedError")(e,"OzMediaStream append error callback","warn"),this.$OzMediaStream66(e)&&this.$OzMediaStream33.emitError(e))},n.$OzMediaStream60=function(e,t,r){var i=0;if(this.$OzMediaStream43)return Infinity;var n=this.$OzMediaStream1.getNumber("appends_per_segment");return n>0&&(e=e.getByteRange(),t=t.getByteRange(),e&&t&&null!=t.endByte&&(i=Math.ceil((t.endByte-e.startByte+1)/(r*n)))),0===i&&(i=this.$OzMediaStream1.getNumber("append_byte_target_without_range")),i},n.getIsAdaptationEnabled=function(){return this.$OzMediaStream29},n.enableAdaptation=function(){this.$OzMediaStream29=!0},n.disableAdaptation=function(){this.$OzMediaStream29=!1},n.cleanup=function(){this.$OzMediaStream23.stop(),this.$OzMediaStream5.then(function(e){e.destroy()}),this.$OzMediaStream30.destroy(),this.$OzMediaStream17.release(),this.$OzMediaStream17.engage(),this.removeAllListeners(),this.$OzMediaStream20&&(this.$OzMediaStream20.remove(),this.$OzMediaStream20=null)},n.getRepresentationIDAtTime=function(e){var t=this.$OzMediaStream25.get(e);if(!t){var r=this.$OzMediaStream8.getTimeRanges(),i=.001;(r=r[r.length-1])&&e>=r.endTime&&e<=this.$OzMediaStream7.getDuration()+i&&(t=this.$OzMediaStream25.get(r.endTime-i))}return t?t.id:null},n.endStream=function(){var e;null==(e=this.$OzMediaStream14)||e.notifyMediaStreamEnded(this),this.$OzMediaStream67()},n.endStreamIfBufferedToEndTime=function(){var e=this.$OzMediaStream8.getTimeRanges();if(e.length>0&&(e=e[e.length-1].endTime,this.$OzMediaStream6)){var t=this.$OzMediaStream6.getSourceBufferState().getBufferedRanges();t.length>0&&Math.abs(t[t.length-1].endTime-e)<u&&this.endStream()}},n.$OzMediaStream58=function(e,t){return{type:0===this.$OzMediaStream21.indexOf("audio")?l.AUDIO:0===this.$OzMediaStream21.indexOf("video")?l.VIDEO:l.CAPTION,segment:e,sourceBuffer:null!=(e=null==(e=this.$OzMediaStream6)?void 0:null==(e=e.getDebug())?void 0:e.SourceBuffer)?e:null,timeRange:t}},n.$OzMediaStream46=function(){this.$OzMediaStream9=null},n.restartLoopBody=function(){this.$OzMediaStream46(),this.$OzMediaStream31=!1,this.$OzMediaStream13&&this.$OzMediaStream13.cancel(),0!==this.$OzMediaStream22&&this.$OzMediaStream24&&this.$OzMediaStream24.resolve()},n.$OzMediaStream67=function(){if(this.$OzMediaStream6){var e=this.$OzMediaStream6.getSourceBufferState().getBufferedRanges();e.length>0&&(this.$OzMediaStream32=e[e.length-1].endTime)}},n.$OzMediaStream54=function(){return null!==this.$OzMediaStream32},n.$OzMediaStream47=function(e){this.$OzMediaStream8.getID()===e&&null!=this.$OzMediaStream16&&this.$OzMediaStream48(this.$OzMediaStream16.getBestRepresentation())},n.setEnableLiveheadCatchup=function(e){this.$OzMediaStream35=e},n.clearSourceBufferRange=function(e,t){var i=this.$OzMediaStream6;return i?i.clearRangeWithWait([{fromTime:e,toTime:t}]):r("oz-player/shims/OzMaybeNativePromise").resolve()},n.getDebug=function(){return{SourceBufferManager:this.$OzMediaStream6,MediaStreamAbrManager:this.$OzMediaStream16}},t}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player/streams/OzPredictedSegmentLocator",["oz-player/streams/OzSegmentLocator","oz-player/streams/OzSegmentUtils","oz-player/utils/OzSourceBufferUtil"],function(e,t,r,i,n,a,s){"use strict";function o(e,t){var r=0;for(var i in e){var n;i!==t&&(r=Math.max(r,null!=(n=e[i].lastSkippedToSegmentNumber)?n:0))}return r}function u(e,t){var r=null;for(var i in e)i!==t&&null!=e[i].inBufferAheadTimeSince&&(r=null!=r?Math.min(r,e[i].inBufferAheadTimeSince):e[i].inBufferAheadTimeSince);return r}e=function(){function e(e){this.$5={};var t=e.videoNode,r=e.liveLatencyManager,i=e.loggerProvider;e=e.dynamicVideoLibrary,this.$1=t,this.$2=r,this.$3=i,this.$4=e}var t=e.prototype;return t.getSegment=function(e,t,r,i,n,a,s,o,u){var l;return null==this.$5[u]&&(this.$5[u]={lastSkippedToSegmentNumber:null,inBufferAheadTimeSince:null}),null==(l=this.$2)||l.setEnableCatchup(o),null==(e=(l=this.$6(e,t,r,i,n,a,s,o,u)).segment)||e.getOptions().setSegmentNumDecisionTime(Date.now()),null===l.segment&&this.$3.getOperationLogger("segment_locator").setInitiator(l.initiator).setReason(l.reason).setType(u).setUserInfo(l.userInfo).log(),t=this.$4,l.segment&&null!=t&&(r=l.segment.getOptions()).setIsDVLEnabled(t.shouldRequestDynamicInfo(u)),l.segment},t.$6=function(e,t,r,n,a,s,l,h,d){var c,p=t.getCurrentTime(),f=null!=this.$2&&this.$2.shouldEnableCursorBasedCatchup(),g=null!=n?i("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(n.getBufferedRanges(),t.getCurrentTime(),l):{bufferAheadSec:0,bufferedOffset:0},m=g.bufferAheadSec;g=g.bufferedOffset;var $=null,y=null,z=!this.$2||this.$2.enabled(),O=e.getPredictedSegmentAfter(a),S=i("oz-player/streams/OzSegmentUtils").getSegmentForSequenceNumber(e,l.getNumber("pdash_download_cursor_between_catchups_seg")>0?o(this.$5):o(this.$5,d)),v=!0,P=null;if(f&&h&&null!=(null==(c=O)?void 0:c.getSequenceNumber())&&(null!=(c=null==(c=O)?void 0:c.getSequenceNumber())?c:0)<=(null!=(c=null==S?void 0:S.getSequenceNumber())?c:0))O=S,$="paired_catchup",this.$3.getOperationLogger("segment_locator").setInitiator($).setUserInfo({bufferAheadSec:String(m),bufferedOffset:String(g)}).setLength((null!=(c=null==S?void 0:S.getSequenceNumber())?c:0)-(null!=(c=null==(c=O)?void 0:c.getSequenceNumber())?c:0)).setType(d).log(),v=!1,P=$;else if(f&&h&&z&&null!=O&&(null==(c=this.$2)?void 0:c.isBehindPreferredLiveHeadLatencyWithTolerance())){if(this.$2&&m>this.$2.getPreferredLiveHeadLatencySec()&&0==g)return{segment:null,initiator:"catchup_pause",userInfo:{bufferAheadSec:String(m),bufferedOffset:String(g)}};f=e.getEndingSegment(),h=i("oz-player/streams/OzSegmentUtils").getMaxSegment([f,O]),(c=0===l.getNumber("pdash_download_cursor_between_catchups_seg")||(null!=(c=null==S?void 0:S.getSequenceNumber())?c:0)+l.getNumber("pdash_download_cursor_between_catchups_seg")<(null!=(S=null==f?void 0:f.getSequenceNumber())?S:0))&&((null!=(f=null==h?void 0:h.getSequenceNumber())?f:0)>(null!=(c=null==(S=O)?void 0:S.getSequenceNumber())?c:0)&&(this.$5[d].lastSkippedToSegmentNumber=null!=(f=null==h?void 0:h.getSequenceNumber())?f:0,this.$3.getOperationLogger("segment_locator").setInitiator("catchup").setUserInfo({bufferAheadSec:String(m),bufferedOffset:String(g)}).setLength((null!=(S=null==h?void 0:h.getSequenceNumber())?S:0)-(null!=(f=null==(c=O)?void 0:c.getSequenceNumber())?f:0)).setType(d).log()),O=h,v=!1,P=$="catchup")}else null==a&&(O=e.getSegmentByTime(p),$="1st_run",S=e.getTimeRanges(),y={approx:String(e.canApproximateId()),ranges:String(S.length),mpdStartTime:S.length>0?String(S[S.length-1].startTime):null,mpdEndTime:S.length>0?String(S[S.length-1].endTime):null},this.$5[d].lastSkippedToSegmentNumber=null!=(f=null==(c=O)?void 0:c.getSequenceNumber())?f:0);return v&&(v=z,P="stream_state"),v&&m>r?(null==this.$5[d].inBufferAheadTimeSince&&(this.$5[d].inBufferAheadTimeSince=Date.now()),{segment:null,initiator:"buffer_ahead_rule",userInfo:{bufferAheadSec:String(m),bufferedOffset:String(g),lastMaxSegNum:String(o(this.$5,d)),segment:O?String(O.getSequenceNumber()):null,computedBufferAheadTarget:String(r)}}):(!v&&m>r&&this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(m),bufferedOffset:String(g),computedBufferAheadTarget:String(r)}).setReason("disabled_buffer_ahead_rule:"+(P||"")).setType(d).log(),h=s&&s.getSequenceNumber()||0,a=O&&O.getSequenceNumber()||0,O&&s&&h>=a?((p=i("oz-player/streams/OzSegmentLocator").getEndingSequenceNumber(e))||0)>=h?{segment:s}:{segment:null,initiator:"mpd_refresh",userInfo:{leSegNum:String(h)}}:(S=n?i("oz-player/utils/OzSourceBufferUtil").getTotalInBufferedRanges(n.getBufferedRanges()):0,c=n?i("oz-player/utils/OzSourceBufferUtil").getTotalBufferAheadOfPosition(n.getBufferedRanges(),t.getCurrentTime(),l).bufferAheadSec:0,f=u(this.$5,d),z=Date.now(),(0!=l.getNumber("download_cursor_total_buffer_max_sec")&&l.getNumber("download_cursor_total_buffer_max_sec")<c||0!=l.getNumber("download_cursor_buffer_ahead_time_max_sec")&&null!=f&&l.getNumber("download_cursor_buffer_ahead_time_max_sec")<(z-f)/1e3)&&(this.$5[d].lastSkippedToSegmentNumber=null!=(P=null==(v=O)?void 0:v.getSequenceNumber())?P:0,this.$3.getOperationLogger("segment_locator").setUserInfo({bufferAheadSec:String(m),bufferedOffset:String(g),totalBufferedSec:String(S),computedBufferAheadTarget:String(r),inBufferAheadElapsedTime:String((z-(null!=(a=f)?a:0))/1e3)}).setReason("force_paired_catchup").setType(d).log()),this.$5[d].inBufferAheadTimeSince=null,{segment:O,initiator:$||void 0,userInfo:y||void 0}))},e}(),s.OzPredictedSegmentLocator=e},98),__d("oz-player/utils/getRepresentationInCache",["oz-player/networks/RequestParamCreator"],function(e,t,r,i,n,a,s){"use strict";function e(e,t){return void 0===t&&(t=null),e.find(function(e){var r=(e=e.getInitSegment())&&e.getByteRange();return!!(e&&r&&t)&&t.hasCacheValue(o.createRequestParam(e.getURI(),r).uri.toString())})||null}var o=new(r("oz-player/networks/RequestParamCreator"));s["default"]=e},98),__d("oz-player/Player",["Promise","oz-player/configs/OzPlayerConfig","oz-player/drm/OzDrmManager","oz-player/loggings/OzDevConsolePerfLogger","oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzMultiDestinationPerfLogger","oz-player/loggings/OzOperationLoggerObserver","oz-player/manifests/OzDynamicVideoLibrary","oz-player/manifests/OzVideoRepresentation","oz-player/media_source/MediaSourceManager","oz-player/media_source/OzMediaSeekableRangeManager","oz-player/networks/OzClientClock","oz-player/networks/OzNetworkManager","oz-player/parsers/OzMpdParser","oz-player/parsers/OzMpdUpdater","oz-player/parsers/OzXmlParserImplDOMParser","oz-player/playback_controls/OzClearSourceBufferOnSeekManager","oz-player/playback_controls/OzLiveLatencyManager","oz-player/playback_controls/OzPlaybackTimeRangeManager","oz-player/playback_controls/OzPlayheadManager","oz-player/shims/OzEventEmitter","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzPerformance","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/OzUuid","oz-player/shims/ozClearTimeout","oz-player/shims/ozReportUnexpectedError","oz-player/shims/ozSetTimeoutAcrossTransitions","oz-player/shims/ozvariant","oz-player/states/OzObservedPlaybackState","oz-player/states/OzPositionToViewport","oz-player/strategies/OzAbrManager","oz-player/strategies/OzAudioIBRManager","oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy","oz-player/strategies/OzBlockedRepresentationsManager","oz-player/strategies/OzBufferAheadPriorityStrategy","oz-player/strategies/OzBufferAheadTargetStrategy","oz-player/strategies/OzBufferEndLimitStrategy","oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy","oz-player/strategies/OzBufferTargetCalculator","oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint","oz-player/strategies/OzBufferingDetector","oz-player/strategies/OzPausedStreamSegmentsCountStrategy","oz-player/strategies/OzPlayheadAtInterruptionDetector","oz-player/strategies/OzPlayingStatePriorityStrategy","oz-player/strategies/OzPositionToViewportPriorityStrategy","oz-player/strategies/OzPriorityCalculator","oz-player/strategies/OzSingleCodecRestriction","oz-player/strategies/OzStaleManifestBufferTargetStrategy","oz-player/strategies/OzStartupBufferTargetStrategy","oz-player/strategies/OzStaticStreamSegmentsStrategy","oz-player/strategies/OzStreamSegmentsCountCalculator","oz-player/strategies/OzSupportedMimeCodecsRestriction","oz-player/streams/OzEndOfStreamWatcher","oz-player/streams/OzHandleUserRepresentationSwitch","oz-player/streams/OzMediaStream","oz-player/streams/OzPredictedSegmentLocator","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/utils/OzMpdUtils","oz-player/utils/OzPlaybackRestrictionsUtils","oz-player/utils/OzReadableStreamUtils","oz-player/utils/getRepresentationInCache"],function(e,t,r,i,n,a,s){"use strict";function o(e){return e||r("oz-player/shims/ozvariant")(0,21876),e}e=function(e){function n(t){var n;(n=e.call(this)||this).$Player5=new Map,n.$Player6=new Map,n.$Player9=void 0,n.$Player10=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$Player11=new(r("oz-player/utils/OzErrorEmitter")),n.$Player24=[],n.$Player31=null,n.$Player32=null,n.$Player41=null,n.$Player49=!1,n.$Player52=0,n.$Player53=null,n.$Player54=null,n.$Player55=0,n.$Player56=null,n.$Player57=null,n.$Player58=!1,n.$Player61=null,n.$Player62=null,n.$Player68=!1,n.$Player69=!1,n.$Player80=function(){return new(r("oz-player/parsers/OzXmlParserImplDOMParser"))},n.$Player82=function(){n.$Player5.forEach(function(e){return e.endStreamIfBufferedToEndTime()})},n.$Player83=function(){n.$Player5.forEach(function(e){return e.endStream()})};var a=t.audioOnly;a=void 0!==a&&a;var s=t.bufferingDetector,o=t.videoNode,u=t.config,l=t.configMap,h=t.rawMpdXml,d=t.mpdUrl;d=void 0===d?null:d;var c=t.loggerConfig;c=void 0===c?{perfLoggerProviders:[],observedOperationLoggers:[],isOzDevConsoleEnabled:!1}:c;var p=t.customVTTBufferTargetStrategies;p=void 0===p?null:p;var f=t.prefetchCache;f=void 0===f?null:f;var g=t.getOverrideOzRequestImplementation;g=void 0===g?null:g;var m=t.networkRequestStreamHandlers,$=t.networkRequestStreamRetryHandler,y=t.getShouldIncludeCredentials;y=void 0===y?null:y;var z=t.getCustomRequestParametersForURI;z=void 0===z?null:z;var O=t.initialRepresentationIDs;O=void 0===O?[]:O;var S=t.debugCreateInitiator;S=void 0===S?null:S;var v=t.customParsers;v=void 0===v?new Map:v;var P=t.videoPlaybackRestrictions;P=void 0===P?[]:P;var _=t.customSegmentTimelineParser;_=void 0===_?null:_;var M=t.customRepresentationParsers;M=void 0===M?{}:M;var E=t.videoAbrManagerFactory;E=void 0===E?null:E;var b=t.seekHandler;b=void 0===b?null:b;var T=t.initialPlaybackPositionForDynamicMpd;T=void 0===T?-20:T;var R=t.liveheadFallBehindBlockThreshold;R=void 0===R?30:R;var w=t.liveheadFallBehindBlockMargin;w=void 0===w?5.9:w;var C=t.startTimeStamp;C=void 0===C?0:C;var B=t.drmProviders;B=void 0===B?[]:B;var L=t.getVideoDimensions;L=void 0===L?null:L;var D=t.setCustomFetchStreamLoggingAttributes;D=void 0===D?null:D;var k=t.bufferEndLimit;k=void 0===k?null:k;var A=t.configureCustomRequestParametersForSegment;A=void 0===A?null:A;var U=t.isClientTriggeredTraceEnabled;return U=void 0!==U&&U,t=void 0!==(t=t.enableImmediateQualityDownSwitch)&&t,n.$Player1=p,n.$Player47=S,p=c.perfLoggerProviders,S=c.observedOperationLoggers,c=c.isOzDevConsoleEnabled,n.$Player16=c||!1,n.$Player15=new(i("oz-player/loggings/OzMultiDestinationPerfLogger").OzMultiDestinationPerfLoggerProvider)(n.$Player70().concat(p)),n.$Player2=a,n.$Player4=null!=(c=u)?c:new(r("oz-player/configs/OzPlayerConfig"))(null!=(p=l)?p:{}),n.$Player21=new(r("oz-player/loggings/OzOperationLoggerObserver")),n.$Player21.observe(S,n.$Player15),n.$Player15.getOperationLogger("player_initialization").setInitiator("player-"+r("oz-player/shims/OzUuid")()).log(),n.$Player51=g,n.$Player27=v,n.$Player65=new(r("oz-player/strategies/OzBlockedRepresentationsManager"))(n.$Player4),n.$Player10.addSubscriptions(n.$Player65.onRepresentationBlocked(function(e){n.emit("representationBlocked",e)})),n.$Player30=[n.$Player65,new(r("oz-player/strategies/OzSupportedMimeCodecsRestriction"))].concat(P,[new(r("oz-player/strategies/OzSingleCodecRestriction"))]),n.$Player28=M,n.$Player29=_,n.$Player34=E,n.$Player35=b,n.$Player36=C,n.$Player37=T,n.$Player38=R,n.$Player40=w,n.$Player64=k,n.$Player67=U,n.$Player69=t,n.$Player45=B,n.$Player61=D,n.$Player3=o,n.$Player7=new(r("oz-player/media_source/MediaSourceManager"))({videoNode:n.$Player3,config:n.$Player4,perfLoggerProvider:n.$Player15,handleVttCaptionsUpdated:function(e){var t;t=null==(t=n.$Player5.get("caption"))?void 0:null==(t=t.getCurrentRepresentation())?void 0:t.getLang(),n.emit("vttCaptionsUpdated",e,t)},onClearVideoNodeError:function(){n.$Player71()},onRetryVideoElementError:function(e){n.emit("videoNodeErrorRetry",e)}}),n.$Player7.onError(function(e){n.$Player11.emitError(e)}),n.$Player4.getBool("clear_on_seek")&&((a=new(r("oz-player/playback_controls/OzClearSourceBufferOnSeekManager"))(n.$Player3,n.$Player4,n.$Player5,n.$Player15)).maybeOverwriteVideoCurrentTimeProperty(),n.$Player10.addSubscriptions(a.onError(n.$Player11.emitError)),n.$Player62=a),n.$Player23=f,
u=n.$Player23&&n.$Player23.getCachedRepresentations(),n.$Player24=u||O,n.$Player63=new(r("oz-player/manifests/OzDynamicVideoLibrary"))({config:n.$Player4}),n.$Player42=m,n.$Player43=y,n.$Player44=z,n.$Player66=A,n.$Player12=new(r("oz-player/networks/OzNetworkManager"))({config:n.$Player4,prefetchCache:n.$Player23,networkRequestStreamHandlers:n.$Player42,getOverrideOzRequestImplementation:n.$Player51,getShouldIncludeCredentials:n.$Player43,getCustomRequestParametersForURI:n.$Player44,networkRequestStreamRetryHandler:$,setCustomFetchStreamLoggingAttributes:n.$Player61,dynamicVideoLibrary:n.$Player63,configureCustomRequestParametersForSegment:n.$Player66,onResourceTimingBufferFull:function(){n.$Player72()}}),n.$Player17=d,n.$Player8=h,n.$Player13=new(r("oz-player/states/OzObservedPlaybackState"))(n.$Player4,n.$Player3,n.$Player15),n.$Player50=L,n.$Player14=new(r("oz-player/streams/OzEndOfStreamWatcher"))(n.$Player7,n.$Player4),n.$Player10.addSubscriptions(n.$Player14.addListener("streamEnd",function(){n.$Player49=!0,n.emit("streamEnd")})),n.$Player48=null!=(c=s)?c:n.$Player73(),n.$Player4.getNumber("pixels_below_viewport_to_observe")>0&&(n.$Player59=new(r("oz-player/states/OzPositionToViewport"))(n.$Player3,n.$Player4)),n}babelHelpers.inheritsLoose(n,e);var a=n.prototype;return a.$Player72=function(){this.$Player68||(r("oz-player/shims/ozReportUnexpectedError")(new Error("ResourceTiming buffer is full"),"ResourceTiming buffer is full","warn"),this.$Player68=!0)},a.$Player74=function(e){var t=this;this.$Player75();try{var n=i("oz-player/loggings/OzLoggingUtils").executeOperationAndLog(this.$Player15.cloneContext().setInitiator(this.$Player47),"parse_manifest",function(r){var n,a,s=t.$Player76(e);return n={currentServerTimeMs:n=String(null!=(n=s.getCustomField("currentServerTimeMs"))?n:""),ingestLastVideoFrameTs:a=String(null!=(a=s.getCustomField("lastVideoFrameTs"))?a:""),nowMs:String(Date.now())},a=(a=i("oz-player/utils/OzMpdUtils").getMpdLastTimeRange(s,t.$Player4))&&0!=a.endTime?a.endTime:null,r.setLiveheadPosition(a).setLiveheadSeqNumMpd(i("oz-player/utils/OzMpdUtils").getMpdLastSequenceNumber(s)).setManifestType(s.isStaticMpd()?"static":"dynamic").setIsTemplatedManifest(Boolean(s.getCustomField("isLiveTemplated"))).setUserInfo(n),s});this.$Player77(n)}catch(e){if(!((n=e)instanceof r("oz-player/utils/OzError")))throw n;this.$Player11.emitError(n)}},a.$Player77=function(e){var t=this;if(this.$Player9=o(e),this.$Player4.getBool("player_emit_mpdparsed_early")&&this.emit("mpdParsed",e),this.$Player25=this.$Player78(),this.$Player26=this.$Player79(),this.$Player65.setAvailableRepresentationsCount(e.getVideoRepresentations().length),null!=this.$Player17){var i=new(r("oz-player/parsers/OzMpdUpdater"))(this.$Player4,e,this.$Player12,this.$Player13,this.$Player15,{mpdUrl:null,createXmlParser:this.$Player80,customParsers:this.$Player27,customRepresentationParsers:this.$Player28,customSegmentTimelineParser:this.$Player29},this.$Player46,this.$Player67);this.$Player81(i),this.$Player10.addSubscriptions(i.onError(this.$Player11.emitError),i.addListener("manifestFetchError",function(e){return t.emit("manifestFetchError",e)}),i.addListener("manifestFetchErrorRetry",function(e){return t.emit("manifestFetchErrorRetry",e)}),i.addListener("streamTransitionToStatic",this.$Player82),i.addListener("streamGone",this.$Player83)),i.setupUpdateLoop(),this.$Player20=i}this.$Player4.getBool("use_live_latency_manager")?e.isStaticMpd()?this.$Player36=this.$Player36:(this.$Player39=new(r("oz-player/playback_controls/OzLiveLatencyManager"))({config:this.$Player4,mpd:e,playbackState:this.$Player13,bufferingDetector:this.$Player48,video:this.$Player3,loggerProvider:this.$Player15}),this.$Player36=-1*this.$Player39.getPreferredLiveHeadLatencySec()):this.$Player36=e.isStaticMpd()?this.$Player36:this.$Player84(e),this.$Player18=new(r("oz-player/playback_controls/OzPlayheadManager"))({video:this.$Player3,mpd:e,dynamicVideoLibrary:this.$Player63,playheadCatchup:this.$Player33,playbackState:this.$Player13,config:this.$Player4,perfLoggerProvider:this.$Player15,seekHandler:this.$Player35,initialPlaybackPosition:this.$Player36,canSupportSkipVideobufferGaps:null!=(i=null==(i=this.$Player62)?void 0:i.getCurrentTimePropertyOverwriteSuccess())&&i,liveLatencyManager:this.$Player39}),this.$Player19=new(r("oz-player/playback_controls/OzPlaybackTimeRangeManager"))({config:this.$Player4,video:this.$Player3,mpd:e,liveheadFallBehindBlockThreshold:this.$Player38,liveheadFallBehindBlockMargin:this.$Player40,playbackState:this.$Player13,perfLoggerProvider:this.$Player15}),this.$Player85()["catch"](function(e){if(e instanceof r("oz-player/utils/OzError"))t.$Player11.emitError(e);else{var i="object"==typeof e&&null!=e&&null!=e.message&&""!==e.message?String(e.message):String(e);t.$Player11.emitError(new(r("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Failed to setup streams: "+i,extra:{originalError:e,code:r("oz-player/utils/OzCustomErrorCode").SETUP_STREAMS_PROMISE_REJECTION.toString()}}))}}),this.emit("mpdReady",e)},a.load=function(e){var t=this;this.$Player17=e;try{var i=this.$Player8;null!=i?this.$Player74(i):null!=e?this.$Player86(e).then(function(e){if(t.$Player58)return t.$Player58=!1,void t.load(t.$Player17);t.$Player8=e,t.$Player52=0,t.$Player74(e)})["catch"](function(i){var n;if(t.$Player58)return t.$Player58=!1,void t.load(t.$Player17);n=i instanceof r("oz-player/utils/OzError")?i:new(r("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Unknown mpd url load failure; errorMessage: "+i.message+"; errorDescription: "+(null!=(n=i.description)?n:"")+";",extra:{originalError:i,url:e}}),t.$Player87(n,e)}):this.$Player11.emitError(new(r("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Cannot start Oz without a raw mpd xml or mpd url"}))}catch(e){i=e instanceof r("oz-player/utils/OzError")?e:new(r("oz-player/utils/OzError"))({type:"OZ_INITIALIZATION",description:"Failed to call load; errorMessage: "+e.message+"; errorDescription: "+(null!=(i=e.description)?i:"")+";"}),this.$Player11.emitError(i)}},a.$Player84=function(e){var t;return t=null!=(t=e.getVideoRepresentations()[0].getMaxGopSec())?t:0,(e=null!=(e=null==(e=e.getVideoRepresentations()[0].getEndingSegment())?void 0:e.getTimeRange())?e.endTime-e.startTime:0)>0&&(t=e),Math.min(this.$Player37+this.$Player4.getNumber("dynamic_mpd_initial_playback_position_offset_modifier"),-1*t*this.$Player4.getNumber("pdash_download_cursor_catchup_threshold_gop_multiplier"))},a.$Player86=function(e){return this.$Player52++,e=(e=this.$Player12.requestRawUrl(e,null,this.$Player15)).getStream().getReader(),i("oz-player/utils/OzReadableStreamUtils").pumpString(e)},a.$Player88=function(){null!=this.$Player53&&(r("oz-player/shims/ozClearTimeout")(this.$Player53),this.$Player53=null)},a.$Player87=function(e,t){var i=this,n=!0,a=this.$Player52-1,s=e.getExtra().code;this.$Player54!==s?(this.$Player54=s,this.$Player55=1):this.$Player55++;var o=function(){n=!1};s={endStream:function(){o(),i.$Player49=!0,i.emit("streamGoneBeforeStart")},consecutiveFailuresForErrorCode:this.$Player55,error:e,isInitialRequest:!0,retry:function(e){o(),i.$Player88(),i.$Player53=r("oz-player/shims/ozSetTimeoutAcrossTransitions")(function(){i.$Player88(),i.load(t)},null!=(null==e?void 0:e.waitMs)?null==e?void 0:e.waitMs:1e3)},retryAttemptCount:a},this.$Player4.getNumber("initial_manifest_request_retry_count")>0&&this.emit("manifestFetchError",s),n&&this.$Player11.emitError(e)},a.updatePlayerRunTimeConfig=function(e){var t=e.manifestUrl,r=e.audioStreamDataHandler,i=e.videoStreamDataHandler,n=e.applicationStreamDataHandler;if(e=e.resetStreamAnchor,void 0!==i){var a=this.$Player5.get("video");a&&a.updateRunTimeConfigs({streamDataHandler:i})}void 0!==e&&((a=this.$Player5.get("video"))&&a.updateRunTimeConfigs({resetStreamAnchor:e}),(i=this.$Player5.get("audio"))&&i.updateRunTimeConfigs({resetStreamAnchor:e}),this.$Player18.resetCurrentTime()),void 0!==r&&(a=this.$Player5.get("audio"))&&a.updateRunTimeConfigs({streamDataHandler:r}),void 0!==n&&(i=this.$Player5.get("caption"))&&i.updateRunTimeConfigs({streamDataHandler:n,resetStreamAnchor:e}),null!=t&&""!==t&&this.$Player89(t)},a.$Player90=function(e,t){var r=this,n=e.getMimeCodecs();return n=this.$Player7.createSourceBufferManager(n,t,e.getInitSegment().getData()),this.$Player91(n,t,e),e=n.then(function(e){return r.$Player48&&"caption"!==t&&r.$Player48.setSourceBufferState(t,e.getSourceBufferState()),e}),i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(e,this.$Player15,"source_attach",function(e){e.setType(t)}),e.then(function(e){"caption"!==t&&r.$Player18.observeSourceBufferState(e.getSourceBufferState(),t)})},a.isDrm=function(){var e=this.$Player46;return null!=e&&(null!=(e=e.hasContentProtections())&&e)},a.$Player75=function(){if(this.$Player45.length>0){var e=this.$Player46=new(i("oz-player/drm/OzDrmManager").OzDrmManager)(this.$Player15,this.$Player3,{maxStartEMEAttempts:this.$Player4.getNumber("max_start_eme_attempts"),throwNoLicenseError:!0});e.onError(this.$Player11.emitError),this.$Player45&&this.$Player45.forEach(function(t){e.addProvider(t)}),this.$Player28.drmProtections&&this.$Player11.emitError(new(r("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:'"drmProtections" is a reserved parser name for "customRepresentationParsers". Please rename your parser.'})),this.$Player28.drmProtections=function(t){return e.parseContentProtectionForRepresentation(t)}}},a.$Player92=function(e){var t=this,i=o(this.$Player9);return e=[this.$Player4,e,i.getVideoRepresentations(),this.$Player30,this.$Player13,window.devicePixelRatio||1,function(){return t.$Player93()},i.isStaticMpd()?"static":"dynamic"],null!=(i=i=this.$Player34&&this.$Player34.apply(this,e))?i:babelHelpers.construct(r("oz-player/strategies/OzAbrManager"),e)},a.$Player94=function(e){return"caption"===e||this.$Player4.getBool("append_once_per_stream_in_application_stream")},a.$Player91=function(e,t,n){var a=this,s=o(this.$Player9),u=this.$Player6.get(t),l=new(r("oz-player/streams/OzMediaStream"))({config:this.$Player4,sourceBufferManagerPromise:e,networkManager:this.$Player12,playbackState:this.$Player13,endOfStreamWatcher:"caption"!==t?this.$Player14:null,bufferTargetCalculator:this.$Player95(t),priorityCalculator:this.$Player96(),streamSegmentsCountCalculator:this.$Player97(t),abrManager:u,representation:n,loggerProvider:this.$Player15.cloneContext().setType(t),segmentLocator:this.$Player60,setCustomFetchStreamLoggingAttributes:this.$Player61,blockedRepresentationsManager:this.$Player65,dynamicVideoLibrary:this.$Player63,shouldAppendOncePerStream:this.$Player94(t),mediaStreamType:t});0===this.$Player36?l.start():(o(this.$Player9),this.$Player10.addSubscriptions(this.$Player18.addListener("initialPlaybackPositionSet",function(){l.start()}))),this.$Player10.addSubscriptions(l.onError(this.$Player11.emitError)),this.$Player22&&this.$Player10.addSubscriptions(this.$Player22.listenToMediaStreamInitAppended(l)),"video"===t&&(this.$Player32=new(r("oz-player/streams/OzHandleUserRepresentationSwitch"))(this.$Player4,this.$Player13,i("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player4,this.$Player30,this.$Player93(),s.getVideoRepresentations()),l,e,this.$Player69),this.$Player10.addSubscriptions(this.$Player32.onError(this.$Player11.emitError))),this.$Player5.set(t,l),this.$Player10.addSubscriptions(l.addListener("switchRepresentation",function(){var e,r=l.getCurrentRepresentation();null==(e=a.$Player22)||e.setTimeRangeProvider(r),a.$Player18.setTimeRangeProvider(r),null!=a.$Player19&&a.$Player19.setTimeRangeProvider(r),"video"===t&&a.emit("switchVideoRepresentation")}),l.addListener("SegmentAppended",function(e){a.$Player98("SegmentAppended",e)}),l.addListener("streamError",function(e){a.emit("streamError",e)}),l.addListener("streamErrorRetry",function(e){a.emit("streamErrorRetry",e)}))},a.$Player99=function(){return null!=this.$Player64?[new(r("oz-player/strategies/OzBufferEndLimitStrategy"))(this.$Player3,this.$Player64)]:[new(r("oz-player/strategies/OzStaleManifestBufferTargetStrategy"))(o(this.$Player9),this.$Player4),new(r("oz-player/strategies/OzStartupBufferTargetStrategy"))(this.$Player13,this.$Player4),new(r("oz-player/strategies/OzBufferAheadTargetStrategy"))(this.$Player4)]},a.$Player100=function(){return null==this.$Player64?[new(r("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player4,minimumBufferTargetSec:this.$Player4.getNumber("buffer_target_constraint_minimum_sec")})]:[]},a.$Player101=function(){return null==this.$Player64?[new(r("oz-player/strategies/OzBufferTargetCalculatorQuotaExceededConstraint"))({config:this.$Player4,minimumBufferTargetSec:0})]:[]},a.$Player78=function(){return new(r("oz-player/strategies/OzBufferTargetCalculator"))(this.$Player99(),this.$Player100())},a.$Player79=function(){return null!=this.$Player1?new(r("oz-player/strategies/OzBufferTargetCalculator"))([].concat(this.$Player1,this.$Player99()),this.$Player101()):this.$Player78()},a.$Player95=function(e){return"caption"===e?this.$Player26:this.$Player25},a.$Player81=function(e){var t=this;if(this.$Player4.getNumber("stream_interrupt_check_mpd_stale_count_threshold")>0){var i=this.$Player48,n=new(r("oz-player/strategies/OzPlayheadAtInterruptionDetector"))(this.$Player3,i);this.$Player10.addSubscriptions(n.addListener("playheadAtInterruption",function(e){t.$Player15.getOperationLogger("stream_interrupted").log(),t.emit("streamInterruptAt",e)}),e.addListener("streamInterruptAt",function(e){var r;null==(r=t.$Player48)||r.notifyStreamInterrupted(),n.notifyStreamInterrupted(e)}),e.addListener("streamResumedAt",function(e){var r;t.$Player15.getOperationLogger("stream_resumed").log(),null==(r=t.$Player48)||r.notifyStreamResumed(),n.notifyStreamResumed(),t.emit("streamResumedAt",e)})),this.$Player31=n}},a.$Player96=function(){var e=[new(r("oz-player/strategies/OzPlayingStatePriorityStrategy"))(this.$Player13),new(r("oz-player/strategies/OzBufferAheadPriorityStrategy"))(this.$Player4,this.$Player13)].concat(this.$Player4.getNumber("pixels_below_viewport_to_observe")>0&&null!=this.$Player59?new(r("oz-player/strategies/OzPositionToViewportPriorityStrategy"))(this.$Player59,this.$Player4):[]);return new(r("oz-player/strategies/OzPriorityCalculator"))(e)},a.$Player97=function(e){var t=[new(r("oz-player/strategies/OzStaticStreamSegmentsStrategy"))(this.$Player4),new(r("oz-player/strategies/OzBufferTargetBoundedStreamSegmentsCountStrategy"))(this.$Player95(e),this.$Player4)];return 0!==this.$Player4.getNumber("paused_stream_segments_count")&&t.push(new(r("oz-player/strategies/OzPausedStreamSegmentsCountStrategy"))(this.$Player13,this.$Player4)),"video"===e&&(e=o(this.$Player9),t.push(new(r("oz-player/strategies/OzBandwidthBoundaryStreamSegmentsCountStrategy"))(this.$Player4,e.getVideoRepresentations()))),new(r("oz-player/strategies/OzStreamSegmentsCountCalculator"))(t)},a.onError=function(e){return this.$Player11.onError(e)},a.getSelectedVideoQuality=function(){var e=this.$Player9;if(!e||this.$Player2)return"";var t=this.$Player5.get("video");return(t=t&&t.getCurrentRepresentation())instanceof r("oz-player/manifests/OzVideoRepresentation")?t.getQualityLabel():(e=(t=e.getVideoRepresentations())[0])?e.getQualityLabel():(e||r("oz-player/shims/ozvariant")(0,19857),"")},a.switchToVideoQuality=function(e){var t=o(this.$Player9);if(t=t.getVideoRepresentations().find(function(t){return t.getQualityLabel()===e})){var r=this.$Player5.get("video");r&&(r.switchRepresentation(t),r.disableAdaptation())}},a.getIsVideoQualityAdaptationEnabled=function(){var e=this.$Player5.get("video");return!!e&&e.getIsAdaptationEnabled()},a.enableVideoQualityAdaptation=function(){var e=this.$Player5.get("video");e&&e.enableAdaptation()},a.getVideoQualities=function(){var e=this,t=this.$Player9;return t?t.getVideoRepresentations().filter(function(t){var r;return!(null==(r=e.$Player65)?void 0:r.isBlocked(t.getID()))}).map(function(e){return e.getQualityLabel()}):[]},a.setEnableLiveheadCatchup=function(e){this.$Player19&&(e?this.$Player15.getOperationLogger("live_catchup_enabled").setIsLatencyCachupEnabled(!0).log():this.$Player15.getOperationLogger("live_catchup_disabled").setIsLatencyCachupEnabled(!1).log(),this.$Player19.setTimelineBlockingEnabled(e)),this.$Player5.forEach(function(t){t.setEnableLiveheadCatchup(e)}),this.$Player18.setEnableLiveheadCatchup(e)},a.$Player85=function(){var e=this,r=o(this.$Player9);r=r.getVideoRepresentations()[0],this.$Player60=r&&r.canPredict()&&this.$Player4.getBool("pdash_use_pdash_segmentlocator")||r&&r.canApproximateId()?new(i("oz-player/streams/OzPredictedSegmentLocator").OzPredictedSegmentLocator)({videoNode:this.$Player3,liveLatencyManager:this.$Player39,loggerProvider:this.$Player15,dynamicVideoLibrary:this.$Player63}):null,r=this.$Player2?[this.$Player102({liveConfigsFromAudioStream:!0}),this.$Player103()]:[this.$Player104(),this.$Player102({}),this.$Player103()];var n=[];return t("Promise").all(r).then(function(){var t=e.$Player5.get("video"),r=e.$Player5.get("audio"),i=e.$Player5.get("caption");t&&n.push(t.getCurrentRepresentation()),r&&n.push(r.getCurrentRepresentation()),i&&n.push(i.getCurrentRepresentation()),n.forEach(function(t){e.$Player10.addSubscriptions(t.addUpdateListener(function(){e.$Player98("SegmentIndexesUpdated",n)}))}),e.$Player98("InitialSegmentIndexes",n),e.$Player3&&e.$Player3.style&&(e.$Player3.style.display=e.$Player2?"none":"block")})},a.$Player105=function(e){e.getTimeRanges().length?(e=e.getTimeRanges()[e.getTimeRanges().length-1].endTime,this.$Player7.updateDuration(e,!0)):this.$Player15.getOperationLogger("playhead_adjustment").setInitiator("setup_initial_duration").setResult("failed").log()},a.$Player106=function(e){var t;this.$Player22=new(r("oz-player/media_source/OzMediaSeekableRangeManager"))(this.$Player7,this.$Player4),this.$Player105(e),null==(t=this.$Player22)||t.setTimeRangeProvider(e),this.$Player18.setTimeRangeProvider(e),null!=this.$Player19&&this.$Player19.setTimeRangeProvider(e)},a.$Player104=function(){var e=o(this.$Player9);if(!(e=e.getVideoRepresentations()).length)return r("oz-player/shims/OzMaybeNativePromise").reject(new Error("no video representations in the manifest."));var t=i("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(this.$Player4,this.$Player30,this.$Player93(),e);if(!t.length)return e=e.map(function(e){return e.getQualityLabel()+"@"+e.getWidth()+"x"+e.getHeight()+"("+e.getMimeCodecs()+")"}),r("oz-player/shims/OzMaybeNativePromise").reject(new Error("restricted all video representations: "+e.join(", ")));this.$Player106(t[0]),e=this.$Player107(t);var n=this.$Player92(e||t[0]);return this.$Player6.set("video",n),e||(e=n.getBestRepresentation()),this.$Player90(e||t[0],"video")},a.$Player102=function(e){e=void 0!==(e=e.liveConfigsFromAudioStream)&&e;var t=o(this.$Player9);return t=t.getAudioRepresentations(),e&&this.$Player106(t[0]),t.length?this.$Player90(this.$Player108(t)||t[0],"audio"):r("oz-player/shims/OzMaybeNativePromise").resolve()},a.$Player103=function(){var e=o(this.$Player9);return(e=e.getApplicationRepresentations()).length?this.$Player90(this.$Player109(e)||e[0],"caption"):r("oz-player/shims/OzMaybeNativePromise").resolve()},a.getMpd=function(){return this.$Player9},a.destroy=function(e){var r,i,n=this;return e=this.$Player15.getOperationLogger("unload").setInitiator(e).start(),null==(r=this.$Player62)||r.destroy(),this.$Player88(),this.$Player5.forEach(function(e){e.cleanup()}),this.$Player32&&this.$Player32.cleanup(),this.$Player5=new Map,this.$Player10.release(),this.$Player10.engage(),this.$Player13.destroy(),this.$Player18&&this.$Player18.destroy(),this.$Player39&&(this.$Player39.destroy(),this.$Player39=null),this.$Player19&&(this.$Player19.destroy(),this.$Player19=null),this.$Player46&&this.$Player46.destroy(),this.$Player59&&this.$Player59.destroy(),this.$Player12&&this.$Player12.destroy(),this.$Player50&&(this.$Player50=null),this.$Player7&&this.$Player7.detach(),r=t("Promise").resolve(),this.$Player3.pause(),this.$Player3.removeAttribute("src"),this.$Player3.removeAttribute("srcObject"),"function"==typeof this.$Player3.setMediaKeys&&(r=this.$Player3.setMediaKeys(null)),this.$Player20&&this.$Player20.destroy(),this.$Player31&&this.$Player31.destroy(),this.$Player21.destroy(),null==(i=this.$Player22)||i.destroy(),this.$Player48&&this.$Player48.destroy(),this.$Player65&&this.$Player65.destroy(),e.log(),this.emit("destroyed"),i=[r],t("Promise").all(i).then(function(){n.$Player3.load()})},a.$Player107=function(e){var t,i=this;return(t=e.find(function(e){return-1!==i.$Player24.indexOf(e.getID())}))||(t=r("oz-player/utils/getRepresentationInCache")(e,this.$Player23)),t||null},a.$Player108=function(e){var t,i=this,n=o(this.$Player9);return(t=e.find(function(e){return-1!==i.$Player24.indexOf(e.getID())}))||(t=r("oz-player/utils/getRepresentationInCache")(e,this.$Player23)),!t&&!n.isStaticMpd()&&e.length>1&&this.$Player4.getBool("live_audio_ibr")&&(t=(n=new(r("oz-player/strategies/OzAudioIBRManager"))(this.$Player4,this.$Player15)).getInitialAudioRepresentation(e)),t||null},a.$Player109=function(){return null},a.$Player76=function(e){var t=new(r("oz-player/parsers/OzMpdParser"))(this.$Player4,{mpdUrl:this.$Player17,createXmlParser:this.$Player80,customParsers:this.$Player27,customRepresentationParsers:this.$Player28,customSegmentTimelineParser:this.$Player29},this.$Player12,this.$Player15,this.$Player46,this.$Player24,this.$Player65);return this.$Player10.addSubscriptions(t.onError(this.$Player11.emitError)),t.parse(e)},a.$Player70=function(){var e=[];return this.$Player16&&e.push(new(i("oz-player/loggings/OzDevConsolePerfLogger").OzDevConsolePerfLoggerProvider)),e},a.$Player110=function(e,t){return(t=this.$Player5.get(t))?t.getRepresentationIDAtTime(e):null},a.getAudioRepresentationIDAtTime=function(e){return this.$Player110(e,"audio")},a.getVideoRepresentationIDAtTime=function(e){return this.$Player110(e,"video")},a.getCurrentVideoRepresentation=function(){return this.$Player111("video")},a.getCurrentAudioRepresentation=function(){return this.$Player111("audio")},a.$Player111=function(e){var t=this.$Player110(this.$Player13.getCurrentTime(),e),r=this.$Player9;if(!r)return null;var i=[];return"audio"===e?i=r.getAudioRepresentations():"video"===e&&(i=r.getVideoRepresentations()),null!=(e=i.find(function(e){return e.getID()===t}))?e:null},a.getSelectedVideoRepresentation=function(){var e=this.$Player5.get("video");return null!=e?e.getCurrentRepresentation():null},a.getSelectedAudioRepresentation=function(){var e=this.$Player5.get("audio");return null!=e?e.getCurrentRepresentation():null},a.getDebug=function(){var e,t,r,i,n,a,s,u,l=this,h=this.$Player5.get("video"),d=this.$Player5.get("audio"),c=this.$Player5.get("caption");h&&(e=null==(u=h.getDebug())?void 0:u.MediaStreamAbrManager,(t=null==(u=h.getDebug())?void 0:u.SourceBufferManager)&&(r=null==(u=t.getDebug())?void 0:u.SourceBuffer));return d&&(i=null==(u=d.getDebug())?void 0:u.SourceBufferManager)&&(n=null==(u=i.getDebug())?void 0:u.SourceBuffer),c&&(a=null==(u=c.getDebug())?void 0:u.SourceBufferManager)&&(s=null==(u=a.getDebug())?void 0:u.SourceBuffer),{getManifest:function(){return o(l.$Player9)},indentifiersIntact:!0,VideoSourceStream:h,VideoAbrManager:e,VideoBufferManager:t,VideoSourceBuffer:r,AudioSourceStream:d,AudioBufferManager:i,AudioSourceBuffer:n,CaptionSourceStream:c,CaptionBufferManager:a,CaptionSourceBuffer:s}},a.injectExternalDebugEvent=function(e,t){this.$Player98(e,t)},a.$Player98=function(e,t){this.emit("debug/dashPlayerEvent",{detail:{type:e,event:t}})},a.$Player73=function(){var e=this,t=new(r("oz-player/strategies/OzBufferingDetector"))(this.$Player3,this.$Player4.getLegacyConfig(),function(){return e.$Player49?e.$Player3.duration:Infinity});return t.attachPerfLoggerProvider(this.$Player15),this.$Player10.addSubscriptions(t.addListener("enterBuffering",function(t){e.emit("enterBuffering",t)}),t.addListener("leaveBuffering",function(t){e.emit("leaveBuffering",t)})),t},a.$Player93=function(){return this.$Player50?this.$Player50():{width:this.$Player3.offsetWidth,height:this.$Player3.offsetHeight}},a.getMpdUrl=function(){return this.$Player17},a.$Player89=function(e){var t=this;this.$Player17=e;var r=this.$Player9;r?(r.updateLocation(e),this.$Player41&&(this.$Player10.releaseOne(this.$Player41),this.$Player41=null),e=function(){t.$Player41&&(t.$Player10.releaseOne(t.$Player41),t.$Player41=null),t.$Player5.forEach(function(e,i){var n=e.getCurrentRepresentation(),a=n.getQualityLabel();n=("video"===i?r.getVideoRepresentations():r.getAudioRepresentations()).slice(),"video"===i&&(i=t.$Player6.get(i))&&i.updateRepresentations(r.getVideoRepresentations()),i=n[0],n.forEach(function(e){e.getQualityLabel()===a&&(i=e)}),e.switchRepresentation(i),e.restartLoopBody()})},this.$Player41=r.addListener("updated",e),this.$Player10.addSubscriptions(this.$Player41)):this.$Player58=!0},a.getPerfLoggerProvider=function(){return this.$Player15},a.getApproximateFBLSToPlayerDisplayLatency=function(){var e,t;e=Number(null!=(e=null==(e=this.$Player9)?void 0:e.getCustomField("lastVideoFrameTs"))?e:void 0),t=Number(null!=(t=null==(t=this.$Player9)?void 0:t.getCustomField("currentServerTimeMs"))?t:void 0);var r=this.$Player112(e,t);return{latencyFromClockSync:e=this.$Player113(e,t),latencyFromMpdUpdate:r}},a.$Player112=function(e,t){return!this.$Player13.getCurrentTime()||isNaN(e)||isNaN(t)?null:(t=0,this.$Player56===e?t=(r("oz-player/shims/OzPerformance").now()-Number(this.$Player57))/1e3:(this.$Player57=r("oz-player/shims/OzPerformance").now(),this.$Player56=e),e=e/1e3+t-this.$Player13.getCurrentTime())},a.$Player113=function(e,t){var i;return!this.$Player13.getCurrentTime()||isNaN(e)||isNaN(t)||null==r("oz-player/networks/OzClientClock").getClientClockOffsetMs()||!r("oz-player/networks/OzClientClock").getClientClockOffsetMs()?null:i=((i=this.$Player13.getCurrentTimeUpdateTime()+(null!=(i=r("oz-player/networks/OzClientClock").getClientClockOffsetMs())?i:0))-(t=t)-(1e3*this.$Player13.getCurrentTime()-(e=e)))/1e3},a.$Player71=function(){this.$Player5.forEach(function(e){e.restartLoopBody();var t=e.getCurrentRepresentation();e.switchRepresentation(t)})},n}(r("oz-player/shims/OzEventEmitter")),s["default"]=e},98),__d("oz-player",["oz-player/Player"],function(e,t,r,i,n,a,s){"use strict";s["default"]=r("oz-player/Player")},98),__d("oz-player/media_source/SourceBufferManagerUtils",["oz-player/utils/OzSourceBufferUtil"],function(e,t,r,i,n,a,s){"use strict";function e(e,t){var r=i("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(t);return function(){var e=i("oz-player/utils/OzSourceBufferUtil").getEndBufferedTime(t);return{startTime:r,endTime:e}}}s.startMeasuringAppendedBuffer=e},98),__d("oz-player/utils/OzFakeEventTarget",[],function(e,t,r,i,n,a){"use strict";e=function(){function e(){this.$1={}}var t=e.prototype;return t.dispatchEvent=function(e){null!=this.$1[e]&&this.$1[e].forEach(function(e){return e()})},t.addEventListener=function(e,t){var r=this;return void 0===this.$1[e]&&(this.$1[e]=new Set),this.$1[e].add(t),{remove:function(){r.removeEventListener(e,t)}}},t.removeEventListener=function(e,t){this.$1[e]&&this.$1[e]["delete"](t)},t.destroy=function(){this.$1={}},e}(),a["default"]=e},66),__d("oz-player/states/OzObservedSourceBufferState",["oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzFakeEventTarget"],function(e,t,r,i,n,a,s){"use strict";e=function(e){function t(t,i){var n;return(n=e.call(this)||this).$OzObservedSourceBufferState2=new(r("oz-player/shims/OzSubscriptionsHandler")),n.$OzObservedSourceBufferState3=[],n.$OzObservedSourceBufferState6=function(){var e;try{e=n.$OzObservedSourceBufferState1.getBuffered()}catch(e){if("InvalidStateError"===e.name)return void(n.$OzObservedSourceBufferState3=[]);throw e}for(var t=[],r=0;r<e.length;r++)t.push({startTime:e.start(r),endTime:e.end(r)});n.$OzObservedSourceBufferState3=t},n.$OzObservedSourceBufferState1=t,n.$OzObservedSourceBufferState4=i,n.$OzObservedSourceBufferState5(),n}babelHelpers.inheritsLoose(t,e);var i=t.prototype;return i.$OzObservedSourceBufferState5=function(){var e=this;this.$OzObservedSourceBufferState2.release(),this.$OzObservedSourceBufferState2=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$OzObservedSourceBufferState2.addSubscriptions(this.$OzObservedSourceBufferState1.registerOnUpdateEndListener(function(){e.$OzObservedSourceBufferState6(),e.dispatchEvent("buffer_updated")}),this.$OzObservedSourceBufferState1.registerOnErrorListener(this.$OzObservedSourceBufferState6))},i.setSourceBuffer=function(e){this.$OzObservedSourceBufferState1=e,this.$OzObservedSourceBufferState5(),this.$OzObservedSourceBufferState6()},i.getBufferedRanges=function(){return this.$OzObservedSourceBufferState3},i.destroy=function(){e.prototype.destroy.call(this),this.$OzObservedSourceBufferState2.release(),this.$OzObservedSourceBufferState2.engage()},t}(r("oz-player/utils/OzFakeEventTarget")),s["default"]=e},98),__d("oz-player/media_source/SourceBufferManager",["Promise","oz-player/loggings/OzLoggingUtils","oz-player/media_source/SourceBufferManagerUtils","oz-player/shims/OzDOMEventListener","oz-player/shims/OzDeferred","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzStreams","oz-player/shims/OzSubscriptionsHandler","oz-player/states/OzObservedSourceBufferState","oz-player/utils/OzCustomErrorCode","oz-player/utils/OzError","oz-player/utils/ozConcatUint8Arrays"],function(e,t,r,i,n,a,s){"use strict";e=function(){function e(e,t,i,n,a,s){var o=this;void 0===s&&(s=null),this.$3=null,this.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$6=!1,this.$7=[],this.$11=!1,this.$12=!1,this.$14=0,this.$27=function(){if(o.$9.hasError()){o.$12=!1,o.$11=!1;var e=o.$9.getMediaErrorName();e=null!=e?e:"An unknown source buffer error occurred.";var t=o.$9.getErrorCode();t=null!=t?String(t):r("oz-player/utils/OzCustomErrorCode").SOURCE_BUFFER_MANAGER_UPDATEEND_UNKNOWN_ERROR,e=new(r("oz-player/utils/OzError"))({type:"OZ_SOURCE_BUFFER",description:e,extra:{code:t}}),o.$3&&o.$3.reject(e),o.$3=null,o.cancelOperationAndCleanQueue()}else o.$12||(o.$12=!0,t=o.$9.getVideoNode(),e=o.$27,t=r("oz-player/shims/OzDOMEventListener").listenDOMEvent(t,"error",e),o.$4.addSubscriptions(t))},this.$17=function(){var e=o.$1;null!=e&&e.getOperationLogger("source_buffer_updateend").setError(null!=(e=o.$9.getMediaErrorName())?e:void 0).setCode(o.$9.getErrorCode()).setResult(o.$11?"failed":"success").log(),(e=o.$3)&&(o.$11?o.$27():(e.resolve(),o.$3&&(o.$3=null)))},this.$18=function(){var e=o.$1;null!=e&&e.getOperationLogger("source_buffer_error").setError(null!=(e=o.$9.getMediaErrorName())?e:void 0).setCode(o.$9.getErrorCode()).setResult("failed").log(),o.$11=!0},this.$1=s,this.$2=e,this.$10=t,this.$16(),this.$8=new(r("oz-player/states/OzObservedSourceBufferState"))(this.$2,this.$10),this.$9=i,this.$13=n,this.$15=a}var n=e.prototype;return n.$16=function(){this.$4.release(),this.$4=new(r("oz-player/shims/OzSubscriptionsHandler")),this.$4.addSubscriptions(this.$2.registerOnUpdateEndListener(this.$17),this.$2.registerOnErrorListener(this.$18))},n.setSourceBuffer=function(e){null!=e&&(this.cancelOperationAndCleanQueue(),this.$2=e,this.$16(),this.$8.setSourceBuffer(e))},n.queueData=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=0);var n=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return this.$7.push({data:e,deferred:n,loggerProvider:t,appendTarget:i}),e=n.getPromise(),this.$6||this.$19()["catch"](function(){}),e},n.cancelOperationAndCleanQueue=function(e){void 0===e&&(e=null),e&&e.cloneContext().getOperationLogger("source_buffer_cancel_and_clean").log();var t=this.$20("cancel and clean");this.$7.forEach(function(e){(e=e.deferred).reject(t)}),this.$7=[];try{this.$13(this.$2)&&(this.$9.hasError()||this.$2.abort())}catch(t){var r=t;e&&e.cloneContext().getOperationLogger("cancel_operation_abort_failed").setError(r).setReason(this.$15?this.$15():null).log()}(e=this.$3)&&e.reject(t),this.$5&&(this.$5.reject(t),this.$5=null)},n.getSourceBufferState=function(){return this.$8},n.$21=function(e,t){e=Math.max(e,0),t>0&&t>e&&this.$2.remove(e,t)},n.$22=function(e,t){if(e=Math.max(e,0),t>0&&t>e){var i=this.$23();return this.$21(e,t),i}return r("oz-player/shims/OzMaybeNativePromise").resolve()},n.clearRangeWithWait=function(e){var r=this;return this.cancelOperationAndCleanQueue(),e.reduce(function(e,t){var i=t.fromTime,n=t.toTime;return e.then(function(){return r.$22(i,n)})},t("Promise").resolve())},n.$23=function(e){
var t=this.$3=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return t=t.getPromise(),e&&i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(t,e,"wait_for_source_buffer"),t},n.$24=function(e,t,n){var a=this,s=function(){var s=a.$3=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise")),o=!1,u=!0;try{u=!!a.$2.getBuffered()}catch(e){u=!1}try{if(o=a.$2.getIsUpdating(),!u)return s.resolve(),s.getPromise();a.$2.appendBuffer(e)}catch(e){u=e;var l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_UNKNOWN_ERROR,h=u.name,d=u.message;"QuotaExceededError"===h?l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_QUOTA_EXCEEDED_ERROR:a.$9.hasError()?l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_MEDIA_ERROR_ATTRIBUTE_NOT_NULL:o?l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_SOURCE_BUFFER_UPDATING_ATTRIBUTE_IS_TRUE:"InvalidStateError"===h&&"string"==typeof d&&/SourceBuffer has been removed/.test(d)?l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR_SOURCE_BUFFER_HAS_BEEN_REMOVED:"InvalidStateError"===h&&(l=r("oz-player/utils/OzCustomErrorCode").APPEND_BUFFER_INVALID_STATE_ERROR),o=new(r("oz-player/utils/OzError"))({type:"QuotaExceededError"===h?"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":"OZ_SOURCE_BUFFER",description:String(d),extra:{originalError:u,code:l}}),a.$3=null,s.reject(o)}return h=s.getPromise(),t&&i("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation(h,t,"append",function(t){var r;t.setLength(e.byteLength),r=null!=(r=null==n?void 0:n.appendTarget)?r:null,t.setAppendTarget(r)}),h};return this.$2.getIsUpdating()?this.$23(t).then(s)["catch"](function(e){throw e}):(this.$14+=e.byteLength,s())},n.$19=function(){var e=this;if(this.$6)return r("oz-player/shims/OzMaybeNativePromise").reject(this.$25("Another unit of queued data is being appended."));var t=this.$7.shift();if(!t)return this.$6=!1,r("oz-player/shims/OzMaybeNativePromise").resolve();var n=t.data,a=t.deferred,s=t.loggerProvider;t=t.appendTarget,this.$6=!0,n=n instanceof i("oz-player/shims/OzStreams").OzReadableStream?this.$26(n,s,t):this.$24(n,s,{appendTarget:t});var o=i("oz-player/media_source/SourceBufferManagerUtils").startMeasuringAppendedBuffer(this.$10,this.$2,this.$8);return n["catch"](function(e){a.reject(e)}).then(function(){var t=o(),r=t.startTime;t=t.endTime,a.resolve({startTime_UNSAFE:r,endTime_UNSAFE:t,appendedSec:t-r}),e.$6=!1,e.$19()["catch"](function(){})})},n.$26=function(e,t,i){var n=this,a=[],s=0,o=e.getReader();return(e=function u(){var e=new(r("oz-player/shims/OzDeferred"))(r("oz-player/shims/OzMaybeNativePromise"));return n.$5=e,o.read().then(function(t){e.resolve(t),n.$5=null})["catch"](function(t){e.reject(t),n.$5=null}),e.getPromise().then(function(e){if(e.done){var o=r("oz-player/utils/ozConcatUint8Arrays")(a);return o=o.buffer,a.length=0,s=0,o.byteLength>0?n.$24(o,t,{appendTarget:i}):r("oz-player/shims/OzMaybeNativePromise").resolve()}return e=o=e.value,i>0&&(o=o instanceof Uint8Array?o:new Uint8Array(o),a.push(o),(s+=o.byteLength)>=i&&(o=(o=r("oz-player/utils/ozConcatUint8Arrays")(a)).buffer,a.length=0,s=0,e=o)),e&&e.byteLength>=i?n.$24(e,t,{appendTarget:i}).then(function(){return u()}):u()},function(e){return n.$2.abort(),r("oz-player/shims/OzMaybeNativePromise").reject(e)})})()},n.$25=function(e){var t=this.$1;return null!=t&&t.getOperationLogger("source_buffer_invariant").setError(e).setResult("failed").log(),(t=new Error(e)).name="invariant_violation",t},n.$20=function(e){return(e=new Error("operation is cancelled: "+e)).name="cancelled",e},n.destroy=function(){var e=this,t=this.$1;t&&t.cloneContext().getOperationLogger("source_buffer_destroy").log(),(t=this.$3)&&(this.$12?t.getPromise()["catch"](function(){e.$3=null,e.$4.release(),e.$4=new(r("oz-player/shims/OzSubscriptionsHandler"))}):(t.reject(this.$20("destroyed")),this.$3=null,this.$4.release(),this.$4=new(r("oz-player/shims/OzSubscriptionsHandler")))),this.$8.destroy()},n.getDebug=function(){return{SourceBuffer:this.$2}},e}(),s["default"]=e},98);