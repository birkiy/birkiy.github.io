__d("CometRouteActorToasterQuery_facebookRelayOperation",[],function(e,t,n,r,i){i.exports="4961682900536225"},null),__d("CometRouteActorToasterQuery.graphql",["CometRouteActorToasterQuery_facebookRelayOperation"],function(e,t,n,r,i){"use strict";e=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"scale"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i={alias:"toast_icon",args:[{kind:"Literal",name:"height",value:32},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:32}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[n,r,i],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometRouteActorToasterQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[n,r,i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:t("CometRouteActorToasterQuery_facebookRelayOperation"),metadata:{},name:"CometRouteActorToasterQuery",operationKind:"query",text:null}}}(),i.exports=e},null),__d("CometVirtualCursorStatus",["UserAgent","cr:1345969","setTimeout"],function(e,t,n,r,i,o,a){"use strict";function s(){C||(C=window.addEventListener("blur",function(){m=null,u()}))}function u(){C&&(C.remove(),C=null)}function e(e){m=e.keyCode,s()}function r(){m=null,u()}function l(e){var t=new Set,r=h.isKeyDown(),i=e.WEBKIT_FORCE_AT_MOUSE_DOWN,o=e.clientX,a=e.clientY,s=e.isTrusted,u=e.mozInputSource,l=e.offsetX,c=e.offsetY,f=e.webkitForce;return 0===o&&0===a&&l>=0&&c>=0&&E&&s&&null==u&&t.add("Chrome"),p&&E&&!r&&null!=f&&f<i&&0===l&&0===c&&null==u&&t.add("Safari-edge"),0===o&&0===a&&l<0&&c<0&&E&&null==u&&t.add("Safari-old"),p||E||r||!s||!n("UserAgent").isBrowser("IE >= 10")||null!=u||(i=(f=e.target).clientHeight,r=f.clientWidth,o<0&&a<0?t.add("IE"):(l<0||l>r)&&(c<0||c>i)&&t.add("MSIE")),0===u&&s&&t.add("Firefox"),t}function c(){p=!0,n("setTimeout")(function(){p=!1},0)}function f(){E=!0,n("setTimeout")(function(){E=!1},0)}function d(e){_&&t("cr:1345969").log({extra_data:{source_app:"comet"},indicated_browsers:S,is_virtual_cursor_action:e})}function g(e){null===S&&(S=Array.from(l(e))),_=null!=S&&S.length>0,d(e=null!=e.target&&null!=e.target.getAttribute&&"virtual_cursor_trigger"===e.target.getAttribute("data-accessibilityid")),n("setTimeout")(function(){_=!1,S=null},0)}function i(){document.addEventListener("click",g,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("mouseup",f,!0)}var m=null,C=null;"undefined"!=typeof window&&window.document&&window.document.createElement&&(o=document.documentElement)&&(o.addEventListener?(o.addEventListener("keydown",e,!0),o.addEventListener("keyup",r,!0)):o.attachEvent&&((o=o.attachEvent)("onkeydown",e),o("onkeyup",r)));var h={getKeyDownCode:function(){return m},isKeyDown:function(){return!!m}},p=!1,E=!1,S=null,_=!1;a.initLogging=i},98),__d("CometIconWirelessSlashFilled.react",["CometSVGIcon.react","react"],function(e,t,n,r,i,o,a){"use strict";function e(e){return s.jsx(n("CometSVGIcon.react"),babelHelpers["extends"]({viewBox:"0 0 24 24"},e,{children:s.jsx("path",{d:"M23.7805.2195c.2925.293.2925.768 0 1.061l-22.5 22.5C1.134 23.927.942 24 .75 24c-.192 0-.384-.073-.5305-.2195-.2925-.293-.2925-.768 0-1.061l12.1967947-12.1971509c-2.3773758-.1150468-4.79162015.7286756-6.6038447 2.5401009-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.024 0-1.414 2.65728981-2.65728981 6.3696459-3.62280965 9.8005664-2.90852144l2.430738-2.43186193C11.7816792 4.58111626 6.15198938 5.65271062 2.27735 9.52735c-.3905.3905-1.0235.3905-1.414 0-.3905-.3905-.3905-1.0235 0-1.414 4.6714534-4.67191574 11.571522-5.78608437 17.3096457-3.34843552L22.7195.2195c.293-.2925.768-.2925 1.061 0zM12 18.5c.6905 0 1.25.5595 1.25 1.25S12.6905 21 12 21s-1.25-.5595-1.25-1.25.5595-1.25 1.25-1.25zm1.4175-4.81495c.9705.2455 1.8905.741 2.6485 1.499.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.512-.0975-.707-.293-.7835333-.7835333-1.8301422-1.1445778-2.8581093-1.0880116L11.574 15.52855l1.8435-1.8435zm3.8154-3.8154c.848.4725 1.649 1.059 2.3685 1.779.391.39.391 1.023 0 1.414-.195.195-.451.293-.707.293-.2555 0-.5115-.098-.707-.293-.7285-.728-1.5575-1.291-2.439-1.7085zm2.1908-2.1908l1.4425-1.4425c.8.545 1.5615 1.168 2.2705 1.877.3905.3905.3905 1.0235 0 1.414-.1955.1955-.451.293-.707.293-.256 0-.5115-.0975-.707-.293-.5933333-.59333333-1.2283333-1.11861111-1.895162-1.57959491L19.4237 7.67885l1.4425-1.4425z"})}))}var s=r("react");e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("CometUncaughtError.react",["fbt","CometContentArea.react","NullStateGeneral","TetraNullState.react","react"],function(e,t,n,r,i,o,a,s){"use strict";function e(){return u.jsx("div",{className:"x6s0dn4 x78zum5 x1dr59a3 xl56j7k xixxii4 xh8yej3",children:u.jsx(n("CometContentArea.react"),{verticalAlign:"middle",children:u.jsx(n("TetraNullState.react"),{headline:s._("Sorry! Something went wrong :("),icon:n("NullStateGeneral")})})})}var u=r("react");e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("CometErrorLogging",["ClientConsistency","Env","ErrorGuard","ErrorSetup","ErrorTransport","JSErrorLoggingConfig","SiteData","WebSession"],function(e,t,n,r,i,o,a){"use strict";function e(e){n("ErrorGuard").skipGuardGlobal(n("Env").nocatch),t=e,null!=n("JSErrorLoggingConfig").sampleWeight&&n("ErrorSetup").setup({additional_client_revisions:n("ClientConsistency").getAdditionalRevisions(),appId:n("JSErrorLoggingConfig").appId,cavalry_lid:t,client_revision:n("SiteData").client_revision,extra:n("JSErrorLoggingConfig").extra,loggingFramework:"comet",projectBlocklist:n("JSErrorLoggingConfig").projectBlocklist,push_phase:n("SiteData").push_phase,report_source:n("JSErrorLoggingConfig").report_source,report_source_ref:n("JSErrorLoggingConfig").report_source_ref,sample_weight:null!=(e=n("JSErrorLoggingConfig").sampleWeight)?e:0,script_path:"/comet",server_revision:n("SiteData").server_revision,spin:n("SiteData").spin,web_session_id:r("WebSession").getId()},r("ErrorTransport").log)}n("ErrorSetup").preSetup(),a.init=e},98),__d("CometBootloaderEventsTypedLoggerLite",["generateLiteTypedLogger"],function(e,t,n,r,i){"use strict";i.exports=t("generateLiteTypedLogger")("logger:CometBootloaderEventsLoggerConfig")},null),__d("HasteResponseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1823926"),i=r("FalcoLoggerInternal").create("haste_response",e),a["default"]=i},98),__d("CometBootloaderLoggerUtil",["BootloaderEvents","BootloaderEventsPerf","CometBootloaderEventsTypedLoggerLite","CometTimeSpentNavigation","HasteResponseFalcoEvent","ResourceTimingStore","SiteData","performanceNavigationStart"],function(e,t,n,r,i,o,a){"use strict";function e(e){var t=e.bl_sample_rate,i=e.hr_sample_rate,o=e.parent_lid;if(!s&&(t||i)){s=!0,r("ResourceTimingStore").init();var a=function(e){return{ms_since_navstart:Math.round(e-n("performanceNavigationStart")()),parent_lid:o,pkg_cohort:n("SiteData").pkg_cohort,request_path:null==(e=n("CometTimeSpentNavigation").getPathInfo())?void 0:e.name,svn_rev:n("SiteData").client_revision}};i&&r("BootloaderEvents").onHasteResponse(function(e){return n("HasteResponseFalcoEvent").log(function(){var t=r("BootloaderEventsPerf").computeHRData(e),n=r("BootloaderEventsPerf").flattenData(t);return babelHelpers["extends"]({},n,a(t.start_time))})}),t&&r("BootloaderEvents").onBootload(function(e){e=r("BootloaderEventsPerf").computeBLData(e);var i=r("BootloaderEventsPerf").flattenData(e);n("CometBootloaderEventsTypedLoggerLite").log(babelHelpers["extends"]({},i,a(e.start_time)),{weight:t})})}}var s=!1;a.initLogging=e},98),__d("CometPixelRatioUpdater",["Cookie","Run","WebPixelRatio"],function(e,t,n,r,i,o,a){"use strict";function s(e){n("Cookie").set(l,String(e))}function u(){window.devicePixelRatio!==r("WebPixelRatio").get()&&s(window.devicePixelRatio)}function e(){u(),r("Run").onBeforeUnload(u,!1),"onpagehide"in window&&window.addEventListener("pageHide",u)}var l="dpr";a.startDetecting=e},98),__d("CometNetworkStatusToast",["fbt","ix","BaseToasterStateManager","CometIconWirelessSlashFilled.react","CometRelayEnvironmentFactory","NetworkStatus","SVGIcon","TetraIcon.react","cometPushToast","fbicon","react"],function(e,t,n,r,i,o,a,s,u){"use strict";function l(e){e=e.online;var t=n("BaseToasterStateManager").getInstance();null!=f&&(t.expire(f),f=null),f=e?r("cometPushToast").cometPushToast({icon:c.jsx(n("TetraIcon.react"),{color:"positive",icon:r("fbicon")._(u("485124"),24)}),message:s._("Your internet connection was restored.")},4e3,t):r("cometPushToast").cometPushToast({action:{label:s._("Refresh"),onPress:function(){r("CometRelayEnvironmentFactory").commitLocalUpdateForEachEnvironment(function(e,t,n){n.invalidateStore()})}},icon:c.jsx(n("TetraIcon.react"),{color:"disabled",icon:r("SVGIcon").legacySVGIcon(n("CometIconWirelessSlashFilled.react")),size:24}),message:s._("You are currently offline.")},Infinity,t)}function e(){n("NetworkStatus").onChange(l)}var c=r("react"),f=null;a.subscribe=e},98),__d("DetectBrokenProxyCache",["AsyncSignal","Cookie","URI"],function(e,t,n,r,i,o,a){function e(e,t){var r=n("Cookie").get(t);r!=e&&null!=r&&"0"!=e&&(t={c:"si_detect_broken_proxy_cache",m:t+" "+e+" "+r},e=new(n("URI"))("/platform/scribe_endpoint.php").getQualifiedURI().toString(),new(n("AsyncSignal"))(e,t).send())}a.run=e},98),__d("SimplePageLoadLogger",["ODS","performance"],function(e,t,n,r,i,o,a){"use strict";function e(){r("ODS").bumpEntityKey(1678,"www_client_navigations",s())}function s(){if(null==n("performance").navigation||null==n("performance").navigation.type)return"UNSUPPORTED";switch(n("performance").navigation.type){case n("performance").navigation.TYPE_NAVIGATE:return"NAVIGATE";case n("performance").navigation.TYPE_RELOAD:return"RELOAD";case n("performance").navigation.TYPE_BACK_FORWARD:return"BACK_FORWARD";case n("performance").navigation.TYPE_RESERVED:return"RESERVED";default:return"UNKNOWN"}}a.logPageNavigationType=e},98),__d("CometRootDeferredShared",["CometBootloaderLoggerUtil","CometNetworkStatusToast","CometVCTracker","CometVirtualCursorStatus","DeferredCookie","DetectBrokenProxyCache","ErrorGuard","JSScheduler","SimplePageLoadLogger","WebStorageMonster","cr:10026","cr:1201738","cr:1332233","cr:1516609","cr:1813330","cr:2718","cr:653","currentCometRouterInstance"],function(e,t,n,r,i,o,a){"use strict";function e(e){var i=e.blLoggingCavalryFields,o=e.deferredCookies,a=e.userID;n("ErrorGuard").applyWithGuard(function(){return r("CometBootloaderLoggerUtil").initLogging(i)},null,[]),n("ErrorGuard").applyWithGuard(function(){return r("CometVirtualCursorStatus").initLogging()},null,[]),n("ErrorGuard").applyWithGuard(function(){return r("CometNetworkStatusToast").subscribe()},null,[]),null!=t("cr:10026")&&n("ErrorGuard").applyWithGuard(function(){return t("cr:10026")(function(){var e;return null==(e=r("currentCometRouterInstance").get())?void 0:null==(e=e.getCurrentRouterState())?void 0:null==(e=e.main)?void 0:e.route})},null,[]),n("ErrorGuard").applyWithGuard(function(){return r("SimplePageLoadLogger").logPageNavigationType()},null,[]),r("JSScheduler").scheduleSpeculativeCallback(function(){n("WebStorageMonster").schedule()}),r("JSScheduler").scheduleSpeculativeCallback(function(){r("DetectBrokenProxyCache").run(a,"c_user")}),t("cr:1201738")&&n("CometVCTracker").VisualCompletionTraceObserver.subscribe(function(e){"INITIAL_LOAD"===e.interactionType&&t("cr:1201738").init("comet.idle")}),t("cr:653")&&n("CometVCTracker").VisualCompletionTraceObserver.subscribe(function(e){"INITIAL_LOAD"===e.interactionType&&t("cr:653").init()}),Object.keys(o).forEach(function(e){var t=o[e],r=t.expiration_for_js,i=t.first_party_only,a=t.path,s=t.secure;t=t.value,n("DeferredCookie").addToQueue(e,t,r,a,i,!1,s)}),t("cr:1332233")&&n("ErrorGuard").applyWithGuard(function(){return t("cr:1332233")()},null,[]),null!=t("cr:1516609")&&n("ErrorGuard").applyWithGuard(function(){return t("cr:1516609").initSignalCollection()},null,[]),t("cr:1813330")&&n("ErrorGuard").applyWithGuard(function(){return t("cr:1813330").init()},null,[]),t("cr:2718")&&n("ErrorGuard").applyWithGuard(function(){return t("cr:2718").init()},null,[])}a.initDeferred=e},98),__d("WebBrowserDimensionsTypedLoggerLite",["generateLiteTypedLogger"],function(e,t,n,r,i){"use strict";i.exports=t("generateLiteTypedLogger")("logger:WebBrowserDimensionsLoggerConfig")},null),__d("CometBrowserDimensionsLogger",["CometDebounce","Cookie","ExecutionEnvironment","SiteData","WebBrowserDimensionsTypedLoggerLite","getViewportDimensions","isInIframe"],function(e,t,n,r,i,o,a){"use strict";function s(){return null===c&&(c=n("getViewportDimensions")()),c}function u(){var e=n("getViewportDimensions")(),t=e.height;e=e.width,(d.width!==e||d.height!==t)&&(d={height:t,width:e},n("Cookie").set("wd",e+"x"+t))}function l(){!n("ExecutionEnvironment").canUseDOM||n("isInIframe")()||f||(f=!0,u(),window.addEventListener("resize",n("CometDebounce")(u,{wait:250}),{passive:!0}),window.addEventListener("focus",u,{passive:!0}))}function e(e){var t,r=s();l(),t={client_hint_width:null==e?void 0:e.clientHintWidth,pixel_ratio:null!=(t=window.devicePixelRatio)?t:1,screen_x:window.screen.width,screen_y:window.screen.height,server_pixel_ratio:n("SiteData").pr,server_viewport_x:null==e?void 0:e.viewportWidth,server_viewport_y:null==e?void 0:e.viewportHeight,viewport_x:r.width,viewport_y:r.height},window.navigator&&window.navigator.hardwareConcurrency&&(t.cpu_cores_count=window.navigator.hardwareConcurrency),window.innerWidth>0&&window.outerWidth>0&&(e=Math.round(window.outerWidth/window.innerWidth*100)/100,t.zoom_ratio=e),window.getComputedStyle&&null!=document.documentElement&&null!=(r=window.getComputedStyle(document.documentElement))&&(t.document_font_size=r.fontSize),n("WebBrowserDimensionsTypedLoggerLite").log(t)}var c=null,f=!1,d={height:0,width:0};a.init=e},98),__d("IGDSPrivateActionableToastContent.react",["PolarisUA","react"],function(e,t,n,r,i,o,a){"use strict";function e(e){var t=e.actionComponent,n=e.icon;return e=e.message,s.jsxs("div",{className:"x78zum5 x1q0g3np x2b8uid x6s0dn4 x1qughib"+(r("PolarisUA").isMobile()?" xuwq0e2":(r("PolarisUA").isDesktop(),""))+(r("PolarisUA").isDesktop()?" x6bjw7i":""),children:[s.jsxs("div",{className:"x78zum5 x1q0g3np x2b8uid x6s0dn4",children:[null!=n&&s.jsx("div",{className:"xmns6w2",children:n}),e]}),t]})}var s=r("react");e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("IGDSPrivateToast.react",["BaseTheme.react","IGDSText.react","IGDSThemeConfig","react","useCurrentDisplayMode","useFadeEffect"],function(e,t,n,r,i,o,a){"use strict";function e(e){var t=e.children,r=e["data-testid"];r=e.isVisible;var i=e.onClose;(e=n("useFadeEffect")(r))[0];var o=e[1];e=e[2];var a=n("useCurrentDisplayMode")();return a="dark"===a?"light":"dark",s.jsx(n("BaseTheme.react"),{"aria-atomic":!0,config:n("IGDSThemeConfig"),displayMode:a,ref:e,role:"alert",testid:void 0,children:s.jsx("div",{className:"x2b8uid x6s0dn4 x1jx94hy x1lq5wgf xgqcy7u x30kzoy x9jhf4c xdy0x9s x78zum5 x2lah0s xl56j7k xyamay9 xc73u3c x1l90r2v x5ib6vp xeq5yr9"+(r?o?" x1iy03kw x1wpepyw xs4xyr0 x4hg4is":" xg01cxk":" xg01cxk xqf3suz xs4xyr0 x4hg4is"),onAnimationEnd:function(e){e.animationName===u&&null!=i&&i()},children:s.jsx(n("IGDSText.react").Body,{children:t})})})}var s=r("react"),u="x1xuf6tn-B";e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("IGDSPrivateActionableToast.react",["IGDSPrivateActionableToastContent.react","IGDSPrivateToast.react","react"],function(e,t,n,r,i,o,a){"use strict";function e(e){var t=e.actionComponent,r=e["data-testid"];r=e.icon;var i=e.isVisible,o=e.message;return e=e.onClose,s.jsx(n("IGDSPrivateToast.react"),{"data-testid":void 0,isVisible:i,onClose:e,children:s.jsx(n("IGDSPrivateActionableToastContent.react"),{actionComponent:t,icon:r,message:o})})}var s=r("react");e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("IGDSPrivateToastContext",["react"],function(e,t,n,r,i,o,a){"use strict";t=r("react").createContext({onHideFactory:null}),a["default"]=t},98),__d("IGDSPrivateToaster.react",["BaseContextualLayer.react","DateConsts","IGDSPrivateActionableToast.react","IGDSPrivateToast.react","IGDSPrivateToastContext","clearTimeout","react","setTimeout"],function(e,t,n,r,i,o,a){"use strict";function s(e){var t=e.config;e=e.toast;var r=h("transition"),i=r[0],o=r[1],a=(r=h(null))[0],s=r[1],u=!1===t.isVisible,c=(r=h(u))[0],E=r[1],S=C(null),_=null!=t.isSticky&&t.isSticky,R=null!=t.duration?t.duration:p;m(function(){return E(!u)},[u]),g(function(){return c&&!_?S.current=n("setTimeout")(function(){return E(!1)},R):n("clearTimeout")(S.current),function(){return n("clearTimeout")(S.current)}},[c,t,R,_]);var T=d(function(){null==a||a(i),null==t.onAfterHide||t.onAfterHide()},[a,t,i]);return r=d(function(e){return s(function(){return e}),function(e){E(!1),o(e)}},[]),f.jsx("div",{className:"xjkvuk6",onAnimationEnd:function(){c||T()},children:f.jsx(n("IGDSPrivateToastContext").Provider,{value:{onHideFactory:r},children:f.jsx(l,{config:t,isVisible:c,toast:e})})})}function e(e){var t=e["data-testid"];if(t=e.items,e=C(null),0===t.length)return null;var r=t.filter(function(e){return("center"===e.toast.target||null==e.toast.target)&&!c(e.toast)});return t=t.filter(function(e){return"bottom"===e.toast.target||c(e.toast)}),f.jsxs(n("BaseContextualLayer.react"),{contextRef:e,children:[f.jsx(u,{"data-testid":void 0,items:r,target:"center"}),f.jsx(u,{"data-testid":void 0,items:t,target:"bottom"})]})}function u(e){var t=e["data-testid"];if(t=e.items,e=e.target,t.length>0)return f.jsx("div",{className:"center"===e?" xixxii4 xtzzx4i xwa60dl x11lhmoz":" xixxii4 xtzzx4i  x1nc5ocm x6s0dn4 x3h4tne x78zum5 xdt5ytf","data-testid":void 0,children:t.map(function(e){var t=e.config;return e=e.toast,f.jsx(s,{config:t,toast:e},t.key)})})}function l(e){var t=e.config,r=e.isVisible;return c(e=e.toast)?f.jsx(n("IGDSPrivateActionableToast.react"),{actionComponent:e.actionComponent,"data-testid":void 0,icon:e.icon,isVisible:r,message:e.message,onClose:t.onAfterHide}):f.jsx(n("IGDSPrivateToast.react"),{"data-testid":void 0,isVisible:r,onClose:t.onAfterHide,children:e.message})}function c(e){return null!=e.actionComponent}var f=r("react"),d=(t=r("react")).useCallback,g=t.useEffect,m=t.useLayoutEffect,C=t.useRef,h=t.useState,p=3*r("DateConsts").MS_PER_SEC;s.displayName=s.name+" [from "+o.id+"]",e.displayName=e.name+" [from "+o.id+"]",u.displayName=u.name+" [from "+o.id+"]",l.displayName=l.name+" [from "+o.id+"]",a["default"]=e},98),__d("WebPerfDeviceInfoLogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1871697"),i=r("FalcoLoggerInternal").create("web_perf_device_info_log",e),a["default"]=i},98),__d("XDeviceClassRealtimeController",["XController"],function(e,t,n,r,i){i.exports=t("XController").create("/web_perf/get_perf_level/",{})},null),__d("WebDevicePerfInfoLogging",["AsyncTypedRequest","JSScheduler","Promise","WebDevicePerfInfoData","WebPerfDeviceInfoLogFalcoEvent","XDeviceClassRealtimeController","asyncToGeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";function s(e){var t=document.createElement("canvas");if(t=t.getContext("webgl")||t.getContext("experimental-webgl")){var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var r=t.getParameter(n.UNMASKED_RENDERER_WEBGL);t=t.getParameter(n.UNMASKED_VENDOR_WEBGL),e.gpu_vendor=t,e.gpu_renderer=r}}}function u(){var e=window.navigator,t={};return e&&void 0!==e.hardwareConcurrency&&(t.cpu_cores=e.hardwareConcurrency),e&&void 0!==e.deviceMemory&&(t.ram=e.deviceMemory),n("WebDevicePerfInfoData").needsFullUpdate&&s(t),t}function l(){var e=u();n("WebPerfDeviceInfoLogFalcoEvent").log(function(){var t;return{cpu_cores:null!=(t=e.cpu_cores)?t:null,ram:null!=(t=e.ram)?t:null,gpu_renderer:null!=(t=e.gpu_renderer)?t:null,gpu_vendor:null!=(t=e.gpu_vendor)?t:null}})}function c(){return f.apply(this,arguments)}function f(){return(f=t("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=u();return(e=yield new(n("AsyncTypedRequest"))(n("XDeviceClassRealtimeController").getURIBuilder().getURI()).setData(e).promisePayload()).devicePerfClassLevel})).apply(this,arguments)}function e(){(n("WebDevicePerfInfoData").needsFullUpdate||n("WebDevicePerfInfoData").needsPartialUpdate)&&r("JSScheduler").scheduleSpeculativeCallback(l)}function i(){return new(t("Promise"))(function(e,t){n("WebDevicePerfInfoData").needsFullUpdate||n("WebDevicePerfInfoData").needsPartialUpdate?r("JSScheduler").scheduleSpeculativeCallback(function(){c().then(e)["catch"](t)}):e()})}a.doLog=e,a.doLogPromise=i},98),__d("BanzaiScubaMigrationFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1949898"),i=r("FalcoLoggerInternal").create("banzai_scuba_migration",e),a["default"]=i},98),__d("BanzaiScuba_DEPRECATED",["BanzaiScubaMigrationFalcoEvent","FBLogger"],function(e,t,n,r,i,o,a){e=function(){function e(e,t,r){this.posted=!1,e||n("FBLogger")("BanzaiScuba").warn("Can't post a sample without a dataset"),this.dataset=e,this.$1=t,this.options=r}var t=e.prototype;return t.$2=function(e,t,r){return this.posted?(n("FBLogger")("BanzaiScuba").warn("Trying to add to an already posted sample"),e):((e=e||{})[t]=r,e)},t.addNormal=function(e,t){return this.normal=this.$2(this.normal,e,t),this},t.addInteger=function(e,t){return this.int=this.$2(this.int,e,t),this},t.addDenorm=function(e,t){return this.denorm=this.$2(this.denorm,e,t),this},t.addTagSet=function(e,t){return this.tags=this.$2(this.tags,e,t),this},t.addNormVector=function(e,t){return this.normvector=this.$2(this.normvector,e,t),this},t.post=function(){var e=this;if(this.posted)n("FBLogger")("BanzaiScuba").warn("Trying to re-post");else if(this.dataset){var t={};t._ds=this.dataset,t._options=this.options,this.normal&&(t.normal=this.normal),this.int&&(t.int=this.int),this.denorm&&(t.denorm=this.denorm),this.tags&&(t.tags=this.tags),this.normvector&&(t.normvector=this.normvector),null!==this.$1&&""!==this.$1&&void 0!==this.$1&&(t._lid=this.$1),n("BanzaiScubaMigrationFalcoEvent").log(function(){return{dataset:e.dataset,payload:t}}),this.posted=!0}},e}(),a["default"]=e},98),__d("RequestStreamCloseReason",["$InternalEnum"],function(e,t,n,r,i,o){"use strict";e=t("$InternalEnum").Mirrored(["UserIntention","StartStreamFailure","StreamError","RemoteTermination","ServerDataEnd","ServerDrain","ReestablishError","ClientError"]),o.RequestStreamCloseReason=e},66),__d("TransportSelectingClientSingletonConditional",["cr:5800"],function(e,t,n,r,i,o,a){"use strict";a["default"]=t("cr:5800")},98),__d("DGWRequestStreamUtils",["Base64","WebDriverConfig","cr:3024","gkx"],function(e,t,n,r,i,o,a){"use strict";function e(e,r,i,o){var a={};e=Object.entries(e);for(var s=0;s<e.length;s++){var u=e[s],l=u[0];"string"==typeof(u=u[1])?a["XRSS-"+l]=u:"number"==typeof u?a["XRSN-"+l]=u.toString():"boolean"==typeof u?a["XRSB-"+l]=u.toString():"object"==typeof u&&null!=u&&(a["XRSO-"+l]=n("Base64").encode(JSON.stringify(u)))}return r&&(a["xrs-body"]="true"),null!=i&&i.length>0&&(a["xrs-instrumentation"]=n("Base64").encode(i)),a["XRS-Accept-Ack"]="RSAck",null!=o&&null!=o.ackTimeoutSec&&(a["XRS-SRAck-Timeout"]=o.ackTimeoutSec.toString()),a["XRSS-http_referer"]=window.location.href,n("WebDriverConfig").isTestRunning&&n("gkx")("5639")&&null!=(l=null==t("cr:3024")?void 0:t("cr:3024").get())&&(a["XRSS-is_test"]="1",a["XRSS-original_request_id"]=l),a}function s(e){return Object.keys(e).reduce(function(t,n){return("string"==typeof e[n]||"boolean"==typeof e[n]||"number"==typeof e[n]||"object"==typeof e[n])&&(t[n]=e[n]),t},{})}function r(e){if(e.response&&null!=e.response.instrumentation_data&&e.response.instrumentation_data.length>0)try{return{auxId:(e=JSON.parse(new TextDecoder("utf-8").decode(e.response.instrumentation_data))).auxId,dfTraceId:null==(e=e.dataFlowTracingData)?void 0:e.traceId}}catch(e){}return null}function i(e,t){var n=e.headers;if(e=e.body,!0===t.kill_body&&(e=null),null!=t.new_body&&(e=t.new_body),null!=t.new_headers)try{n=s(JSON.parse(t.new_headers))}catch(e){}if(null!=t.patch_headers)try{n=babelHelpers["extends"]({},n,s(JSON.parse(t.patch_headers)))}catch(e){}return{headers:n,body:e}}a.convertHeaders=e,a.cleanHeaders=s,a.getInstrumentationDataFieldsFromPayload=r,a.transformContextWithRewriteDelta=i},98),__d("DGWStream",["$InternalEnum"],function(e,t,n,r,i,o){"use strict";function e(e){switch(e){case a.UNAUTHENTICATED:case a.UNAUTHORIZED:case a.REJECTED:case a.BAD_REQUEST:case a.UNKNOWN_ERROR:case a.SERVER_INTERNAL_ERROR:return!1;default:return!0}}var a=t("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR"]);o.StreamError=a,o.isRetryableError=e},66),__d("DGWStreamHandler",[],function(e,t,n,r,i,o){"use strict";e=function(){function e(e,t,n,r,i){this.$2=e,this.$3=t,this.$4=n,this.$5=r,this.$6=i,this.$1=!0}var t=e.prototype;return t.onClose=function(e){this.$1&&this.$2(e)},t.onDataReceived=function(e){this.$1&&this.$3(e)},t.onError=function(e){this.$1&&this.$4(e)},t.onStreamMustDrain=function(e,t){this.$1&&this.$5(e,t)},t.onServerHasFinishedSendingData=function(e){this.$1&&this.$6(e)},t.stop=function(){this.$1=!1},t.isStopped=function(){return!this.$1},e}(),o["default"]=e},66),__d("RequestStreamCommonRequestStreamCommonSerializers",["RequestStreamCommonRequestStreamCommonTypes","ThriftTypes","jsbi"],function(e,t,n,r,i,o){"use strict";function e(){return{}}function n(){return{bytes:Uint8Array.of()}}function r(){return{message:""}}function i(){return{reason:t("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)}}function a(){return{}}function s(){return{stream_id:"0",last_sequencer:0,amendment_count:0,last_status:t("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)}}function u(){return{caller_timestamp_ms:"0"}}function l(){return{original_ping_timestamp_ms:"0"}}function c(){return{}}function f(e,n){n.writeStructBegin("ResponseRewriteRequest"),null!=e.new_headers&&(n.writeFieldBegin({fname:"new_headers",ftype:t("ThriftTypes").STRING,fid:1}),n.writeString(e.new_headers),n.writeFieldEnd()),null!=e.new_body&&(n.writeFieldBegin({fname:"new_body",ftype:t("ThriftTypes").STRING,fid:2}),n.writeBinary(e.new_body),n.writeFieldEnd()),null!=e.patch_headers&&(n.writeFieldBegin({fname:"patch_headers",ftype:t("ThriftTypes").STRING,fid:3}),n.writeString(e.patch_headers),n.writeFieldEnd()),null!=e.kill_body&&(n.writeFieldBegin({fname:"kill_body",ftype:t("ThriftTypes").BOOL,fid:4}),n.writeBool(e.kill_body),n.writeFieldEnd()),null!=e.temporary&&(n.writeFieldBegin({fname:"temporary",ftype:t("ThriftTypes").BOOL,fid:5}),n.writeBool(e.temporary),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function d(e,n){if(n.writeStructBegin("ResponseData"),n.writeFieldBegin({fname:"bytes",ftype:t("ThriftTypes").STRING,fid:1}),null!=e.bytes)n.writeBinary(e.bytes);else{var r=Uint8Array.of();n.writeBinary(r)}n.writeFieldEnd(),null!=e.metadata&&(n.writeFieldBegin({fname:"metadata",ftype:t("ThriftTypes").STRING,fid:2}),n.writeString(e.metadata),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function g(e,n){n.writeStructBegin("LogMessage"),n.writeFieldBegin({fname:"message",ftype:t("ThriftTypes").STRING,fid:1}),null!=e.message?n.writeString(e.message):(e="",n.writeString(e)),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function m(e,n){var r;(n.writeStructBegin("Termination"),n.writeFieldBegin({fname:"reason",ftype:t("ThriftTypes").I32,fid:1}),null!=e.reason)?n.writeI32(null!=(r=e.reason)?r:0):(r=t("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0),n.writeI32(null!=(r=r)?r:0));n.writeFieldEnd(),null!=e.message&&(n.writeFieldBegin({fname:"message",ftype:t("ThriftTypes").STRING,fid:2}),n.writeString(e.message),n.writeFieldEnd()),null!=e.retry_delay_ms&&(n.writeFieldBegin({fname:"retry_delay_ms",ftype:t("ThriftTypes").I64,fid:3}),n.writeI64(t("jsbi").BigInt(e.retry_delay_ms)),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function C(e,n){n.writeStructBegin("AmendStreamAck"),null!=e.amendment_id&&(n.writeFieldBegin({fname:"amendment_id",ftype:t("ThriftTypes").I64,fid:1}),n.writeI64(t("jsbi").BigInt(e.amendment_id)),n.writeFieldEnd()),null!=e.accepted&&(n.writeFieldBegin({fname:"accepted",ftype:t("ThriftTypes").BOOL,fid:2}),n.writeBool(e.accepted),n.writeFieldEnd()),null!=e.result&&(n.writeFieldBegin({fname:"result",ftype:t("ThriftTypes").STRING,fid:3}),n.writeBinary(e.result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function h(e,n){if(n.writeStructBegin("StreamCheck"),n.writeFieldBegin({fname:"stream_id",ftype:t("ThriftTypes").I64,fid:1}),null!=e.stream_id)n.writeI64(t("jsbi").BigInt(e.stream_id));else{var r="0";n.writeI64(t("jsbi").BigInt(r))}n.writeFieldEnd(),n.writeFieldBegin({fname:"last_sequencer",ftype:t("ThriftTypes").I32,fid:2}),null!=e.last_sequencer?n.writeI32(e.last_sequencer):(r=0,n.writeI32(r)),n.writeFieldEnd(),n.writeFieldBegin({fname:"amendment_count",ftype:t("ThriftTypes").I32,fid:4}),null!=e.amendment_count?n.writeI32(e.amendment_count):(r=0,n.writeI32(r)),n.writeFieldEnd(),n.writeFieldBegin({fname:"last_status",ftype:t("ThriftTypes").I32,fid:3}),null!=e.last_status?n.writeI32(null!=(r=e.last_status)?r:0):(e=t("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0),n.writeI32(null!=(r=e)?r:0)),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function p(e,n){if(n.writeStructBegin("Ping"),n.writeFieldBegin({fname:"caller_timestamp_ms",ftype:t("ThriftTypes").I64,fid:1}),null!=e.caller_timestamp_ms)n.writeI64(t("jsbi").BigInt(e.caller_timestamp_ms));else{var r="0";n.writeI64(t("jsbi").BigInt(r))}if(n.writeFieldEnd(),null!=e.streams_to_check){n.writeFieldBegin({fname:"streams_to_check",ftype:t("ThriftTypes").LIST,fid:2}),n.writeListBegin({etype:t("ThriftTypes").STRUCT,size:e.streams_to_check.length});r=e.streams_to_check;var i=0;for(r=(e=Array.isArray(r))?r:r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var o;if(e){if(i>=r.length)break;o=r[i++]}else{if((i=r.next()).done)break;o=i.value}h(o=o,n)}n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function E(e,n){if(n.writeStructBegin("Pong"),n.writeFieldBegin({fname:"original_ping_timestamp_ms",ftype:t("ThriftTypes").I64,fid:1}),null!=e.original_ping_timestamp_ms)n.writeI64(t("jsbi").BigInt(e.original_ping_timestamp_ms));else{var r="0";n.writeI64(t("jsbi").BigInt(r))}if(n.writeFieldEnd(),null!=e.stream_ids_missing){n.writeFieldBegin({fname:"stream_ids_missing",ftype:t("ThriftTypes").LIST,fid:2}),n.writeListBegin({etype:t("ThriftTypes").I64,size:e.stream_ids_missing.length});r=e.stream_ids_missing;var i=Array.isArray(r),o=0;for(r=i?r:r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}a=a,n.writeI64(t("jsbi").BigInt(a))}n.writeListEnd(),n.writeFieldEnd()}if(null!=e.stream_ids_behind){for(n.writeFieldBegin({fname:"stream_ids_behind",ftype:t("ThriftTypes").LIST,fid:3}),n.writeListBegin({etype:t("ThriftTypes").I64,size:e.stream_ids_behind.length}),a=e.stream_ids_behind,i=0,a=(o=Array.isArray(a))?a:a["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(o){if(i>=a.length)break;r=a[i++]}else{if((i=a.next()).done)break;r=i.value}r=r,n.writeI64(t("jsbi").BigInt(r))}n.writeListEnd(),n.writeFieldEnd()}if(null!=e.stream_ids_with_lost_amendments){for(n.writeFieldBegin({fname:"stream_ids_with_lost_amendments",ftype:t("ThriftTypes").LIST,fid:4}),n.writeListBegin({etype:t("ThriftTypes").I64,size:e.stream_ids_with_lost_amendments.length}),r=e.stream_ids_with_lost_amendments,o=0,
r=(i=Array.isArray(r))?r:r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(i){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}a=a,n.writeI64(t("jsbi").BigInt(a))}n.writeListEnd(),n.writeFieldEnd()}if(null!=e.stream_ids_with_wrong_status){for(n.writeFieldBegin({fname:"stream_ids_with_wrong_status",ftype:t("ThriftTypes").LIST,fid:5}),n.writeListBegin({etype:t("ThriftTypes").I64,size:e.stream_ids_with_wrong_status.length}),a=e.stream_ids_with_wrong_status,i=0,a=(o=Array.isArray(a))?a:a["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(o){if(i>=a.length)break;r=a[i++]}else{if((i=a.next()).done)break;r=i.value}e=r,n.writeI64(t("jsbi").BigInt(e))}n.writeListEnd(),n.writeFieldEnd()}n.writeFieldStop(),n.writeStructEnd()}function S(e,n){var r;return n.writeStructBegin("StreamResponseDelta"),null!=e.flow_status?(n.writeFieldBegin({fname:"flow_status",ftype:t("ThriftTypes").I32,fid:1}),n.writeI32(null!=(r=e.flow_status)?r:0),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.log?(n.writeFieldBegin({fname:"log",ftype:t("ThriftTypes").STRUCT,fid:2}),g(e.log,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.rewrite?(n.writeFieldBegin({fname:"rewrite",ftype:t("ThriftTypes").STRUCT,fid:3}),f(e.rewrite,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.data?(n.writeFieldBegin({fname:"data",ftype:t("ThriftTypes").STRUCT,fid:4}),d(e.data,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.termination?(n.writeFieldBegin({fname:"termination",ftype:t("ThriftTypes").STRUCT,fid:5}),m(e.termination,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.amend_ack?(n.writeFieldBegin({fname:"amend_ack",ftype:t("ThriftTypes").STRUCT,fid:6}),C(e.amend_ack,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):(n.writeFieldStop(),void n.writeStructEnd())}function _(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").STRING?n.new_headers=e.readString():e.skip(i);break;case 2:i===t("ThriftTypes").STRING?n.new_body=e.readBinary():e.skip(i);break;case 3:i===t("ThriftTypes").STRING?n.patch_headers=e.readString():e.skip(i);break;case 4:i===t("ThriftTypes").BOOL?n.kill_body=e.readBool():e.skip(i);break;case 5:i===t("ThriftTypes").BOOL?n.temporary=e.readBool():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),n}function R(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").STRING?n.bytes=e.readBinary():e.skip(i);break;case 2:i===t("ThriftTypes").STRING?n.metadata=e.readString():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.bytes&&(n.bytes=Uint8Array.of()),n}function T(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").STRING?n.message=e.readString():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.message&&(n.message=""),n}function y(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I32?n.reason=t("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(e.readI32()):e.skip(i);break;case 2:i===t("ThriftTypes").STRING?n.message=e.readString():e.skip(i);break;case 3:i===t("ThriftTypes").I64?n.retry_delay_ms=e.readI64().toString():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.reason&&(n.reason=t("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.cast(0)),n}function v(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.amendment_id=e.readI64().toString():e.skip(i);break;case 2:i===t("ThriftTypes").BOOL?n.accepted=e.readBool():e.skip(i);break;case 3:i===t("ThriftTypes").STRING?n.result=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),n}function $(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.stream_id=e.readI64().toString():e.skip(i);break;case 2:i===t("ThriftTypes").I32?n.last_sequencer=e.readI32():e.skip(i);break;case 4:i===t("ThriftTypes").I32?n.amendment_count=e.readI32():e.skip(i);break;case 3:i===t("ThriftTypes").I32?n.last_status=t("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(e.readI32()):e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.stream_id&&(n.stream_id="0"),void 0===n.last_sequencer&&(n.last_sequencer=0),void 0===n.amendment_count&&(n.amendment_count=0),void 0===n.last_status&&(n.last_status=t("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(0)),n}function b(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.caller_timestamp_ms=e.readI64().toString():e.skip(i);break;case 2:if(i===t("ThriftTypes").LIST){n.streams_to_check=[],r=e.readListBegin();for(var o=0;o<r.size;o++){var a=$(e);n.streams_to_check.push(a)}}else e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.caller_timestamp_ms&&(n.caller_timestamp_ms="0"),n}function D(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.original_ping_timestamp_ms=e.readI64().toString():e.skip(i);break;case 2:if(i===t("ThriftTypes").LIST){n.stream_ids_missing=[],r=e.readListBegin();for(var o=0;o<r.size;o++){var a=e.readI64().toString();n.stream_ids_missing.push(a)}}else e.skip(i);break;case 3:if(i===t("ThriftTypes").LIST)for(n.stream_ids_behind=[],a=e.readListBegin(),o=0;o<a.size;o++)r=e.readI64().toString(),n.stream_ids_behind.push(r);else e.skip(i);break;case 4:if(i===t("ThriftTypes").LIST)for(n.stream_ids_with_lost_amendments=[],r=e.readListBegin(),o=0;o<r.size;o++)a=e.readI64().toString(),n.stream_ids_with_lost_amendments.push(a);else e.skip(i);break;case 5:if(i===t("ThriftTypes").LIST)for(n.stream_ids_with_wrong_status=[],a=e.readListBegin(),o=0;o<a.size;o++)r=e.readI64().toString(),n.stream_ids_with_wrong_status.push(r);else e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.original_ping_timestamp_ms&&(n.original_ping_timestamp_ms="0"),n}function A(e){var n,r={};for(e.readStructBegin();;){var i=e.readFieldBegin(),o=i.ftype;if(i=i.fid,o===t("ThriftTypes").STOP)break;switch(i){case 1:if(o===t("ThriftTypes").I32){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: flow_status, previous deserialized field: "+n);r.flow_status=t("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.cast(e.readI32()),n="flow_status"}else e.skip(o);break;case 2:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: log, previous deserialized field: "+n);r.log=T(e),n="log"}else e.skip(o);break;case 3:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: rewrite, previous deserialized field: "+n);r.rewrite=_(e),n="rewrite"}else e.skip(o);break;case 4:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: data, previous deserialized field: "+n);r.data=R(e),n="data"}else e.skip(o);break;case 5:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: termination, previous deserialized field: "+n);r.termination=y(e),n="termination"}else e.skip(o);break;case 6:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: StreamResponseDelta; current field: amend_ack, previous deserialized field: "+n);r.amend_ack=v(e),n="amend_ack"}else e.skip(o);break;default:e.skip(o)}e.readFieldEnd()}return e.readStructEnd(),r}o.ResponseRewriteRequest$DefaultConstructor=e,o.ResponseData$DefaultConstructor=n,o.LogMessage$DefaultConstructor=r,o.Termination$DefaultConstructor=i,o.AmendStreamAck$DefaultConstructor=a,o.StreamCheck$DefaultConstructor=s,o.Ping$DefaultConstructor=u,o.Pong$DefaultConstructor=l,o.StreamResponseDelta$DefaultConstructor=c,o.serializeResponseRewriteRequest=f,o.serializeResponseData=d,o.serializeLogMessage=g,o.serializeTermination=m,o.serializeAmendStreamAck=C,o.serializeStreamCheck=h,o.serializePing=p,o.serializePong=E,o.serializeStreamResponseDelta=S,o.deserializeResponseRewriteRequest=_,o.deserializeResponseData=R,o.deserializeLogMessage=T,o.deserializeTermination=y,o.deserializeAmendStreamAck=v,o.deserializeStreamCheck=$,o.deserializePing=b,o.deserializePong=D,o.deserializeStreamResponseDelta=A},66),__d("RequestStreamSingleChannelSingleChannelRequestStreamTypes",["$InternalEnum"],function(e,t,n,r,i){"use strict";e=t("$InternalEnum")({Ignored:100,Success:200,Queued:250,UnknownStream:400,HandledUnknownResult:450,Failure:500}),n=t("$InternalEnum")({Request_headers:"request_headers",Request_body:"request_body",Amend:"amend",Ack:"ack",Response:"response",Ping:"ping",Pong:"pong"}),i.exports={Ack:e,Payload$Types:n}},null),__d("RequestStreamSingleChannelSingleChannelRequestStreamSerializers",["RequestStreamCommonRequestStreamCommonSerializers","RequestStreamCommonRequestStreamCommonTypes","RequestStreamSingleChannelSingleChannelRequestStreamTypes","ThriftTypes","jsbi"],function(e,t,n,r,i,o){"use strict";function e(){return{}}function n(){return{body:Uint8Array.of()}}function r(){return{amendment:Uint8Array.of()}}function i(){return{ack:t("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)}}function a(){return{delta:[]}}function s(){return{}}function u(e,n){n.writeStructBegin("RequestStreamHeaders"),null!=e.headers&&(n.writeFieldBegin({fname:"headers",ftype:t("ThriftTypes").STRING,fid:1}),n.writeBinary(e.headers),n.writeFieldEnd()),null!=e.instrumentation_data&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:t("ThriftTypes").STRING,fid:2}),n.writeBinary(e.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function l(e,n){n.writeStructBegin("RequestStreamBody"),n.writeFieldBegin({fname:"body",ftype:t("ThriftTypes").STRING,fid:1}),null!=e.body?n.writeBinary(e.body):(e=Uint8Array.of(),n.writeBinary(e)),n.writeFieldEnd(),n.writeFieldStop(),n.writeStructEnd()}function c(e,n){if(n.writeStructBegin("AmendStream"),null!=e.amendment_id&&(n.writeFieldBegin({fname:"amendment_id",ftype:t("ThriftTypes").I64,fid:1}),n.writeI64(t("jsbi").BigInt(e.amendment_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"amendment",ftype:t("ThriftTypes").STRING,fid:2}),null!=e.amendment)n.writeBinary(e.amendment);else{var r=Uint8Array.of();n.writeBinary(r)}n.writeFieldEnd(),null!=e.is_query&&(n.writeFieldBegin({fname:"is_query",ftype:t("ThriftTypes").BOOL,fid:3}),n.writeBool(e.is_query),n.writeFieldEnd()),null!=e.instrumentation_data&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:t("ThriftTypes").STRING,fid:4}),n.writeBinary(e.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function f(e,n){var r;(n.writeStructBegin("StreamResponseAck"),null!=e.response_id&&(n.writeFieldBegin({fname:"response_id",ftype:t("ThriftTypes").I64,fid:1}),n.writeI64(t("jsbi").BigInt(e.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"ack",ftype:t("ThriftTypes").I32,fid:2}),null!=e.ack)?n.writeI32(null!=(r=e.ack)?r:0):(r=t("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0),n.writeI32(null!=(r=r)?r:0));n.writeFieldEnd(),null!=e.query_result&&(n.writeFieldBegin({fname:"query_result",ftype:t("ThriftTypes").STRING,fid:3}),n.writeBinary(e.query_result),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function d(e,n){if(n.writeStructBegin("StreamResponse"),null!=e.response_id&&(n.writeFieldBegin({fname:"response_id",ftype:t("ThriftTypes").I64,fid:1}),n.writeI64(t("jsbi").BigInt(e.response_id)),n.writeFieldEnd()),n.writeFieldBegin({fname:"delta",ftype:t("ThriftTypes").LIST,fid:2}),null!=e.delta){n.writeListBegin({etype:t("ThriftTypes").STRUCT,size:e.delta.length});var r=e.delta,i=Array.isArray(r),o=0;for(r=i?r:r["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var a;if(i){if(o>=r.length)break;a=r[o++]}else{if((o=r.next()).done)break;a=o.value}a=a,t("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(a,n)}n.writeListEnd()}else{for(a=[],n.writeListBegin({etype:t("ThriftTypes").STRUCT,size:a.length}),o=0;o<a.length;o++)i=a[o],t("RequestStreamCommonRequestStreamCommonSerializers").serializeStreamResponseDelta(i,n);n.writeListEnd()}n.writeFieldEnd(),null!=e.ack_level&&(n.writeFieldBegin({fname:"ack_level",ftype:t("ThriftTypes").I32,fid:3}),n.writeI32(null!=(r=e.ack_level)?r:0),n.writeFieldEnd()),null!=e.query_request&&(n.writeFieldBegin({fname:"query_request",ftype:t("ThriftTypes").STRING,fid:4}),n.writeBinary(e.query_request),n.writeFieldEnd()),null!=e.instrumentation_data&&(n.writeFieldBegin({fname:"instrumentation_data",ftype:t("ThriftTypes").STRING,fid:5}),n.writeBinary(e.instrumentation_data),n.writeFieldEnd()),n.writeFieldStop(),n.writeStructEnd()}function g(e,n){return n.writeStructBegin("Payload"),null!=e.request_headers?(n.writeFieldBegin({fname:"request_headers",ftype:t("ThriftTypes").STRUCT,fid:1}),u(e.request_headers,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.request_body?(n.writeFieldBegin({fname:"request_body",ftype:t("ThriftTypes").STRUCT,fid:2}),l(e.request_body,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.amend?(n.writeFieldBegin({fname:"amend",ftype:t("ThriftTypes").STRUCT,fid:3}),c(e.amend,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.ack?(n.writeFieldBegin({fname:"ack",ftype:t("ThriftTypes").STRUCT,fid:4}),f(e.ack,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.response?(n.writeFieldBegin({fname:"response",ftype:t("ThriftTypes").STRUCT,fid:5}),d(e.response,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.ping?(n.writeFieldBegin({fname:"ping",ftype:t("ThriftTypes").STRUCT,fid:6}),t("RequestStreamCommonRequestStreamCommonSerializers").serializePing(e.ping,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):null!=e.pong?(n.writeFieldBegin({fname:"pong",ftype:t("ThriftTypes").STRUCT,fid:7}),t("RequestStreamCommonRequestStreamCommonSerializers").serializePong(e.pong,n),n.writeFieldEnd(),n.writeFieldStop(),void n.writeStructEnd()):(n.writeFieldStop(),void n.writeStructEnd())}function m(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").STRING?n.headers=e.readBinary():e.skip(i);break;case 2:i===t("ThriftTypes").STRING?n.instrumentation_data=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),n}function C(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").STRING?n.body=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.body&&(n.body=Uint8Array.of()),n}function h(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.amendment_id=e.readI64().toString():e.skip(i);break;case 2:i===t("ThriftTypes").STRING?n.amendment=e.readBinary():e.skip(i);break;case 3:i===t("ThriftTypes").BOOL?n.is_query=e.readBool():e.skip(i);break;case 4:i===t("ThriftTypes").STRING?n.instrumentation_data=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.amendment&&(n.amendment=Uint8Array.of()),n}function p(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.response_id=e.readI64().toString():e.skip(i);break;case 2:i===t("ThriftTypes").I32?n.ack=t("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(e.readI32()):e.skip(i);break;case 3:i===t("ThriftTypes").STRING?n.query_result=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.ack&&(n.ack=t("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.cast(0)),n}function E(e){var n={};for(e.readStructBegin();;){var r=e.readFieldBegin(),i=r.ftype;if(r=r.fid,i===t("ThriftTypes").STOP)break;switch(r){case 1:i===t("ThriftTypes").I64?n.response_id=e.readI64().toString():e.skip(i);break;case 2:if(i===t("ThriftTypes").LIST){n.delta=[],r=e.readListBegin();for(var o=0;o<r.size;o++){var a=t("RequestStreamCommonRequestStreamCommonSerializers").deserializeStreamResponseDelta(e);n.delta.push(a)}}else e.skip(i);break;case 3:i===t("ThriftTypes").I32?n.ack_level=t("RequestStreamCommonRequestStreamCommonTypes").AckLevel.cast(e.readI32()):e.skip(i);break;case 4:i===t("ThriftTypes").STRING?n.query_request=e.readBinary():e.skip(i);break;case 5:i===t("ThriftTypes").STRING?n.instrumentation_data=e.readBinary():e.skip(i);break;default:e.skip(i)}e.readFieldEnd()}return e.readStructEnd(),void 0===n.delta&&(n.delta=[]),n}function S(e){var n,r={};for(e.readStructBegin();;){var i=e.readFieldBegin(),o=i.ftype;if(i=i.fid,o===t("ThriftTypes").STOP)break;switch(i){case 1:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: request_headers, previous deserialized field: "+n);r.request_headers=m(e),n="request_headers"}else e.skip(o);break;case 2:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: request_body, previous deserialized field: "+n);r.request_body=C(e),n="request_body"}else e.skip(o);break;case 3:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: amend, previous deserialized field: "+n);r.amend=h(e),n="amend"}else e.skip(o);break;case 4:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: ack, previous deserialized field: "+n);r.ack=p(e),n="ack"}else e.skip(o);break;case 5:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: response, previous deserialized field: "+n);r.response=E(e),n="response"}else e.skip(o);break;case 6:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: ping, previous deserialized field: "+n);r.ping=t("RequestStreamCommonRequestStreamCommonSerializers").deserializePing(e),n="ping"}else e.skip(o);break;case 7:if(o===t("ThriftTypes").STRUCT){if(null!=n)throw new Error("more than one field have been deserialized in union type: Payload; current field: pong, previous deserialized field: "+n);r.pong=t("RequestStreamCommonRequestStreamCommonSerializers").deserializePong(e),n="pong"}else e.skip(o);break;default:e.skip(o)}e.readFieldEnd()}return e.readStructEnd(),r}o.RequestStreamHeaders$DefaultConstructor=e,o.RequestStreamBody$DefaultConstructor=n,o.AmendStream$DefaultConstructor=r,o.StreamResponseAck$DefaultConstructor=i,o.StreamResponse$DefaultConstructor=a,o.Payload$DefaultConstructor=s,o.serializeRequestStreamHeaders=u,o.serializeRequestStreamBody=l,o.serializeAmendStream=c,o.serializeStreamResponseAck=f,o.serializeStreamResponse=d,o.serializePayload=g,o.deserializeRequestStreamHeaders=m,o.deserializeRequestStreamBody=C,o.deserializeAmendStream=h,o.deserializeStreamResponseAck=p,o.deserializeStreamResponse=E,o.deserializePayload=S},66),__d("RequestStreamState",["RequestStreamCommonRequestStreamCommonTypes"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){switch(t){case r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:return e.seenAccepted?e:{flowStatus:r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted,seenAccepted:!0};default:return e.seenAccepted&&e.flowStatus!==t?{flowStatus:t,seenAccepted:!0}:e}}a.getNextState=e},98),__d("StreamRetryState",[],function(e,t,n,r,i,o){"use strict";var a=1e3,s=12e4;e=function(){function e(){this.$1=0}var t=e.prototype;return t.resetErrorAndRetryCount=function(){this.$1=0},t.onRetry=function(){this.$1+=1},t.getRetryCount=function(){return this.$1},t.getBackoffDelayMs=function(){if(this.$1<=1)return 0;if(2===this.$1)return a*Math.random();var e=a*Math.pow(2,this.$1-3);return e+=e*Math.random(),Math.min(e,s)},e}(),o["default"]=e},66),__d("DGWRequestStreamRef",["CompactSerializerPolyfill","DGWRequestStreamUtils","DGWStream","DGWStreamHandler","InflightAmends","Promise","RequestStreamCloseReason","RequestStreamCommonRequestStreamCommonTypes","RequestStreamE2EClientLoggerEvent","RequestStreamE2EClientLoggerMessageType","RequestStreamE2ELogger","RequestStreamE2ESampling","RequestStreamSingleChannelSingleChannelRequestStreamSerializers","RequestStreamSingleChannelSingleChannelRequestStreamTypes","RequestStreamState","RequestStreamTransport","RtiWebRequestStreamClient","StreamRetryState","err","gkx","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";function s(e){if(!e)throw(e=n("err")(C)).stack,e}function u(e,t){return null==e||0===e.length?null:((e=JSON.parse(e)).auxId=t,(new TextEncoder).encode(JSON.stringify(e)))}function l(e){var t={};return(e=e.delta).forEach(function(e){if(e.flow_status)switch(t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Flow_status,e.flow_status){case r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted:t.flow_status="Accepted";break;case r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started:t.flow_status="Started";break;case r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped:t.flow_status="Stopped"}else e.log?t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Log:e.rewrite?t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Rewrite:e.data?t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Data:e.termination?t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Termination:e.amend_ack&&(t.type=r("RequestStreamCommonRequestStreamCommonTypes").StreamResponseDelta$Types.Amend_ack)}),t}var c=4,f=0,d=1e3,g=2,m=n("gkx")("2674")?3e4:5e3,C="dgw_stream_send_ack_failure";e=function(){function e(e,t,i,o,a,s){var u=this;this.$6=null,this.$7={},this.$10=!1,this.$15=new(n("StreamRetryState")),this.$16=0,this.$17=0,this.$18=0,this.$21=0;var l=null;"string"==typeof t?l=(new TextEncoder).encode(t):"object"==typeof t&&(l=t),this.$1={headers:e,body:l},this.$3=i,this.$4=o,this.$12=c,this.$9=!1,this.$14=!1,this.$20=s,null!=a&&(this.$22()||(a.dgwStreamGroupLoggingId=this.$20.getStreamGroupLoggingId()),a.dgwCountPriorStreamsInGroup=this.$20.guessStreamGroupPriorStreamCount(),a.transport="WEB_RS_STARGATE"),this.$5=r("RequestStreamE2ESampling").validateInstrumentationData(e,a,null==o?void 0:o.requestLogContext,null==o?void 0:o.upsampleMultiplier),this.$22()?this.$7.disableFalcoLogging=!0:this.$6=r("RequestStreamE2ELogger").createStreamLogger(e,this.$5,r("RequestStreamTransport").RequestStreamTransport.WEB_RS_STARGATE),this.$6&&(this.$7.loggingId=this.$6.getRequestId()),o&&null!=o.overrideUrl&&(this.$7.overrideUrl=o.overrideUrl),this.$8={flowStatus:r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped,seenAccepted:!1},this.$19=new(n("InflightAmends"))(m,function(e,t){var r;null==(r=u.$6)||r.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,n("RequestStreamE2EClientLoggerEvent").RECEIVED,babelHelpers["extends"]({},u.$23(),{latency:t.toString()}),e)},function(e,t){var r;t.message!==C&&(null==(r=u.$6)||r.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT_ACK,n("RequestStreamE2EClientLoggerEvent").FAILURE,babelHelpers["extends"]({},u.$23(),{reason:t.message}),e))}),null==(l=this.$6)||l.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").RECEIVED,{data_size:null!=(s=null==t?void 0:null==(i=t.length)?void 0:i.toString())?s:"0"},"0","0")}var i=e.prototype;return i.getInstrumentationData=function(){return this.$5},i.getE2EClientLogger=function(){return this.$6},i.amendWithAck=function(e){return null==(e=this.$24(e,!0))?t("Promise").resolve(!1):this.$19.getPromise(e)||t("Promise").resolve(!1)},i.amendWithoutAck=function(e){this.$24(e,!1)},i.cancel=function(){var e;null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").CANCEL,n("RequestStreamE2EClientLoggerEvent").RECEIVED),this.$9=!0,this.$25(r("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)},i.start=function(e){var i=this;void 0===e&&(e=!1);var o=String(this.$16++),a=Date.now();return this.$26(o).then(function(){var e;i.$14=!1,i.$21=0;var t=(Date.now()-a).toString();null==(e=i.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:t},o,String(i.$18))})["catch"](function(a){if(a.stack,a.message!==C||!i.$10){if(i.$14=!1,n("gkx")("1799")||a!==r("DGWStream").StreamError.ESTABLISHMENT_ERROR){var s,u=a.message;if(a===r("DGWStream").StreamError.UNAUTHENTICATED?u="UNAUTHENTICATED":a===r("DGWStream").StreamError.UNAUTHORIZED&&(u="UNAUTHORIZED"),null==(s=i.$6)||s.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:u},o,String(i.$18)),i.$25(e?r("RequestStreamCloseReason").RequestStreamCloseReason.ReestablishError:r("RequestStreamCloseReason").RequestStreamCloseReason.StartStreamFailure,u,!0),a===r("DGWStream").StreamError.UNAUTHENTICATED||a===r("DGWStream").StreamError.UNAUTHORIZED)return;throw a}null==(s=i.$6)||s.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:null!=(u=a.message)?u:a},o,String(i.$18)),i.$15.onRetry();var l=n("gkx")("6002")?i.$15.getBackoffDelayMs():d*Math.pow(g,i.$21);return new(t("Promise"))(function(e){return window.setTimeout(e,l)}).then(function(){return i.$21++,i.$18++,i.start()})}})},i.getFlowStatus=function(){return this.$8.flowStatus},i.shouldTerminateOrRetry=function(e,i,o,a){var s=this;if(!this.$14){var u=i;if(this.$12||(u="cannot retry for error: "+i+" because of hit max retry limitation"),e!==r("RequestStreamCloseReason").RequestStreamCloseReason.ClientError&&(null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:u},null,String(this.$18))),i=o&&(n("gkx")("6002")||this.$12),this.$25(e,u,!i),i){var l=n("gkx")("6002")?Math.max(null!=(o=a)?o:0,this.$15.getBackoffDelayMs()):null!=(e=a)?e:f;return this.$14=!0,new(t("Promise"))(function(e){return window.setTimeout(e,l)}).then(function(){return s.$27()})["catch"](function(){})}}},i.$28=function(){return null!=this.$11},i.$24=function(e,t){var i,o=this,a="string"==typeof e?(new TextEncoder).encode(e):e,l=String(this.$17++);null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT,n("RequestStreamE2EClientLoggerEvent").RECEIVED,{},l),a={amend:{amendment:a,instrumentation_data:i=u(this.$5,l)}},t&&a.amend&&(a.amend.amendment_id=l),i=r("CompactSerializerPolyfill").serialize(a,r("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload);var c=Date.now();if(this.$29()&&null!=this.$11)return t&&this.$19.add(l),this.$11.send(i).then(function(e){var t;s(e),e=(Date.now()-c).toString(),null==(t=o.$6)||t.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT,n("RequestStreamE2EClientLoggerEvent").PUBACK,{latency:e},l)})["catch"](function(e){var t;null==(t=o.$6)||t.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:e.message},l),o.$19.reject(l,e)}),null==(a=this.$6)||a.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT,n("RequestStreamE2EClientLoggerEvent").SENT,{data_size:null!=(i=null==e?void 0:null==(t=e.length)?void 0:t.toString())?i:"0"},l),l;null==(a=this.$6)||a.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").AMENDMENT,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},l)},i.$26=function(e){var i,o,a,u,l,f,d,g=this;return t("regeneratorRuntime").async(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.$9){m.next=36;break}return o=this.$2||this.$1,m.prev=2,a=this.$30(),this.$13=a,u=r("DGWRequestStreamUtils").convertHeaders(babelHelpers["extends"]({},o.headers,this.$31()),null!=o.body,this.$5),m.next=8,t("regeneratorRuntime").awrap(this.$20.establishStream(u,a,this.$7));case 8:this.$11=m.sent,m.next=23;break;case 11:if(m.prev=11,m.t0=m["catch"](2),m.t0!==r("DGWStream").StreamError.ESTABLISHMENT_ERROR){m.next=15;break}throw m.t0;case 15:if(!r("DGWStream").StreamError.isValid(m.t0)||r("DGWStream").isRetryableError(m.t0)){m.next=19;break}throw m.t0;case 19:if(!r("DGWStream").StreamError.isValid(m.t0)||!r("DGWStream").isRetryableError(m.t0)){m.next=22;break}return this.$32(m.t0),m.abrupt("return");case 22:throw m.t0;case 23:if(!this.$9){m.next=26;break}return this.$25(r("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0),m.abrupt("return");case 26:if(l=new Uint8Array([]),null!=o.body&&(f={request_body:{body:o.body}},l=r("CompactSerializerPolyfill").serialize(f,r("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload)),this.$11){m.next=30;break}throw new Error("dgwstream_is_null");case 30:return d=this.$11.send(l).then(function(e){s(e),g.$9&&g.$25(r("RequestStreamCloseReason").RequestStreamCloseReason.UserIntention,"user cancel the stream",!0)}),null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").SENT,{},e,String(this.$18)),this.$12=c,m.abrupt("return",d);case 36:throw new Error("stream_already_canceled");case 37:case"end":return m.stop()}},null,this,[[2,11]])},i.$29=function(){return this.$8.flowStatus===r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started||this.$8.flowStatus===r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Accepted},i.$25=function(e,t,i){var o;this.$11&&e!==r("RequestStreamCloseReason").RequestStreamCloseReason.StreamError&&e!==r("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination&&this.$11.close(),n("gkx")("574")&&this.$19.rejectAll(n("err")("stream terminating: "+t)),null==(o=this.$13)||o.stop(),this.$11=null,this.$10=!0,this.$33(r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped)&&this.$3.onFlowStatus(r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Stopped),i&&!this.$9&&this.$3.onTermination("terminate stream because "+e+" with msg : "+t)},i.$33=function(e){var t=this.$8;return this.$8=r("RequestStreamState").getNextState(t,e),t!==this.$8},i.$27=function(){return this.$12--,this.$18++,this.$15.onRetry(),this.start(!0)},i.$34=function(e){var t=this;if((e=r("CompactSerializerPolyfill").deserialize(e,r("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").deserializePayload)).response){var i,o=r("DGWRequestStreamUtils").getInstrumentationDataFieldsFromPayload(e),a=null==o?void 0:o.auxId;if(o=null==o?void 0:o.dfTraceId,!this.$28())return void(null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"response_received_after_close"},a,String(this.$18),o));null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE,n("RequestStreamE2EClientLoggerEvent").RECEIVED,l(e.response),a,String(this.$18),o),(i=e.response.delta).forEach(function(e){
if(e.data)t.$15.resetErrorAndRetryCount(),t.$8.flowStatus===r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&t.$3.onData(new TextDecoder("utf-8").decode(e.data.bytes));else if(e.flow_status){var n=e.flow_status;n===r("RequestStreamCommonRequestStreamCommonTypes").FlowStatus.Started&&t.$15.resetErrorAndRetryCount(),t.$33(n)&&t.$3.onFlowStatus(n)}else if(e.termination)n=null!=(n=e.termination.message)?n:"unknown termination msg",t.$2=null,t.shouldTerminateOrRetry(r("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,n,e.termination.reason===r("RequestStreamCommonRequestStreamCommonTypes").TerminationReason.TryAgain,null!=e.termination.retry_delay_ms?parseInt(e.termination.retry_delay_ms,10):null);else if(e.log)t.$3.onLog(e.log.message);else if(e.amend_ack){if(null!=(n=e.amend_ack.amendment_id)){var i=e.amend_ack.accepted||!1;t.$19.resolve(n,i)}}else e.rewrite&&(n=r("DGWRequestStreamUtils").transformContextWithRewriteDelta(t.$1,e.rewrite),!0===e.rewrite.temporary?t.$2=n:t.$1=n)}),null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE,n("RequestStreamE2EClientLoggerEvent").SENT,l(e.response),a,String(this.$18),o),e.response.ack_level===r("RequestStreamCommonRequestStreamCommonTypes").AckLevel.Device&&null!=e.response.response_id&&this.$35(e.response.response_id,a)}else null==(i=this.$6)||i.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"unexpected_payload_type"},null,String(this.$18))},i.$35=function(e,t){e={ack:{response_id:e,ack:r("RequestStreamSingleChannelSingleChannelRequestStreamTypes").Ack.Success}},e=r("CompactSerializerPolyfill").serialize(e,r("RequestStreamSingleChannelSingleChannelRequestStreamSerializers").serializePayload),null!=this.$11?(this.$11.send(e),null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,n("RequestStreamE2EClientLoggerEvent").SENT,{},t,String(this.$18))):null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE_ACK,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"not_started"},t,String(this.$18))},i.$22=function(){return"Falco"===this.$1.headers.method},i.$30=function(){return new(n("DGWStreamHandler"))(this.$36.bind(this),this.$37.bind(this),this.$32.bind(this),this.$38.bind(this),this.$39.bind(this))},i.$39=function(e){null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Has FinishedSendingData"},null,String(this.$18)),this.$25(r("RequestStreamCloseReason").RequestStreamCloseReason.ServerDataEnd,"Client receive OnServerHasFinishedSendingData and Server will not send more data",!0)},i.$36=function(e){null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").REQUEST_STREAM,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:"OnClose: Server Close Connection"},null,String(this.$18)),this.$25(r("RequestStreamCloseReason").RequestStreamCloseReason.RemoteTermination,"Client receive OnClose and Server will not send more data",!0)},i.$37=function(e){try{this.$34(e)}catch(t){null==(e=this.$6)||e.logE2EEvent(n("RequestStreamE2EClientLoggerMessageType").RESPONSE,n("RequestStreamE2EClientLoggerEvent").FAILURE,{reason:t.message},null,String(this.$18)),this.shouldTerminateOrRetry(r("RequestStreamCloseReason").RequestStreamCloseReason.ClientError,t.message,!1)}},i.$32=function(e){var t="",n=r("DGWStream").isRetryableError(e);t="StreamError: Received "+e,this.shouldTerminateOrRetry(r("RequestStreamCloseReason").RequestStreamCloseReason.StreamError,t,n)},i.$38=function(e,t){this.shouldTerminateOrRetry(r("RequestStreamCloseReason").RequestStreamCloseReason.ServerDrain,t,!0)},i.$31=function(){return n("RtiWebRequestStreamClient").overrideHeaders},i.$23=function(){var e={};return n("gkx")("1626")&&(e.pending_amendments_size=this.$19.getSize().toString()),e},e}(),a["default"]=e},98),__d("DGWAuth",["$InternalEnum","err"],function(e,t,n,r,i,o,a){"use strict";function e(e){if("TEST"===e)return s.TEST;if("FACEBOOK"===e)return s.FACEBOOK;if("INTERNALFB"===e)return s.INTERNALFB;if("ENTERPRISEFB"===e)return s.ENTERPRISEFB;if("RECRUITINGFB"===e)return s.RECRUITINGFB;if("INSTAGRAM"===e)return s.INSTAGRAM;if("BULLETIN"===e)return s.BULLETIN;if("HORIZON_WEB"===e)return s.HORIZON_WEB;throw n("err")("failed to convert string ("+e+") to DGWAuth Type")}function r(e){return e===s.FACEBOOK?"FACEBOOK":e===s.INTERNALFB?"INTERNALFB":e===s.ENTERPRISEFB?"ENTERPRISEFB":e===s.RECRUITINGFB?"RECRUITINGFB":e===s.INSTAGRAM?"INSTAGRAM":e===s.BULLETIN?"BULLETIN":e===s.HORIZON_WEB?"HORIZON_WEB":"TEST"}var s=t("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",BULLETIN:"9:0",HORIZON_WEB:"12:0"});a.DGWAuth=s,a.fromStringToDGWAuth=e,a.fromDGWAuthToString=r},98),__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1755537"),i=r("FalcoLoggerInternal").create("dgw_client",e),a["default"]=i},98),__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],function(e,t,n,r,i,o,a){"use strict";function s(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}e="dgw_client";var u=t("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"});i=function(){function e(e,t,n,r,i,o,a){void 0===o&&(o=!1),void 0===a&&(a=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.$6=i,this.$2=o,this.$7=a}e.bumpODSKey=function(e,t,n){void 0===n&&(n=1),r("Random").coinflip(n)&&(e=e+"."+t,r("ODS").bumpEntityKey(3589,"dgw_web_client",e,n))};var t=e.prototype;return t.logEvent=function(e,t,n,r){void 0===r&&(r=!1),this.$2||this.$8(e,t,null,n,r)},t.$8=function(e,t,r,i,o){var a=this;void 0===o&&(o=!1),o&&!this.$7||(s(e)&&null!=this.$1||!s(e)&&null!=this.$6)&&n("DgwClientFalcoEvent").log(function(){return{event:t,logging_id:a.$1,dgw_version:a.$5,error:r,uuid:a.$3,dgw_component:e,extra_info:i,destination_tier:a.$4,sg_transport_id:a.$6}})},t.logError=function(e,t,n,r,i){void 0===i&&(i=!1),this.$2||this.$8(e,t,n,r,i)},t.logWarn=function(e,t,n,r,i){void 0===i&&(i=!1),this.$2||this.$8(e,t,n,r,i)},e}(),a.DGW_MODULE=e,a.DGWLoggingComponent=u,a.DGWLoggingContext=i},98),__d("DGWCppBridge",[],function(e,t,n,r,i,o){var a=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(t){function n(e){return t.locateFile?t.locateFile(e,I):I+e}function r(e,t){return e%t>0&&(e+=t-e%t),e}function i(e){L=e,t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU8=F=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}function o(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)u(t.preRun.shift());E(M)}function a(){E(q)}function s(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)c(t.postRun.shift());E(U)}function u(e){M.unshift(e)}function l(e){q.unshift(e)}function c(e){U.unshift(e)}function f(){V++,t.monitorRunDependencies&&t.monitorRunDependencies(V)}function d(e){V--,t.monitorRunDependencies&&t.monitorRunDependencies(V),0==V&&(null!==z&&(clearInterval(z),z=null),j&&(e=j,j=null,e()))}function g(e){throw t.onAbort&&t.onAbort(e),k(e+=""),W=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",e=new O.RuntimeError(e),$(e),e}function m(e){return e.startsWith(K)}function C(e){try{if(e==Y&&P)return new Uint8Array(P);var t=T(e);if(t)return t;if(w)return w(e);throw"both async and sync fetching of the wasm failed"}catch(e){g(e)}}function h(){return P||!x&&!G||"function"!=typeof fetch?b.resolve().then(function(){return C(Y)}):fetch(Y,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Y+"'";return e.arrayBuffer()})["catch"](function(){return C(Y)})}function p(){function e(e,n){n=e.exports,t.asm=n,B=t.asm.A,l(t.asm.c),d("wasm-instantiate")}function n(t){e(t.instance)}function r(e){return h().then(function(e){return e=O.instantiate(e,o)}).then(e,function(e){k("failed to asynchronously prepare wasm: "+e),g(e)})}function i(){return P||"function"!=typeof O.instantiateStreaming||m(Y)||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then(function(e){return(e=O.instantiateStreaming(e,o)).then(n,function(e){return k("wasm streaming compile failed: "+e),k("falling back to ArrayBuffer instantiation"),r(n)})})}var o={a:J};if(f("wasm-instantiate"),t.instantiateWasm)try{var a=t.instantiateWasm(o,e);return a}catch(a){return k("Module.instantiateWasm callback failed with error: "+a),!1}return i()["catch"]($),{}}function E(e){for(;e.length>0;){var n=e.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?B.get(r)():B.get(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(t)}}function S(e){try{return N.grow(e-L.byteLength+65535>>>16),i(N.buffer),1}catch(e){}}function _(e){var t=F.length,n=2147483648;if((e>>>=0)>n)return!1;for(var i=1;i<=4;i*=2){var o=t*(1+.2/i);if(o=Math.min(o,e+100663296),o=S(o=Math.min(n,r(Math.max(e,o),65536))))return!0}return!1}function R(e){try{e=Q(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function T(e){if(m(e))return R(e.slice(K.length))}function y(){function e(){X||(X=!0,t.calledRun=!0,W||(a(),v(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),s()))}V>0||(o(),V>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()))}t=void 0!==(t=t||{})?t:{};var v,$,b=function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function r(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(n){return void o(t.promise,n)}i(t.promise,r)}else(1===e._state?i:o)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){var i=r.then;if(r instanceof n)return e._state=3,e._value=r,void a(e);if("function"==typeof i)return void u(t(i,r),e)}e._state=1,e._value=r,a(e)}catch(n){o(e,n)}}function o(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)r(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,o(t,e))})}catch(e){if(n)return;n=!0,o(t,e)}}return n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var i=new this.constructor(e);return r(this,new s(t,n,i)),i},n.all=function(e){return new n(function(t,n){function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){r(e,t)},n)}i[e]=a,0==--o&&t(i)}catch(t){n(t)}}if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)n.resolve(e[i]).then(t,r)})},n._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(){"undefined"!=typeof console&&console},n}();t.ready=new b(function(e,t){v=e,$=t});var D,A={};for(D in t)Object.prototype.hasOwnProperty.call(t,D)&&(A[D]=t[D]);var w,x=!0,G=!1,I="";(x||G)&&(G?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),e&&(I=e),I=0!==I.indexOf("blob:")?I.substr(0,I.lastIndexOf("/")+1):"",G&&(w=function(e){try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(b){if(t=T(e))return t;throw b}})),t.print||emptyFunction.bind(console);var P,k=t.printErr||emptyFunction.bind(console);for(D in A)Object.prototype.hasOwnProperty.call(A,D)&&(t[D]=A[D]);A=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(P=t.wasmBinary),t.noExitRuntime;var O={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(){},Instance:function(){this.exports=function(e){function t(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}function n(e,t,n){var r,i,o=0,s=t,u=n.length;for(t=t+(3*u>>2)-("="==n[u-2])-("="==n[u-1]);o<u;o+=4)r=a[n.charCodeAt(o+1)],i=a[n.charCodeAt(o+2)],e[s++]=a[n.charCodeAt(o)]<<2|r>>4,s<t&&(e[s++]=r<<4|i>>2),s<t&&(e[s++]=i<<6|a[n.charCodeAt(o+3)])}function r(){n(o,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),n(o,1372,"gAkQ")}function i(e){function n(e,t,n,r,o,a){e|=0,t|=0,n|=0,r|=0,o|=0,a|=0;var s,u=0,l=0;ce=u=ce-80|0,ne[u+72>>2]=e,ne[u+68>>2]=t,ne[u+64>>2]=n,ne[u+60>>2]=r,ne[u+56>>2]=o,ne[u+52>>2]=a;e:if(!ne[u+52>>2]||!ne[u+56>>2]|!ne[u+72>>2]|!ne[u+68>>2]|!ne[u+64>>2]|!ne[u+60>>2])ne[u+76>>2]=5;else{ne[ne[u+64>>2]>>2]=0,ne[ne[u+60>>2]>>2]=0,t=ne[u+68>>2],n=ne[u+56>>2],r=ne[u+52>>2],ce=e=ce+-64|0,ne[e+56>>2]=ne[u+72>>2],ne[e+52>>2]=t,ne[e+48>>2]=n,ne[e+44>>2]=r,ne[e+40>>2]=0,ne[e+36>>2]=ne[e+56>>2];t:{n:{r:{for(;;){if(!ne[e+52>>2])break n;if(ne[e+32>>2]=ne[e+36>>2],ee[e+31|0]=re[ne[e+36>>2]],ne[e+52>>2]=ne[e+52>>2]-1,ne[e+36>>2]=ne[e+36>>2]+1,10==re[e+31|0]||2==re[e+31|0]|4==re[e+31|0]|9==re[e+31|0])ne[e+40>>2]=ne[e+40>>2]+1;else{if(ne[e+24>>2]=1,1&b(re[e+31|0])){if(l=e,s=1&A(re[e+31|0]),ee[l+23|0]=s,ne[e+16>>2]=1&ee[e+23|0]?1:2,oe[e+52>>2]<oe[e+16>>2]){ne[ne[e+48>>2]>>2]=ne[e+32>>2],ne[ne[e+44>>2]>>2]=ne[e+52>>2]+ne[e+24>>2];break t}if(ne[e+52>>2]=ne[e+52>>2]-ne[e+16>>2],ne[e+24>>2]=ne[e+16>>2]+ne[e+24>>2],ne[e+36>>2]=ne[e+16>>2]+ne[e+36>>2],14==re[e+31|0]||8==re[e+31|0]){ne[e+40>>2]=ne[e+40>>2]+1;continue}}if(oe[e+52>>2]<3)break r;if(ne[e+12>>2]=0,t=ne[e+36>>2],n=re[0|t]|re[t+1|0]<<8,ee[e+12|0]=n,ee[e+13|0]=n>>>8,ee[e+14|0]=re[t+2|0],ne[e+52>>2]=ne[e+52>>2]-3,ne[e+24>>2]=ne[e+24>>2]+3,ne[e+36>>2]=ne[e+36>>2]+3,!(oe[e+12>>2]<=oe[e+52>>2]))break;ne[e+40>>2]=ne[e+40>>2]+1,ne[e+36>>2]=ne[e+12>>2]+ne[e+36>>2],ne[e+52>>2]=ne[e+52>>2]-ne[e+12>>2]}}ne[ne[e+48>>2]>>2]=ne[e+32>>2],ne[ne[e+44>>2]>>2]=ne[e+52>>2]+ne[e+24>>2];break t}ne[ne[e+48>>2]>>2]=ne[e+32>>2],ne[ne[e+44>>2]>>2]=ne[e+52>>2]+ne[e+24>>2];break t}ne[ne[e+44>>2]>>2]=ne[e+52>>2]}if(ne[e+60>>2]=ne[e+40>>2],ce=e- -64|0,ne[u+48>>2]=ne[e+60>>2],ne[u+48>>2])if(l=u,s=i(ae(ne[u+48>>2],20)),ne[l+44>>2]=s,ne[u+44>>2]){for(ne[u+40>>2]=ne[u+44>>2],ne[u+36>>2]=ne[u+72>>2],ne[u+32>>2]=ne[u+68>>2]-ne[ne[u+52>>2]>>2],ne[u+28>>2]=0;oe[u+28>>2]<oe[u+48>>2];){if(oe[u+32>>2]<1){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=1;break e}if(ee[u+27|0]=re[ne[u+36>>2]],ne[u+36>>2]=ne[u+36>>2]+1,ne[u+32>>2]=ne[u+32>>2]-1,!(!re[u+27|0]|1==re[u+27|0]|2==re[u+27|0]|3==re[u+27|0]|4==re[u+27|0]|9==re[u+27|0]|10==re[u+27|0]||1&b(re[u+27|0]))){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=6;break e}e=ne[u+40>>2],ne[e>>2]=15&re[u+27|0]|-16&ne[e>>2];t:if(10==re[u+27|0]||2==re[u+27|0]|4==re[u+27|0]|9==re[u+27|0])e=ne[u+40>>2],ne[e>>2]=-268435441&ne[e>>2],ne[u+40>>2]=ne[u+40>>2]+20;else{if(1&b(re[u+27|0])){ce=e=ce-48|0,ne[e+40>>2]=ne[u+40>>2],ne[e+36>>2]=u+36,ne[e+32>>2]=u+32;n:if(1&b(15&ne[ne[e+40>>2]>>2]))if(l=e,s=1&A(15&ne[ne[e+40>>2]>>2]),ee[l+31|0]=s,ne[e+24>>2]=1&ee[e+31|0]?1:2,oe[ne[e+32>>2]>>2]<oe[e+24>>2])ne[e+44>>2]=1;else if(P(ne[e+40>>2]+4|0,ne[ne[e+36>>2]>>2],ne[e+24>>2]),t=ne[e+36>>2],ne[t>>2]=ne[e+24>>2]+ne[t>>2],t=ne[e+32>>2],ne[t>>2]=ne[t>>2]-ne[e+24>>2],8!=(15&ne[ne[e+40>>2]>>2]))if(14!=(15&ne[ne[e+40>>2]>>2]))if(oe[ne[e+32>>2]>>2]<3)ne[e+44>>2]=11;else if(ne[e+20>>2]=0,t=ne[ne[e+36>>2]>>2],n=re[0|t]|re[t+1|0]<<8,ee[e+20|0]=n,ee[e+21|0]=n>>>8,ee[e+22|0]=re[t+2|0],t=ne[e+36>>2],ne[t>>2]=ne[t>>2]+3,t=ne[e+32>>2],ne[t>>2]=ne[t>>2]-3,t=ne[e+40>>2],ne[t>>2]=-268435441&ne[t>>2]|(16777215&ne[e+20>>2])<<4,oe[ne[e+32>>2]>>2]<oe[e+20>>2])ne[e+44>>2]=11;else if(15!=(15&ne[ne[e+40>>2]>>2]))if(5!=(15&ne[ne[e+40>>2]>>2])){if(6!=(15&ne[ne[e+40>>2]>>2])&&7!=(15&ne[ne[e+40>>2]>>2])){if((13==(15&ne[ne[e+40>>2]>>2])||12==(15&ne[ne[e+40>>2]>>2]))&&(n=ne[e+32>>2],ne[(t=ce-32|0)+24>>2]=ne[e+36>>2],ne[t+20>>2]=n,ne[t+16>>2]=e+19,ne[t+12>>2]=e+16,te[t+10>>1]=0,oe[ne[t+20>>2]>>2]<2?ne[t+28>>2]=1:(n=ne[ne[t+24>>2]>>2],n=re[0|n]|re[n+1|0]<<8,ee[t+10|0]=n,ee[t+11|0]=n>>>8,n=ne[t+24>>2],ne[n>>2]=ne[n>>2]+2,n=ne[t+20>>2],ne[n>>2]=ne[n>>2]-2,ee[ne[t+16>>2]]=32768==(32768&ie[t+10>>1]),te[ne[t+12>>2]>>1]=32767&ie[t+10>>1],ne[t+28>>2]=0),ne[e+12>>2]=ne[t+28>>2],ne[e+12>>2])){ne[e+44>>2]=ne[e+12>>2];break n}}else if(l=e,s=S(ne[e+36>>2],ne[e+32>>2],e+19|0,e+18|0),ne[l+12>>2]=s,ne[e+12>>2]){ne[e+44>>2]=ne[e+12>>2];break n}if(12!=(15&ne[ne[e+40>>2]>>2]))if(7!=(15&ne[ne[e+40>>2]>>2]))if(13!=(15&ne[ne[e+40>>2]>>2]))if(6!=(15&ne[ne[e+40>>2]>>2]))ne[e+44>>2]=1;else{if(l=e,s=C(ne[e+36>>2],ne[e+32>>2],ne[e+20>>2],ne[e+40>>2]+12|0,ne[e+40>>2]+16|0),ne[l+4>>2]=s,ne[e+4>>2]){ne[e+44>>2]=ne[e+4>>2];break n}t=ne[e+40>>2],ee[t+8|0]=1&ee[e+19|0]|254&re[t+8|0],t=ne[e+40>>2],ee[t+8|0]=1&ee[t+8|0]|re[e+18|0]<<1,ne[e+44>>2]=0}else{if(n=ne[e+32>>2],r=ne[e+20>>2],o=ne[e+40>>2]+12|0,a=ne[e+40>>2],ce=t=ce-32|0,ne[t+24>>2]=ne[e+36>>2],ne[t+20>>2]=n,ne[t+16>>2]=r,ne[t+12>>2]=o,ne[t+8>>2]=a+16,oe[t+16>>2]<2?ne[t+28>>2]=9:(ne[ne[t+8>>2]>>2]=ne[t+16>>2]-2,oe[ne[t+20>>2]>>2]<oe[ne[t+8>>2]>>2]?ne[t+28>>2]=1:(n=i(ne[ne[t+8>>2]>>2]),ne[ne[t+12>>2]>>2]=n,ne[ne[t+12>>2]>>2]?(P(ne[ne[t+12>>2]>>2],ne[ne[t+24>>2]>>2],ne[ne[t+8>>2]>>2]),n=ne[t+24>>2],ne[n>>2]=ne[ne[t+8>>2]>>2]+ne[n>>2],n=ne[t+20>>2],ne[n>>2]=ne[n>>2]-ne[ne[t+8>>2]>>2],ne[t+28>>2]=0):ne[t+28>>2]=3)),ce=t+32|0,ne[e+8>>2]=ne[t+28>>2],ne[e+8>>2]){ne[e+44>>2]=ne[e+8>>2];break n}t=ne[e+40>>2],te[t+8>>1]=1&ee[e+19|0]|65534&ie[t+8>>1],t=ne[e+40>>2],te[t+8>>1]=1&te[t+8>>1]|ie[e+16>>1]<<1,ne[e+44>>2]=0}else t=ne[e+40>>2],ee[t+8|0]=1&ee[t+8|0]|re[e+18|0]<<1,ne[e+44>>2]=0;else t=ne[e+40>>2],te[t+8>>1]=1&te[t+8>>1]|ie[e+16>>1]<<1,ne[e+44>>2]=0}else{if(ne[ne[e+40>>2]+12>>2]=ne[e+20>>2],t=i(ne[e+20>>2]),ne[ne[e+40>>2]+8>>2]=t,!ne[ne[e+40>>2]+8>>2]){ne[e+44>>2]=3;break n}P(ne[ne[e+40>>2]+8>>2],ne[ne[e+36>>2]>>2],ne[e+20>>2]),t=ne[e+36>>2],ne[t>>2]=ne[e+20>>2]+ne[t>>2],t=ne[e+32>>2],ne[t>>2]=ne[t>>2]-ne[e+20>>2],ne[e+44>>2]=0}else{if(ne[ne[e+40>>2]+12>>2]=ne[e+20>>2],t=i(ne[e+20>>2]),ne[ne[e+40>>2]+8>>2]=t,!ne[ne[e+40>>2]+8>>2]){ne[e+44>>2]=3;break n}P(ne[ne[e+40>>2]+8>>2],ne[ne[e+36>>2]>>2],ne[e+20>>2]),t=ne[e+36>>2],ne[t>>2]=ne[e+20>>2]+ne[t>>2],t=ne[e+32>>2],ne[t>>2]=ne[t>>2]-ne[e+20>>2],ne[e+44>>2]=0}else t=ne[e+40>>2],ne[t>>2]=-268435441&ne[t>>2],ne[e+44>>2]=0;else t=ne[e+40>>2],ne[t>>2]=-268435441&ne[t>>2],ne[e+44>>2]=0;else ne[e+44>>2]=1;if(ce=e+48|0,ne[u+20>>2]=ne[e+44>>2],!ne[u+20>>2]){ne[u+40>>2]=ne[u+40>>2]+20;break t}p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=ne[u+20>>2];break e}if(ne[u+16>>2]=0,oe[u+32>>2]<3){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=1;break e}if(e=ne[u+36>>2],t=re[0|e]|re[e+1|0]<<8,ee[u+16|0]=t,ee[u+17|0]=t>>>8,ee[u+18|0]=re[e+2|0],ne[u+36>>2]=ne[u+36>>2]+3,ne[u+32>>2]=ne[u+32>>2]-3,!(1==ne[u+16>>2]|1!=re[u+27|0])){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=7;break e}if(e=ne[u+40>>2],ne[e>>2]=-268435441&ne[e>>2]|(16777215&ne[u+16>>2])<<4,3!=re[u+27|0]){if(l=u,s=S(u+36|0,u+32|0,u+14|0,u+13|0),ne[l+8>>2]=s,ne[u+8>>2]){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=ne[u+8>>2];break e}if(1!=re[u+27|0]){if(!re[u+27|0]){if(l=u,s=C(u+36|0,u+32|0,ne[u+16>>2],ne[u+40>>2]+8|0,ne[u+40>>2]+12|0),ne[l+4>>2]=s,ne[u+4>>2]){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=ne[u+4>>2];break e}e=ne[u+40>>2],ee[e+4|0]=1&ee[u+14|0]|254&re[e+4|0],e=ne[u+40>>2],ee[e+4|0]=1&ee[e+4|0]|re[u+13|0]<<1,ne[u+40>>2]=ne[u+40>>2]+20}}else e=ne[u+40>>2],ee[e+4|0]=1&ee[e+4|0]|re[u+13|0]<<1,ne[u+40>>2]=ne[u+40>>2]+20}else{if(1!=ne[u+16>>2]){p(ne[u+44>>2],ne[u+28>>2]),ne[u+76>>2]=10;break e}if(ee[u+15|0]=0,oe[u+32>>2]<1){d(ne[u+44>>2]),ne[u+76>>2]=1;break e}ee[u+15|0]=re[ne[u+36>>2]],ne[u+36>>2]=ne[u+36>>2]+1,ne[u+32>>2]=ne[u+32>>2]-1,re[u+15|0]<=4?ee[ne[u+40>>2]+4|0]=re[u+15|0]:ee[ne[u+40>>2]+4|0]=4,ne[u+40>>2]=ne[u+40>>2]+20}}ne[u+28>>2]=ne[u+28>>2]+1}ne[u+32>>2]?(p(ne[u+44>>2],ne[u+48>>2]),ne[u+76>>2]=1):(ne[ne[u+64>>2]>>2]=ne[u+44>>2],ne[ne[u+60>>2]>>2]=ne[u+48>>2],ne[u+76>>2]=0)}else ne[u+76>>2]=3;else ne[u+76>>2]=0}return ce=u+80|0,ne[u+76>>2]}function i(e){var t,n,r,i=0,o=0,a=0,s=0,l=0,c=0,d=0,g=0;g=8;e:{t:if(!(e>>>0>4294967239))for(;;){if(g=g>>>0>8?g:8,l=o=ne[603],d=s=ne[602],(e=e>>>0>8?e+3&-4:8)>>>0<=127?c=(e>>>3|0)-1|0:(c=110+((e>>>29-(a=se(e))^4)-(a<<2)|0)|0,e>>>0<=4095||(c=(a=71+((e>>>30-a^2)-(a<<1)|0)|0)>>>0<63?a:63)),a=31&(i=c),(63&i)>>>0>=32?(i=0,o=o>>>a|0):(i=o>>>a|0,o=((1<<a)-1&o)<<32-a|d>>>a),a=i,o|i){for(;;){if(l=o,(i=a)|o?(t=(s=i-1|0)+1|0,d=s,d=-1!=(0|(s=o-1|0))?t:d,s=se(o^s)+32|0,i=63-(o=32==(0|(o=se(i^d)))?s:o)|0):i=64,o=31&(i=s=i),(63&i)>>>0>=32?(i=0,d=a>>>o|0):(i=a>>>o|0,d=((1<<o)-1&a)<<32-o|l>>>o),a=i,(0|(i=ne[(l=(c=s+c|0)<<4)+1384>>2]))==(0|(s=l+1376|0)))n=ne[603],l=31&(o=t=63&(i=c)),o>>>0>=32?(o=0,s=-1>>>l|0):(o=-1>>>l|0,s=(1<<l)-1<<32-l|-1>>>l),s&=-2,l=31&t,t>>>0>=32?(o=s<<l,t=0):(o=(1<<l)-1&s>>>32-l|o<<l,t=s<<l),l=o,i=31&(o=s=0-i&63),o>>>0>=32?(o=-1<<i,i=0):(o=(1<<i)-1&-1>>>32-i|-1<<i,i=-1<<i),r=-2&i,i=31&s,s>>>0>=32?(s=0,i=o>>>i|0):(s=o>>>i|0,i=((1<<i)-1&o)<<32-i|r>>>i),o=i|t,ue=l|s,ne[602]=ne[602]&o,ne[603]=ue&n,o=1^d;else{if(o=f(i,g,e))break t;o=ne[i+4>>2],ne[o+8>>2]=ne[i+8>>2],ne[ne[i+8>>2]+4>>2]=o,ne[i+8>>2]=s,o=l+1380|0,ne[i+4>>2]=ne[o>>2],ne[o>>2]=i,ne[ne[i+4>>2]+8>>2]=i,c=c+1|0,o=(1&a)<<31|d>>>1,a=a>>>1|0}if(!(o|a))break}s=ne[602],l=ne[603]}n:{if(l|s){i=(a=63-(32==(0|(a=se(l)))?se(s)+32|0:a)<<4)+1376|0,a=ne[a+1384>>2];r:if(!(!l&s>>>0<1073741824)&&(c=98,(0|i)!=(0|a)))for(;;){if(o=f(a,g,e))break t;if(a=ne[a+8>>2],!c)break r;if(c=c-1|0,(0|i)==(0|a))break}if(u(e+48|0))break n;if(!a|(0|i)==(0|a))break e;for(;;){if(o=f(a,g,e))break t;if((0|i)==(0|(a=ne[a+8>>2])))break}break e}if(!u(e+48|0))break e}if(o=0,e>>>0>4294967239)break t;for(a=g,i=0;c=i,a;)a&=a-1,i=i+1|0;if(!(c>>>0<=1))break}return o}return 0}function a(e,t,n,r,o,a,s){e|=0,t|=0,n|=0,r|=0,o|=0,a|=0,s|=0;var u=0,l=0;if(ce=u=ce-32|0,te[u+26>>1]=e,ne[u+20>>2]=t,ne[u+16>>2]=n,ee[u+15|0]=r,te[u+12>>1]=o,ne[u+8>>2]=a,ne[u+4>>2]=s,!(1&ee[u+15|0])|ie[u+12>>1]<=32767){t=ne[u+20>>2],n=ne[u+16>>2],r=ne[u+8>>2],o=ne[u+4>>2],a=1&ee[u+15|0],ce=e=ce+-64|0,ne[e+56>>2]=u+26,ne[e+52>>2]=t,ne[e+48>>2]=n,ne[e+44>>2]=r,ne[e+40>>2]=o,ee[e+39|0]=2,ee[e+38|0]=13,ne[e+32>>2]=u+12,ee[e+31|0]=a,ee[e+30|0]=2;e:if(!(!ne[e+52>>2]|!ne[e+44>>2]|!ne[e+40>>2])&&oe[e+48>>2]<=16777215)if(ne[e+24>>2]=ne[e+48>>2]+(re[e+39|0]+(re[e+30|0]+4|0)|0),l=e,s=i(ne[e+24>>2]),ne[l+20>>2]=s,ne[e+20>>2])if(ne[e+16>>2]=ne[e+20>>2],ee[ne[e+16>>2]]=re[e+38|0],ne[e+16>>2]=ne[e+16>>2]+1,P(ne[e+16>>2],ne[e+56>>2],re[e+30|0]),ne[e+16>>2]=re[e+30|0]+ne[e+16>>2],ne[e+12>>2]=re[e+39|0]+ne[e+48>>2],oe[e+12>>2]<oe[e+48>>2])d(ne[e+20>>2]),ne[e+60>>2]=9;else{if(t=ne[e+16>>2],n=re[e+12|0]|re[e+13|0]<<8,ee[0|t]=n,ee[t+1|0]=n>>>8,ee[t+2|0]=re[e+14|0],ne[e+16>>2]=ne[e+16>>2]+3,1&ee[e+31|0])if(6!=re[e+38|0]){if(13!=re[e+38|0]){d(ne[e+20>>2]),ne[e+60>>2]=1;break e}t=ne[e+32>>2],te[t>>1]=32768|ie[t>>1]}else t=ne[e+32>>2],ee[0|t]=128|re[0|t];P(ne[e+16>>2],ne[e+32>>2],re[e+39|0]),ne[e+16>>2]=re[e+39|0]+ne[e+16>>2],P(ne[e+16>>2],ne[e+52>>2],ne[e+48>>2]),ne[ne[e+44>>2]>>2]=ne[e+20>>2],ne[ne[e+40>>2]>>2]=ne[e+24>>2],ne[e+60>>2]=0}else ne[e+60>>2]=3;else ne[e+60>>2]=5;ce=e- -64|0,ne[u+28>>2]=ne[e+60>>2]}else ne[u+28>>2]=4;return ce=u+32|0,ne[u+28>>2]}function s(e,t,n,r,o){e|=0,t|=0,n|=0,r|=0,o|=0;var a=0,s=0;return ce=a=ce-32|0,te[a+30>>1]=e,ne[a+24>>2]=t,ne[a+20>>2]=n,ne[a+16>>2]=r,ne[a+12>>2]=o,t=ne[a+24>>2],n=ne[a+20>>2],r=ne[a+16>>2],o=ne[a+12>>2],ce=e=ce-48|0,ne[e+40>>2]=a+30,ne[e+36>>2]=t,ne[e+32>>2]=n,ne[e+28>>2]=r,ne[e+24>>2]=o,ee[e+23|0]=2,ee[e+22|0]=15,ne[e+24>>2]&&ne[e+28>>2]?(ne[ne[e+28>>2]>>2]=0,ne[ne[e+24>>2]>>2]=0,oe[e+32>>2]<=16777215&&ne[e+36>>2]?(ne[e+16>>2]=ne[e+32>>2]+(re[e+23|0]+4|0),s=e,r=i(ne[e+16>>2]),ne[s+12>>2]=r,ne[e+12>>2]?(ne[e+8>>2]=ne[e+12>>2],ee[ne[e+8>>2]]=re[e+22|0],ne[e+8>>2]=ne[e+8>>2]+1,P(ne[e+8>>2],ne[e+40>>2],re[e+23|0]),ne[e+8>>2]=re[e+23|0]+ne[e+8>>2],t=ne[e+8>>2],n=re[e+32|0]|re[e+33|0]<<8,ee[0|t]=n,ee[t+1|0]=n>>>8,ee[t+2|0]=re[e+34|0],ne[e+8>>2]=ne[e+8>>2]+3,P(ne[e+8>>2],ne[e+36>>2],ne[e+32>>2]),ne[e+8>>2]=ne[e+32>>2]+ne[e+8>>2],ne[ne[e+28>>2]>>2]=ne[e+12>>2],ne[ne[e+24>>2]>>2]=ne[e+16>>2],ne[e+44>>2]=0):ne[e+44>>2]=3):ne[e+44>>2]=5):ne[e+44>>2]=5,ce=e+48|0,ce=a+32|0,ne[e+44>>2]}function u(e){var t,n,r=0,i=0,o=0,a=0;if((r=(i=ne[343])+(t=e+3&-4)|0)>>>0<=i>>>0&&t||r>>>0>X()<<16>>>0&&!(0|le(0|r))?(ne[604]=48,i=-1):ne[343]=r,-1!=(0|i)){ne[(r=(t=e+i|0)-16|0)+12>>2]=16,ne[r>>2]=16;e:{t:{if((0|(a=(e=ne[600])?ne[e+8>>2]:0))==(0|i)){if(o=i-(-2&ne[i-4>>2])|0,n=ne[o-4>>2],ne[e+8>>2]=t,t=-16,!(1&ee[((e=o-(-2&n)|0)+ne[e>>2]|0)-4|0]))break t;t=ne[e+4>>2],ne[t+8>>2]=ne[e+8>>2],ne[ne[e+8>>2]+4>>2]=t,r=r-e|0,ne[e>>2]=r;break e}ne[i+12>>2]=16,ne[i>>2]=16,ne[i+8>>2]=t,ne[i+4>>2]=e,ne[600]=i,t=16}r=r-(e=i+t|0)|0,ne[e>>2]=r}ne[((-4&r)+e|0)-4>>2]=1|r,a=e,(o=ne[e>>2]-8|0)>>>0<=127?r=(o>>>3|0)-1|0:(r=110+((o>>>29-(n=se(o))^4)-(n<<2)|0)|0,o>>>0<=4095||(r=(r=71+((o>>>30-n^2)-(n<<1)|0)|0)>>>0<63?r:63)),t=r<<4,ne[a+4>>2]=t+1376,t=t+1384|0,ne[e+8>>2]=ne[t>>2],ne[t>>2]=e,ne[ne[e+8>>2]+4>>2]=e,t=ne[603],e=31&r,(63&r)>>>0>=32?(r=1<<e,e=0):(r=(1<<e)-1&1>>>32-e,e=1<<e),ne[602]=e|ne[602],ne[603]=r|t}return-1!=(0|i)}function l(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var o=0,a=0;return ce=o=ce-16|0,te[o+10>>1]=e,te[o+8>>1]=t,ne[o+4>>2]=n,ne[o>>2]=r,ie[o+8>>1]>32767?ne[o+12>>2]=4:(t=ne[o+4>>2],n=ne[o>>2],ce=e=ce-48|0,ne[e+40>>2]=o+10,ne[e+36>>2]=t,ne[e+32>>2]=n,ee[e+31|0]=2,ee[e+30|0]=12,ne[e+24>>2]=o+8,ee[e+23|0]=2,ne[e+32>>2]&&ne[e+36>>2]?(ne[e+16>>2]=re[e+31|0]+(re[e+23|0]+4|0),a=e,r=i(ne[e+16>>2]),ne[a+12>>2]=r,ne[e+12>>2]?(ne[e+8>>2]=ne[e+12>>2],ee[ne[e+8>>2]]=re[e+30|0],ne[e+8>>2]=ne[e+8>>2]+1,P(ne[e+8>>2],ne[e+40>>2],re[e+23|0]),ne[e+8>>2]=re[e+23|0]+ne[e+8>>2],ne[e+4>>2]=re[e+31|0],t=ne[e+8>>2],n=re[e+4|0]|re[e+5|0]<<8,ee[0|t]=n,ee[t+1|0]=n>>>8,ee[t+2|0]=re[e+6|0],ne[e+8>>2]=ne[e+8>>2]+3,P(ne[e+8>>2],ne[e+24>>2],re[e+31|0]),ne[ne[e+32>>2]>>2]=ne[e+16>>2],ne[ne[e+36>>2]>>2]=ne[e+12>>2],ne[e+44>>2]=0):ne[e+44>>2]=3):ne[e+44>>2]=5,ce=e+48|0,ne[o+12>>2]=ne[e+44>>2]),ce=o+16|0,ne[o+12>>2]}function c(e,t,n){n|=0;var r=0,i=0,o=0,a=0,s=0;if(ce=o=ce+-64|0,i=1,!R(e|=0,t|=0,0)&&(i=0,t)){ce=r=ce+-64|0,i=ne[t>>2],a=ne[i-4>>2],s=ne[i-8>>2],ne[r+20>>2]=0,ne[r+16>>2]=1084,ne[r+12>>2]=t,ne[r+8>>2]=1132,i=0,k(r+24|0,39),t=t+s|0;e:if(R(a,1132,0))ne[r+56>>2]=1,fe[ne[ne[a>>2]+20>>2]](a,r+8|0,t,t,1,0),i=1==ne[r+32>>2]?t:0;else{fe[ne[ne[a>>2]+24>>2]](a,r+8|0,t,1,0);t:switch(ne[r+44>>2]){case 0:i=1==ne[r+48>>2]&&1==ne[r+36>>2]&&1==ne[r+40>>2]?ne[r+28>>2]:0;break e;case 1:break t;default:break e}ne[r+48>>2]|1!=ne[r+36>>2]|1!=ne[r+40>>2]&&1!=ne[r+32>>2]||(i=ne[r+24>>2])}ce=r- -64|0,t=i,i=0,t&&(k(o+8|4,52),ne[o+56>>2]=1,ne[o+20>>2]=-1,ne[o+16>>2]=e,ne[o+8>>2]=t,fe[ne[ne[t>>2]+28>>2]](t,o+8|0,ne[n>>2],1),1==(0|(e=ne[o+32>>2]))&&(ne[n>>2]=ne[o+24>>2]),i=1==(0|e))}return ce=o- -64|0,0|(e=i)}function f(e,t,n){var r,i=0,o=0,a=0;return(r=((i=e+4|0)+t|0)-1&0-t)+n>>>0<=((t=ne[e>>2])+e|0)-4>>>0?(o=ne[e+4>>2],ne[o+8>>2]=ne[e+8>>2],ne[ne[e+8>>2]+4>>2]=o,(0|i)!=(0|r)&&(r=r-i|0,o=e-(-2&ne[e-4>>2])|0,i=r+ne[o>>2]|0,ne[o>>2]=i,ne[(o+(-4&i)|0)-4>>2]=i,t=t-r|0,ne[(e=e+r|0)>>2]=t),n+24>>>0<=t>>>0?(t=(t-n|0)-8|0,ne[(i=8+(e+n|0)|0)>>2]=t,ne[(i+(-4&t)|0)-4>>2]=1|t,a=i,(o=ne[i>>2]-8|0)>>>0<=127?r=(o>>>3|0)-1|0:(r=110+((o>>>29-(t=se(o))^4)-(t<<2)|0)|0,o>>>0<=4095||(r=(t=71+((o>>>30-t^2)-(t<<1)|0)|0)>>>0<63?t:63)),r=(t=r)<<4,ne[a+4>>2]=r+1376,r=r+1384|0,ne[i+8>>2]=ne[r>>2],ne[r>>2]=i,ne[ne[i+8>>2]+4>>2]=i,r=ne[603],i=31&t,(63&t)>>>0>=32?(t=1<<i,a=0):(t=(1<<i)-1&1>>>32-i,a=1<<i),ne[602]=a|ne[602],ne[603]=t|r,t=n+8|0,ne[e>>2]=t,ne[((-4&t)+e|0)-4>>2]=t):ne[(e+t|0)-4>>2]=t,e=e+4|0):e=0,e}function d(e){var t,n,r=0,i=0,o=0;e&&(i=n=ne[(t=e-4|0)>>2],r=t,(0|(e=-2&(o=ne[e-8>>2])))!=(0|o)&&(i=ne[(r=t-e|0)+4>>2],ne[i+8>>2]=ne[r+8>>2],ne[ne[r+8>>2]+4>>2]=i,i=e+n|0),(0|(t=ne[(e=t+n|0)>>2]))!=ne[(e+t|0)-4>>2]&&(n=ne[e+4>>2],ne[n+8>>2]=ne[e+8>>2],ne[ne[e+8>>2]+4>>2]=n,i=i+t|0),ne[r>>2]=i,ne[((-4&i)+r|0)-4>>2]=1|i,o=r,(i=ne[r>>2]-8|0)>>>0<=127?e=(i>>>3|0)-1|0:(e=110+((i>>>29-(n=se(i))^4)-(n<<2)|0)|0,i>>>0<=4095||(e=(e=71+((i>>>30-n^2)-(n<<1)|0)|0)>>>0<63?e:63)),t=e<<4,ne[o+4>>2]=t+1376,t=t+1384|0,ne[r+8>>2]=ne[t>>2],ne[t>>2]=r,ne[ne[r+8>>2]+4>>2]=r,t=ne[603],r=31&e,(63&e)>>>0>=32?(e=1<<r,r=0):(e=(1<<r)-1&1>>>32-r,r=1<<r),ne[602]=r|ne[602],ne[603]=e|t)}function g(e,t,n){e|=0,t|=0,n|=0;var r=0,o=0;return ce=r=ce-48|0,ne[r+40>>2]=e,ne[r+36>>2]=t,ne[r+32>>2]=n,ne[r+32>>2]&&ne[r+36>>2]?oe[r+40>>2]>4?ne[r+44>>2]=8:(ne[r+28>>2]=5,o=r,n=i(ne[r+28>>2]),ne[o+24>>2]=n,ne[r+24>>2]?(ne[r+20>>2]=ne[r+24>>2],ee[r+19|0]=3,ee[ne[r+20>>2]]=re[r+19|0],ne[r+20>>2]=ne[r+20>>2]+1,ne[r+12>>2]=1,e=ne[r+20>>2],t=re[r+12|0]|re[r+13|0]<<8,ee[0|e]=t,ee[e+1|0]=t>>>8,ee[e+2|0]=re[r+14|0],ne[r+20>>2]=ne[r+20>>2]+3,ee[r+11|0]=ne[r+40>>2],ee[ne[r+20>>2]]=re[r+11|0],ne[ne[r+36>>2]>>2]=ne[r+24>>2],ne[ne[r+32>>2]>>2]=ne[r+28>>2],ne[r+44>>2]=0):ne[r+44>>2]=3):ne[r+44>>2]=5,ce=r+48|0,ne[r+44>>2]}function m(e,t,n,r,i){if(n|=0,r|=0,i|=0,R(e|=0,ne[(t|=0)+8>>2],i))N(t,n,r);else e:{if(R(e,ne[t>>2],i)){if(ne[t+20>>2]==(0|n)||ne[t+16>>2]==(0|n)){if(1!=(0|r))break e;return void(ne[t+32>>2]=1)}ne[t+32>>2]=r;t:if(4!=ne[t+44>>2]){if(te[t+52>>1]=0,e=ne[e+8>>2],fe[ne[ne[e>>2]+20>>2]](e,t,n,n,1,i),re[t+53|0]){if(ne[t+44>>2]=3,!re[t+52|0])break t;break e}ne[t+44>>2]=4}if(ne[t+20>>2]=n,ne[t+40>>2]=ne[t+40>>2]+1,1!=ne[t+36>>2]|2!=ne[t+24>>2])break e;return void(ee[t+54|0]=1)}e=ne[e+8>>2],fe[ne[ne[e>>2]+24>>2]](e,t,n,r,i)}}function C(e,t,n,r,o){var a=0;return ce=a=ce-32|0,ne[a+24>>2]=e,ne[a+20>>2]=t,ne[a+16>>2]=n,ne[a+12>>2]=r,ne[a+8>>2]=o,oe[a+16>>2]<1?ne[a+28>>2]=9:(ne[ne[a+8>>2]>>2]=ne[a+16>>2]-1,oe[ne[a+20>>2]>>2]<oe[ne[a+8>>2]>>2]?ne[a+28>>2]=1:(e=i(ne[ne[a+8>>2]>>2]),ne[ne[a+12>>2]>>2]=e,ne[ne[a+12>>2]>>2]?(P(ne[ne[a+12>>2]>>2],ne[ne[a+24>>2]>>2],ne[ne[a+8>>2]>>2]),e=ne[a+24>>2],ne[e>>2]=ne[ne[a+8>>2]>>2]+ne[e>>2],e=ne[a+20>>2],ne[e>>2]=ne[e>>2]-ne[ne[a+8>>2]>>2],ne[a+28>>2]=0):ne[a+28>>2]=3)),ce=a+32|0,ne[a+28>>2]}function h(e,t,n){e|=0,t|=0,n|=0;var r=0,o=0;return ce=r=ce-32|0,te[r+26>>1]=e,ne[r+20>>2]=t,ne[r+16>>2]=n,ne[ne[r+16>>2]>>2]=3,o=r,n=i(ne[ne[r+16>>2]>>2]),ne[o+12>>2]=n,ne[r+12>>2]?(ne[ne[r+20>>2]>>2]=ne[r+12>>2],ee[r+11|0]=14,ee[ne[r+12>>2]]=re[r+11|0],ne[r+12>>2]=ne[r+12>>2]+1,e=ne[r+12>>2],t=re[r+26|0]|re[r+27|0]<<8,ee[0|e]=t,ee[e+1|0]=t>>>8,ne[r+28>>2]=0):ne[r+28>>2]=3,ce=r+32|0,ne[r+28>>2]}function p(e,t){var n=0;for(ce=n=ce-16|0,ne[n+12>>2]=e,ne[n+8>>2]=t,ne[n+4>>2]=0;oe[n+4>>2]<oe[n+8>>2];)ne[n>>2]=ne[n+12>>2]+ae(ne[n+4>>2],20),15&ne[ne[n>>2]>>2]&&5!=(15&ne[ne[n>>2]>>2])?6==(15&ne[ne[n>>2]>>2])&&d(ne[ne[n>>2]+12>>2]):d(ne[ne[n>>2]+8>>2]),ne[n+4>>2]=ne[n+4>>2]+1;d(ne[n+12>>2]),ce=n+16|0}function E(e,t,n,r){ee[e+53|0]=1;e:if(ne[e+4>>2]==(0|n)){if(ee[e+52|0]=1,!(n=ne[e+16>>2])){if(ne[e+36>>2]=1,ne[e+24>>2]=r,ne[e+16>>2]=t,1!=(0|r)|1!=ne[e+48>>2])break e;return void(ee[e+54|0]=1)}if((0|t)==(0|n)){if(2==(0|(n=ne[e+24>>2]))&&(ne[e+24>>2]=r,n=r),1!=ne[e+48>>2]|1!=(0|n))break e;return void(ee[e+54|0]=1)}
ee[e+54|0]=1,ne[e+36>>2]=ne[e+36>>2]+1}}function S(e,t,n,r){var i;return ne[(i=ce-32|0)+24>>2]=e,ne[i+20>>2]=t,ne[i+16>>2]=n,ne[i+12>>2]=r,ee[i+11|0]=0,oe[ne[i+20>>2]>>2]<1?ne[i+28>>2]=1:(ee[i+11|0]=re[ne[ne[i+24>>2]>>2]],e=ne[i+24>>2],ne[e>>2]=ne[e>>2]+1,e=ne[i+20>>2],ne[e>>2]=ne[e>>2]-1,ee[ne[i+16>>2]]=128==(128&re[i+11|0]),ee[ne[i+12>>2]]=127&re[i+11|0],ne[i+28>>2]=0),ne[i+28>>2]}function _(e,t,n,r,i){if(n|=0,r|=0,i|=0,R(e|=0,ne[(t|=0)+8>>2],i))N(t,n,r);else e:if(R(e,ne[t>>2],i)){if(ne[t+20>>2]==(0|n)||ne[t+16>>2]==(0|n)){if(1!=(0|r))break e;return void(ne[t+32>>2]=1)}ne[t+20>>2]=n,ne[t+32>>2]=r,ne[t+40>>2]=ne[t+40>>2]+1,1!=ne[t+36>>2]|2!=ne[t+24>>2]||(ee[t+54|0]=1),ne[t+44>>2]=4}}function R(e,t,n){var r;if(!n)return ne[e+4>>2]==ne[t+4>>2];if((0|e)==(0|t))return 1;n=ne[e+4>>2],e=re[0|n],t=ne[t+4>>2];e:if(!(!e|(0|(r=re[0|t]))!=(0|e)))for(;;){if(r=re[t+1|0],!(e=re[n+1|0]))break e;if(t=t+1|0,n=n+1|0,(0|e)!=(0|r))break}return(0|e)==(0|r)}function T(e,t){e|=0,t|=0;var n=0,r=0;return ce=n=ce-32|0,ne[n+24>>2]=e,ne[n+20>>2]=t,r=n,e=i(1),ne[r+16>>2]=e,ne[n+16>>2]?(ee[n+15|0]=9,ee[ne[n+16>>2]]=re[n+15|0],ne[ne[n+24>>2]>>2]=ne[n+16>>2],ne[ne[n+20>>2]>>2]=1,ne[n+28>>2]=0):ne[n+28>>2]=3,ce=n+32|0,ne[n+28>>2]}function y(e,t){e|=0,t|=0;var n=0,r=0;return ce=n=ce-32|0,ne[n+24>>2]=e,ne[n+20>>2]=t,r=n,e=i(1),ne[r+16>>2]=e,ne[n+16>>2]?(ee[n+15|0]=10,ee[ne[n+16>>2]]=re[n+15|0],ne[ne[n+24>>2]>>2]=ne[n+16>>2],ne[ne[n+20>>2]>>2]=1,ne[n+28>>2]=0):ne[n+28>>2]=3,ce=n+32|0,ne[n+28>>2]}function v(e,t){e|=0,t|=0;var n=0,r=0;return ce=n=ce-32|0,ne[n+24>>2]=e,ne[n+20>>2]=t,r=n,e=i(1),ne[r+16>>2]=e,ne[n+16>>2]?(ee[n+15|0]=2,ee[ne[n+16>>2]]=re[n+15|0],ne[ne[n+24>>2]>>2]=ne[n+16>>2],ne[ne[n+20>>2]>>2]=1,ne[n+28>>2]=0):ne[n+28>>2]=3,ce=n+32|0,ne[n+28>>2]}function $(e,t){e|=0,t|=0;var n=0,r=0;return ce=n=ce-32|0,ne[n+24>>2]=e,ne[n+20>>2]=t,r=n,e=i(1),ne[r+16>>2]=e,ne[n+16>>2]?(ee[n+15|0]=4,ee[ne[n+16>>2]]=re[n+15|0],ne[ne[n+24>>2]>>2]=ne[n+16>>2],ne[ne[n+20>>2]>>2]=1,ne[n+28>>2]=0):ne[n+28>>2]=3,ce=n+32|0,ne[n+28>>2]}function b(e){var t=0;return ce=t=ce-16|0,ne[t+12>>2]=e,e=1,1&A(ne[t+12>>2])||(e=1,15!=ne[t+12>>2]&&(e=1,13!=ne[t+12>>2]&&(e=1,12!=ne[t+12>>2]&&(e=14==ne[t+12>>2])))),ce=t+16|0,e}function D(e,t,n){var r;if(!(r=ne[e+16>>2]))return ne[e+36>>2]=1,ne[e+24>>2]=n,void(ne[e+16>>2]=t);e:{if((0|t)==(0|r)){if(2!=ne[e+24>>2])break e;return void(ne[e+24>>2]=n)}ee[e+54|0]=1,ne[e+24>>2]=2,ne[e+36>>2]=ne[e+36>>2]+1}}function A(e){var t;return ne[(t=ce-16|0)+12>>2]=e,e=1,5!=ne[t+12>>2]&&(e=1,6!=ne[t+12>>2]&&(e=1,7!=ne[t+12>>2]&&(e=8==ne[t+12>>2]))),e}function w(e,t,n,r,i,o){n|=0,r|=0,i|=0,o|=0,R(e|=0,ne[(t|=0)+8>>2],o)?E(t,n,r,i):(e=ne[e+8>>2],fe[ne[ne[e>>2]+20>>2]](e,t,n,r,i,o))}function x(){for(var e,t,n=0;t=(e=n<<4)+1376|0,ne[e+1380>>2]=t,ne[e+1384>>2]=t,64!=(0|(n=n+1|0)););u(48)}function G(e,t,n,r){n|=0,r|=0,R(e|=0,ne[(t|=0)+8>>2],0)?D(t,n,r):(e=ne[e+8>>2],fe[ne[ne[e>>2]+28>>2]](e,t,n,r))}function I(e,t,n,r,i,o){n|=0,r|=0,i|=0,o|=0,R(e|=0,ne[(t|=0)+8>>2],o)&&E(t,n,r,i)}function P(e,t,n){if(n)for(;ee[0|e]=re[0|t],e=e+1|0,t=t+1|0,n=n-1|0;);}function k(e,t){if(t)for(;ee[0|e]=0,e=e+1|0,t=t-1|0;);}function O(e,t,n,r){n|=0,r|=0,R(e|=0,ne[(t|=0)+8>>2],0)&&D(t,n,r)}function N(e,t,n){1==ne[e+28>>2]|ne[e+4>>2]!=(0|t)||(ne[e+28>>2]=n)}function L(e,t){return e|=0,ae(t|=0,20)+e|0}function F(e){return ie[(e|=0)+8>>1]>>>1|0}function W(e){return 1&te[(e|=0)+8>>1]}function B(e){return ne[(e|=0)+12>>2]}function M(e){return 15&ne[(e|=0)>>2]}function q(e){return ne[(e|=0)+16>>2]}function U(e){return ie[(e|=0)+4>>1]}function H(e){return ne[(e|=0)+8>>2]}function V(e){return re[(e|=0)+4|0]}function z(e){return 0|(e|=0)}function j(e){return i(e)}function K(e){d(e|=0)}function Y(){}function X(){return Z.byteLength/65536|0}function Q(e){e|=0;var t=0|X();t<(e=t+e|0)&&e<65536&&(e=new ArrayBuffer(ae(e,65536)),new Int8Array(e).set(ee),ee=new Int8Array(e),te=new Int16Array(e),ne=new Int32Array(e),re=new Uint8Array(e),ie=new Uint16Array(e),oe=new Uint32Array(e),new Float32Array(e),new Float64Array(e),Z=e,J.buffer=Z,o=re);return t}var J=e.a,Z=J.buffer;J.grow=Q;var ee=new Int8Array(Z),te=new Int16Array(Z),ne=new Int32Array(Z),re=new Uint8Array(Z),ie=new Uint16Array(Z),oe=new Uint32Array(Z);new Float32Array(Z),new Float64Array(Z);var ae=Math.imul;Math.fround,Math.abs;var se=Math.clz32;Math.min,Math.max,Math.floor,Math.ceil,Math.trunc,Math.sqrt,e.abort,NaN,Infinity;var ue,le=e.b,ce=1051008;o=re,r(e);var fe=t([null,z,K,Y,Y,c,I,_,O,K,w,m,G]);return{c:x,d:j,e:K,f:v,g:$,h:g,i:s,j:h,k:a,l:l,m:T,n:y,o:n,p:M,q:V,r:L,s:U,t:H,u:B,v:B,w:q,x:F,y:W,z:F,A:fe}}for(var o,a=new Uint8Array(123),s=25;s>=0;--s)a[48+s]=52+s,a[65+s]=s,a[97+s]=26+s;return a[43]=62,a[47]=63,i(e)}(J)},instantiate:function(e){return{then:function(t){var n=new O.Module(e);t({instance:new O.Instance(n)})}}},RuntimeError:Error};P=[],"object"!=typeof O&&g("no native wasm support detected");var N,L,F,W=!1;D=t.INITIAL_MEMORY||2097152,(N=t.wasmMemory?t.wasmMemory:new O.Memory({initial:D/65536,maximum:32768}))&&(L=N.buffer),L.byteLength,i(L);var B,M=[],q=[],U=[];if((!Math.imul||-5!==Math.imul(4294967295,5))&&(Math.imul=function(e,t){var n=e>>>16,r=t>>>16;return(e&=65535)*(t&=65535)+(n*t+e*r<<16)|0}),!Math.fround){var H=new Float32Array(1);Math.fround=function(e){return H[0]=e,H[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),(n=e>>8)&&(t-=8,e=n),(n=e>>4)&&(t-=4,e=n),(n=e>>2)&&(t-=2,e=n),(n=e>>1)?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var V=0,z=null,j=null;t.preloadedImages={},t.preloadedAudios={};var K="data:application/octet-stream;base64,",Y="dgwcppbridge.wasm";m(Y)||(Y=n(Y));var X,Q="function"==typeof atob?atob:function(e){var t,n,r,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{n=(n=a.indexOf(e.charAt(u++)))<<2|(r=a.indexOf(e.charAt(u++)))>>4,r=(15&r)<<4|(i=a.indexOf(e.charAt(u++)))>>2,t=(3&i)<<6|(o=a.indexOf(e.charAt(u++))),s+=String.fromCharCode(n),64!==i&&(s+=String.fromCharCode(r)),64!==o&&(s+=String.fromCharCode(t))}while(u<e.length);return s},J={b:_,a:N};if(p(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},t.__malloc=function(){return(t.__malloc=t.asm.d).apply(null,arguments)},t.__free=function(){return(t.__free=t.asm.e).apply(null,arguments)},t.__DgwCodecEncodeEmpty=function(){return(t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},t.__DgwCodecEncodeDeauth=function(){return(t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},t.__DgwCodecEncodeDrain=function(){return(t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},t.__DgwCodecEncodeStreamGroup_Data=function(){return(t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},t.__DgwCodecEncodeStreamGroup_Ack=function(){return(t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},t.__DgwCodecEncodePing=function(){return(t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},t.__DgwCodecEncodePong=function(){return(t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},t.__DgwCodecDecode=function(){return(t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},t.__getFrameType=function(){return(t.__getFrameType=t.asm.p).apply(null,arguments)},t.__getDrainReasonFromDrainFrame=function(){return(t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},t.__getDGWFramePtr=function(){return(t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},t.__getStreamIdFromStreamGroupFrame=function(){return(t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},t.__getEncodedParamsFromEstablishStreamFrame=function(){return(t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},t.__getDataFromGroupedStreamDataFrame=function(){return(t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},t.__getDataSizeFromGroupedStreamDataFrame=function(){return(t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},t.__getAckIdFromGroupedStreamDataFrame=function(){return(t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},t.__getAckIdFromGroupedStreamAckFrame=function(){return(t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},j=function Z(){X||y(),X||(j=Z)},t.run=y,t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return y(),t.ready}}();"object"==typeof o&&"object"==typeof i?i.exports=a:"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof o&&(o.Module=a)},null),__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*r("Random").random()|0;return(e="x"===e?t:3&t|8).toString(16)})}function s(e){var t=new TextDecoder;return t=t.decode(e),t=(e=n("Base64").encode(t)).replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"")}var u=4,l=null;i=function(){function e(){}return e.initialize=function(){return t("regeneratorRuntime").async(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t("regeneratorRuntime").awrap(n("DGWCppBridge")());case 4:l=e.sent;case 5:case"end":return e.stop()}},null,this)},e.constructConnectUrl=function(e){var t,i=e.appId,o=e.appVersion,a=e.authType,u=e.dgwVersion,l=e.fbId,c=e.tier,f=e.loggingId,d=e.headers,g=e.endpoint,m=e.serviceId,C=e.regionHint;e=e.establishStreamFrame;var h=((t={})[r("DGWConstants").HEADER_CONSTANTS.HEADER_APPID]=i,t[r("DGWConstants").HEADER_CONSTANTS.HEADER_APPVERSION]=o,t[r("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTYPE]=a,t[r("DGWConstants").HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+u,t[r("DGWConstants").HEADER_CONSTANTS.HEADER_UUID]=l,t[r("DGWConstants").HEADER_CONSTANTS.HEADER_TARGET_TIER]=c,t);return void 0!==e&&(h[r("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=s(e)),void 0!==f&&(h[r("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=f),void 0!==C&&(h[r("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=C),Object.keys(d).forEach(function(e){var t=r("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(h,t)||(h[t]=d[e])}),(i=new(n("URI"))(g)).setQueryData(h),i.setPath(i.getPath()+"/"+m),i.toString().length>2e3&&(delete h[r("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],i.setQueryData(h)),i.toString()},e}(),o=function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=function(){return t("regeneratorRuntime").async(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t("regeneratorRuntime").awrap(n("DGWCppBridge")());case 4:l=e.sent;case 5:case"end":return e.stop()}},null,this)};var i=e.prototype;return i.malloc=function(e){try{var t;return 0===(e=l.__malloc(e))?(null==(t=this.$2)||t.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1):e}catch(e){return null==(t=this.$2)||t.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",e.toString()),-1}},i.free=function(e){l.__free(e)},i.append=function(e){if(null!=this.$1){var t=this.$1.length,n=new Uint8Array(t+e.length);n.set(this.$1,0),n.set(e,t),this.$1=n}else this.$1=e},i.processData=function(){var e=this;if(null!=this.$1){var t=this.$1.length,n=this.malloc(t);if(-1!==n){var i=l.HEAPU8.subarray(n,n+t);if(this.$1)for(var o=0;o<i.length;++o)i[o]=this.$1[o];if(-1!==(o=this.malloc(4*u))){var a=(i=o)+u,s=a+u,c=s+u;if(t=l.__DgwCodecDecode(n,t,i,a,s,c),this.free(n),t!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success)return this.free(o),void(null==(s=this.$2)||s.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(t)));if(n=l.HEAPU32.subarray(c/u,c/u+1)[0],null!=this.$1){s=this.$1.length-n,this.$1&&this.$1.length>s?this.$1=new Uint8Array((null==(t=this.$1)?void 0:t.subarray(s))||[]):this.$1=null,c=l.HEAPU32.subarray(a/u,a/u+1)[0],n=l.HEAPU32.subarray(i/u,i/u+1)[0];var f=[];for(t=0;t<c;++t){var d=l.__getDGWFramePtr(n,t);switch(s=l.__getFrameType(d)){case r("DGWConstants").DgwFrameType.DgwFrameType_Drain:if("break"===(a=function(){var t=l.__getDrainReasonFromDrainFrame(d),n=r("DGWConstants").drainReasonToDrainReasonString(t);return null==(t=e.$2)||t.logEvent(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+n),f.push(function(){var t;return null==(t=e.$3)?void 0:t.receivedDrainSignal(n)}),"break"}()))break;case r("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:if("break"===(i=function(){var t=l.__getStreamIdFromStreamGroupFrame(d),n=l.__getEncodedParamsFromEstablishStreamFrame(d),r=new Uint8Array(l.HEAPU8.subarray(n,n+l.__getEncodedParamsSizeFromEstablishStreamFrame(d)));return e.free(n),f.push(function(){var n;return null==(n=e.$3)?void 0:n.onGroupedStreamEstablishStreamReceived(t,r)}),"break"}()))break;case r("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:if("break"===(s=function(){var t=l.__getStreamIdFromStreamGroupFrame(d),n=l.__getDataFromGroupedStreamDataFrame(d),r=new Uint8Array(l.HEAPU8.subarray(n,n+l.__getDataSizeFromGroupedStreamDataFrame(d)));e.free(n);var i=l.__getRequiresAckFromGroupedStreamDataFrame(d)?l.__getAckIdFromGroupedStreamDataFrame(d):null;return f.push(function(){var n;return null==(n=e.$3)?void 0:n.onGroupedStreamDataReceived(t,r,i)}),"break"}()))break;case r("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:if("break"===(a=function(){var t=l.__getStreamIdFromStreamGroupFrame(d),n=l.__getAckIdFromGroupedStreamAckFrame(d);return f.push(function(){var r;return null==(r=e.$3)?void 0:r.onGroupedStreamAckReceived(t,n)}),"break"}()))break;case r("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:if("break"===(i=function(){var t=l.__getStreamIdFromStreamGroupFrame(d);return f.push(function(){var n;return null==(n=e.$3)?void 0:n.onGroupedStreamEndOfDataReceived(t)}),"break"}()))break;case r("DGWConstants").DgwFrameType.DgwFrameType_Ping:f.push(function(){var t;return null==(t=e.$3)?void 0:t.onPingReceived()});break;case r("DGWConstants").DgwFrameType.DgwFrameType_Pong:f.push(function(){var t;return null==(t=e.$3)?void 0:t.onPongReceived()})}this.free(d)}for(this.free(o),s=0;s<f.length;s++)f[s]()}else this.free(o)}}}},i.encodeData=function(e,t,n,i){var o=this.malloc(e.length);if(-1===o)return null;for(var a=l.HEAPU8.subarray(o,o+e.length),s=0;s<a.length;++s)a[s]=e[s];s=e=this.malloc(2*u);var c=e+u;return i=l.__DgwCodecEncodeStreamGroup_Data(i,o,a.length,t,n,s,c),this.free(o),i!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(a=this.$2)||a.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(i)),null):(t=l.HEAPU32.subarray(s/u,s/u+1)[0],n=l.HEAPU32.subarray(c/u,c/u+1)[0],o=new Uint8Array(l.HEAPU8.subarray(t,t+n)),this.free(t),this.free(e),o)},i.encodeAck=function(e,t){var n=this.malloc(2*u);if(-1===n)return null;var i=n,o=n+u;return(t=l.__DgwCodecEncodeStreamGroup_Ack(t,e,i,o))!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(e=this.$2)||e.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(t)),null):(e=l.HEAPU32.subarray(i/u,i/u+1)[0],t=l.HEAPU32.subarray(o/u,o/u+1)[0],i=new Uint8Array(l.HEAPU8.subarray(e,e+t)),this.free(e),this.free(n),i)},i.encodeDrain=function(e){var t=this.malloc(2*u);if(-1===t)return null;var n,i=t,o=t+u;return(e=l.__DgwCodecEncodeDrain(e,i,o))!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(n=this.$2)||n.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(e)),null):(n=l.HEAPU32.subarray(i/u,i/u+1)[0],e=l.HEAPU32.subarray(o/u,o/u+1)[0],i=new Uint8Array(l.HEAPU8.subarray(n,n+e)),this.free(n),this.free(t),i)},i.encodeEstablishStream=function(e,t){var n=this.malloc(t.length);if(-1===n)return null;for(var i=l.HEAPU8.subarray(n,n+t.length),o=0;o<t.length;++o)i[o]=t[o];o=i=this.malloc(2*u);var a=i+u;return t=l.__DgwCodecEncodeStreamGroup_EstabStream(e,n,t.length,o,a),this.free(n),t!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(n=this.$2)||n.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(t)+" for StreamId "+e),null):(n=l.HEAPU32.subarray(o/u,o/u+1)[0],t=l.HEAPU32.subarray(a/u,a/u+1)[0],e=new Uint8Array(l.HEAPU8.subarray(n,n+t)),this.free(n),this.free(i),e)},i.encodeEndOfData=function(e){var t=this.malloc(2*u);if(-1===t)return null;var n,i=t,o=t+u;return(e=l.__DgwCodecEncodeStreamGroup_EndOfData(e,i,o))!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(n=this.$2)||n.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(e)),null):(n=l.HEAPU32.subarray(i/u,i/u+1)[0],e=l.HEAPU32.subarray(o/u,o/u+1)[0],i=new Uint8Array(l.HEAPU8.subarray(n,n+e)),this.free(n),this.free(t),i)},i.encodePing=function(){if(null!=this.$5)return this.$5;var e=this.malloc(2*u);if(-1===e)return null;var t,n=e,i=e+u,o=l.__DgwCodecEncodePing(n,i);return o!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(t=this.$2)||t.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(o)),null):(t=l.HEAPU32.subarray(n/u,n/u+1)[0],o=l.HEAPU32.subarray(i/u,i/u+1)[0],n=new Uint8Array(l.HEAPU8.subarray(t,t+o)),this.free(t),this.free(e),this.$5=n,n)},i.encodePong=function(){if(null!=this.$6)return this.$6;var e=this.malloc(2*u);if(-1===e)return null;var t,n=e,i=e+u,o=l.__DgwCodecEncodePong(n,i);return o!==r("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success?(null==(t=this.$2)||t.logError(r("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+r("DGWConstants").DgwCodecReturnCodeToString(o)),null):(t=l.HEAPU32.subarray(n/u,n/u+1)[0],o=l.HEAPU32.subarray(i/u,i/u+1)[0],n=new Uint8Array(l.HEAPU8.subarray(t,t+o)),this.free(t),this.free(e),this.$6=n,n)},e}(),a.uuidv4=e,a.Uint8ArrayToBase64UrlStr=s,a.DGWUtils=i,a.DGWCodec=o},98),__d("DGWExponentialBackoff",["Promise","regeneratorRuntime"],function(e,t,n,r,i,o){"use strict";function e(e,n){return t("regeneratorRuntime").async(function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===n&&(n=u),r.prev=1,r.next=4,t("regeneratorRuntime").awrap(a(e,n));case 4:return r.abrupt("return",r.sent);case 7:throw r.prev=7,r.t0=r["catch"](1),r.t0.errors[r.t0.errors.length-1];case 10:case"end":return r.stop()}},null,this,[[1,7]])}function a(e,n){var r,i,o,a,u;return t("regeneratorRuntime").async(function(c){for(;;)switch(c.prev=c.next){case 0:r=0,i=[],o=n.baseRetryInterval,a=n.backoffFactor;case 4:if(!(r<=n.maxRetries)){c.next=20;break}return c.prev=5,c.next=8,t("regeneratorRuntime").awrap(e());case 8:return u=c.sent,c.abrupt("return",u);case 12:c.prev=12,c.t0=c["catch"](5),i.push(c.t0);case 15:return c.next=17,t("regeneratorRuntime").awrap(s(o*Math.pow(a,r)));case 17:++r,c.next=4;break;case 20:throw new l("Max call count exceeded",i);case 21:case"end":return c.stop()}},null,this,[[5,12]])}function s(e){return t("regeneratorRuntime").async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("regeneratorRuntime").awrap(new(t("Promise"))(function(t){return window.setTimeout(t,e)}));case 2:case"end":return n.stop()}},null,this)}var u={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},l=function(e){function t(t,n){return(t=e.call(this,t)||this).errors=n,t}return babelHelpers.inheritsLoose(t,e),t}(babelHelpers.wrapNativeSuper(Error));o.callWithExponentialBackoff=e},66),__d("DGWPinger",["DGWLoggingContext"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;this.$3?(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)):(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5())},t.reset=function(){var e=this;this.$3=!0,this.$2&&(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e}(),a.DGWPinger=e},98),__d("DGWStreamGroupCallbacks",["$InternalEnum"],function(e,t,n,r,i,o){"use strict";e=t("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8}),n=function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e}(),o.DGWStreamGroupError=e,o.NoOpDGWStreamGroupCallbacks=n},66),__d("DGWTransportEvents",["DGWLoggingContext"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(){this.$3.logEvent(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open"),this.$2=Date.now()},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0)},t.transportClosed=function(e,t){this.$4=Date.now(),e?(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",t))},t.transportEstablishmentFailure=function(e){this.$3.logError(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+e)},t.streamEstablishmentTimeout=function(e,t){this.$3.logError(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",e,"streamId:"+t)},t.streamEstablishmentPending=function(e){this.$3.logEvent(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+e,!0)},t.streamEstablishmentSuccess=function(e){this.$3.logEvent(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+e,!0)},t.transportError=function(e,t,n){this.$3.logError(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,e,t,n)},t.receivedFrameForInactiveStream=function(e,t,n){this.$3.logWarn(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+e+", streamID: "+t,n)},t.ranOutOfStreamIds=function(e){this.$3.logWarn(r("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",e)},e}(),a.DGWTransportEvents=e},98),__d("DGWWebSocketTransport",[],function(e,t,n,r,i,o){"use strict";function e(e){return(e=new WebSocket(e)).binaryType="arraybuffer",e.onopen=function(){},e.onclose=function(){},e.onerror=function(){},e}o.getWebSocketConnection=e},66),__d("DGWAckManager",["DGWLoggingContext","Promise","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";var s=function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}return e.prototype.stopTracking=function(e){window.clearTimeout(this.$1),this.$3(e)},e}();e=function(){function e(e){this.$1=new Map,this.$2=e}var n=e.prototype;return n.waitForAck=function(e,n){var i,o;return t("regeneratorRuntime").async(function(a){for(;;)switch(a.prev=a.next){case 0:return r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected"),i=this.$1,a.prev=2,a.next=5,t("regeneratorRuntime").awrap(new(t("Promise"))(function(t){i.set(e,new s(e,n,t))}));case 5:return!0===(o=a.sent)?this.$2.logEvent(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId: "+e,!0):(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+e+" timed out after "+n+"ms")),i["delete"](e),a.abrupt("return",o);case 11:throw a.prev=11,a.t0=a["catch"](2),i["delete"](e),a.t0;case 15:case"end":return a.stop()}},null,this,[[2,11]])},n.handleAckReceived=function(e){r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var t=this.$1.get(e);if(void 0===t)return r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),void this.$2.logWarn(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+e+" which was not being tracked");t.handleAckReceived()},n.clearPendingAcks=function(){var e=this;this.$2.logEvent(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,i){e.$2.logEvent(r("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),i["delete"](n)})},e}(),a.DGWAckManager=e},98),__d("DGWStreamEvents",["DGWLoggingContext"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,null!=n&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.streamEstablished=function(){this.$6.logEvent(this.$1,"open",this.$8,!0),r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"stream_establishment_success")},t.streamEstablishmentPending=function(){this.$2=Date.now(),this.$6.logEvent(this.$1,"streamPending",this.$8,!0),r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"stream_establishment_pending")},t.dataSent=function(e,t,n){var r=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,r,(null!=(r=this.$8)?r:"")+"sendId:"+e+", payloadSize:"+t,!0),this.$4.set(e,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(e){var t;this.$6.logEvent(this.$1,"AckReceived",(null!=(t=this.$8)?t:"")+"sendId:"+e+"}",!0),r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"ack_received"),null!=(t=this.$4.get(e))&&(t.ackReceivedTimestamp=Date.now())},t.ackSent=function(e){var t;r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",(null!=(t=this.$8)?t:"")+"ackId: "+e,!0)},t.drainSent=function(e){var t;this.$6.logEvent(this.$1,"Drain sent",(null!=(t=this.$8)?t:"")+"drainReason: "+e)},t.dataReceived=function(e,t,n){var i;r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",(null!=(i=this.$8)?i:"")+"sendId: "+(null!=(i=n)?i:"null")+", ackRequested: "+t.toString()+", payloadSize: "+e,!0),null!=n&&this.$5.set(n,{ackRequested:t,payloadSize:e,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(e,t){this.$7=Date.now();var n=this.$9();e?(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+(null!=(e=this.$8)?e:"")+n)):(r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",t,""+(null!=(e=this.$8)?e:"")+n))},t.connectionEstablishmentFailure=function(e){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+e)},t.streamEstablishmentFailure=function(e,t){this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+e.toString(),""+(null!=(e=this.$8)?e:"")+t),r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(e,t){t={msg:t,state:this.$9()},this.$6.logError(this.$1,e,JSON.stringify(t),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&!0===window.navigator.onLine,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e}(),a.DGWStreamEvents=e},98),__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e,t,n,i,o,a,s){this.$1=e,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=t,this.$7=n,this.$8=i,this.$2=a,this.$9=o,this.$10=new(r("DGWAckManager").DGWAckManager)(this.$9),this.$12=new(r("DGWStreamEvents").DGWStreamEvents)(this.$9,r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=s}var n=e.prototype;return n.send=function(e,n){var i,o,a;return t("regeneratorRuntime").async(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=this.$11++%r("DGWConstants").MAX_ACK_ID,this.$14(e,!0,o)){s.next=3;break}return s.abrupt("return",!1);case 3:return s.next=5,t("regeneratorRuntime").awrap(this.$10.waitForAck(o,null!=(i=n)?i:r("DGWConstants").DEFAULT_ACK_TIMEOUT_MS));case 5:return a=s.sent,s.abrupt("return",a);case 7:case"end":return s.stop()}},null,this)},n.sendAndForget=function(e){return this.$14(e,!1)},n.close=function(){var e=this.$2.encodeEndOfData(this.$1);null!=e?(e=this.$8.send(e))?(this.$12.endOfDataSent(),this.$5=!0,
this.$4&&this.$15()):this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send"):this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1)},n.__sendDrain=function(e){var t=r("DGWConstants").drainReasonToDrainReasonString(e);return!this.$5&&(null!=(e=this.$2.encodeDrain(e))&&(this.$12.drainSent(t),t=this.$8.send(e)))},n.__transportCloseHook=function(e){this.$13(),this.$10.clearPendingAcks(),e?(this.$12.error("Received StreamError","StreamErrorType: "+e),this.$6.onError(e)):this.$5&&this.$4?this.$15():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(r("DGWStream").StreamError.PREMATURE_CLOSE))},n.$15=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},n.__dataReceivedHook=function(e,t){this.$12.dataReceived(e.length,null!=t,t),null!=t&&this.$16(t),this.$6.onDataReceived(e)},n.__ackReceivedHook=function(e){this.$12.ackReceived(e),this.$10.handleAckReceived(e)},n.__drainReceivedHook=function(e){!1===this.$3&&(this.$6.onStreamMustDrain(this,e),this.$3=!0)},n.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$15():this.$6.onServerHasFinishedSendingData(this)},n.$14=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=0),this.$5?(this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1):null!=(e=this.$2.encodeData(e,t,n,this.$1))&&(this.$8.send(e)?(this.$12.dataSent(n,e.length,t),!0):(this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1))},n.$16=function(e){var t=this.$2.encodeAck(e,this.$1);return null==t?(this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+e),!1):(t=this.$8.send(t))?(this.$12.ackSent(e),!0):(this.$9.logError(r("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+e),!1)},e}(),a.GroupedStream=e},98),__d("StreamIdGenerator",["err"],function(e,t,n,r,i,o,a){"use strict";var s=65535;e=function(){function e(){this.$1=new Set,this.$2=0,this.$1.add(this.$2)}var t=e.prototype;return t.getNextStreamId=function(){var e;if(!this.streamIdAvailable())throw n("err")("Max number of stream IDs reached");return 0===this.$1.size?++this.$2:(e=null!=(e=this.$1.values().next().value)?e:0,this.$1["delete"](e),e)},t.putBackStreamId=function(e){this.$1.add(e)},t.streamIdAvailable=function(){return this.$1.size>0||this.$2<s},e}(),a.MAX_STREAM_ID=s,a.StreamIdGeneratorImpl=e},98),__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","Promise","StreamIdGenerator","err","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";var s=function(e,t,n,i,o){var a=this;this.groupedStream=e,this.$1=window.setTimeout(function(){n(r("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},i),this.handleEstablishFrameReceived=function(){window.clearTimeout(a.$1),t(a.groupedStream)},this.abortStream=function(e){o(),n(e)}};e=function(){function e(t,i,o,a,s,u,l,c){var f=this;if(this.$14=s,this.$16=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=a.keepAliveMs,this.$8=!1,this.$3=!0,this.$4=!1,this.$12=o,this.$10=new TextEncoder,this.$11=new TextDecoder,this.$13=a,s={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(e){f.$13.streamGroupCallbacks.onStreamGroupMustDrain(e),f.$5.forEach(function(t){t.__drainReceivedHook(e)})},onGroupedStreamDataReceived:function(e,t,n){if(f.$5.has(e)){var r=f.$5.get(e);null==r||r.__dataReceivedHook(t,n)}else f.$12.receivedFrameForInactiveStream("Data",e,"sendAckID: "+(null!=(r=n)?r:"null"))},onGroupedStreamAckReceived:function(e,t){if(f.$5.has(e)){var n=f.$5.get(e);null==n||n.__ackReceivedHook(t)}else f.$12.receivedFrameForInactiveStream("ACK",e,"ackId: "+(null!=(n=t)?n:"null"))},onGroupedStreamEndOfDataReceived:function(e){if(f.$5.has(e)){var t=f.$5.get(e);null==t||t.__endOfDataHook()}else f.$12.receivedFrameForInactiveStream("EndOfData",e)},onGroupedStreamEstablishStreamReceived:function(e,t){if(f.$6.has(e)){var n=f.$6.get(e);f.$6["delete"](e),(void 0===(t=JSON.parse(f.$11.decode(t))).code||200!==t.code)&&(null==n||n.abortStream(r("DGWStream").StreamError.ABNORMAL_CLOSURE)),null==n||n.handleEstablishFrameReceived()}else f.$12.receivedFrameForInactiveStream("EstablishStream",e,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=f.$2.encodePing();null!=e&&f.send(e)},onPongReceived:function(){}},this.$2=new(r("DGWUtils").DGWCodec)(u,s,a.dgwVersion),a.enableFirstStreamOnWsHandshake){if(void 0===l)throw n("err")("Missing grouped stream options");if(void 0===c)throw n("err")("Missing grouped stream callbacks");var d=this.$16.getNextStreamId();if(o=this.createEstablishStreamFrame(d,l),u=r("DGWUtils").DGWUtils.constructConnectUrl({appId:a.appId,appVersion:a.appVersion,authType:a.authType,dgwVersion:a.dgwVersion,fbId:a.fbId,tier:a.tier,loggingId:null!=(u=a.loggingId)?u:void 0,headers:e.__prefixAppHeaders(a.headers),endpoint:a.connectEndpoint,serviceId:a.serviceId,regionHint:null!=(s=a.regionHint)?s:void 0,establishStreamFrame:o}),this.$1=i(u),!u.includes(r("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;this.$15=this.waitForEstablishStream(d,c,l,new(r("DGWLoggingContext").DGWLoggingContext)(this.$13.dgwVersion,l.loggingId,this.$13.serviceId,this.$13.fbId,this.$13.loggingId,l.disableFalcoLogging),function(e){f.$5.set(d,e)},function(){f.$16.putBackStreamId(d)})}else this.$1=i(t)}var i=e.prototype;return i.send=function(e){try{return this.$1.send(e),!0}catch(e){return this.$12.transportError("Failed to send over transport","readyState: "+this.$1.readyState,e.toString()),!1}},i.close=function(){this.$1.close(r("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE)},i.abort=function(e,t,n,r){this.$8=!0,this.$12.transportClosed(!1,r),this.$5.forEach(function(e){e.__transportCloseHook(t)}),this.$6.forEach(function(e){e.abortStream(t)}),this.$13.streamGroupCallbacks.onStreamGroupError(e),this.$5.clear(),this.$6.clear(),this.$1.close(n)},e.getTransportWithInitialStream=function(n,i,o,a,s){var u,l,c,f;return t("regeneratorRuntime").async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t("regeneratorRuntime").awrap(r("DGWUtils").DGWCodec.initialize());case 2:return(u=new(r("DGWTransportEvents").DGWTransportEvents)(a)).transportEstablishmentPending(),l=function(){return e.$17("",o,u,s,a,n,i)},d.prev=5,d.next=8,t("regeneratorRuntime").awrap(r("DGWExponentialBackoff").callWithExponentialBackoff(l));case 8:return c=d.sent,f=null!=c.$15?c.$15:c.establishGroupedStream(i,n,new(r("DGWLoggingContext").DGWLoggingContext)(o.dgwVersion,n.loggingId,o.serviceId,o.fbId,o.loggingId,n.disableFalcoLogging)),d.abrupt("return",{transport:c,streamPromise:f});case 13:throw d.prev=13,d.t0=d["catch"](5),d.t0;case 16:case"end":return d.stop()}},null,this,[[5,13]])},e.getTransport_DEPRECATED=function(n,i,o,a){var s,u;return t("regeneratorRuntime").async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t("regeneratorRuntime").awrap(r("DGWUtils").DGWCodec.initialize());case 2:return(s=new(r("DGWTransportEvents").DGWTransportEvents)(o)).transportEstablishmentPending(),u=function(){return e.$17(n,i,s,a,o)},l.prev=5,l.next=8,t("regeneratorRuntime").awrap(r("DGWExponentialBackoff").callWithExponentialBackoff(u));case 8:return l.abrupt("return",l.sent);case 11:throw l.prev=11,l.t0=l["catch"](5),l.t0;case 14:case"end":return l.stop()}},null,this,[[5,11]])},i.establishGroupedStream=function(e,r,i){var o,a,s,u,l=this;return t("regeneratorRuntime").async(function(c){for(;;)switch(c.prev=c.next){case 0:if(o=this.getStreamId(),a=this.createEstablishStreamFrame(o,r),s=this.waitForEstablishStream(o,e,r,i,function(e){l.$5.set(o,e)},function(){l.$16.putBackStreamId(o)}),this.send(a)){c.next=5;break}throw n("err")("Websocket connection closed before stream established");case 5:return c.next=7,t("regeneratorRuntime").awrap(s);case 7:return u=c.sent,c.abrupt("return",u);case 9:case"end":return c.stop()}},null,this)},e.__prefixAppHeaders=function(e){return Object.keys(e).reduce(function(t,n){return t[""+r("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=e[n],t},{})},i.waitForEstablishStream=function(e,n,r,i,o,a){var u,l,c=this;return t("regeneratorRuntime").async(function(f){for(;;)switch(f.prev=f.next){case 0:return this.$12.streamEstablishmentPending(e),u=this.__createGroupedStream(e,n,r,i),f.prev=2,f.next=5,t("regeneratorRuntime").awrap(new(t("Promise"))(function(t,n){c.$6.set(e,new s(u,t,n,3e4,function(){c.streamEndCallback(e)}))}));case 5:return l=f.sent,o(u),this.$12.streamEstablishmentSuccess(e),f.abrupt("return",l);case 11:throw f.prev=11,f.t0=f["catch"](2),a(),this.$12.streamEstablishmentTimeout("Stream establishment timeout",e),f.t0;case 16:case"end":return f.stop()}},null,this,[[2,11]])},e.$17=function(n,i,o,a,s,u,l){var c,f;return t("regeneratorRuntime").async(function(d){for(;;)switch(d.prev=d.next){case 0:return(c=new e(n,r("DGWWebSocketTransport").getWebSocketConnection,o,i,a,s,u,l)).$1.onmessage=e.$18(c),c.$1.onopen=function(){o.transportEstablished(),c.$3=!1,null!=c.$7&&(c.$9=new(r("DGWPinger").DGWPinger)(c.$7,function(){c.$19()},function(){c.abort(r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,r("DGWStream").StreamError.KEEPALIVE_TIMEOUT,r("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout")}))},c.$1.onerror=function(){},c.$1.onclose=e.$20(c),d.next=7,t("regeneratorRuntime").awrap(e.getTransportPromise(c));case 7:return f=d.sent,d.abrupt("return",f);case 9:case"end":return d.stop()}},null,this)},e.getTransportPromise=function(e){var n;return t("regeneratorRuntime").async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t("regeneratorRuntime").awrap(new(t("Promise"))(function(t,n){var i=e.$1.onerror,o=e.$1.onopen;e.$1.onerror=function(){i(),n(r("DGWStream").StreamError.ESTABLISHMENT_ERROR)},e.$1.onopen=function(){o(),t(e)}}));case 2:return n=i.sent,i.abrupt("return",n);case 4:case"end":return i.stop()}},null,this)},e.$18=function(e){return function(t){var n;null==(n=e.$9)||n.reset(),t.data instanceof ArrayBuffer?(e.$2.append(new Uint8Array(t.data)),e.$2.processData()):e.$12.transportError("Incorrect Data Protocol","Received "+typeof t.data+" instead of ArrayBuffer")}},e.$20=function(e){return function(t){var n;if(null==(n=e.$9)||n.cancel(),!0!==e.$8&&!e.$4){if(!0===e.$3)return e.$12.transportEstablishmentFailure(t.code),void e.$5.clear();if(e.$14(),e.$3=!0,t.code!==r("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){e.$12.transportClosed(!1,"Websocket connection failure with code "+t.code),n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR;var i=r("DGWStream").StreamError.UNKNOWN_ERROR;switch(t.code){case r("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:case r("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=r("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case r("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=r("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case r("DGWConstants").WebsocketCloseCodes.GOING_AWAY:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=r("DGWStream").StreamError.GOING_AWAY;break;case r("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=r("DGWStream").StreamError.UNAUTHORIZED;break;case r("DGWConstants").WebsocketCloseCodes.REJECTED:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=r("DGWStream").StreamError.REJECTED;break;case r("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=r("DGWStream").StreamError.BAD_REQUEST;break;case r("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=r("DGWStream").StreamError.DGW_SERVER_ERROR,n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:n=r("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=r("DGWStream").StreamError.UNKNOWN_ERROR}e.$13.streamGroupCallbacks.onStreamGroupError(n),e.$5.forEach(function(e){e.__transportCloseHook(i)}),e.$6.forEach(function(e){e.abortStream(i)})}else e.$12.transportClosed(!0,""),e.$13.streamGroupCallbacks.onStreamGroupTransportClose(),e.$5.forEach(function(e){e.__transportCloseHook()}),e.$6.forEach(function(e){e.abortStream(r("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});e.$5.clear(),e.$6.clear()}}},i.$19=function(){var e=this.$2.encodePing();if(null==e)throw n("err")("Failed to encode Ping Frame");this.send(e)},i.isClosedLocally=function(){return this.$3||this.$8||this.$4},i.streamEndCallback=function(e){this.$5["delete"](e),this.$6["delete"](e),this.$16.putBackStreamId(e),0===this.$5.size&&0===this.$6.size&&(this.$13.streamGroupCallbacks.onStreamGroupTransportClose(),this.$4=!0,this.close())},i.canCreateGroupedStream=function(){return this.$16.streamIdAvailable()},i.createEstablishStreamFrame=function(t,r){if(null==(r=this.$2.encodeEstablishStream(t,new Uint8Array(this.$10.encode(JSON.stringify(e.__prefixAppHeaders(r.groupedStreamHeaders)))))))throw this.$16.putBackStreamId(t),n("err")("Failed to encode EstablishStreamFrame");return r},i.getStreamId=function(){try{return this.$16.getNextStreamId()}catch(e){throw this.$12.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},i.__createGroupedStream=function(e,t,n,i){var o=this;return new(r("GroupedStream").GroupedStream)(e,t,n,this,i,this.$2,function(){o.streamEndCallback(e)})},i.__getStreamIdGenerator=function(){return new(r("StreamIdGenerator").StreamIdGeneratorImpl)},e}(),a.StreamGroupWebSocketTransport=e},98),__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","qex","regeneratorRuntime"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e,t,i,o,a,s,u,l,c){this.$2=c,this.$1=c.getNewStreamGroupId(),c=null!=(c=u.overrideUrl)?c:a,this.$6=null,this.$3={appId:e,appVersion:t,authType:i,dgwVersion:o,headers:u.streamGroupAppHeaders,tier:null!=(a=u.serviceTier)?a:r("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:c,fbId:s,loggingId:u.loggingId,serviceId:u.serviceId,streamGroupCallbacks:l,keepAliveMs:u.keepAliveMs,regionHint:u.regionHint,enableFirstStreamOnWsHandshake:!0===n("qex")._("633")},this.$4=u,this.$5=new(r("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId)}var i=e.prototype;return i.establishStream=function(e,n){var i,o,a,s,u,l=this;return t("regeneratorRuntime").async(function(c){for(;;)switch(c.prev=c.next){case 0:if(!1!==this.$2.containsStreamGroup(this.$1)){c.next=23;break}if(this.$3.enableFirstStreamOnWsHandshake){c.next=18;break}return a=r("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers["extends"]({},this.$3.headers),loggingId:null!=(i=this.$3.loggingId)?i:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:null!=(o=this.$3.regionHint)?o:void 0}),this.$6=this.$6||r("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(a,this.$3,this.$5,function(){l.$2.removeStreamGroupAndTransport(l.$1)}),c.prev=4,c.next=7,t("regeneratorRuntime").awrap(this.$6);case 7:s=c.sent,this.$6=null,c.next=15;break;case 11:throw c.prev=11,c.t0=c["catch"](4),this.$6=null,c.t0;case 15:this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s),c.next=23;break;case 18:return c.next=20,t("regeneratorRuntime").awrap(r("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(e,n,this.$3,this.$5,function(){l.$2.removeStreamGroupAndTransport(l.$1)}));case 20:return u=c.sent,this.$2.setStreamGroupAndTransport(this.$1,u.transport),c.abrupt("return",u.streamPromise);case 23:return c.abrupt("return",this.establishStreamWithTransport(e,n));case 24:case"end":return c.stop()}},null,this,[[4,11]])},i.establishStreamWithTransport=function(e,n){var i,o,a;return t("regeneratorRuntime").async(function(s){for(;;)switch(s.prev=s.next){case 0:return o=e.loggingId,this.$5.logEvent(r("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"establishing Stream loggingId: "+(null!=(i=o)?i:""),null,!0),s.next=4,t("regeneratorRuntime").awrap(this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(n,e,new(r("DGWLoggingContext").DGWLoggingContext)(this.$3.dgwVersion,o,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,e.disableFalcoLogging)));case 4:return a=s.sent,s.abrupt("return",a);case 6:case"end":return s.stop()}},null,this)},i.canCreateGroupedStream=function(){var e=!0;!1!==this.$2.containsStreamGroup(this.$1)&&(e=this.$2.getStreamGroupTransport(this.$1).canCreateGroupedStream());return r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},e}(),a.StreamGroup=e},98),__d("StreamGroupRegistry",["Random","err"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(e,t){this.$1.set(e,t)},t.containsStreamGroup=function(e){return this.$1.has(e)},t.removeStreamGroupAndTransport=function(e){this.$1["delete"](e)},t.getStreamGroupTransport=function(e){if(null==(e=this.$1.get(e)))throw n("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=r("Random").uint32();this.$2.has(e);)e=r("Random").uint32();return this.$2.add(e),e},e}(),a.StreamGroupRegistry=e},98),__d("RawDGWClient",["CurrentUser","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain","justknobx"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e){var t=e.appId,n=e.appVersion,i=e.authType,o=e.dgwVersion,a=e.endpoint;e=e.fbId,this.$1=t,this.$2=n,this.$3=i,this.$4=o,this.$5=a,this.$6=e,this.$7=new(r("StreamGroupRegistry").StreamGroupRegistry)}var t=e.prototype;return t.createStreamGroup=function(e,t){return n("justknobx")._("1023")&&this.handleUserChecks(),new(r("StreamGroup").StreamGroup)(this.$1,this.$2,this.$3,this.$4,this.$5,this.$6,t,e,this.$7)},t.handleUserChecks=function(){if(!n("CurrentUser").isLoggedInNow()&&!n("isFastRefreshEnabledForCurrentDomain")())throw r("DGWLoggingContext").DGWLoggingContext.bumpODSKey(r("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),r("DGWStream").StreamError.UNAUTHENTICATED},e}(),a.RawDGWClient=e},98),__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],function(e,t,n,r,i,o,a){"use strict";function e(){if(n("DGWEnvUtil").isDGWEnvCompatible())return s;throw n("err")("unsupported_environment_retry_with_mqtt")}var s=new(r("RawDGWClient").RawDGWClient)({appId:n("DGWWebConfig").appId,appVersion:n("DGWWebConfig").appVersion,authType:r("DGWAuth").fromStringToDGWAuth(n("DGWEnvUtil").getDGWAuthType()),dgwVersion:n("DGWEnvUtil").getDGWVersion(),endpoint:n("DGWEnvUtil").getDGWEndpoint(),fbId:n("DGWWebConfig").fbId});a["default"]=e},98),__d("DGWStreamGroupHandler",[],function(e,t,n,r,i,o){"use strict";e=function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(e){this.$1(e)},t.onStreamGroupMustDrain=function(e){this.$2(e)},t.onStreamGroupTransportClose=function(){this.$3()},e}(),o["default"]=e},66),__d("DGWStreamFactory",["DGWClient","DGWStreamGroupHandler","Promise","gkx","uuid"],function(e,t,n,r,i,o,a){"use strict";var s="realtime",u=1e4,l=null;e=function(){function e(){this.$3=0,this.$1=null,n("gkx")("2819")&&(this.$2=n("uuid")())}e.get=function(){return null==l&&(l=new e),l};var r=e.prototype;return r.getStreamGroupLoggingId=function(){return this.$2},r.guessStreamGroupPriorStreamCount=function(){return this.$3},r.establishStream=function(e,r,i){var o=this;if(null==this.$1||!this.$1.canCreateGroupedStream()){var a={serviceId:s,disableFalcoLogging:i.disableFalcoLogging,streamGroupAppHeaders:{"stream-group":"group1"}};null!=i.overrideUrl&&(a.overrideUrl=i.overrideUrl),n("gkx")("871")&&(a.keepAliveMs=u),n("gkx")("2819")?(this.$2=n("uuid")(),a.loggingId=this.$2):this.$2=null,this.$3=0;try{this.$1=n("DGWClient")().createStreamGroup(new(n("DGWStreamGroupHandler"))(function(){o.$1=null},function(){o.$1=null},function(){o.$1=null}),a)}catch(e){return t("Promise").reject(e)}}return this.$3++,this.$1.establishStream({loggingId:i.loggingId,disableFalcoLogging:i.disableFalcoLogging,groupedStreamHeaders:e},r)},e}(),a["default"]=e},98),__d("DGWRequestStreamClient",["DGWRequestStreamRef","DGWStreamFactory","Promise","cr:2046346"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e){this.$1=null!=e?e:n("DGWStreamFactory").get()}return e.prototype.createStream=function(e,r,i,o,a){return null!=t("cr:2046346")&&t("cr:2046346").startPulsarTest(),t("Promise").resolve(new(n("DGWRequestStreamRef"))(e,r,o,a,i,this.$1))},e}(),a["default"]=e},98),__d("ContextualConfigResolvedContextsUtils",[],function(e,t,n,r,i,o){"use strict";e=function(e){var t=[],n=(e=e,Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}if(null==(i=(i=i).bucketIndex))break;t.push(i)}return t},t=function(e){var t=[],n=(e=e,Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}if(void 0===(i=(i=i).bucketName))break;t.push(i)}return t};var a=function(e){return e.name};n=function(e){return e.map(a)},r=function(e){var t=[],n=(e=e,Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}if(void 0===(i=(i=i).value))break;t.push(i)}return t},o.getBucketIndices=e,o.getBucketNames=t,o.getContextNames=n,o.getContextValues=r},66),__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],function(e,t,n,r,i,o,a){"use strict";function e(e,t,n){var i={sample_rate:r("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE};return l(i,e),c(i,t),n&&(i.config_contents=JSON.stringify(e)),i}var s=["cfg_ver_timestamp","policy_id","version","sample_rate"],u=function(e){return e.join(r("ContextualConfigConstants").LIST_DELIMITER)},l=function(e,t){for(var n=0;n<s.length;n++){var r=s[n];null!=t[r]&&(e[r]=t[r])}t.name&&(e.config_name=t.name)},c=function(e,t){var n=t[0],i=t[1],o=t[2];t=t[3],null!=n&&(e.exception=n.message),e.result=u(i.map(function(e){return e.value}))||"INVALID",e.context=u(r("ContextualConfigResolvedContextsUtils").getContextNames(o)),e.context_value=u(r("ContextualConfigResolvedContextsUtils").getContextValues(o)),e.bucket_name=u(r("ContextualConfigResolvedContextsUtils").getBucketNames(o)),e.monitor=u(r("ContextualConfigResolvedContextsUtils").getContextNames(t)),e.monitor_value=u(r("ContextualConfigResolvedContextsUtils").getContextValues(t))};a["default"]=e},98),__d("ContextualConfigExposureEvent",["Random"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e,t,n){this.$2=e,this.$4=r("Random").random()<1/e.sample_rate,this.$3=t,this.$1=n}var t=e.prototype;return t.getData=function(){return this.$2},t.log=function(e){var t=this.$2,n=this.$3,r=this.$4;return e&&n(t),r&&this.$1(t),this},t.isSampled=function(){return this.$4},e}(),a["default"]=e},98),__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return new s(e,t)}var s=function(){function e(e,t){this.$2=e,this.$1=t}return e.prototype.createEvent=function(e){var t=this.$1,r=this.$2;return e=new(n("ContextualConfigExposureEvent"))(e,r,t)},e}();a["default"]=e},98),__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],function(e,t,n,r,i,o,a){"use strict";e=function(){},t=function(e){r("MarauderLogger").log("contextual_config_exposure","",e)},i=n("ContextualConfigExposureLoggerFactory")(e,t),a["default"]=i},98),__d("ContextualConfigAssert",[],function(e,t,n,r,i,o){"use strict";function e(e,t){if(!1===e)throw new Error(t)}o["default"]=e},66),__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],function(e,t,n,r,i,o,a){"use strict";function e(e){switch(e.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(r("ContextualConfigConstants").ERROR.BAD_BOOLEAN_FORMAT)}}a["default"]=e},98),__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){var i;switch(t){case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var o=n("ContextualConfigParseBoolean")(e);i=function(e){return e===o};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:i=function(e){return null==e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:i=function(e){return null!=e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:i=function(){return!0};break;default:throw new Error(r("ContextualConfigConstants").ERROR.ILLEGAL_BOOLEAN_STRATEGY)}return function(e){return i(e)}}a["default"]=e},98),__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e){return n("ContextualConfigAssert")(u(e),r("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),e=parseFloat(e),n("ContextualConfigAssert")(r("ContextualConfigValidators").isNumber(e),r("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),e}var s=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,u=function(e){return s.test(e)};a["default"]=e},98),__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e){return n("ContextualConfigAssert")(u(e),r("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),e=parseInt(e,10),n("ContextualConfigAssert")(r("ContextualConfigValidators").isNumber(e),r("ContextualConfigConstants").ERROR.BAD_NUMBER_FORMAT),e}var s=/^[-\+]?([1-9]\d*|0)$/,u=function(e){return s.test(e)};a["default"]=e},98),__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],function(e,t,n,r,i,o,a){"use strict";e=function(e){return n("ContextualConfigAssert")(e>0,r("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},t=function(e,t){return n("ContextualConfigAssert")(e===t,r("ContextualConfigConstants").ERROR.MISMATCH_NUMBER_OF_VALUES)},i=function(e,t){return n("ContextualConfigAssert")(e<t,r("ContextualConfigConstants").ERROR.BAD_VALUE_ORDER)},a.assertHasValues=e,a.assertNumberOfValues=t,a.assertValueOrder=i},98),__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t,i,o){var a,s=i.map(n(o?"ContextualConfigParseInteger":"ContextualConfigParseFloat"));switch(t){case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:var u=o?n("ContextualConfigParseInteger")(e):n("ContextualConfigParseFloat")(e);a=function(e){return!(o&&!r("ContextualConfigValidators").isInteger(e))&&e===u};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:a=function(e){return null==e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:a=function(e){return null!=e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:a=function(){return!0};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.COR:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,2),r("ContextualConfigPredAssertions").assertValueOrder(s[0],s[1]),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&(e>=s[0]&&e<s[1]))};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LT:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e<s[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.LTE:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e<=s[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.EQ:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e===s[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NEQ:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e!==s[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GT:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e>s[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.GTE:r("ContextualConfigPredAssertions").assertNumberOfValues(s.length,1),a=function(e){return"number"==typeof e&&(!(o&&!r("ContextualConfigValidators").isInteger(e))&&e>=s[0])};break;default:throw new Error(r("ContextualConfigConstants").ERROR.ILLEGAL_NUMERIC_STRATEGY)}return function(e){return a(e)}}a["default"]=e},98),__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],function(e,t,n,r,i,o,a){"use strict";function e(e){try{var t=e.match(s);return null!=t?new RegExp(t[1],t[2]):new RegExp(e)}catch(e){throw new Error(r("ContextualConfigConstants").ERROR.REGEX_SYNTAX_ERROR)}}var s=/^\/(.+)\/(.*)$/;a["default"]=e},98),__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],function(e,t,n,r,i,o,a){"use strict";function e(e,t,i){var o,a=u(i);switch(t){case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.SAME:o=function(t){return"string"==typeof t&&t===e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NULL:o=function(e){return null==e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NNULL:o=function(e){return null!=e};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CATCH_ALL:o=function(){return!0};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.IN:r("ContextualConfigPredAssertions").assertHasValues(a.length),o=function(e){return"string"==typeof e&&-1!==a.indexOf(e)};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.NIN:r("ContextualConfigPredAssertions").assertHasValues(a.length),o=function(e){return"string"==typeof e&&-1===a.indexOf(e)};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.CONTAINS:r("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1),o=function(e){return"string"==typeof e&&-1!==e.indexOf(a[0])};break;case r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY.REGEX:r("ContextualConfigPredAssertions").assertNumberOfValues(a.length,1);var s=n("ContextualConfigParseRegExp")(a[0]);o=function(e){return"string"==typeof e&&s.test(e)};break;default:throw new Error(r("ContextualConfigConstants").ERROR.ILLEGAL_STRING_STRATEGY)}return function(e){return o(e)}}var s=function(e){if("string"!=typeof e)throw new Error(r("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE);return e},u=function(e){var t=[],n=(e=e,Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=e.length)break
;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}i=i,t.push(s(i))}return t};a["default"]=e},98),__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return u(t),t.map(function(t){return m(e,t)})}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_BUCKETS)},l=r("ContextualConfigValidators").isKey(r("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY),c=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isString(e)&&l(e.toUpperCase()),r("ContextualConfigConstants").ERROR.MISSING_BUCKET_STRATEGY)},f=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.ILLEGAL_BUCKET_VALUES)},d=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.MISSING_BUCKET_NAME)},g=function(e,t){var i=t.name;d(i);var o=t.strategy;switch(c(o),t=t.values||[],f(t),e){case r("ContextualConfigConstants").TYPE.BOOL:return n("ContextualConfigParsePredBoolean")(i,o);case r("ContextualConfigConstants").TYPE.FLOAT:return n("ContextualConfigParsePredNumeric")(i,o,t,!1);case r("ContextualConfigConstants").TYPE.INT:return n("ContextualConfigParsePredNumeric")(i,o,t,!0);case r("ContextualConfigConstants").TYPE.STRING:return n("ContextualConfigParsePredString")(i,o,t);default:throw new Error(r("ContextualConfigConstants").ERROR.UNKNOWN_BUCKET_DEFINITION)}},m=function(e,t){s(t);var n=t.name;return d(n),{name:n,pred:g(e,t)}};a["default"]=e},98),__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e){return u(e),e.map(f)}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e)&&e.length>0,r("ContextualConfigConstants").ERROR.MISSING_CONTEXT_IN_CONFIG)},l=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},c=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isType(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},f=function(e){s(e);var t=e.name,r=e.type;return e=e.buckets,l(t),c(r),{name:t,type:r,buckets:n("ContextualConfigParseContextBuckets")(r,e)}};a["default"]=e},98),__d("ContextualConfigIsEqualParams",[],function(e,t,n,r,i,o){"use strict";function e(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n+=1){var r=e[n],i=t[n];if(r.name!==i.name||r.type!==i.type)return!1}return!0}o["default"]=e},66),__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){switch(s(t),e){case r("ContextualConfigConstants").TYPE.BOOL:return n("ContextualConfigParseBoolean")(t);case r("ContextualConfigConstants").TYPE.FLOAT:return n("ContextualConfigParseFloat")(t);case r("ContextualConfigConstants").TYPE.INT:return n("ContextualConfigParseInteger")(t);case r("ContextualConfigConstants").TYPE.STRING:return t;default:throw new Error(r("ContextualConfigConstants").ERROR.INVALID_VALUE_TYPE)}}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isString(e),r("ContextualConfigConstants").ERROR.INVALID_STRING)};a["default"]=e},98),__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return s(t),t.map(d(e))}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_RESULTS)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},l=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},c=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isType(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_VALUE)},f=function(e,t){e=e;var n=Array.isArray(e),i=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var o;if(n){if(i>=e.length)break;o=e[i++]}else{if((i=e.next()).done)break;o=i.value}if((o=o).name===t)return o.type}throw new Error(r("ContextualConfigConstants").ERROR.UNDECLARED_OUTPUT_PARAM)},d=function(e){return function(t){u(t);var r=t.name;l(r);var i=f(e,r);return c(i),{name:r,type:i,value:t=n("ContextualConfigParseResultParamValue")(i,t.value)}}};a["default"]=e},98),__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return t=n("ContextualConfigParseResultParams")(e,t.map(function(t,n){return{name:e[n].name,value:t}})),s(e,t),t}var s=function(e,t){return n("ContextualConfigAssert")(n("ContextualConfigIsEqualParams")(e,t),r("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)};a["default"]=e},98),__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){try{return n("ContextualConfigParseDenseResultParams")(e,t)}catch(e){throw new Error(r("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)}}a["default"]=e},98),__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e){return u(e),e.map(f)}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.BAD_MONITORED_CONTEXTS)},l=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},c=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isType(e),r("ContextualConfigConstants").ERROR.BAD_CONTEXT_IDENTIFIER)},f=function(e){s(e);var t=e.name;return e=e.type,l(t),c(e),{name:t,type:e}};a["default"]=e},98),__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],function(e,t,n,r,i,o,a){function e(e){return s(e),e=e.map(d),c(e),e}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_OUTPUTS_DEFINITION)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isType(e),r("ContextualConfigConstants").ERROR.BAD_OUTPUT_TYPE)},l=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.BAD_OUTPUT_NAME)},c=function(e){return n("ContextualConfigAssert")(f(e),r("ContextualConfigConstants").ERROR.DUPLICATE_OUTPUT_NAME)},f=function(e){var t={},n=(e=e,Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}if(t[(i=i).name])return!1;t[i.name]=!0}return!0},d=function(e){return l(e.name),u(e.type),e};a["default"]=e},98),__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t,n){s(n),t=c(t);var r=e.length;u(t*r,n.length);for(var i=0;i<t;i+=1){var o=i*r;l(e,n.slice(o,o+r))}return n}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_VECTOR)},u=function(e,t){return n("ContextualConfigAssert")(e===t,r("ContextualConfigConstants").ERROR.RESULTS_VECTOR_SIZE_MISMATCH)},l=function(e,t){u(e.length,t.length);for(var r=0;r<e.length;r+=1){var i=e[r].type,o=t[r];n("ContextualConfigParseResultParamValue")(i,o)}},c=function(e){return e.reduce(function(e,t){return e*(t=t.buckets).length},1)};a["default"]=e},98),__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],function(e,t,n,r,i,o,a){"use strict";function e(e,t,n){var i=null;return e=e.map(function(e){var o,a=e.name,u={name:a};if(null!=i)return u;if(o=null!=n[a]?n[a]:null!=t[a]?t[a]():null,u.value=o,null!=e.buckets){if(null==(a=s(e.buckets,o)))return i=new Error(r("ContextualConfigConstants").ERROR.MISSING_BUCKET_MATCH),u;e=a[0],o=a[1],u.bucketName=e,u.bucketIndex=o}return u}),[i,e]}var s=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];try{if(r.pred(t))return[r.name,n]}catch(e){return null}}return null};a["default"]=e},98),__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONFIG)},u=function(e){for(var t=[],n=1,r=e.length-1;r>=0;r-=1)t.push(n),n*=e[r].buckets.length;return t.reverse()},l=function(e,t,r,i){try{return t=t.slice(r,r+e.length),[null,n("ContextualConfigParseDenseResultParams")(e,t)]}catch(e){return[e,i]}},c=function(e,t,r){try{return[null,(r=r.reduce(function(t,r,i){return n("ContextualConfigAssert")(i<e.length,"Auxillery index out of range."),t+e[i]*r},0))*t]}catch(e){return[e,-1]}};e=function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers["extends"]({},t),t=n("ContextualConfigParseOutputParams")(e.outputs);var r=n("ContextualConfigParseContexts")(e.contexts);this.aux=u(r),this.contexts=r,this.defaults=n("ContextualConfigParseDenseDefaults")(t,e.vectorDefaults),this.monitors=null!=e.monitors?n("ContextualConfigParseMonitors")(e.monitors):[],this.outputs=t,this.vector=n("ContextualConfigParseVector")(t,r,e.vector)}var t=e.prototype;return t.resolve=function(e){try{return this.unsafeResolve(e)}catch(e){return[e,this.defaults,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(e){var t=this.aux,i=this.globalContextProviders,o=this.contexts,a=this.defaults,s=this.monitors,u=this.outputs,f=this.vector,d=(o=n("ContextualConfigResolveContexts")(o,i,e))[0];return o=o[1],null!=d?[d,a,o,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:(t=(d=c(t,u.length,r("ContextualConfigResolvedContextsUtils").getBucketIndices(o)))[0],d=d[1],null!=t?[t,a,o,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:(u=(t=l(u,f,d,a))[0],f=t[1],null!=u?[u,f,o,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:(a=(d=n("ContextualConfigResolveContexts")(s,i,e))[0],t=d[1],null!=a?[a,f,o,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,f,o,t])))},e}(),a["default"]=e},98),__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONFIG)};e=function(){function e(e,t){s(e),this.globalContextProviders=babelHelpers["extends"]({},t),t=n("ContextualConfigParseOutputParams")(e.outputs),this.monitors=null!=e.monitors?n("ContextualConfigParseMonitors")(e.monitors):[],this.values=n("ContextualConfigParseResultParams")(t,e.values)}var t=e.prototype;return t.resolve=function(e){try{return this.unsafeResolve(e)}catch(e){return[e,this.values,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(e){var t=this.globalContextProviders,i=this.monitors,o=this.values;return t=(i=n("ContextualConfigResolveContexts")(i,t,e))[0],e=i[1],null!=t?[t,o,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]:[null,o,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,e]},e}(),a["default"]=e},98),__d("ContextualConfigMergePartialResultParams",[],function(e,t,n,r,i,o){"use strict";function e(e,t){var n={},r=(t=t,Array.isArray(t)),i=0;for(t=r?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var o;if(r){if(i>=t.length)break;o=t[i++]}else{if((i=t.next()).done)break;o=i.value}n[(o=o).name]=o}for(o=[],i=e,t=0,i=(r=Array.isArray(i))?i:i["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(r){if(t>=i.length)break;e=i[t++]}else{if((t=i.next()).done)break;e=t.value}var a=n[(e=e).name];o.push(null!=a&&a.name===e.name&&a.type===e.type?a:e)}return o}o["default"]=e},66),__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return t=n("ContextualConfigParseResultParams")(e,t),s(e,t),t}var s=function(e,t){return n("ContextualConfigAssert")(n("ContextualConfigIsEqualParams")(e,t),r("ContextualConfigConstants").ERROR.MISSING_DEFAULT_VALUE)};a["default"]=e},98),__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParams","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){return s(t),t.reduce(function(t,n){return t[(n=f(e,n)).bucket]=n.values,t},{})}var s=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_TABLE)},u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.MISSING_TABLE)},l=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isNonEmptyString(e),r("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_BUCKET)},c=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isArray(e),r("ContextualConfigConstants").ERROR.MISSING_TABLE_ITEM_VALUES)},f=function(e,t){u(t);var r=t.bucket;return t=t.values,l(r),c(t),{bucket:r,values:n("ContextualConfigParseResultParams")(e,t)}};a["default"]=e},98),__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],function(e,t,n,r,i,o,a){"use strict";var s=[],u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e),r("ContextualConfigConstants").ERROR.BAD_CONFIG)};e=function(){function e(e,t){u(e),this.globalContextProviders=babelHelpers["extends"]({},t),t=n("ContextualConfigParseOutputParams")(e.outputs),this.contexts=n("ContextualConfigParseContexts")(e.contexts),this.defaults=n("ContextualConfigParseDefaults")(t,e.defaults),this.monitors=null!=e.monitors?n("ContextualConfigParseMonitors")(e.monitors):[],this.table=n("ContextualConfigParseTable")(t,e.table)}var t=e.prototype;return t.resolve=function(e){try{return this.unsafeResolve(e)}catch(e){return[e,this.defaults,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]}},t.unsafeResolve=function(e){var t=this.globalContextProviders,i=this.contexts,o=this.defaults,a=this.monitors,u=this.table,l=(i=n("ContextualConfigResolveContexts")(i,t,e))[0];return i=i[1],null!=l?[l,o,i,[]]:(u=u[l=r("ContextualConfigResolvedContextsUtils").getBucketNames(i).join(r("ContextualConfigConstants").BUCKET_DELIMITER)]||s,l=n("ContextualConfigMergePartialResultParams")(o,u),u=(o=n("ContextualConfigResolveContexts")(a,t,e))[0],a=o[1],null!=u?[u,l,i,[]]:[null,l,i,a])},e}(),a["default"]=e},98),__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],function(e,t,n,r,i,o,a){"use strict";function e(e,t){switch(u(e),l(e.version),e.cctype){case r("ContextualConfigConstants").CONFIG_TYPE.DENSE:return new(n("DenseContextualConfig"))(e,t);case r("ContextualConfigConstants").CONFIG_TYPE.MULTI_OUTPUT_RESOLVED:return new(n("MultiOutputResolvedContextualConfig"))(e,t);case r("ContextualConfigConstants").CONFIG_TYPE.TABLE:return new(n("TableContextualConfig"))(e,t);default:throw new Error(r("ContextualConfigConstants").ERROR.UNKNOWN_CONFIG_TYPE)}}var s=[1],u=function(e){return n("ContextualConfigAssert")(r("ContextualConfigValidators").isDefined(e)&&r("ContextualConfigValidators").isDefined(e.version),r("ContextualConfigConstants").ERROR.BAD_CONFIG)},l=function(e){return n("ContextualConfigAssert")(-1!==s.indexOf(e),r("ContextualConfigConstants").ERROR.UNSUPPORTED_CONFIG_VERSION)};a["default"]=e},98),__d("ContextualConfigWarn",[],function(e,t,n,r,i,o){"use strict";function e(){}o["default"]=e},66),__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e){this.$1=e.reduce(function(e,t){var n=t.name;return t=t.value,e[n]=t,e},{}),this.$2=e}var t=e.prototype;return t.get=function(e,t){try{return typeof(e=this.$1[e])!=typeof t?(n("ContextualConfigWarn")(r("ContextualConfigConstants").ERROR.REQUESTED_PARAM_NOT_FOUND),t):e}catch(e){return n("ContextualConfigWarn")(e.message),t}},t.getParams=function(){return this.$2},e}(),a["default"]=e},98),__d("ErrorContextualConfig",["ContextualConfigConstants"],function(e,t,n,r,i,o,a){"use strict";e=function(){function e(e){this.error=e}return e.prototype.resolve=function(){return[this.error,r("ContextualConfigConstants").EMPTY_RESULT_PARAMS,r("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,r("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS]},e}(),a["default"]=e},98),__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],function(e,t,n,r,i,o,a){"use strict";var s=1/r("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE,u=1;e=function(){function e(e,t){void 0===t&&(t={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=e,this.$2=t}var t=e.prototype;return t.$5=function(){if(this.$1)return this.$1;var e=this.$2,t=this.$4;try{t=n("ContextualConfigParseConfig")(t,e)}catch(e){t=new(n("ErrorContextualConfig"))(e)}return this.$1=t,t},t.$6=function(e){var t=this.isDebugLoggingEnabled,i=this.$4,o=this.$3;(o=!o&&r("Random").random()<s)&&(this.$3=!0),i=n("ContextualConfigCollateExposureData")(i,e,o),(e=n("ContextualConfigExposureLogger").createEvent(i)).log(t)},t.resolve=function(e){void 0===e&&(e={});var t=this.$1||this.$5();return t=t.resolve(e),this.$6(t),new(n("ContextualConfigResult"))(t[u])},e}(),a["default"]=e},98),__d("FbtLogging",["cr:1094907"],function(e,t,n,r,i,o,a){"use strict";e=null==t("cr:1094907")?void 0:t("cr:1094907").logImpression,a.logImpression=e},98),__d("AcfToastImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1873550"),i=r("FalcoLoggerInternal").create("acf_toast_impression",e),a["default"]=i},98),__d("ClientConsistencyFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1764786"),i=r("FalcoLoggerInternal").create("client_consistency",e),a["default"]=i},98),__d("CometSuspenseFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1828945"),i=r("FalcoLoggerInternal").create("comet_suspense",e),a["default"]=i},98),__d("IntlQtEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1848815"),i=r("FalcoLoggerInternal").create("intl_qt_event",e),a["default"]=i},98),__d("LynxAsyncCallbackFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,i,o,a){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1743887"),i=r("FalcoLoggerInternal").create("lynx_async_callback",e),a["default"]=i},98),__d("FalcoAppUniverse",["$InternalEnum"],function(e,t,n,r,i,o){n=t("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2}),o["default"]=n},66),__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FBLogger","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuid"],function(e,t,n,r,i,o,a){"use strict";function s(){return n("AnalyticsCoreData").enable_bladerunner&&!n("ExecutionEnvironment").isInWorker}function u(e,t){h(t.item.name,"js.br.add_to_batch",1,!0);var n=t.item.extra.length;M+n>D&&(clearTimeout($),l()),B.push([e,t]),M+=n}function l(){$=null,q=!1;var e=B;if(m("js.br.send_batch",e.map(function(e){return e[1].item})),z)G.enqueue(function(t){return t.log(e.map(function(e){return e[1].item}),function(t){if(t)for(i=0;i<e.length;i++){var n=e[i],r=n[0];h((n=n[1]).item.name,"js.br.success_callback.batch.send_batch",1,!0),r.markItem(n,t)}else{C("js.br.banzai_fallback",e.length);for(var i=function(){var t=e[o],n=t[0],r=t[1];h(r.item.name,"js.br.banzai_fallback_for_failure",1,!0),null!=(t=r.item.logImmediate)&&t?X.logImmediately([r.item],function(e){return n.markItem(r,e)}):X.log([r.item],function(e){return n.markItem(r,e)})},o=0;o<e.length;o++)i()}})});else{C("js.br.init_not_complete.log",e.length);for(var t=function(){var t=e[n],r=t[0],i=t[1];h(i.item.name,"js.br.banzai_fallback_for_init_not_complete",1,!0),null!=(t=i.item.logImmediate)&&t?X.logImmediately([i.item],function(e){return r.markItem(i,e)}):X.log([i.item],function(e){return r.markItem(i,e)})},n=0;n<e.length;n++)t()}B=[],M=0}function c(e){return{events:e.map(function(e){return{name:e.name,extra:e.extra,rate:e.policy.r,time:e.time/1e3,tag:0,shouldAddState:e.shouldAddState}})}}function f(e){var t;return e={deviceId:n("AnalyticsCoreData").device_id,familyDeviceId:null,osBuildNumber:null,sessionId:e,appId:n("AnalyticsCoreData").app_id,appVersion:null,bundleId:null,consentState:null,identity:null,pushPhase:n("AnalyticsCoreData").push_phase},(null!=(t=null==(t=n("AnalyticsCoreData").stateful_events_list_for_br)?void 0:t.length)?t:0)>0&&(e.ambientState=n("AnalyticsCoreData").state_for_br),null!=(t=n("AnalyticsCoreData").allow_br_event_identity_propogation)&&t&&(e.identity=d()),Object.freeze(e)}function d(){try{var e;if(2===W){if(void 0!==(e=null==(e=n("AnalyticsCoreData").identity)?void 0:e.appScopedIdentity))return{appScopedIdentity:{uid:e,identifier:"",claims:[]}}}else if(void 0!==(e=null==(e=n("AnalyticsCoreData").identity)?void 0:e.fbIdentity))return{facebookIdentity:{actorId:e.actorId,accountId:e.accountId,claims:[]}}}catch(e){r("ODS").bumpEntityKey(1344,"js.br.identity.propogation","exception.while.generating.identity",1)}return null}function g(e,t){for(var i=0;i<e.length;i++){var o,a=e[i];h(a.name,"js.banzai.posting_event",1,!1),(o={}).e=a.extra,o.r=a.policy.r,o.d=n("AnalyticsCoreData").device_id,o.s=r("WebSession").getId(),o.t=a.time,o=o,a.privacyContext&&(o.p=a.privacyContext);var s=a.identity;s&&(o.id=s),n("Banzai").post(x+a.name,o,t)}m("planes.banzai.write_to_transport",e)}function m(e,t){for(var n=0,r=0;r<t.length;r++){t[r].name!==O&&(n+=1)}n>0&&C(e,n)}function C(e,t){var i="falco.fabric.www."+n("AnalyticsCoreData").push_phase;r("ODS").bumpEntityKey(1344,i,e,t)}function h(e,t,n,i){return e!==O&&(r("ODS").bumpEntityKey(1344,"falco.event."+e,t,n),i&&C(t,n),!0)}function p(e){T();var t=E(e,"banzai_data_loss","log"),r=E(e,"banzai_data_loss","logImmediately"),i=E(e,"banzai_data_loss","logCritical"),o=E(e,"bladerunner_data_loss","");if(C("js.br_data_loss.posted."+e,1),z&&V)try{G.enqueue(function(t){return t.log([o],function(t){if(!t)return C("js.br.transport_failure."+e,1),void X.logCritical([o],function(){C("js.br.failure_fallback_success_callback."+e,1)});C("js.br.success_callback."+e,1)})})}catch(t){C("js.br.error_enqueueing."+e,1),X.logCritical([o],function(){C("js.br.enqueuing_fallback_success_callback."+e,1)})}else V||C("js.br.failed."+e,1),z||C("js.br.init_not_complete."+e,1),X.logCritical([o],function(){C("js.br.init_fallback_success_callback."+e,1)});g([t],n("Banzai").BASIC),g([r],n("Banzai").VITAL),g([i],{signal:!0,retry:!0})}function E(e,t,r){return{name:t,time:n("performanceAbsoluteNow")(),policy:{r:1},extra:JSON.stringify({event_index:e,falco_js_connection_id:k,logging_mode:r,logging_flow_flag:"original_flow"})}}function S(){j+I<Date.now()&&(p(K),j=Date.now(),K++)}function _(){window.setTimeout(function(){S(),K<=40&&_()},P)}function R(e){G.start(function(t){return t({log:function(t,r){m("planes.bladerunner.write_to_transport",t);var i=JSON.stringify(c(t));e?n("AnalyticsCoreData").enable_ack?n("promiseDone")(e.amendWithAck(i),function(e){m("planes.bladerunner.ack_received"+e.toString(),t),r(e)},function(){m("planes.bladerunner.ack_failure",t),r(!1)}):(e.amendWithoutAck(i),m("planes.bladerunner.write_without_ack",t)):(m("planes.bladerunner.request_stream_null",t),r(!1))},logImmediately:function(e,t){this.log(e,t)},logCritical:function(e,t){this.log(e,t)}})})}function T(){U||(z=!1,s()&&(b.onReady(function(e){if(!e)return V=!1,void G.start(function(e){return e(X)});e=e;var t={onTermination:function(e){"Stream closed"===e.message?(G.stop(!0),U=!1):(V=!1,2===W&&(r("ODS").bumpEntityKey(1344,"falco.ig.br.experiment","exception.when.br.stream.is.rejected",1),n("FBLogger")("ig_web","br_stream_rejected").catching(e).warn("BladeRunner stream is rejected")),G.start(function(e){return e(X)}))},onFlowStatus:function(){}};n("promiseDone")(e.requestStream({method:"Falco"},JSON.stringify(f(r("WebSession").getId())),t,{requestId:""}).then(function(t){R(e=t),z=!0})["catch"](function(){G.stop(!0),U=!1}))}),U=!0))}function y(e){var t=e.name;return s()&&V?L.has(t)?(e.shouldAddState=!0,!0):1===W||F.has(t)?(1!==e.policy.s&&1!==W&&h(t,"js.use_bladerunner.failed.non_fb_event.policy_not_stateless",1,!0),1===e.policy.s):(h(t,"js.use_bladerunner.failed.non_fb_event.event_not_in_list",1,!0),!1):(1!==W&&h(t,"js.use_bladerunner.failed.non_fb_event.br_not_enabled",1,!0),!1)}function v(e){if(""===e)return null;if(N.has(e))return N.get(e);var t={claim:""},n=e.split("^#");if(n.length>=4){var r=n[0],i=n[1],o=n[2];n=n[3],""!==o?t={appScopedIdentity:o,claim:n}:""!==r&&(t={fbIdentity:{accountId:r,actorId:i},claim:n}),N.set(e,t)}return t}function e(){function e(e){try{return e===r("FalcoUtils").identityToString(n("AnalyticsCoreData").identity)}catch(e){return r("ODS").bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1),!0}}function t(e){try{if(r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch","identity.mismatch.logging.entry.point",1),e)if(e.fbIdentity){var t,o;t=null==(t=n("AnalyticsCoreData").identity)?void 0:t.fbIdentity,o=null==(o=n("AnalyticsCoreData").identity)?void 0:o.appScopedIdentity,t?i(e.fbIdentity.actorId,t.actorId):null!=o?r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch.fb","received.app_scoped.identity.for.current.fb.user",1):r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch.fb","undefined.current.user.identity",1)}else t=null==e?void 0:e.appScopedIdentity,e=null==(o=n("AnalyticsCoreData").identity)?void 0:o.appScopedIdentity,o=null==(o=n("AnalyticsCoreData").identity)?void 0:o.fbIdentity,null!=t&&null!=e?i(t,e):o?r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch.ig","received.fb.identity.for.current.app_scoped.user",1):r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch.ig","undefined.original.or.current.user.identity",1);else r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch","undefined.original.identity",1)}catch(e){r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch","exception.while.logging.identity.mismatch",1)}}function i(e,t){var n=1===W?"_fb":"_ig";"0"===e&&"0"!==t?r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch"+n,"identity.loggedout_to_loggedin.transition",1):"0"!==e&&"0"===t?r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch"+n,"identity.loggedin_to_loggedout.transition",1):r("ODS").bumpEntityKey(1344,"js.bladerunner.identity.mismatch"+n,"identity.switch_between_profiles.transition",1)}H||(H=!0,n("PersistedQueue").setHandler("falco_queue_log",function(n){for(var r,i=n.getQueueNameSuffix(),o=v(i);r=n.dequeueItem();)!function(r){y(r.item)?(h(r.item.name,"js.use_bladerunner.log",1,!0),T(),null==$&&($=setTimeout(l,A)),e(i)||(t(o),h(r.item.name,"js.bladerunner.identity.mismatch",1,!0)),u(n,r)):(h(r.item.name,"js.use_banzai.log",1,!0),o&&(r.item.identity=o),X.log([r.item],function(e){return n.markItem(r,e)}))}(r)}),n("PersistedQueue").setHandler("falco_queue_immediately",function(r){for(var i,o=r.getQueueNameSuffix(),a=v(o);i=r.dequeueItem();)!function(i){y(i.item)?(h(i.item.name,"js.use_bladerunner.log_immediately",1,!0),T(),(null==$||!q)&&(clearTimeout($),$=setTimeout(l,w),q=!0),i.item.logImmediate=!0,u(r,i),n("PersistedQueue").isPersistenceAllowed()||(h(i.item.name,"js.br.send_immediately_no_persistence",1,!0),l()),e(o)||(t(a),h(i.item.name,"js.bladerunner.identity.mismatch",1,!0))):(h(i.item.name,"js.use_banzai.log_immediately",1,!0),a&&(i.item.identity=a),X.logImmediately([i.item],function(e){return r.markItem(i,e)}))}(i)}),n("PersistedQueue").setHandler("falco_queue_critical",function(n){for(var r,i=n.getQueueNameSuffix(),o=v(i);r=n.dequeueItem();)!function(r){var a=r.item;y(a)?(h(a.name,"js.use_bladerunner.log_critical",1,!0),T(),z?(G.enqueue(function(e){return e.logCritical([a],function(e){if(!e)return C("js.br.banzai_fallback.critical",1),h(r.item.name,"js.br.banzai_fallback_for_failure.critical",1,!0),o&&(a.identity=o),void X.logCritical([a],function(e){return n.markItem(r,e)});h(r.item.name,"js.br.success_callback.batch.critical",1,!0),n.markItem(r,e)})}),e(i)||(t(o),h(r.item.name,"js.bladerunner.identity.mismatch",1,!0))):(h(a.name,"js.br.init_not_complete.logCritical",1,!0),o&&(a.identity=o),X.logCritical([a],function(e){return n.markItem(r,e)}))):(o&&(a.identity=o),h(a.name,"js.use_banzai.log_critical",1,!0),X.logCritical([a],function(e){return n.markItem(r,e)}))}(r)}),n("AnalyticsCoreData").enable_dataloss_timer&&(T(),S(),_()))}var $,b=n("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),D=5120,A=null!=(t=n("AnalyticsCoreData").max_delay_br_queue)?t:6e4,w=null!=(i=n("AnalyticsCoreData").max_delay_br_queue_immediate)?i:1e3,x="falco:",G=new(n("Queue")),I=5e3,P=6e4,k=n("uuid")(),O="ods_web_batch",N=new Map,L=new Set,F=new Set,W=null!=(o=n("FalcoAppUniverse").cast(n("AnalyticsCoreData").app_universe))?o:1,B=[],M=0,q=!1,U=!1,H=!1,V=!0,z=!1,j=Date.now()-P,K=1;for(T(),i=null!=(t=n("AnalyticsCoreData").stateful_events_list_for_br)?t:[],t=0,i=(o=Array.isArray(i))?i:i["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var Y;if(o){if(t>=i.length)break;Y=i[t++]}else{if((t=i.next()).done)break;Y=t.value}Y=Y,L.add(Y)}for(t=null!=(Y=n("AnalyticsCoreData").stateless_non_fb_events_for_br)?Y:[],i=0,
t=(o=Array.isArray(t))?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){if(o){if(i>=t.length)break;Y=t[i++]}else{if((i=t.next()).done)break;Y=i.value}Y=Y,F.add(Y)}var X={log:function(e,t){m("js.banzai.post.log",e),g(e,n("Banzai").BASIC),t(!0)},logImmediately:function(e,t){m("js.banzai.post.log_immediately",e),g(e,n("Banzai").VITAL),t(!0)},logCritical:function(e,t){m("js.banzai.post.log_critical",e),g(e,{signal:!0,retry:!0}),t(!0)}};a.attach=e},98),__d("MqttLongPollingHookCollection",[],function(e,t,n,r,i,o){"use strict";e=function(){function e(){this.$1=new Set}var t=e.prototype;return t.addHook=function(e){this.$1.add(e)},t.removeHook=function(e){this.$1["delete"](e)},t.onPollRequestSent=function(){this.$1.forEach(function(e){e.onPollRequestSent()})},t.onPollRequestSuccess=function(){this.$1.forEach(function(e){e.onPollRequestSuccess()})},t.onPollResponse=function(e){this.$1.forEach(function(t){t.onPollResponse(e)})},t.onPollFinish=function(){this.$1.forEach(function(e){e.onPollFinish()})},t.onPollRequestFailed=function(e){this.$1.forEach(function(t){t.onPollRequestFailed(e)})},t.onPollShutdownAbort=function(){this.$1.forEach(function(e){e.onPollShutdownAbort()})},e}(),o["default"]=e},66),__d("PromiseResult",["Promise"],function(e,t,n,r,i,o){"use strict";e=function(){function e(){var e=this;this.promise=new(t("Promise"))(function(t,n){e.$1=t,e.$2=n})}var n=e.prototype;return n.resolve=function(e){this.$1(e)},n.reject=function(e){this.$2(e)},e}(),o["default"]=e},66),__d("MqttFetchClient",["MqttEnv","MqttProtocolCodec","MqttUserName","MqttUtils","Promise","PromiseResult"],function(e,t,n,r,i,o,a){"use strict";var s="fetch_pull",u="fetch_pull_finish",l="fetch_",c=6e4,f="action",d="chunked",g="send",m="true",C=5,h=20,p=10,E=5e3,S="undefined"!=typeof window?window:self;e=function(){function e(){this.$1="",this.$2=r("MqttEnv").Env.getLoggerInstance(),this.$3=0,this.$4="",this.$5=new(n("MqttUserName"))("",0,1,"",0,!0),this.$6=function(){},this.$7=function(){},this.$8=function(){},this.$9=function(){},this.$10=0,this.$11=0,this.$12=0,this.$13=0,this.$14="Ready",this.$15=[],this.$16=[],this.$17=null,this.$18=!1,this.$19=0}e.isSupported=function(){return"function"==typeof S.fetch};var i=e.prototype;return i.run=function(e,t,r,i,o,a,s,u){this.$1=n("MqttUtils").endpointWithSessionId(e,t),this.$3=t,this.$4=r,this.$5=i,this.$6=o,this.$7=a,this.$8=s,this.$9=u,this.$20()},i.isTopicSupported=function(){return!0},i.publish=function(e,r){if("ReceivingData"!==this.$14)return this.$2.bumpCounter(l+"publish."+e+".invalidstate"),t("Promise").reject("not connected");this.$2.bumpCounter(l+"publish."+e+".publish");var i=new(n("PromiseResult"));return e={topic:e,payload:r,promiseResult:i},this.$15.push(e),this.$21(),i.promise},i.abort=function(){this.$6=function(){},this.$7=function(){},this.$8=function(){},this.$9=function(){}},i.$22=function(e){var t=this;e.forEach(function(e){t.$2.bumpCounter(l+"publish."+e.topic+".resolved"),e.promiseResult.resolve()}),this.$12+=e.length},i.$23=function(e,t){var n=this;e.forEach(function(e){n.$2.bumpCounter(l+"publish."+e.topic+".rejected"),e.promiseResult.reject(t)})},i.$24=function(e,t,n,r){var i=e.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request failed. Publishes:"+i+", retry:"+n),this.$2.bumpCounter(l+"publish_request_failed"),"ReceivingData"!==this.$14||n===C?(this.$23(e,r),this.$18=!1,this.$2.bumpCounter(l+"publish_request_failed_final"),this.$21()):this.$25(e,t,n+1)},i.$26=function(e,t,n,r){if(!r.ok)return this.$2.bumpCounter(l+"publish_request_failed.http."+r.status),409===r.status&&(this.$19++,this.$19>=p)?(this.$2.bumpCounter(l+"409_reset"),void this.$27(new Error("Too many 409 errors"))):void this.$24(e,t,n,this.$28(r));this.$2.bumpCounter(l+"publish_request_success"),t=e.map(function(e){return e.topic}).join(","),this.$2.debugTrace("FetchClient","Fetch publish request success. Publishes:"+t+", retry:"+n),this.$22(e),this.$18=!1,this.$21()},i.$21=function(){if("ReceivingData"===this.$14&&!this.$18&&(0!==this.$15.length||0!==this.$16.length)){this.$18=!0;var e=this.$15.slice(0,h);this.$15=this.$15.slice(h,this.$15.length),null!=this.$17&&r("MqttEnv").Env.clearTimeout(this.$17),this.$17=null;var t=this.$16.slice(0,h);this.$16=this.$16.slice(h,this.$16.length),this.$25(e,t,0)}},i.$25=function(e,t,i){var o=this,a=e.map(function(e){return e.topic}).join(",");this.$2.debugTrace("FetchClient","Fetch publish request sent. Publishes:"+a+", retry:"+i),a=n("MqttUtils").endpointWithExtraParameter(this.$1,f,g);var s=e.map(function(e){return{topic:e.topic,payload:e.payload,qos:0,messageId:r("MqttEnv").Env.random()}});s=this.$5.gen(this.$3,[],s,t),this.$2.bumpCounter(l+"publish_request"),n("MqttUtils").promiseDoneWithTimeout(S.fetch(a,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:s,keepalive:!1}),function(n){return o.$26(e,t,i,n)},function(n){return o.$24(e,t,i,n)},c)},i.$29=function(e){e=e.message,this.$2.debugTrace("FetchClient","Fetch request failed with error:"+e),this.$9(e),this.$30(!1,e),this.$2.bumpCounter(l+"error"),this.$14="Error"},i.$31=function(e){var t=this;this.$2.debugTrace("FetchClient","Fetch response data received");var n=(e=(e=r("MqttProtocolCodec").decodeByteMessages(new Uint8Array(e))).messages).filter(function(e){return e.messageType===r("MqttProtocolCodec").MESSAGE_TYPE.PINGREQ}),i=e=e.filter(function(e){return e.messageType===r("MqttProtocolCodec").MESSAGE_TYPE.PUBLISH}).map(function(e){return e instanceof r("MqttProtocolCodec").WireMessage.Publish?(1===(e=e).qos&&null!=e.messageIdentifier&&(t.$16.push(e.messageIdentifier),null==t.$17&&(t.$17=r("MqttEnv").Env.setTimeout(function(){t.$21()},E))),{topic:e.topic,payload:e.payloadMessage,qos:e.qos}):{}}),o=Array.isArray(i),a=0;for(i=o?i:i["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}s=s,this.$2.bumpCounter(l+"response_"+(null!=(s=s.topic)?s:"void"))}e&&e.length>0&&(this.$13+=e.length,this.$7(e)),n&&n.length>0&&this.$32()},i.$32=function(){this.$2.debugTrace("FetchClient","Got server ping request"),this.$2.bumpCounter(l+"ping")},i.$27=function(e){this.$2.debugTrace("FetchClient","Fetch request ended: "+e.toString()),this.$2.bumpCounter(l+"done"),this.$33(e.message),this.$8(),this.$14="Done"},i.$34=function(e,t,r){var i=this;if(null!=r)try{this.$31(r)}catch(e){return this.$27(e),void this.$2.bumpCounter(l+"dataDecodeException")}t?this.$27(new Error("EOF")):n("MqttUtils").promiseDone(e.read(),function(t){var n=t.done;return t=t.value,i.$34(e,n,t)},function(e){return i.$27(e)})},i.$35=function(e){if(!e.ok)return this.$2.bumpCounter(l+"error.http."+e.status),void this.$29(this.$28(e));(e=e.body)?(e=e.getReader(),this.$6(),this.$2.bumpCounter(l+"success"),this.$30(!0,null),this.$11=Date.now(),this.$14="ReceivingData",this.$2.debugTrace("FetchClient","Fetch request success"),this.$34(e,!1,null)):this.$29(new Error("Empty body"))},i.$33=function(e){this.$2.eventLogPullFinish({pullEventName:u,sessionID:this.$3,duration:Date.now()-this.$11,errorMessage:e,publishReceived:this.$13,publishSent:this.$12})},i.$30=function(e,t){this.$2.eventLogPull({pullEventName:s,sessionID:this.$3,status:e,duration:Date.now()-this.$10,hostname:this.$1,errorMessage:t})},i.$20=function(){var e=this;if("Ready"===this.$14){this.$2.debugTrace("FetchClient","Sending fetch request"),this.$2.bumpCounter(l+"request"),this.$10=Date.now();var t=n("MqttUtils").endpointWithExtraParameter(this.$1,d,m);n("MqttUtils").promiseDoneWithTimeout(S.fetch(t,{method:"POST",mode:"cors",cache:"no-cache",credentials:"include",referrer:"no-referrer",body:this.$4,keepalive:!1}),function(t){return e.$35(t)},function(t){return e.$29(t)},c)}},i.$28=function(e){return new Error("Http error, status="+e.status)},e}(),a["default"]=e},98),__d("MqttLongPollingClient",["MqttEnv","MqttProtocolCodec","MqttUserName","Promise","XHRRequest","getCrossOriginTransport"],function(e,t,n,r,i,o,a){"use strict";var s=12e4,u="simple_pull",l="longpolling_";e=function(){function e(){this.$3="",this.$4=0,this.$2=r("MqttEnv").Env.getLoggerInstance(),this.$1="Ready",this.$5="",this.$6=new(n("MqttUserName"))("",0,1,"",0,!0),this.$7=function(){},this.$8=function(){},this.$9=function(){},this.$10=function(){},this.$11=0,this.$12=null,this.$13=new Set(["/t_ms","/messenger_sync_get_diffs","/messenger_sync_create_queue","/webrtc","/rtc_multi"])}var i=e.prototype;return i.run=function(e,t,n,r,i,o,a,s){this.$3=e,this.$4=t,this.$5=n,this.$6=r,this.$7=i,this.$8=o,this.$9=a,this.$10=s,this.$14(this.$5)},i.isTopicSupported=function(e){return this.$13.has(e)},i.publish=function(){return t("Promise").reject("not supported")},i.abort=function(){null!=this.$12&&this.$12.abort("Disconnected")},i.$15=function(e,t){this.$1!==e&&(this.$1=e,"Error"===e&&null!=t&&this.$10(t),this.$2.debugTrace("LongPollingClient","_changeStatus : "+e))},i.$16=function(e){"RequestSend"===this.$1&&(e?(this.$7(),this.$2.bumpCounter(l+"success"),this.$18(!0,null),this.$15("ResponseReceived"),e=(e=r("MqttProtocolCodec").decodeByteMessages(new Uint8Array(e))).messages.filter(function(e){return e instanceof r("MqttProtocolCodec").WireMessage.Publish}).map(function(e){return e instanceof r("MqttProtocolCodec").WireMessage.Publish?{topic:(e=e).topic,payload:e.payloadMessage,qos:e.qos}:{}}),this.$8(e),this.$9()):this.$17("EmptyResponse",null))},i.$17=function(e,t){t=null!=t?t.message:"null",this.$2.debugTrace("LongPollingClient Error","Poll failed with error:"+e+", errorMsg:"+t),this.$18(!1,e+":"+t),this.$2.bumpCounter(l+"error."+e),this.$15("Error",e)},i.$18=function(e,t){this.$2.eventLogPull({pullEventName:u,sessionID:this.$4,status:e,duration:Date.now()-this.$11,hostname:this.$3,errorMessage:t})},i.$14=function(e){var t=this;if("Ready"===this.$1&&!this.$12){this.$2.bumpCounter(l+"request");try{this.$11=Date.now(),this.$12=new(n("XHRRequest"))(this.$3).setResponseType("arraybuffer").setRawData(e).setTransportBuilder(n("getCrossOriginTransport").withCredentials).setResponseHandler(function(e){return t.$16(e)}).setNetworkFailureHandler(function(e){t.$17("Network",e)}).setErrorHandler(function(e){t.$17("Error",e)}).setAbortHandler(function(){t.$17("Abort",null)}).setTimeoutHandler(function(){t.$17("Timeout",null)}).setTimeout(s).send(),this.$15("RequestSend")}catch(e){this.$17("Error",e)}}},e}(),a["default"]=e},98),__d("MqttLongPollingRunner",["MqttEnv","MqttFetchClient","MqttLongPollingClient","MqttLongPollingHookCollection","MqttTypes","MqttUtils","Promise","exponentialBackoff"],function(e,t,n,r,i,o,a){"use strict";var s=4,u=1e3,l=3e3,c="mqtt_should_longpoll",f="last_lp",d="yes",g="no";e=function(){function e(e,t,i,o,a,s,u,l,c){var f=this;this.$23=function(){try{if(!f.$29())return;f.$5.debugTrace("LongPollingRunner","_startPollingIfNecessary called");var e=f.$30();f.$14=e;var t=f.$9(),i=f.$10();if(t=t.filter(function(t){return e.isTopicSupported(t)}),i=i.filter(function(t){return e.isTopicSupported(t.topic)}),0===t.length&&0===i.length)return f.$5.debugTrace("LongPollingRunner","Poll skipped, nothing to do"),f.$14=null,void r("MqttEnv").Env.setTimeout(function(){f.$23()},1e3);var o=n("MqttUtils").generateSessionId();e.run(f.$6,o,f.$7.gen(o,t,i),f.$7,function(){return f.$31()},function(e){return f.$32(e)},function(){return f.$33()},function(e){return f.$34(e)}),f.$19.onPollRequestSent(),o=t.join(","),t=i.map(function(e){return e.topic}).join(","),f.$5.debugTrace("LongPollingRunner","Making a poll request to "+f.$6+". SubscribedTopics:"+o+". Publishes:"+t)}catch(e){e&&f.$5.logErrorWarn(e,"lp_js_error"),f.$11(new(r("MqttTypes").MqttChannelError)(!1,"js error lp",e)),f.$34("lp_js_error")}},this.$6=e,this.$7=t,this.$1=o,this.$2=0,this.$3=i,this.$4=n("MqttUtils").hasWSSupport(),this.$5=r("MqttEnv").Env.getLoggerInstance(),this.$8=a,this.$9=s,this.$10=u,this.$11=l,this.$12=c,this.$13=!1,this.$14=null,this.$15="LPInactive",this.$16="NotSent",this.$17=0,this.$19=new(n("MqttLongPollingHookCollection")),this.$18=n("exponentialBackoff")(this.$23,this),this.$20=0,this.$21=g,e=r("MqttEnv").Env.genGk(r("MqttEnv").MqttGkNames.mqtt_lp_use_fetch),t=n("MqttFetchClient").isSupported(),e?this.$5.bumpCounter("fetch_gk_pass"):this.$5.bumpCounter("fetch_gk_fail"),t?this.$5.bumpCounter("fetch_api_supported"):this.$5.bumpCounter("fetch_api_not_supported"),this.$22=e&&t}var i=e.prototype;return i.addHook=function(e){this.$19.addHook(e)},i.start=function(){var e=this;this.$21=r("MqttEnv").Env.configRead(f,g),this.$5.debugTrace("LongPollingRunner","Runner loaded, last status "+this.$21),this.$20=Date.now(),this.$23(),r("MqttEnv").Env.setTimeout(function(){e.$23()},u+100),r("MqttEnv").Env.setTimeout(function(){e.$23()},l+100)},i.shutdown=function(){this.$5.debugTrace("LongPollingRunner","Shutdown called"),this.$14&&this.$14.abort(),this.$19.onPollShutdownAbort(),this.$14=null},i.canPublish=function(){return"LPActive"===this.$15&&"ReceivingData"===this.$16},i.publish=function(e,n){return r("MqttEnv").Env.genGk(r("MqttEnv").MqttGkNames.mqtt_enable_publish_over_polling)&&this.$14&&this.$14.isTopicSupported(e)?this.$14.publish(e,n):t("Promise").reject()},i.onConnectAttempt=function(){},i.onConnectFailure=function(){this.$2++,this.$23()},i.onConnected=function(){},i.onConnectSuccess=function(){this.$1=!0,r("MqttEnv").Env.configWrite(f,null)},i.onConnectionLost=function(){},i.onConnectionDisconnect=function(){},i.onSubscribe=function(){},i.onUnsubscribe=function(){},i.onPublish=function(){},i.onMessage=function(){},i.onWSFatal=function(){this.$3=!0,this.$23()},i.getStatus=function(){return this.$15},i.getRequestStatus=function(){return this.$16},i.$24=function(e){e!==this.$15&&(this.$5.debugTrace("LongPollingRunner","status changed to "+e+" from "+this.$15),this.$15=e,this.$12(this.$15,this.$16))},i.$25=function(e){this.$22&&e!==this.$16&&(this.$5.debugTrace("LongPollingRunner","request status changed to "+e+" from "+this.$16),this.$16=e,this.$12(this.$15,this.$16))},i.$26=function(){this.$17=0},i.$27=function(){this.$17++,this.$17>=s&&this.$24("LPError")},i.$28=function(){var e=r("MqttEnv").Env.genGk(r("MqttEnv").MqttGkNames.mqtt_lp_no_delay),t=r("MqttEnv").Env.genGk(r("MqttEnv").MqttGkNames.mqtt_ws_polling_enabled),n=r("MqttEnv").Env.genGk(r("MqttEnv").MqttGkNames.mqtt_fast_lp);if(this.$5.debugTrace("LongPollingRunner","_shouldPoll? pollNow:"+String(e)+" enabled:"+String(t)+" fastPoll:"+String(n)+" hasWSSupport:"+String(this.$4)+" hasWsSuccessBefore:"+String(this.$1)+" failureCount:"+this.$2+" wsFatal:"+String(this.$3)),!t)return!1;if(e)return this.$5.bumpCounter(c+".nd"),!0;if(!this.$4)return this.$5.bumpCounter(c+".na"),!0;if(this.$3)return this.$5.bumpCounter(c+".fatal"),!0;if(this.$1)return!1;if(n)if(t=Date.now()-this.$20,this.$21===d){if(this.$2>=1)return!0;if(t>u)return this.$5.bumpCounter(c+".fastdelay"),!0}else if(t>l)return this.$5.bumpCounter(c+".regulardelay"),!0;return this.$2>=3&&(this.$5.bumpCounter(c+".failure"),!0)},i.$29=function(){if(null!=this.$14)return!1;var e=this.$28();return!this.$13&&e&&(this.$5.bumpCounter("polling_kickin"),this.$13=!0,this.$24("LPActive"),this.$26()),this.$13&&!e&&(this.$5.bumpCounter("polling_stopped"),this.$13=!1,this.$24("LPInactive"),this.$26()),e},i.$30=function(){return this.$22?(this.$5.debugTrace("LongPollingRunner","Creating polling client using Fetch API"),new(n("MqttFetchClient"))):(this.$5.debugTrace("LongPollingRunner","Creating regular Polling client"),new(n("MqttLongPollingClient")))},i.$31=function(){this.$5.debugTrace("LongPollingRunner","Poll success"),this.$19.onPollRequestSuccess(),this.$18.reset(),this.$24("LPActive"),this.$26(),r("MqttEnv").Env.configWrite(f,d),this.$25("ReceivingData")},i.$32=function(e){var t=e.map(function(e){return e.topic}).join(",");for(this.$5.debugTrace("LongPollingRunner","Poll response received, message received:"+t),t=0;t<e.length;t++){var n=e[t];this.$19.onPollResponse(n.topic),this.$8(n.topic,n.payload,n.qos)}},i.$33=function(){this.$5.debugTrace("LongPollingRunner","Poll finish"),this.$19.onPollFinish(),this.$14&&this.$14.abort(),this.$14=null,this.$23(),this.$25("NotSent")},i.$34=function(e){this.$19.onPollRequestFailed(e),this.$14&&this.$14.abort(),this.$14=null,this.$18(),this.$27(),this.$25("NotSent")},e}(),a["default"]=e},98),__d("CometRelayEF",["Bootloader","BootloaderEvents","ClientConsistencyEventEmitter","CometSSREntrypoint","cometAsyncFetch","gkx","performanceAbsoluteNow","promiseDone"],function(e,t,n,r,i,o,a){"use strict";function s(e,t){if(n("gkx")("1334580")){e=r("CometSSREntrypoint").processRootEntryPoint(e,t);var i=[];if(e.forEach(function(e){e=e.name,u.has(e)||(i.push(e),r("BootloaderEvents").notifyHasteResponseEFStart("relay_3d",e))}),0!==i.length){var o=n("performanceAbsoluteNow")(),a=n("cometAsyncFetch")("/ajax/relay-ef/",{data:{queries:i},method:"POST"}).then(function(e){return{fetchPredictionsEnd:n("performanceAbsoluteNow")(),fetchPredictionsStart:o,payload:e}});i.forEach(function(e){return u.set(e,a)})}}}function e(e,t){if(n("gkx")("1334580")){var i=n("performanceAbsoluteNow")();s(e,t),(e=r("CometSSREntrypoint").processRootEntryPoint(e,t)).forEach(function(e){var t=e.name,o=u.get(t);o&&!0!==o&&n("promiseDone")(o,function(e){var o=e.fetchPredictionsEnd,a=e.fetchPredictionsStart;null!=(e=e.payload)&&"object"==typeof e&&(n("Bootloader").loadPredictedResourceMap(e.predictions[t],{onLog:function(e){return r("BootloaderEvents").notifyHasteResponseEF("relay_3d",t,{fetchPredictionsEnd:o,fetchPredictionsStart:a,fetchRsrcsStart:i,tierOne:e})}},e.consistency.rev),n("ClientConsistencyEventEmitter").emit("newEntry",e.consistency))}),u.set(e.name,!0)})}}var u=new Map;t={fetchPredictedResources:e,fetchPredictions:s},a["default"]=t},98),__d("CometOnBeforeUnloadDialog.react",["fbt","CometCardedDialogLegacy.react","CometTrackingNodeProvider.react","TetraButtonGroup.react","TetraText.react","react"],function(e,t,n,r,i,o,a,s){"use strict";function e(e){var t=e.body,r=e.cancel,i=e.confirm,o=e.disabled;o=void 0!==o&&o;var a=e.onClose,l=e.onCloseButtonPress,c=e.primaryAction,f=e.secondaryAction;e=e.title;var d=function(){c(),a()},g=function(){f(),a()};return u.jsx(n("CometTrackingNodeProvider.react"),{trackingNode:163,children:u.jsxs(n("CometCardedDialogLegacy.react"),{onClose:function(){l(),a()},testid:void 0,title:e,titleHorizontalAlignment:"start",withCloseButton:!0,children:[u.jsx("div",{className:"xz9dl7a x1pi30zi xsag5q8 x1swvt13 x1n2onr6",children:u.jsx(n("TetraText.react"),{type:"body3",children:t})}),u.jsx("div",{className:"x78zum5 x1q0g3np x13a6bvl xexx8yu x4uap5 x1l90r2v xkhd6sd",children:u.jsx(n("TetraButtonGroup.react"),{direction:"backward",paddingHorizontal:16,primary:{disabled:o,label:null!=(e=i)?e:s._("Confirm"),onPress:d,testid:"CometOnBeforeUnloadDialogConfirmButton"},secondary:{disabled:o,label:null!=(t=r)?t:s._("Cancel"),onPress:g,reduceEmphasis:!0,testid:"CometOnBeforeUnloadDialogCancelButton"}})})]})})}var u=r("react");e.displayName=e.name+" [from "+o.id+"]",a["default"]=e},98),__d("CometRouteActorToaster.react",["fbt","Actor","CometRelay","CometRouteActorToasterBlocklist","CometRouteActorToasterQuery.graphql","TetraProfilePhoto.react","TetraText.react","WebPixelRatio","cometPushToast","getTopMostRoute","promiseDone","react","requireDeferred","useCometRouterState","useCurrentRoute","useProfileCometIsViewAs","useRouteReferrer"],function(e,t,n,r,i,o,a,s){"use strict";function u(e,t){return t?c.jsx(n("TetraText.react"),{color:"primary",type:"body3",children:s._("You're now interacting as {=m2}",[s._implicitParam("=m2",c.jsx(n("TetraText.react"),{type:"bodyLink3",children:s._("your profile")}))])}):c.jsx(n("TetraText.react"),{color:"primary",type:"body3",children:s._("You're now interacting as {actor}",[s._param("actor",c.jsx(n("TetraText.react"),{type:"bodyLink3",children:e}))])})}function e(){var e=r("CometRelay").useRelayEnvironment(),t=r("Actor").useActor(),i=t[0];t=n("useCometRouterState")();var o=n("useCurrentRoute")(),a=n("useRouteReferrer")(),s=n("useProfileCometIsViewAs")(),l=d({actorID:null==a?void 0:a.actorID,tracePolicy:null==a?void 0:a.tracePolicy});a=n("CometRouteActorToasterBlocklist").route_trace_policies;var C=null==o?void 0:o.tracePolicy;a=a.includes(C);var h=(o=o===(t=null!=t?n("getTopMostRoute")(t):null))&&!a&&!s;return f(function(){var t,o=null==(t=l.current)?void 0:t.actorID,a=null==(t=l.current)?void 0:t.tracePolicy;if(null!=o&&o!==i&&h){t=function(e){var t,i;null!=(t=null==e?void 0:null==(t=e.viewer)?void 0:null==(t=t.actor)?void 0:t.name)&&(i="User"===(null==e?void 0:null==(i=e.viewer)?void 0:null==(i=i.actor)?void 0:i.__typename),e=null!=(e=null==e?void 0:null==(e=e.viewer)?void 0:null==(e=e.actor)?void 0:null==(e=e.toast_icon)?void 0:e.uri)?c.jsx(n("TetraProfilePhoto.react"),{shape:"circle",size:32,source:{uri:e}}):null,t=u(t,i),r("cometPushToast").cometPushToast({icon:e,message:t}),g.onReady(function(e){(e=e.log)(function(){var e;return{destination:null!=(e=C)?e:"comet.app",destination_type:"comet_route",source:a,source_type:"comet_route",source_userid:o}})}))};var s={scale:r("WebPixelRatio").get()};n("promiseDone")(r("CometRelay").fetchQuery(e,m,s).toPromise(),t)}l.current={actorID:i,tracePolicy:C}},[i,C,e,h]),null}var l,c=r("react"),f=(i=r("react")).useEffect,d=i.useRef,g=n("requireDeferred")("AcfToastImpressionFalcoEvent").__setRef("CometRouteActorToaster.react"),m=void 0!==l?l:l=t("CometRouteActorToasterQuery.graphql");a["default"]=e},98);