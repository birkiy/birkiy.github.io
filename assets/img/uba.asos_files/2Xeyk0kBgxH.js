__d("CometNotificationsRootContext",["react"],function(e,t,n,r,a,i,o){"use strict";t={isNotificationsRoute:!1,source:null},n=r("react").createContext(t),o["default"]=n},98),__d("useSEOLoggedOutWebCrawler",["gkx"],function(e,t,n,r,a,i,o){"use strict";function e(){return n("gkx")("1779508")}o["default"]=e},98),__d("CometFullScreen",["Promise"],function(e,t,n,r,a,i){"use strict";function e(e){var n=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen;return"function"==typeof n?n.call(e):t("Promise").reject()}function n(){var e=document.exitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitExitFullscreen;return"function"==typeof e?e.call(document):t("Promise").reject()}function r(){return!(!0!==document.webkitFullscreenEnabled&&!0!==document.mozFullScreenEnabled&&!0!==document.msFullscreenEnabled&&!0!==document.fullscreenEnabled||"function"!=typeof document.webkitExitFullscreen&&"function"!=typeof document.mozCancelFullScreen&&"function"!=typeof document.msExitFullscreen&&"function"!=typeof document.exitFullscreen)}function o(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||null}function a(){return null!=o()}function l(){return["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"]}function s(e){var t=window.document,n=!1,r=!0;return l().forEach(function(a){t.addEventListener(a,e,{capture:n,passive:r})}),function(){l().forEach(function(r){t.removeEventListener(r,e,n)})}}i.requestFullScreen=e,i.exitFullScreen=n,i.isSupported=r,i.getFullScreenElement=o,i.isFullScreen=a,i.getFullScreenChangeEventNames=l,i.subscribeToFullScreenChangeEvent=s},66),__d("OzOneSemanticHandlerUtils",["ConstUriUtils","qex","recoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function l(e,t,n){null!=t&&t.indexOf("+RE")>=0&&e.retry(),null!=n&&n()}function e(e,t){var r=t.error,a=(r=r.getExtra()).code;r=r.headers;var i=null;switch(null==a&&n("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player"),null==r&&n("recoverableViolation")("A ONE Semantic error response must contain response Headers.","comet_video_player"),null!=r&&(i=null!=(r=r=r.get("x-fb-one-variant"))?r:null),e=(r=JSON.parse(e.getString("network_retry_intervals_json","{}")))[a],a){case"410":t.endStream();break;case"404":l(t,i,function(){(n("qex")._("1634")||!1)&&t.retry({behavior:"recover_failed_request"})});break;case"429":t.retry(e)}}function s(e){if(null!=e){e=parseInt(e,10);var t=n("qex")._("1635");if(null!=t&&t>0)return!isNaN(e)&&e>0&&e<=t}return!1}function u(e,t){return null!=e&&null!=t&&(e=parseInt(e,10),t=parseInt(t,10),!isNaN(e)&&!isNaN(t)&&e>0&&e<=t)}function d(e){return null!=e&&(e=r("ConstUriUtils").getUri(e))&&(e=e.getQueryParam("os_param"))?String(e).toString():null}function c(e,t){var r=null!=e;return s(t)||(r||!!n("qex")._("1636"))&&u(t,e)}function t(e){var t=e.getExtra();t=p(t=t.headers);var r=(e=e.getExtra()).code;return e=e.url,null!=t&&null==r?(n("recoverableViolation")("A ONE Semantic error response must have an error code.","comet_video_player"),!1):c(r=d(e),t)}function p(e){return e&&null!=(e=e.get("x-fb-one"))&&parseInt(e,10)>0?e:null}function a(e,t,n){var r=null,a=null;null!=t&&(null!=(r=d(t))&&e.setOneReqWave(parseInt(r,10))),(t=null==n?void 0:n.headers)&&(null!=(a=p(t))&&e.setOneResWave(parseInt(a,10))),e.setOneObserved(c(r,a))}o.maybeRetryForVariant=l,o.evaluateOneSemanticsResponse=e,o.isOneSemanticsForcedForResponseWave=s,o.isOneSemanticsEnabledForWave=u,o.getOneSemanticRequestWave=d,o.shouldRespondWithOneSemantics=t,o.getOneSemanticResponseWave=p,o.setOneSemanticFetchStreamLoggingAttributes=a},98),__d("handleOzManifestFetchErrorEvent",[],function(e,t,n,r,a,i){"use strict";function e(e,t){var n=e.getNumber("initial_manifest_request_retry_count",0),r=JSON.parse(e.getString("network_retry_intervals_json","{}")),a=e.getNumber("live_max_try_attempts_on_404",1),i=["404","503"];e.getBool("live_gracefully_handle_no_network",!1)&&i.push("0"),e.getBool("live_gracefully_handle_410",!1)&&i.push("410"),e.getBool("live_gracefully_handle_502",!1)&&i.push("502"),e.getBool("live_gracefully_handle_429",!1)&&i.push("429"),e.getBool("live_gracefully_handle_504",!1)&&i.push("504"),e.getBool("normalize_mpd_fetch_errors",!1)&&i.push("20");var o=t.error.getExtra().code;if(!e.getBool("no_retry_on_empty_string_error_code",!1)||""!==o)if(e.getBool("handle_mpd_null_error_codes",!1)&&(o=null!=o?o:null),r=r[o],t.isInitialRequest)"number"==typeof r&&r>0&&t.retryAttemptCount<n&&t.retry({waitMs:r});else if(null!=o&&i.indexOf(o)>-1)switch(o){case"410":t.endStream();break;case"404":a<t.consecutiveFailuresForErrorCode&&t.retry();break;case"504":case"502":case"503":case"20":case"0":t.retry();break;case"429":"number"==typeof r&&r>0&&t.retry({waitMs:r})}else null===o&&e.getBool("handle_mpd_null_error_codes",!1)&&t.retry()}i["default"]=e},66),__d("handleOzStreamErrorEvent",[],function(e,t,n,r,a,i){"use strict";function e(e,t){var n=t.error.getExtra().code;if(!e.getBool("no_retry_on_empty_string_error_code",!1)||""!==n)if(e.getBool("retry_null_error_code_in_stream",!1)&&null==n)t.retry();else{var r=JSON.parse(e.getString("network_end_broadcasts_json","[]"));if(r.includes(n))t.endStream();else if((r=JSON.parse(e.getString("network_skip_json","[]"))).includes(n))t.retry();else{r=e.getBool("back_off_pdash_504_retry",!0)?o[t.retryAttemptCount]:0;var a=JSON.parse(e.getString("network_reload_mpd_json","[]")),i=e.getBool("fix_reload_manifest_retry",!1);(!e.getBool("back_off_pdash_504_retry",!0)||null!=r||i&&!a.includes(n))&&(null!=r&&a.includes(n)?e.getBool("network_reload_mpd_json_retry",!1)?t.retry({behavior:"recover_failed_request",waitMs:1e3*r}):t.retry({waitMs:1e3*r}):(i=JSON.parse(e.getString("network_retry_intervals_json",'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}')),null==(a=null!=n?i[n]:null)||(e.getBool("network_retry_intervals_json_retry",!1)?t.retry({behavior:"retry_failed_request",waitMs:a}):t.retry({waitMs:a}))))}}}var o=[0,1,1,2,3,5,8,13,21,34];i["default"]=e},66),__d("OzOneSemanticHandler",["OzOneSemanticHandlerUtils","handleOzManifestFetchErrorEvent","handleOzStreamErrorEvent","qex"],function(e,t,n,r,a,i,o){"use strict";function e(e,t){var a=t.error;n("qex")._("1633")&&r("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(a)?r("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(e,t):n("handleOzManifestFetchErrorEvent")(e,t)}function t(e,t){var a=t.error;n("qex")._("1633")&&r("OzOneSemanticHandlerUtils").shouldRespondWithOneSemantics(a)?r("OzOneSemanticHandlerUtils").evaluateOneSemanticsResponse(e,t):n("handleOzStreamErrorEvent")(e,t)}o.handleManifestFetchErrorEvent=e,o.handleStreamErrorEvent=t},98),__d("useEventCallbackOn",["react"],function(e,t,n,r,a,i,o){"use strict";function e(e,t,n){l(function(){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}},[e,t,n])}var l=r("react").useEffect;o["default"]=e},98),__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],function(e,t,n,r,a,i,o){"use strict";function t(){var t=e.document;return"undefined"!=typeof t.hidden?"visibilitychange":"undefined"!=typeof t.mozHidden?"mozvisibilitychange":"undefined"!=typeof t.msHidden?"msvisibilitychange":"undefined"!=typeof t.webkitHidden?"webkitvisibilitychange":"visibilitychange"}function l(){var t=e.document;return"undefined"!=typeof t.hidden?t.hidden:"undefined"!=typeof t.mozHidden?t.mozHidden:"undefined"!=typeof t.msHidden?t.msHidden:"undefined"!=typeof t.webkitHidden&&t.webkitHidden}function s(t){var n=!e.document.hasFocus||e.document.hasFocus();return l()||!t&&!n}function u(){return l()}function a(t){var r=!0===(null==t?void 0:t.noPauseOnBlurOrFocus),a=c(function(){return s(r)}),i=a[0],o=a[1],l=(a=c(function(){return u()}))[0],m=a[1],_=!!t&&!0===t.scrollTerminatesHiddenOrBlurred;t=a=d(function(){o(s(r)),m(u())},[o,r]);var g=d(function(){s(r)&&_&&i&&o(!1)},[i,r,_]);return r&&(t=n("emptyFunction")),n("useEventCallbackOn")(e.window,"blur",t),n("useEventCallbackOn")(e.window,"focus",t),n("useEventCallbackOn")(e.document,p,a),n("useEventCallbackOn")(e.window,"scroll",g),{isDocumentHidden:l,isDocumentHiddenOrBlurred:i}}var d=(i=r("react")).useCallback,c=i.useState,p=t();o["default"]=a},98),__d("OzCDNSignedQueryParams",["ConstUriUtils"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(){this.$1={}}var t=e.prototype;return t.$2=function(e,t,n){null==this.$1[e]&&(this.$1[e]={}),this.$1[e][t]=n},t.get=function(e){return null==(e=this.$1[e])?null:e},t.update=function(e){if(null!=(e=r("ConstUriUtils").getUri(e))){var t=e.getQueryParams();e=e.getDomain()+e.getPath(),null!=t.get("oe")&&this.$2(e,"oe",String(t.get("oe"))),null!=t.get("oh")&&this.$2(e,"oh",String(t.get("oh")))}},e}(),o["default"]=e},98),__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.children,n=e.isDesktopPictureInPicture,a=e.isFullscreen;return e=e.videoPlayerPassiveViewabilityInfo,l.jsx(r("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:e,children:l.jsx(r("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:n,children:l.jsx(r("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:a,children:t})})})}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("wrapWithContextProviders",["react"],function(e,t,n,r,a,i,o){"use strict";function e(e,t){return t.reduceRight(function(e,t){return t(e)},e)}function t(e,t){return function(n){return l.jsx(e.Provider,{value:t,children:n})}}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o.wrapWithContextProviders=e,o.makeRenderProviderFn=t},98),__d("VideoPlayerComponentContainer.react",["CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:1269159","react","setTimeout","wrapWithContextProviders"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t=m(e);p(function(){t.current=e},[e]);var r=_(!1),a=r[0],i=r[1],o=(r=(r=_(function(){var e=null;return{cleanup:function(){e&&e()},pingNotIdle:function(){e&&e(),i(!1);var r=n("setTimeout")(function(){i(!0)},t.current);e=function(){n("clearTimeout")(r),e=null}}}}))[0]).cleanup;return r=r.pingNotIdle,p(function(){return o},[o]),{isIdle:a,pingNotIdle:r}}function s(){var e=_(!1),t=e[0],n=e[1],r=(e=l(e=3e3)).isIdle,a=e.pingNotIdle;e=c(function(){n(!0),a()},[a]);var i=c(function(){n(!1),a()},[a]),o=c(function(){n(!0),a()},[a]);return{isHovering:t,isIdle:r,onMouseDown:c(function(){a()},[a]),onMouseEnter:e,onMouseLeave:i,onMouseMove:o,onMouseUp:c(function(){a()},[a])}}function u(e){var t=s(),a=t.isHovering,i=t.isIdle,o=t.onMouseDown,l=t.onMouseEnter,u=t.onMouseLeave,c=t.onMouseMove;t=t.onMouseUp;var p=r("VideoPlayerHooks").useIsFullscreen();return d.jsx("div",babelHelpers["extends"]({className:"x5yr21d x10l6tqk x13vifvy xh8yej3"+(p&&i?" xjfk50j":"")},n("CometVisualCompletionAttributes").IGNORE,{onMouseDown:o,onMouseEnter:l,onMouseLeave:u,onMouseMove:c,onMouseUp:t,children:d.jsx(r("VideoPlayerContexts").VideoPlayerMouseHoverContext.Provider,{value:a,children:d.jsx(r("VideoPlayerContexts").VideoPlayerMouseIdleContext.Provider,{value:i,children:e.children})})}))}function e(e){var a=e.children,i=(e=babelHelpers.objectWithoutPropertiesLoose(e,["children"])).adClientToken,o=e.audioAvailabilityInfo,l=e.autoplayGatingResult,s=e.broadcastStatus,c=e.canAutoplay,p=e.controller,m=e.dimensions,g=e.initialTracePolicy,f=e.instanceKey,y=e.isDesktopPictureInPicture,v=e.isFullscreen,h=e.isNCSR,P=e.isPremiumMusicVideo,b=e.lastMuteReason,S=e.lastPauseReason,C=e.lastPlayReason,w=e.videoFBID,E=e.videoPixelsAspectRatio,I=e.videoPlayerPassiveViewabilityInfo,V=e.videoState,D=e.volumeSetting,k=V.activeCaptions,x=V.activeEmsgBoxes,T=V.availableVideoQualities,R=V.bufferEnd,O=V.captionDisplayStyle,z=V.captionsLoaded,F=V.captionsVisible,$=V.currentVideoQuality,L=V.duration,M=V.ended,A=V.error,B=V.inbandCaptionsAutogenerated,U=V.inPlayStalling,N=V.isAbrEnabled,H=V.isExternalMedia,q=V.isLiveRewindActive,W=V.lastPlayedTimeMs,Q=V.latencyLevel,j=V.loopCount,G=V.loopCurrent,J=V.muted,K=V.paused,X=V.playerImplementationName,Z=V.playing,Y=V.seekableRanges,ee=V.seeking,te=V.selectedVideoQuality,ne=V.stalling,re=V.streamInterrupted,ae=V.targetAudioQuality,ie=V.targetPlaybackRate,oe=V.targetVideoQuality,le=V.volume;V=V.watchTimeMs,a=d.jsx(u,{children:a});var se=(le=_(le))[0];return le=le[1],t("cr:1269159")(f,{controller:p,coreVideoStates:e,videoPlayerPassiveViewabilityInfo:I}),a=r("wrapWithContextProviders").wrapWithContextProviders(a,[r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").VideoFBIDContext,w),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").StallingContext,ne),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").PlayingContext,Z),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").InPlayStallingContext,U),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").BufferEndContext,R),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LastMuteReasonContext,b),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LastPlayReasonContext,C),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LastPauseReasonContext,S),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").PausedContext,K),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").CurrentVideoQualityContext,$),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").MutedContext,J),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").VolumeContext,{setVolume:le,volume:se}),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").SelectedVideoQualityContext,te),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").SeekingContext,ee),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").DurationContext,L),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").EndedContext,M),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").ErrorContext,A),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").DimensionsContext,m||null),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").InstanceKeyContext,f),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").ControllerContext,p),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").AvailableVideoQualitiesContext,T),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").PlayerImplementationNameContext,X),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").IsAbrEnabledContext,N),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").TargetAudioQualityContext,ae),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").TargetVideoQualityContext,oe),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").PlaybackRateContext,ie),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").CanAutoplayContext,c),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").VolumeSettingContext,D),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").AutoplayGatingResultContext,l),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").BroadcastStatusContext,s),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LoopCountContext,j),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LoopCurrentContext,G),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").AdClientTokenContext,i),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").ActiveCaptionsContext,k),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").CaptionsVisibleContext,F),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").CaptionDisplayStyleContext,O),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").CaptionsLoadedContext,z),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").InbandCaptionsAutogeneratedContext,B),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").StreamInterruptedContext,re),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").WatchTimeContext,V),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LastPlayedTimeContext,W),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").SeekableRangesContext,Y),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").LatencyLevelContext,Q),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").IsLiveRewindActiveContext,q),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").AudioAvailabilityInfoContext,o),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").IsNCSRContext,h),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").IsPremiumMusicVideoContext,P),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").InitialTracePolicyContext,g),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").ActiveEmsgBoxesContext,x),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").IsExternalMediaContext,H),r("wrapWithContextProviders").makeRenderProviderFn(r("VideoPlayerContexts").VideoPixelsAspectRatioContext,null!=(e=E)?e:null),function(e){return d.jsx(n("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:y,isFullscreen:v,videoPlayerPassiveViewabilityInfo:I,children:e})}]),d.jsx("div",{"data-instancekey":f,"data-testid":void 0,children:a})}var d=r("react"),c=(a=r("react")).useCallback,p=a.useEffect,m=a.useRef,_=a.useState;u.displayName=u.name+" [from "+i.id+"]",e.displayName=e.name+" [from "+i.id+"]",a=d.memo(e),o["default"]=a},98),__d("GlobalVideoPortsID",["cometUniqueID","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(){return"id-pv-"+n("cometUniqueID")()}function t(e){if("string"==typeof e){var t="id-pv-";if(0===e.indexOf(t)&&e.length>t.length)return e;throw n("unrecoverableViolation")('Expected a GlobalVideoPortsVideoID, got a string that does not look like it: "'+e+'"',"comet_video_player")}return null}function r(){return"id-pp-"+n("cometUniqueID")()}o.makeVideoID=e,o.ensureVideoID=t,o.makePlaceID=r},98),__d("VideoPlayerFullscreenController",["CometFullScreen","removeFromArray","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function l(e){return null!=e.current&&r("CometFullScreen").getFullScreenElement()===e.current}function e(e){function t(){a.forEach(function(e){e()})}var a=[],i=null;return{getIsFullscreen:function(){return l(e)},requestSetIsFullscreen:function(t,a){var i=e.current;if(null==i)throw n("unrecoverableViolation")("Requested full screen while the element is not present","comet_video_player");r("CometFullScreen").isSupported()?t!==l(e)&&(!0===t?r("CometFullScreen").requestFullScreen(i):!1===t&&r("CometFullScreen").exitFullScreen()):t&&null!=a&&"function"==typeof a.webkitEnterFullScreen?a.webkitEnterFullScreen():!t&&null!=a&&"function"==typeof a.webkitExitFullScreen&&a.webkitExitFullscreen()},subscribe:function(e){return 0===a.length&&null==i&&(i=r("CometFullScreen").subscribeToFullScreenChangeEvent(t)),a.push(e),{remove:function(){n("removeFromArray")(a,e),0===a.length&&null!=i&&(i(),i=null)}}}}}o.createFullscreenController=e},98),__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","usePrevious"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.portalingEnabled;e=e.portalingFromVideoID;var n=r("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),a=r("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),i=r("GlobalVideoPortsContexts").useGlobalVideoPortsState(),o=null!=a&&null!=i,d=(o||null!=n)&&(t||null!=e),c=s(function(){return r("GlobalVideoPortsID").makePlaceID()});c=c[0];var p=s(function(){return r("GlobalVideoPortsID").makeVideoID()}),m=p[0];return p=p[1],e=(t=d&&t&&null!=e)&&null!=e?e:m,u(t,p),l(function(){d&&!o&&n&&n()},[o,d,n]),{canBecomePortableLater:d,currentVideoID:e,globalVideoPortsManager:a,globalVideoPortsState:i,thisPlaceID:c}}var l=(t=r("react")).useEffect,s=t.useState;a=function(e,t){var a=n("usePrevious")(e);l(function(){e!==a&&null!==a&&a&&!e&&t(r("GlobalVideoPortsID").makeVideoID())},[e,a,t])},i=function(e,t){var n=s(null),a=n[0];n=n[1],e!==a&&(null!==a&&a&&!e&&t(r("GlobalVideoPortsID").makeVideoID()),n(e))};var u=n("gkx")("1375802")?i:a;o.useRegenerateUniqueVideoID_exportedForTest=u,o.useVideoPlayerPortalingPlaceState=e},98),__d("getOwnObjectValues",[],function(e,t,n,r,a,i){function e(e){return Object.keys(e).map(function(t){return e[t]})}i["default"]=e},66),__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","getOwnObjectValues","killswitch","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.coreVideoPlayerMetaData,a=e.currentPlaceID,i=e.currentVideoID,o=e.fullscreenController,p=e.globalVideoPortsManager,m=e.globalVideoPortsState_DEPRECATED,_=e.implementations,g=e.isFullscreen,f=e.portablePlaceMetaData,y=e.previousPlaceMetaData,v=e.renderComponents,h=e.renderPlaceholder,P=e.thisPlaceID,b=e.trackingDataEncrypted,S=e.trackingNodes,C=e.viewportMarginsForViewability,w=(e=c(function(){return r("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})}))[0],E=d(null);u(function(){p.addOrUpdatePlace({coreVideoPlayerMetaData:t,fullscreenController:o,implementations:_,injectCoreVideoStatesRef:E,isFullscreen:g,portablePlaceContainer:w,portablePlaceID:P,portablePlaceMetaData:f,portableVideoID:i,renderComponents:v,renderPlaceholder:h,trackingDataEncrypted:b,trackingNodes:S,viewportMarginsForViewability:C})},[].concat(n("getOwnObjectValues")(t),[i,o,g,p,w],n("getOwnObjectValues")(f||{}),[v,h,P,b,S,C])),u(function(){return function(){p.removePlace({portablePlaceID:P})}},[p,P]),e=s(n("BaseContextualLayerAnchorRootContext"));var I=d(null);return l.jsxs(n("BaseContextualLayerAnchorRootContext").Provider,{value:g&&!n("killswitch")("WORKPLACE_VIDEO_FULLSCREEN_CONTEXT_LAYER_ROOT")?I:e,children:[l.jsx(r("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:w},P),l.jsx(r("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:null!=m?null!=(e=null==(e=p.getCurrentPlaceStateForVideo(m,i))?void 0:e.portablePlaceID)?e:null:a,currentVideoID:i,injectCoreVideoStatesRef:E,previousPlaceMetaData:null!=m?null!=(a=null==(e=p.getPortableVideoState(m,i))?void 0:e.previousPlaceMetaData)?a:null:y,renderComponents:v,thisPlaceID:P}),l.jsx("div",{ref:I})]})}var l=r("react"),s=(t=r("react")).useContext,u=t.useEffect,d=t.useRef,c=t.useState;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","gkx","react","recoverableViolation","useStable","useUnsafeRef_DEPRECATED"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.implementations,a=e.portalingEnabled,i=e.portalingFromVideoID,o=e.portalingPlaceMetaData,m=e.renderComponents,_=e.renderPlaceholder;e=babelHelpers.objectWithoutPropertiesLoose(e,["implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","renderComponents","renderPlaceholder"]),u(function(){return function(){}},[]);var g=null!=i?r("GlobalVideoPortsID").ensureVideoID(i):null;null!=i&&null==g&&n("recoverableViolation")("The provided portalingFromVideoID ("+String(i)+") does not look like such an ID. The video player will not use portaling until a valid ID is provided","comet_video_player"),a=(i=r("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState({portalingEnabled:a,portalingFromVideoID:g})).canBecomePortableLater,g=i.currentVideoID;var f=i.globalVideoPortsManager,y=i.globalVideoPortsState;i=i.thisPlaceID;var v=s(n("BaseViewportMarginsContext")),h=n("useUnsafeRef_DEPRECATED")(null),P=n("useStable")(function(){return r("VideoPlayerFullscreenController").createFullscreenController(h)}),b=d(P.getIsFullscreen()),S=b[0],C=b[1];u(function(){var e=P.subscribe(function(){var e=P.getIsFullscreen();C(e)});return C(P.getIsFullscreen()),function(){e.remove()}},[P,C]),b=(b=s(n("CometTrackingNodesContext"))).join("");var w=s(n("CometTrackingCodeContext"));w=null!=(w=w.encrypted_tracking[0])?w:"",v=S?c:v;var E="comet-video-player-place"+(null!=e.videoFBID?"-vid-"+e.videoFBID:"");return a?f&&y?l.jsx(p,{debugRole:null,ref:h,testid:void 0,children:l.jsx(n("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:e,currentPlaceID:n("gkx")("4184")&&null!=(a=null==(E=f.getCurrentPlaceStateForVideo(y,g))?void 0:E.portablePlaceID)?a:null,currentVideoID:g,fullscreenController:P,globalVideoPortsManager:f,globalVideoPortsState_DEPRECATED:n("gkx")("4184")?null:y,implementations:t,isFullscreen:S,portablePlaceMetaData:o,previousPlaceMetaData:n("gkx")("4184")&&null!=(a=null==(E=f.getPortableVideoState(y,g))?void 0:E.previousPlaceMetaData)?a:null,renderComponents:m,renderPlaceholder:_,thisPlaceID:i,trackingDataEncrypted:w,trackingNodes:b,viewportMarginsForViewability:v})}):l.jsx(p,{debugRole:null,ref:h,testid:void 0,children:l.jsx(r("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:g,previousPlaceMetaData:null,renderPlaceholder:_,thisPlaceID:i,videoPixelsAspectRatio:null!=(t=e.videoPixelsAspectRatio)?t:null})}):l.jsx(p,{debugRole:null,ref:h,testid:void 0,children:l.jsx(r("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:i,currentVideoID:g,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:i,children:l.jsx(n("CoreVideoPlayer.react"),babelHelpers["extends"]({},e,{fullscreenController:P,implementations:t,isFullscreen:S,renderWithCoreVideoStates:m,trackingDataEncrypted:w,trackingNodes:b,viewportMarginsForViewability:v}))})})}var l=r("react"),s=(t=r("react")).useContext,u=t.useEffect,d=t.useState,c={bottom:0,left:0,right:0,top:0},p=l.forwardRef(function(e,t){var n=e.children,a=e.debugRole;return e=e.testid,l.jsx(r("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:t,testid:void 0,children:n})});e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerTracePolicyContext",["react"],function(e,t,n,r,a,i,o){"use strict";function e(){return l(s)}t=r("react");var l=r("react").useContext;n={initialTracePolicy:null,routeTracePolicy:null};var s=t.createContext(n);o.VideoPlayerTracePolicyContext=s,o.useVideoPlayerTracePolicy=e},98),__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.children,n=e.initialTracePolicy,a=e.routeTracePolicy,i=(e=u(n))[0],o=e[1],d=(e=u(a))[0],c=e[1];return s(function(){i!==n&&o(n),d!==a&&c(a)},[n,a,i,d]),l.jsx(r("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:{initialTracePolicy:i,routeTracePolicy:d},children:t})}var l=r("react"),s=(t=r("react")).useEffect,u=t.useState;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.children,r=e.implementations,a=e.portalingEnabled,i=e.portalingFromVideoID,o=e.portalingPlaceMetaData,u=e.portalingRenderPlaceholder;e=babelHelpers.objectWithoutPropertiesLoose(e,["children","implementations","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder"]);var d=s(function(e){return l.jsx(n("VideoPlayerComponentContainer.react"),babelHelpers["extends"]({},e,{children:t}))},[t]);return l.jsx(n("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:e.initialTracePolicy,routeTracePolicy:e.routeTracePolicy,children:l.jsx(n("VideoPlayerPortalingPlace.react"),babelHelpers["extends"]({},e,{implementations:r,portalingEnabled:a,portalingFromVideoID:i,portalingPlaceMetaData:o,renderComponents:d,renderPlaceholder:u}))})}var l=r("react"),s=r("react").useCallback;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("oz-player/utils/OzError",[],function(e,t,n,r,a,i){"use strict";e=function(e){function t(t){var n;if((n=e.call(this,t.description)||this).$OzError1=t,n.name=t.type,n.message=t.description,"string"!=typeof(t=n.stack)||""===t){if(Error.captureStackTrace){var r={};Error.captureStackTrace(r,n.constructor),t=r.stack}else(r=(new Error).stack.split("\n")).splice(/^Error/.test(r[0])?1:0,1),t=r.join("\n");n.stack="string"==typeof t&&""!==t?t.replace(/^Error/,n.name):""}return n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getExtra=function(){return this.$OzError1.extra||{}},n.getType=function(){return this.$OzError1.type},n.getDescription=function(){return this.$OzError1.description},t}(babelHelpers.wrapNativeSuper(Error)),i["default"]=e},66),__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzError","react"],function(e,t,n,r,a,i,o){"use strict";t=function(e){function t(){for(var t,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=n=e.call.apply(e,[this].concat(a))||this,n.state={error:null},n.suppressReactDefaultErrorLogging=!0,t||babelHelpers.assertThisInitialized(n)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromError=function(e){return{error:n("getErrorSafe")(e)}};var r=t.prototype;return r.componentDidCatch=function(e,t){t=t.componentStack;var r=n("getErrorSafe")(e);r.componentStack=t;var a=(t=this.props).description,i=t.onError;t=t.project,e=e instanceof n("oz-player/utils/OzError")?e.getType():null!=e&&"string"==typeof e.name?e.name:r.name,r.name=e,e="VideoPlayerErrorBoundary caught an "+e,null!=a&&(e=e+" ("+a+")");var o=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha"];a=(a=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"]).every(function(e){return r.name!==e})&&o.every(function(e){return!r.message.startsWith(e)}),o=n("FBLogger")(null==t?"comet_video_player":t).catching(r),a?o.fatal(e):o.warn(e),null!=i&&i(r)},r.render=function(){var e=this.props,t=e.children;e=e.fallback;var n=this.state.error;return n?"function"==typeof e?e(n):e:t},t}(r("react").PureComponent),o["default"]=t},98),__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,a,i,o){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1914651"),a=r("FalcoLoggerInternal").create("video_player_www",e),o["default"]=a},98),__d("VideoPlayerWwwLogger",["VideoPlayerWwwFalcoEvent"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t,n=null!==e.logData.live_trace_stream_id&&null!==e.logData.live_trace_stream_type;return{access_token:e.logData.access_token,ad_client_token:e.logData.ad_client_token,attribution_id:e.logData.attribution_id,attribution_id_v2:e.logData.attribution_id_v2,attribution_id_v2_root:e.logData.attribution_id_v2_root,audio_only:e.logData.audio_only,audio_representation_id:e.logData.audio_representation_id,autoplay_eligible:e.logData.autoplay_eligible,autoplay_failure_reasons:e.logData.autoplay_failure_reasons,autoplay_setting:e.logData.autoplay_setting,available_qualities:e.logData.available_qualities,broadcaster_origin:e.logData.broadcaster_origin,browser_tab_id:e.logData.browser_tab_id,caption_state:e.logData.caption_state,cast_client_app_id:e.logData.cast_client_app_id,client_latency_setting:e.logData.client_latency_setting,
current_playback_speed:e.logData.current_playback_speed,current_viewability_percentage:Number(e.logData.current_viewability_percentage),current_volume:e.logData.current_volume,dash_perf_logging_enabled:e.logData.dash_perf_logging_enabled,data_connection_quality:e.logData.data_connection_quality,debug_reason:e.logData.debug_reason,device_id:e.logData.device_id,device_type:e.logData.device_type,dropped_frame_count:Number(e.logData.dropped_frame_count),error:e.logData.error,error_code:e.logData.error_code,error_description:e.logData.error_description,error_domain:e.logData.error_domain,error_type:e.logData.error_type,error_user_info:e.logData.error_user_info,event_name:e.eventType,event_seq_num:e.logData.event_seq_num,external_log_id:e.logData.external_log_id,external_log_type:e.logData.external_log_id,fb_manifest_identifier:e.logData.fb_manifest_identifier,feed_aggregation_type:e.logData.feed_aggregation_type,feed_position:e.logData.feed_position,frame_events:e.logData.frame_events,ft:e.logData.ft,imf_emsg_id:e.logData.imf_emsg_id,imf_event_type:e.logData.imf_event_type,imf_topic:e.logData.imf_topic,interrupt_count:null!==e.logData.interrupt_count?Number(e.logData.interrupt_count):null,interrupt_time:Number(e.logData.interrupt_time),is_abr_enabled:e.logData.is_abr_enabled,is_fbms:e.logData.is_fbms,is_live_preview:null!=(t=e.logData.is_live_preview)&&t,is_live_video_rewound:e.logData.is_live_video_rewound,is_p2p_playback:e.logData.is_p2p_playback,is_pip:e.logData.is_pip,is_predictive_playback:e.logData.is_predictive_playback,is_sound_on:e.logData.is_sound_on,is_stalling:e.logData.is_stalling,is_templated_manifest:e.logData.is_templated_manifest,last_viewability_percentage:Number(e.logData.last_viewability_percentage),live_trace_source_id:e.logData.live_trace_source_id,live_trace_stream_id:n?e.logData.live_trace_stream_id:null,live_trace_stream_type:n?e.logData.live_trace_stream_type:null,mpd_validation_errors:e.logData.mpd_validation_errors,network_connected:e.logData.network_connected,next_representation_id:e.logData.next_representation_id,notification_id:e.logData.notification_id,notification_medium:e.logData.notification_medium,offset_ms:null!=e.logData.offset_ms?String(e.logData.offset_ms):null,permalink_share_id:e.logData.permalink_share_id,playback_caption_format:e.logData.playback_caption_format,playback_caption_locale:e.logData.playback_caption_locale,playback_duration:e.logData.playback_duration,playback_is_broadcast:e.logData.playback_is_broadcast,playback_is_drm:e.logData.playback_is_drm,playback_is_live_streaming:e.logData.playback_is_live_streaming,player_format:e.logData.player_format,player_instance_key:e.logData.player_instance_key,player_mode:e.logData.player_mode,player_origin:e.logData.player_origin,player_state:e.logData.player_state,player_suborigin:e.logData.player_suborigin,player_version:e.logData.player_version,reaction_video_channel_type:e.logData.reaction_video_channel_type,representation_id:e.logData.representation_id,resource_url:e.logData.resource_url,routeTracePolicy:e.routeTracePolicy,seq_num:e.logData.seq_num,source:e.source_VPL_LOGGING_HACK,source_VPL_LOGGING_HACK:e.logData.source_VPL_LOGGING_HACK,stall_count:Number(e.logData.stall_count),stall_count_200_ms:Number(e.logData.stall_count_200_ms),stall_time:Number(e.logData.stall_time),state:e.logData.state,streaming_format:e.logData.streaming_format,time_ms:e.logData.time_ms,total_frame_count:Number(e.logData.total_frame_count),tracking_data_encrypted:e.logData.tracking_data_encrypted,tracking_nodes:e.logData.tracking_nodes,tv_session_id:e.logData.tv_session_id,v2_heart_beat:e.logData.v2_heart_beat,video_bandwidth:e.logData.video_bandwidth,video_buffer_end_position:e.logData.video_buffer_end_position,video_chaining_depth_level:e.logData.video_chaining_depth_level,video_chaining_parent_video_id:e.logData.video_chaining_parent_video_id,video_chaining_session_id:e.logData.video_chaining_session_id,video_channel_id:e.logData.video_channel_id,video_id:e.logData.video_id,video_last_start_time_position:e.logData.video_last_start_time_position,video_play_reason:e.logData.video_play_reason,video_player_height:Number(e.logData.video_player_height),video_player_width:Number(e.logData.video_player_width),video_time_position:e.logData.video_time_position,vpts:e.logData.vpts,web_client_revision:e.logData.web_client_revision}}t={logComet:function(e){n("VideoPlayerWwwFalcoEvent").log(function(){return l(e)})},logCometImmediately:function(e){n("VideoPlayerWwwFalcoEvent").logImmediately(function(){return l(e)})}},o["default"]=t},98),__d("VideoPlayerRetryableErrorBoundary.react",["VideoPlayerErrorBoundary.react","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.children,r=e.description,a=e.fallback,i=(e=u(0))[0],o=e[1],d=s(function(){o(function(e){return e+1})},[]);return e=s(function(e){return a(i>=3?{error:e,retry:null}:{error:e,retry:d})},[a,d,i]),l.jsx(n("VideoPlayerErrorBoundary.react"),{description:r,fallback:e,project:"comet_video_player",children:t},i)}var l=r("react"),s=(t=r("react")).useCallback,u=t.useState;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("CometAudioManagerHooks",["CometAudioManagerContexts","react","recoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(){return l(r("CometAudioManagerContexts").AudioApiContext)}var l=r("react").useContext;o.useAudioApi=e},98),__d("makeAudioSymbol",[],function(e,t,n,r,a,i){"use strict";function e(e,t){return t+"::"+e}i["default"]=e},66),__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","makeAudioSymbol","react","useCometUniqueID","usePrevious"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=n("useCometUniqueID")(),t=r("VideoPlayerHooks").useInstanceKey(),a=u(function(){return n("makeAudioSymbol")(e,t)},[e,t]),i=r("CometAudioManagerHooks").useAudioApi(),o=d(i);s(function(){o.current=i},[i]);var p=r("VideoPlayerHooks").useController(),m=200,_=r("VideoPlayerHooks").useLastPlayReason(),g=r("VideoPlayerHooks").useLastMuteReason(),f=r("VideoPlayerHooks").useMuted(),y=(m=n("CometThrottle")(r("VideoPlayerHooks").useVolume,m,{trailing:!0}))(),v=n("usePrevious")(y),h=r("VideoPlayerHooks").usePaused(),P=l(r("CometAudioManagerContexts").CometAudioLocalScopeContext),b=l(r("CometAudioManagerContexts").CometAudioGroupContext),S=r("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),C=r("VideoPlayerHooks").useVolumeSetting(),w=u(function(){return(null==b?void 0:b.groupID)||r("CometAudioManagerContexts").makeAudioGroupID()},[null==b?void 0:b.groupID]),E=(m=c(!0))[0];m=m[1];var I=u(function(){return{audioLocalScope:P,controller:p,groupID:w,instanceKey:t,lastMuteReason:g,lastPlayReason:_,muted:f,paused:h,previousVolume:v,symbol:a,videoPlayerPortalingPlaceInfo:S,volume:y}},[P,p,w,t,g,_,f,h,v,a,S,y]);s(function(){null!=C&&p.setVolume(C)},[p,C]);var V=d(m=b||{allowSound:E,groupID:w,setAllowSound:m});return s(function(){return i&&i.register(I,V.current),function(){i&&i.unregister(a,w)}},[i,I,w,a]),s(function(){i&&i.update(I)},[i,I]),s(function(){!E&&o.current&&p.setMuted(!0,"audio_manager_initiated")},[E,o,p]),null}r("react");var l=(t=r("react")).useContext,s=t.useEffect,u=t.useMemo,d=t.useRef,c=t.useState;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerAutoplayHooks",["VideoPlayerAutoplayContexts","react","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=l(r("VideoPlayerAutoplayContexts").AutoplayApiContext);if(null==e)throw n("unrecoverableViolation")("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?","comet_video_player");return e}function t(){return l(r("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}var l=r("react").useContext;o.useAutoplayApi=e,o.useVideoAutoplayLocalScope=t},98),__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],function(e,t,n,r,a,i,o){"use strict";r=null!=(e=t("cr:1453865"))?e:{useVideoPlayerDebugAPI:n("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:n("emptyFunction"),useVideoPlayerDebugInfo:n("emptyFunction").thatReturns(null)},o["default"]=r},98),__d("evaluateVideoAutoplayDefaultAllowRule",[],function(e,t,n,r,a,i){"use strict";function e(){return"ALLOW"}e.displayName="evaluateVideoAutoplayDefaultRule",i["default"]=e},66),__d("makeSelectedAutoplayVideoSymbol",[],function(e,t,n,r,a,i){"use strict";function e(e,t){return t+"::"+e}i["default"]=e},66),__d("AutoplayRulesEngine",[],function(e,t,n,r,a,i){"use strict";var o=-2,l=-1;e=function(){function e(e){this.$1=o,this.$2=e}var t=e.prototype;return t.evaluateAutoplay=function(e,t){t=t();var n=l;if(e)for(var r=0;r<this.$2.length;r++){var a=this.$2[r](e);if("SKIP"!==a){t=a,n=r;break}}return this.$1=n,t},t.getIndexOfLastWinningRule=function(){return this.$1},t.getRules=function(){return this.$2},e}(),i["default"]=e},66),__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=s(e),r=u(function(){return new(n("AutoplayRulesEngine"))(e)}),a=r[0],i=r[1];return l(function(){t.current!==e&&i(function(){return new(n("AutoplayRulesEngine"))(e)})},[e]),l(function(){t.current=a.getRules()},[a]),a}var l=(t=r("react")).useEffect,s=t.useRef,u=t.useState;o["default"]=e},98),__d("useConcurrentAutoplayManagementAPI",["react","removeFromArray","useCometUniqueID"],function(e,t,n,r,a,i,o){"use strict";function e(){return n("useCometUniqueID")()}function l(){var e=[];return{isControllingComponent:function(t){var n=e.length;return e[n-1]===t},registerControllingComponent:function(t){n("removeFromArray")(e,t),e.push(t)},unregisterControllingComponent:function(t){var r=e.length;return r>1&&n("removeFromArray")(e,t),r>1}}}function t(){var e=s(function(){return l()});return e=e[0]}var s=r("react").useState;o.useAutoplayControlID=e,o.createConcurrentAutoplayManagementAPI=l,o.useConcurrentAutoplayManagementAPI=t},98),__d("VideoPlayerContextSensitiveConfigUtils",[],function(e,t,n,r,a,i){"use strict";var o=function(e,t){return t.every(function(t){return e[t.name]===t.value})};e=function(e,t){return t.find(function(t){return o(e,t.contexts)})},i.getFirstMatchingValueAndContextTargets=e},66),__d("VideoPlayerContextSensitiveConfigResolver",["VideoPlayerContextSensitiveConfigPayload","VideoPlayerContextSensitiveConfigUtils","cr:1724253"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e){this.$1={},this.$2={},null==e?(this.$3=n("VideoPlayerContextSensitiveConfigPayload").static_values,this.$4=n("VideoPlayerContextSensitiveConfigPayload").context_sensitive_values):(this.$3=e.staticValues,this.$4=e.contextSensitiveValues)}var a=e.prototype;return a.setContexts=function(e){this.$1=e,this.$2=this.$5(e)},a.getValue=function(e){return null!=this.$2[e]?this.$2[e]:null!=this.$3[e]?this.$3[e]:null},a.$5=function(e){var t=this;return Object.keys(this.$4).reduce(function(n,a){var i=t.$4[a];return null!=i&&null!=(i=r("VideoPlayerContextSensitiveConfigUtils").getFirstMatchingValueAndContextTargets(e,i))&&(n[a]=i.value),n},{})},e.getPayload=function(){return n("VideoPlayerContextSensitiveConfigPayload")},e.getSources=function(){return t("cr:1724253")},e}(),o["default"]=e},98),__d("VideoPlayerShakaGlobalConfig",["VideoPlayerContextSensitiveConfigResolver"],function(e,t,n,r,a,i,o){var l=new(n("VideoPlayerContextSensitiveConfigResolver")),s={};e=function(e){s=e},t=function(e,t){return s&&"boolean"==typeof s[e]?s[e]:null!=(e=l.getValue(e))&&"boolean"==typeof e?e:t},r=function(e,t){return s&&"number"==typeof s[e]?s[e]:null!=(e=l.getValue(e))&&"number"==typeof e?e:t},a=function(e,t){return s&&"string"==typeof s[e]?s[e]:null!=(e=l.getValue(e))&&"string"==typeof e?e:t},o.setGlobalOverrideConfig=e,o.getBool=t,o.getNumber=r,o.getString=a},98),__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],function(e,t,n,r,a,i,o){"use strict";o.useVideoPlayerExtendedPassiveViewabilityInfo=r("VideoPlayerHooks").useVideoPlayerExtendedPassiveViewabilityInfo,o.useVideoPlayerPassiveViewabilityInfo=r("VideoPlayerHooks").useVideoPlayerPassiveViewabilityInfo,o.useVideoPlayerViewabilityInfo=r("VideoPlayerHooks").useVideoPlayerViewabilityInfo},98),__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],function(e,t,n,r,a,i,o){"use strict";var l="oz_www_";t={getBool:function(e,t){return r("VideoPlayerShakaGlobalConfig").getBool(l+e,t)},getNumber:function(e,t){return r("VideoPlayerShakaGlobalConfig").getNumber(l+e,t)},getString:function(e,t){return r("VideoPlayerShakaGlobalConfig").getString(l+e,t)}},o["default"]=t},98),__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","useInterval"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=function(){return n("oz-player/networks/OzBandwidthEstimator").getBandwidth(n("VideoPlayerOzWWWGlobalConfig"))},t=l(e()),r=t[0],a=t[1];return n("useInterval")(function(){return a(e())},s),r}var l=r("react").useState,s=5e3;o["default"]=e},98),__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","gkx","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=r("VideoPlayerHooks").useAdClientToken(),a=r("VideoPlayerHooks").useAutoplayGatingResult(),i=r("VideoPlayerHooks").useBroadcastStatus(),o=r("VideoPlayerHooks").useEnded(),m=r("VideoPlayerHooks").useIsExternalMedia(),_=r("VideoPlayerHooks").useIsFrozenPassive(),g=r("VideoPlayerHooks").useLastPauseReason(),f=r("VideoPlayerHooks").useLastPlayReason(),y=r("VideoPlayerHooks").useMuted(),v=r("VideoPlayerHooks").usePaused(),h=s(n("HiddenSubtreePassiveContext")),P=!t;e=!0===(null==e?void 0:e.noPauseOnBlurOrFocus)||r("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1);var b=(e=n("useIsBackgrounded")({noPauseOnBlurOrFocus:e,scrollTerminatesHiddenOrBlurred:P})).isDocumentHidden,S=e.isDocumentHiddenOrBlurred,C=n("useVideoPlayerBandwidthEstimate")(),w=r("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),E=r("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo(),I=(P=p(h.getCurrentState().backgrounded))[0],V=P[1],D=(e=p(h.getCurrentState().hidden))[0],k=e[1];u(function(){function e(e,t){k(e),V(t)}var t=h.subscribeToChanges(function(t){n("gkx")("1500552")?l(function(){var t=h.getCurrentState();e(t.hidden,t.backgrounded)}):e(t.hidden,t.backgrounded)}),r=h.getCurrentState().hidden,a=h.getCurrentState().backgrounded;return n("gkx")("1500552")?l(function(){var t=h.getCurrentState();e(t.hidden,t.backgrounded)}):e(r,a),function(){t.remove()}},[h,V,k]);var x=(P=p(function(){return _.getCurrentState()}))[0],T=P[1];u(function(){var e=_.subscribeToChanges(function(e){T(e)}),t=_.getCurrentState();return T(t),function(){e.remove()}},[_,T]);var R=d(function(){return{adClientToken:t,autoplayGatingResult:a,bandwidthEstimate:C,broadcastStatus:i,controllerIsFrozen:x,currentSubtreeIsBackgrounded:I,currentSubtreeIsHidden:D,ended:o,hiddenSubtreePassive:h,isDocumentHidden:b,isDocumentHiddenOrBlurred:S,isExternalMedia:m,isFrozenPassive:_,lastPauseReason:g,lastPlayReason:f,muted:y,paused:v,videoPlayerExtendedPassiveViewabilityInfo:E,videoPlayerPassiveViewabilityInfo:w}},[t,a,C,i,x,I,D,o,h,b,S,m,_,g,f,y,v,E,w]),O=(e=p(R))[0],z=e[1],F=c(O);return u(function(){F.current=O},[O]),u(function(){var e=!1;for(var t in R)if(Object.prototype.hasOwnProperty.call(R,t)&&R[t]!==F.current[t]){e=!0;break}e&&z(R)},[R,z]),O}var l=(t=r("react")).startTransition,s=t.useContext,u=t.useEffect,d=t.useMemo,c=t.useRef,p=t.useState;o["default"]=e},98),__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","useAutoplayRulesEngine","useCometUniqueID","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=n("useCometUniqueID")(),t=r("VideoPlayerHooks").useCanAutoplay(),a=r("VideoPlayerHooks").useInstanceKey(),i=d(function(){return n("makeSelectedAutoplayVideoSymbol")(e,a)},[e,a]),o=c(i);u(function(){o.current=i},[i]);var m=s(n("HiddenSubtreePassiveContext")),_=r("VideoPlayerHooks").useController(),g=c(!1),f=r("useConcurrentAutoplayManagementAPI").useAutoplayControlID();u(function(){r("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[ASSUME CONTROL] "+f),_.registerControllingComponent(f)},[_,f]);var y=r("VideoPlayerHooks").useVideoPlayerPassiveViewabilityInfo(),v=_.getCurrentState();v=v.paused;var h=c(v),P=r("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),b=c(P);u(function(){b.current=P},[P]);var S=l(function(){var e=_.getCurrentState(),t=e.lastPlayReason;e=e.paused;var r=h.current;h.current=e;var a=null==y?void 0:y.getCurrent();a&&(e=!e&&e!==r,r=(a=a.visiblePercentage)<n("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&a>0,!0!==b.current.disableScrollBeforePlayWhenOffscreen&&e&&"user_initiated"===t&&r&&(g.current=!0))},[_,y]),C=c(S);u(function(){C.current=S},[S]),u(function(){var e=_.subscribe(function(){S()});return function(){e.remove()}},[_,S]);var w=n("useVideoAutoplayState")({noPauseOnBlurOrFocus:P.noPauseOnBlurOrFocus}),E=n("useAutoplayRulesEngine")(P.autoplayLocalRules),I=n("allow"===t?"evaluateVideoAutoplayDefaultAllowRule":"evaluateVideoAutoplayDefaultIgnoreRule"),V=(v=p(function(){return I}))[0],D=v[1],k=(v=p(null))[0],x=v[1],T=(v=p(function(){return E.evaluateAutoplay(w,I)}))[0],R=v[1],O=(v=p(null))[0],z=v[1],F=c(T),$=r("VideoPlayerAutoplayHooks").useAutoplayApi(),L=c($);u(function(){L.current=$},[$]);var M="dangerously_disable_autoplay_management"!==t;return u(function(){return $.register(i,a,P,_,m,M),n("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:b.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:$.getAutoplayManagerDebugInfo(b.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:F.current}}),function(){$.unregister(i),n("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:b.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:$.getAutoplayManagerDebugInfo(b.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:F.current}})}},[$,P,_,m,a,M,i]),u(function(){var e=function(){var e=E.evaluateAutoplay(w,I);F.current=e;var t=E.getRules(),a=E.getIndexOfLastWinningRule(),l=a>=0?t[a]:I;if(t=y&&y.getCurrent(),a=(a=_.getCurrentState()).paused,(null===O||O!==e)&&(R(e),z(e)),"PAUSE"===e&&!a&&_.isControllingComponent(f)){if(a=!0,C.current(),g.current){g.current=!1;var s=null==t?void 0:t.positionToViewport;s&&_.scrollIntoView(s.top<0),a=!1}a&&(s="[PAUSE] via short-circuit on "+l.name+".",r("CoreVideoPlayerAutoplayClientUtils").log(o.current,s),_.pause("autoplay_initiated"),n("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:b.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:$.getAutoplayManagerDebugInfo(b.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:e}}))}(null===k||k!==l)&&(D(function(){return l}),x(function(){return l}),n("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:b.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:$.getAutoplayManagerDebugInfo(b.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:e}})),r("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[DECISION: "+e+"] from "+l.name),t&&$.update(i,e,t)},t=m.subscribeToChanges(function(){m.getCurrentState().hidden||m.getCurrentState().backgrounded?_.isControllingComponent(f)||_.unregisterControllingComponent(f):_.registerControllingComponent(f)}),a=y?y.subscribe(function(){m.getCurrentState().hidden||m.getCurrentState().backgrounded?_.isControllingComponent(f)||_.unregisterControllingComponent(f):_.registerControllingComponent(f),e()}):null;return e(),function(){t.remove(),a&&a.remove()}},[$,f,E,_,I,m,k,O,D,R,x,z,i,w,y]),u(function(){var e=_.isControllingComponent(f),t=_.getCurrentState();t=t.paused,r("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(T,F.current,t,e)&&(r("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[PAUSE] the video for "+T),_.pause("autoplay_initiated"),n("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:b.current.autoplayScopeID,event_creation_time:Date.now(),initiator:o.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:L.current.getAutoplayManagerDebugInfo(b.current).selectedAutoplayVideoSymbol,target:o.current,target_current_autoplay_decision:T}}))},[T,_,f]),u(function(){return function(){r("CoreVideoPlayerAutoplayClientUtils").log(o.current,"[RELEASE CONTROL] "+f),_.unregisterControllingComponent(f)}},[_,f]),n("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition({applicableRule:V,autoplayApiRef:L,autoplayDecision:T,autoplayLocalScope:P,symbol:i}),null}r("react");var l=(t=r("react")).useCallback,s=t.useContext,u=t.useEffect,d=t.useMemo,c=t.useRef,p=t.useState;e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],function(e,t,n,r,a,i,o){"use strict";r("react"),e=n("deferredLoadComponent")(n("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react")),o["default"]=e},98),__d("VideoPlayerIMFMetadataContext",["react","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=l(u);if(e===s)throw n("unrecoverableViolation")("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.","comet_video_player");return e}t=r("react");var l=r("react").useContext,s={imfExpectedFromEmsg:!1,specInlineJson:null},u=t.createContext(s);u.displayName="VideoPlayerIMFMetadataContext",a=u.Provider,o.VideoPlayerIMFMetadataContextProvider=a,o.useVideoPlayerIMFMetadataFromContext=e},98),__d("WebSessionExtender",["WebSession","clearInterval","cr:913","setInterval"],function(e,t,n,r,a,i,o){"use strict";function e(e,a){void 0===a&&(a="extender"),s.add(e),null==u&&(r("WebSession").extend(Date.now()+l+2e3),u=n("setInterval")(function(){r("WebSession").extend(Date.now()+l+2e3),t("cr:913")&&(new(t("cr:913"))).setClientTime(Date.now()).setWebsessionID(r("WebSession").getId()).setReason(a).log()},l))}function a(e){s["delete"](e),0===(e=s.size)&&null!=u&&(n("clearInterval")(u),u=null)}var l=2e4,s=new Set,u=null;o.subscribe=e,o.unsubscribe=a},98),__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","useCometUniqueID"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=r("VideoPlayerHooks").usePlaying(),t=n("useCometUniqueID")();return l(function(){if(e)return r("WebSessionExtender").subscribe(t,"video"),function(){r("WebSessionExtender").unsubscribe(t)}},[e,t]),null}var l=r("react").useEffect;o["default"]=e},98),__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=r("VideoPlayerHooks").useStalling(),t=r("VideoPlayerHooks").useStreamInterrupted(),n=r("VideoPlayerHooks").useIsLiveRewindActive();return t=t&&!n,n=e,{liveVideoInterruptedOverlayVisible:t,loadingIndicatorType:e=t?"live_video_interrupted_overlay":n?"spinner":"none",spinnerVisible:n}}o["default"]=e},98),__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","gkx","once","react","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=n("useVideoPlayerDefaultLoadingIndicatorsLogic")(),t=e.loadingIndicatorType;e=e.spinnerVisible,e=l.jsx(s,{isVisible:e});var r=null;switch(t){case"spinner":r=e;break;case"live_video_interrupted_overlay":r=d();break;case"none":default:r=e}return{loadingIndicatorElement:r,loadingIndicatorType:t}}var l=r("react"),s=n("deferredLoadComponent")(n("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),u=n("deferredLoadComponent")(n("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),d=n("once")(function(){return n("gkx")("5900")?null:l.jsx(n("CometPlaceholder.react"),{fallback:null,children:l.jsx(u,{})})});o["default"]=e},98),__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,a,i,o){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1856513"),a=r("FalcoLoggerInternal").create("cvc_v3_http_event",e),o["default"]=a},98),__d("CVCv3DisabledPlayerOrigins",[],function(e,t,n,r,a,i){e=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"}),i["default"]=e},66),__d("CVCv3DisabledPlayerSubOrigins",[],function(e,t,n,r,a,i){e=Object.freeze({LIVE_BEEPER:"live_beeper"}),i["default"]=e},66),__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e,t,r){this.$1=e,this.$2=n("guid")(),this.$3=(null!=(e=t)?e:"null")+"::"+(null!=(t=r)?t:"null"),this.$4=null,this.$5=null}var t=e.prototype;return t.isValidSubscription=function(){return!!this.$1},t.makeCVCv3StateUpdate=function(e,t,n,a){var i=null;return null!=e&&!Number.isNaN(e)&&null!=t&&!Number.isNaN(t)&&(i={m:a,pf:Math.floor((t-e)*r("DateConsts").MS_PER_SEC),s:n,sa:Math.floor(e*r("DateConsts").MS_PER_SEC)}),a={pps:this.$4,ps:i,si:this.$2,so:this.$3,vi:this.$1},this.$4=i,a},t.makeUnifiedVideoCVCUpdate=function(e,t,n,r,a){return e=this.makeCVCv3StateUpdate(e,t,n,r),null!=this.$5&&(e.tk=this.$5),babelHelpers["extends"]({},e,a)},t.processUnifiedResponse=function(e){return e=e,this.$5=e.tk,e},t.clearAnyPreviousContext=function(){this.$4=null},t.logHttpRequestSuccess=function(e){var t=this;n("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:null!=e?e.toString():null,countable_id:t.$1}})},t.logHttpRequestFailure=function(e,t){var r=this;n("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:e,duration_ms:null!=t?t.toString():null,countable_id:r.$1}})},t.logHttpRequestTimeout=function(e){var t=this;n("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:null!=e?e.toString():null,countable_id:t.$1}})},t.logHttpResponseBad=function(e,t){var r=this;n("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:e,duration_ms:null!=t?t.toString():null,countable_id:r.$1}})},t.logDebugInfo=function(e){var t=this;n("CvcV3HttpEventFalcoEvent").log(function(){return{name:e,countable_id:t.$1}})},e}(),o["default"]=e},98),__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],function(e,t,n,r,a,i,o){t=n("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0),o["default"]=t},98),__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","gkx","promiseDone","setTimeout"],function(e,t,n,r,a,i,o){"use strict";var l=Object.values(n("CVCv3DisabledPlayerOrigins")),s=Object.values(n("CVCv3DisabledPlayerSubOrigins")),u=10;e=function(){function e(e,t,r,a,i,o){var u=this;this.$1=new(n("CVCv3SubscriptionHelper"))(e,t,r),this.$5=i,this.$6=null,this.$9=null,this.$10=!this.$1.isValidSubscription(),this.$3=null,this.$2=null,e=null!=t&&l.includes(t),i=null!=r&&s.includes(r),!e&&!i&&(this.$3=a,this.$11=o,this.$4=a.subscribe(function(){if(null!=u.$3){var e=u.$3.getCurrentState();e.playing?u.$12(e):u.$13()}else u.$1.logDebugInfo("empty_video_controller")}))}var t=e.prototype;return t.$12=function(e){if(null!=this.$3){var t=!1;t||(t=!!this.$5||n("gkx")("1124976")),t?(e.playing?null==this.$2&&(t=this.$3.getPlayheadPosition())>=0&&(this.$2=t):this.$2=null,this.$14(0)):this.$1.logDebugInfo("ineligible_to_comet_cvc")}else this.$1.logDebugInfo("empty_video_controller")},t.stopUnifiedCVC=function(){this.$13()},t.destroy=function(){this.$13(),null!=this.$4&&this.$4.remove(),this.$4=null,this.$3=null},t.$13=function(){n("clearTimeout")(this.$8),n("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null},t.$15=function(){n("clearTimeout")(this.$7),this.$7=null},t.$16=function(){this.$9=null,this.$15(),this.$14(0)},t.$14=function(e){var t=this;null==this.$3||null!=this.$8||null!=this.$9||this.$10||(this.$8=n("setTimeout")(function(){t.$8=null;var e=t.$17();if(null!=e){t.$9=e;var a=Date.now(),i=!1;n("promiseDone")(e,function(n){e===t.$9&&(t.$9=null,null!=n?(n=t.$1.processUnifiedResponse(n),t.$18(n,a)):t.$1.logHttpResponseBad("null payload",Date.now()-a))},function(e){i=!0,t.$1.logHttpRequestFailure(null!=e?JSON.stringify(e):null,Date.now()-a)}),t.$7=n("setTimeout")(function(){i||t.$1.logHttpRequestTimeout(Date.now()-a),t.$16()},u*r("DateConsts").MS_PER_SEC)}else t.$1.logDebugInfo("empty_request")},e))},t.$18=function(e,t){if(this.$15(),t=Date.now()-t,null!=e.d?(this.$1.logHttpRequestSuccess(t),null!=this.$11&&this.$11(e.d)):this.$1.logHttpResponseBad("no data field",t),null!=e.a)switch(t=e.a.t){case"p":null==(t=e.a.pi)&&(t=u),this.$14(t*r("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0}},t.$17=function(){var e=this.$19();return null==e?null:(e={d:JSON.stringify(e)},n("cometAsyncFetch")(n("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:e,method:"POST"}))},t.$19=function(){if(null==this.$3)return null;var e={};null!=this.$6&&(e.lc=this.$6),this.$5&&(e.ls=!0);var t=0,n=0;null!=this.$2&&(t=this.$2,n=this.$3.getPlayheadPosition());var r=this.$3.getCurrentState();return t=this.$1.makeUnifiedVideoCVCUpdate(t,n,this.$20(r),r.muted,e)},t.$20=function(e){return e.playing||e.seeking?"playing":e.ended?"ended":e.paused?"paused":"unknown"},t.testing_setLastStartPosition=function(e){this.$2=e},t.testing_makeUnifiedStateUpdate=function(){return this.$19()},t.testing_handleUnifiedResponse=function(e){return this.$18(e,Date.now())},e}(),o["default"]=e},98),__d("getPlayerFormatForLogData",[],function(e,t,n,r,a,i){"use strict";function e(e,t){return!0===(e=e.isFullscreen)?"full_screen":null!=t?t:"inline"}i["default"]=e},66),__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.disableSubscription,a=e.playerFormat,i=e.subOrigin,o=e.videoFBID,d=r("VideoPlayerHooks").useIsLive(),c=r("VideoPlayerHooks").useIsFullscreen(),p=r("VideoPlayerHooks").useIsDesktopPictureInPicture(),m=r("VideoPlayerHooks").useController(),_=s(),g=u();l(function(){if(!0!==t){var e=new(n("UnifiedVideoCVCSubscription"))(o,n("getPlayerFormatForLogData")({isDesktopPictureInPicture:p,isFullscreen:c},a),i,m,d,function(e){g(e)});return _(e),function(){e.destroy()}}n("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:o,name:"disable_subscription"}})},[p,c,d,t,a,g,_,i,m,o])}var l=r("react").useEffect,s=(t=r("createVideoStateHook").createVideoStateHook(null)).setterHook,u=(a=r("createVideoStateHook").createVideoStateHook(null)).setterHook;t=a.valueHook,o.useVideoPlayerUnifiedCVCProvider=e,o.useVideoPlayerUnifiedCVCData=t},98),__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:902","cr:99","emptyFunction","gkx","react","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],function(e,t,n,r,a,i,o){"use strict";function e(e){
var a=e.children,i=e.disableCVCSubscription,o=e.disableLoadingIndicator;o=void 0!==o&&o;var u=e.disableLogging,d=e.instreamVideoAdBreaksPlayer,c=e.playerFormat,p=e.subOrigin,m=e.videoFBID,_=e.videoPlayerIMFFromVideoMetadata;return e=e.videoPlayerSpherical,r("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider({disableSubscription:!0===u||i,playerFormat:c,subOrigin:p,videoFBID:m}),s(),i=(u=n("useVideoPlayerDefaultLoadingIndicators")()).loadingIndicatorElement,l.jsxs(r("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:null!=(c=_)?c:null,children:[e,o?null:i,n("gkx")("1586633")?l.jsx(r("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,l.jsxs(n("VideoPlayerCaptionsAreaDeferred.react"),{children:[a,d]}),l.jsx(n("CoreVideoPlayerAutoplayClient.react"),{}),l.jsx(n("CoreVideoPlayerAudioClient.react"),{}),t("cr:1954434")?l.jsx(t("cr:1954434"),{}):null,t("cr:99")?l.jsx(t("cr:99"),{subOrigin:p}):null,l.jsx(n("VideoPlayerWebSessionExtender.react"),{})]})}var l=r("react"),s=null!=(a=t("cr:902"))?a:n("emptyFunction");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("normalizeVideoPlayerLoopCount",["unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(e,t,r){var a;if(void 0===t&&(t=null),void 0===r&&(r=null),null==e)r=null!=(a=t)&&a&&null!=(a=r)?a:0,a=-1===r?-1:r<0||!Number.isFinite(r)||Math.floor(r)!==r?0:0===r&&!0===t?-1:r;else if(-1===e||e===Number.POSITIVE_INFINITY)a=-1;else{if(e<0||!Number.isFinite(e)||Math.floor(e)!==e)throw n("unrecoverableViolation")("Invalid loopingCount: "+e,"comet_video_player");a=e}return a}o["default"]=e},98),__d("CometRouteRenderType",["CometRouterRenderTypeContext","react"],function(e,t,n,r,a,i,o){"use strict";function e(){return"pushView"===l(n("CometRouterRenderTypeContext"))}function t(){return"hosted"===l(n("CometRouterRenderTypeContext"))}function a(){return"main"===l(n("CometRouterRenderTypeContext"))}var l=r("react").useContext;o.useIsPushView=e,o.useIsHosted=t,o.useIsMain=a},98),__d("useParentRoute",["CometRouterParentRouteContext","react"],function(e,t,n,r,a,i,o){"use strict";function e(){return l(n("CometRouterParentRouteContext"))}var l=r("react").useContext;o["default"]=e},98),__d("usePlayerOriginRouteTracePolicy",["CometNotificationsRootContext","CometRouteRenderType","react","useCometRouteTracePolicy","useCometRouterState","useParentRoute","useRoutePassthroughProps"],function(e,t,n,r,a,i,o){"use strict";function e(){var e=l(n("CometNotificationsRootContext"));e=e.isNotificationsRoute;var t=n("useCometRouteTracePolicy")(),a=r("CometRouteRenderType").useIsPushView(),i=n("useParentRoute")(),o=n("useCometRouterState")(),s=n("useRoutePassthroughProps")();if(!0===(null==s?void 0:s.isARLTW))return"comet.watch.arltw";s="comet.videos.tahoe"===t;var u="comet.stories.viewer"===t,d="comet.reels.home"===t;if(a){if(s)return"unknown";if(u)return t;if(d&&null==(null==i?void 0:i.tracePolicy)&&null!=o)return a=o.main,null!=(u=(o=(d=(u=o.pushViewStack)&&u.length>1?u[u.length-2]:a).route).tracePolicy)?u:t}return e&&!s?t:null!=(a=null==i?void 0:i.tracePolicy)?a:t}var l=r("react").useContext;o["default"]=e},98),__d("useRouteProductAttribution",["CometRouteProductAttributionContext","react"],function(e,t,n,r,a,i,o){"use strict";function e(){return l(n("CometRouteProductAttributionContext"))}var l=r("react").useContext;o["default"]=e},98),__d("VideoPlayerXImpl.react",["CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","normalizeVideoPlayerLoopCount","react","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.children,r=e.disableCVCSubscription;r=void 0!==r&&r;var a=e.disableLoadingIndicator,i=e.disableLogging,o=e.implementations,s=e.instreamVideoAdBreaksPlayer,u=e.portalingEnabled,d=e.portalingFromVideoID,c=e.portalingPlaceMetaData,p=e.portalingRenderPlaceholder,m=e.videoPlayerIMFFromVideoMetadata,_=e.videoPlayerSpherical;e=babelHelpers.objectWithoutPropertiesLoose(e,["children","disableCVCSubscription","disableLoadingIndicator","disableLogging","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"]);var g=n("usePlayerOriginRouteTracePolicy")(),f=n("useRouteProductAttribution")();f||(f=e.productAttribution);var y=e.loopCount,v=e.playerFormat,h=e.subOrigin,P=e.videoFBID;return y=n("normalizeVideoPlayerLoopCount")(y),l.jsx(n("CoreVideoPlayerWithComponents.react"),babelHelpers["extends"]({},e,{disableLogging:i,implementations:o,loopCount:y,portalingEnabled:u,portalingFromVideoID:d,portalingPlaceMetaData:c,portalingRenderPlaceholder:p,productAttribution:f,routeTracePolicy:g,children:l.jsx(n("VideoPlayerXImplSurface.react"),{children:t,disableCVCSubscription:r,disableLoadingIndicator:a,disableLogging:i,instreamVideoAdBreaksPlayer:s,playerFormat:v,subOrigin:h,videoFBID:P,videoPlayerIMFFromVideoMetadata:m,videoPlayerSpherical:_})}))}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometLink.react","TetraText.react","gkx","react"],function(e,t,n,r,a,i,o,l){"use strict";function e(e){return e=n("gkx")("1224637")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":"https://www.facebook.com/help/396404120401278/list",s.jsx(n("TetraText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:s.jsx(n("CometLink.react"),{href:e,children:l._("Learn More")})})}var s=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["TetraText.react","VideoPlayerFallbackLearnMoreLink.react","cr:1672302","cr:4149","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var r=e.debugError,a=e.message;return e.onRetry,l.jsx("div",{className:"x6s0dn4 xatbrnm x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x1iji9kk x1a8lsjc x1sln4lm",children:l.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox",children:[l.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w",children:l.jsx(n("TetraText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:a})}),l.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:l.jsx(n("VideoPlayerFallbackLearnMoreLink.react"),{})}),t("cr:4149")?l.jsx(t("cr:4149"),{error:r}):null,t("cr:1672302")?l.jsx(t("cr:1672302"),{error:r}):null]})})}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react"],function(e,t,n,r,a,i,o,l){"use strict";function e(e){var t;return t=null!=(t=e.message)?t:l._("Sorry, we're having trouble playing this video."),s.jsx(n("VideoPlayerFallbackCoverImplWithoutRetry.react"),{debugError:e.debugError,message:t,onRetry:e.onRetry})}var s=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("defaultErrorBoundaryFallback",["fbt","VideoPlayerFallbackCover.react","gkx","react"],function(e,t,n,r,a,i,o,l){"use strict";function s(e){return!(!e||!n("gkx")("1792489"))&&e.message.toLowerCase().indexOf("audio_renderer_error")>=0}function e(e){var t=e.error,r=null;return e=e=e.retry,s(t)&&(r=l._("Audio renderer error: Please restart your computer."),e=null),u.jsx(n("VideoPlayerFallbackCover.react"),{debugError:t,message:r,onRetry:e})}var u=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerX.react",["VideoPlayerRetryableErrorBoundary.react","VideoPlayerXImpl.react","defaultErrorBoundaryFallback","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn;t=void 0!==t&&t;var r=e.errorBoundaryFallback;return e=babelHelpers.objectWithoutPropertiesLoose(e,["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"]),e=l.jsx(n("VideoPlayerXImpl.react"),babelHelpers["extends"]({VideoPlayerShakaPerformanceLoggerClass:null},e)),t?e:l.jsx(n("VideoPlayerRetryableErrorBoundary.react"),{description:"VideoPlayerX",fallback:null!=(t=r)?t:n("defaultErrorBoundaryFallback"),children:e})}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerCaptionsController",["JSResourceForInteraction","recoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(e){function t(e){var t=s.load().then(function(n){t===c&&(u=new n({captionsDisplay:null,onCaptionsLoaded:o,onReady:function(t){t.loadFromUrl(e)}}))})["catch"](function(e){t===c&&n("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiWebVttState module: "+e.message,"comet_video_player")});return t}function r(){var e=l.load().then(function(t){e===p&&(d=new t({captionsDisplay:null,onCaptionsLoaded:o,onReady:function(e){e.processQueue()}}))})["catch"](function(t){e===p&&n("recoverableViolation")("Failed to load the VideoPlayerHTML5ApiCea608State module: "+t.message,"comet_video_player")});return e}var a=e.captionsUrl,i=e.inbandCaptionsExpected,o=e.onCaptionsLoaded,u=null,d=null,c=null,p=null;return null!=a?c=t(a):!0===i&&(p=r()),{destroy:function(){u&&(u.destroy(),u=null),d&&(d.destroy(),d=null),c&&(c=null),p&&(p=null)},getCaptionFormat:function(){return u?"webvtt":d?"cea608":null},handleCea608BytesReceived:function(e){d&&d.enqueueBytes(e)},handleTimeUpdate:function(e){var t;return u?(u.source&&u.source.handleTimeUpdate(e),null!=(t=null==(t=u)?void 0:t.getCurrentScreenRepresentation())?t:null):d?(d.source&&d.source.handleTimeUpdate(e),null!=(e=null==(t=d)?void 0:t.getCurrentScreenRepresentation())?e:null):null},updateCaptionsUrl:function(e){u&&(u.destroy(),u=null),null!=e&&(c=t(e))},updateInbandCaptionsExpected:function(e){d&&(d.destroy(),d=null),e&&(p=r())}}}var l=n("JSResourceForInteraction")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),s=n("JSResourceForInteraction")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");o.createCaptionsController=e},98),__d("VideoPlayerSurface.react",["react"],function(e,t,n,r,a,i,o){"use strict";t=function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t.prototype.render=function(){return null!=this.props.children?this.props.children:null},t}(r("react").PureComponent),o["default"]=t},98),__d("VideoPlayerControlsBottomRowAddOnContext",["react","useStable"],function(e,t,n,r,a,i,o){"use strict";function e(e){e=e.children;var t=n("useStable")(function(){var e=null,t=null,n=null;return{getBottomRowAddOn:function(){return t},initialize:function(r){n=function(e){t=e,r(e)},null!=e&&(n(e),e=null)},setBottomRowAddOn:function(t){null!=n?n(t):e=t}}});return l.jsx(c.Provider,{value:t,children:e})}function t(e){var t=s(c),n=(e=d(e))[0],r=e[1];return u(function(){null!=t&&t.initialize(r)},[t]),n}function a(e){var t=s(c);u(function(){null!=t&&t.setBottomRowAddOn(e)},[e,t])}var l=r("react"),s=(r=r("react")).useContext,u=r.useEffect,d=r.useState,c=l.createContext(null);e.displayName=e.name+" [from "+i.id+"]",t.displayName=t.name+" [from "+i.id+"]",o.VideoPlayerControlsBottomRowAddOnContext=c,o.VideoPlayerControlsBottomRowAddOnContextProvider=e,o.useVideoPlayerControlsBottomRowAddOn=t,o.useSetVideoPlayerControlsBottomRowAddOn=a},98),__d("computeAspectRatio",[],function(e,t,n,r,a,i){"use strict";function e(e,t){return null!=e&&null!=t&&0!==e&&0!==t?e/t:null}i["default"]=e},66),__d("DataViewReader",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e){this.$1=0,this.$2=e}var t=e.prototype;return t.seek=function(e){this.$1=e},t.skip=function(e){var t=this.$1;return this.$1+=e,t},t.readUint8=function(){return this.$2.getUint8(this.skip(1))},t.readUint16=function(e){return void 0===e&&(e=!1),this.$2.getUint16(this.skip(2),e)},t.readUint32=function(e){return void 0===e&&(e=!1),this.$2.getUint32(this.skip(4),e)},t.readUint64=function(e){var t;if(void 0===e&&(e=!1),e?(e=this.$2.getUint32(this.skip(4),!0),t=this.$2.getUint32(this.skip(4),!0)):(t=this.$2.getUint32(this.skip(4)),e=this.$2.getUint32(this.skip(4))),t>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*t+e},t.readInt64=function(e){var t;if(void 0===e&&(e=!1),e?(e=this.$2.getInt32(this.skip(4),!0),t=this.$2.getInt32(this.skip(4),!0)):(t=this.$2.getInt32(this.skip(4)),e=this.$2.getInt32(this.skip(4))),t>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(0|t)+e},t.readInt16=function(e){return void 0===e&&(e=!1),this.$2.getInt16(this.skip(2),e)},t.readInt32=function(e){return void 0===e&&(e=!1),this.$2.getInt32(this.skip(4),e)},t.readZeroTerminatedString=function(e){for(var t,n="",r=0;r++<e&&(t=this.readUint8());)n+=String.fromCharCode(t);return n},t.readChars=function(e){for(var t="";e-- >0;)t+=String.fromCharCode(this.$2.getUint8(this.skip(1)));return t},t.readBytes=function(e){for(var t=[];e-- >0;)t.push(this.$2.getUint8(this.skip(1)));return t},t.getDataView=function(){return this.$2},t.getCursor=function(){return this.$1},t.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0},e}(),i["default"]=e},66),__d("Mp4DASHEventMessageBox",[],function(e,t,n,r,a,i){(e=function(){function e(e,t){this.$1=t,this.$2=null,0==t.getVersion()?this.$2={version:0,schemeIdUri:e.readZeroTerminatedString(this.$4(e,t)),value:e.readZeroTerminatedString(this.$4(e,t)),timescale:e.readUint32(),presentationTimeDelta:e.readUint32(),eventDuration:e.readUint32(),id:e.readUint32()}:1==t.getVersion()&&(this.$2={version:1,timescale:e.readUint32(),presentationTime:e.readUint64(),eventDuration:e.readUint32(),id:e.readUint32(),schemeIdUri:e.readZeroTerminatedString(this.$4(e,t)),value:e.readZeroTerminatedString(this.$4(e,t))}),this.$3=new DataView(e.getDataView().buffer,e.getCursor())}var t=e.prototype;return t.getFullBox=function(){return this.$1},t.getEmsgFields=function(){return this.$2},t.getMessageData=function(){return this.$3},t.getStartTime=function(){var e=this.$2;if(null==e)return null;switch(e.version){case 0:return null;case 1:return this.$5(e)}},t.getDuration=function(){var e=this.$2;if(null==e)return null;var t=e.eventDuration;return 0!==(e=e.timescale)?t/e:t},t.$5=function(e){var t=e.timescale;return e=e.presentationTime,0!==t?e/t:e},t.$4=function(e,t){return t.getBox().getSize()-(e.getCursor()-t.getBox().getStart())},e}()).canonicalType="emsg",i["default"]=e},66),__d("Mp4Box",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e){this.$4=e.getCursor(),this.$1=e.readUint32(),this.$2=e.readChars(4),1===this.$1?this.$1=e.readUint64():0===this.$1&&(this.$1=e.getDataView().byteLength-this.$4),"uuid"===this.$2&&(this.$3=e.readChars(16)),this.$5=e.getCursor()}var t=e.prototype;return t.getBodyStart=function(){return this.$5},t.getBodySize=function(){var e=this.$5-this.$4;return this.getSize()-e},t.getSize=function(){return this.$1},t.getType=function(){return this.$2},t.getUuid=function(){return this.$3},t.getStart=function(){return this.$4},t.inspect=function(){return"{ size: "+this.$1+", type: "+this.$2+" }"},e}(),i["default"]=e},66),__d("Mp4FullBox",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e,t){this.$2=e.readUint8(),this.$1=e.readUint8(),this.$1=e.readUint8()+(this.$1<<8),this.$1=e.readUint8()+(this.$1<<8),this.$3=t}var t=e.prototype;return t.getVersion=function(){return this.$2},t.getFlags=function(){return this.$1},t.getBox=function(){return this.$3},e}(),i["default"]=e},66),__d("Mp4Demuxer",["DataViewReader","Mp4Box","Mp4FullBox"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e){this.$1=new(n("DataViewReader"))(e)}var t=e.prototype;return t.parseBox=function(){return new(n("Mp4Box"))(this.$1)},t.parseFullBox=function(e){return new(n("Mp4FullBox"))(this.$1,e)},t.parseCanonicalBox=function(e,t){return new e(this.$1,t)},t.skipBox=function(e){this.$1.seek(e.getStart()+e.getSize())},t.withinBox=function(e){var t=this.$1.getCursor();return t>=e.getStart()&&t<e.getStart()+e.getSize()},t.atEnd=function(){return this.$1.getCursor()>=this.$1.getDataView().byteLength},t.reset=function(){this.$1.seek(0)},t.readBoxBodyText=function(e){this.$1.seek(e.getBodyStart());var t=new TextDecoder;return e=new Uint8Array(this.$1.readBytes(e.getBodySize())),t.decode(e)},e}(),o["default"]=e},98),__d("parseJSONMixed",[],function(e,t,n,r,a,i){"use strict";function e(e,t){return null==e?null:JSON.parse(e,t)}i["default"]=e},66),__d("tryParseJSONMixed",["parseJSONMixed"],function(e,t,n,r,a,i,o){"use strict";function e(e,t){try{return n("parseJSONMixed")(e,t)}catch(e){return null}}o["default"]=e},98),__d("VideoPlayerEmsg",["DataViewReader","ErrorMetadata","ErrorSerializer","FBLogger","Mp4DASHEventMessageBox","Mp4Demuxer","deepEquals","err","getErrorSafe","refine","tryParseJSONMixed"],function(e,t,n,r,a,i,o){"use strict";function l(e,t,a){try{return r("refine").jsonParserEnforced(e)(t)}catch(r){throw null==n("tryParseJSONMixed")(t)?n("err")('Failed to parse emsg payload as JSON for scheme "%s"',a):(e=n("getErrorSafe")(r),n("err")('Unsupported emsg payload format for scheme "%s": %s',a,e.message))}}function s(e,t){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var o=n("err").apply(void 0,[t].concat(a));return o.errorName=o.name=e,o}function u(e){var t=e.emsgDataStr,r=e.emsgDurationInSec,a=e.emsgId,i=e.emsgScheme,o=e.emsgStartTimeInSec,u=e.representationID,d=e.videoID,c=null,p=null;try{if(null==i)throw s("CometVideoPlayerEmsgMissingScheme","Missing emsg scheme");if(""===i)throw s("CometVideoPlayerEmsgEmptyScheme","Empty emsg scheme");if(i.startsWith("livedash:trace:"))return[null,null];if(null==o)throw s("CometVideoPlayerEmsgMissingStartTime",'Missing start time in emsg "%s"',String(i));switch(i){case h.LIVE_HUDDLE_SCHEME_ID:var m=l(y,t,i);c={data:m,emsgDataStr:t,emsgDurationInSec:r,emsgId:a,emsgScheme:i,emsgStartTimeInSec:o,representationID:u,type:"emsg_huddle"};break;case h.LIVE_HUDDLE_ZLIB_SCHEME_ID:c=null;break;case h.LIVE_INSTREAM_ADS_SCHEME_ID:c={emsgDataStr:t,emsgDurationInSec:r,emsgId:a,emsgScheme:i,emsgStartTimeInSec:o,representationID:u,type:"emsg_instream_ads"};break;case h.LIVE_INTERACTIVE_PLUGIN_EVENT_ID:c={data:(m=l(v,t,i)).imf,emsgDataStr:t,emsgDurationInSec:r,emsgId:a,emsgScheme:i,emsgStartTimeInSec:o,representationID:u,type:"imf_interactive_plugin_event"};break;case h.LIVE_STICKER_SCHEME_ID:c={emsgDataStr:t,emsgDurationInSec:r,emsgId:a,emsgScheme:i,emsgStartTimeInSec:o,representationID:u,type:"imf_live_sticker"};break;default:if(null==(m=/^urn:fb:(.+)$/.exec(i)))throw s("CometVideoPlayerEmsgUnknownScheme",'Unknown scheme in emsg "%s"',String(i));c={emsgDataStr:t,emsgDurationInSec:r,emsgId:a,emsgScheme:i,emsgSchemeIMFTopic:m=null!=(m=m[1])?m:"",emsgStartTimeInSec:o,representationID:u,type:"imf_other"}}}catch(r){t=(p=n("getErrorSafe")(r)).metadata||new(n("ErrorMetadata")),null!=d&&t.addEntry("COMET_VIDEO","VIDEO_ID",d),t.addEntry("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify(e)),p.metadata=t}return[c,p]}function d(e,t,r){var a=e.getMessageData();a=new(n("DataViewReader"))(a).readZeroTerminatedString(a.byteLength);var i=e.getEmsgFields();return{emsgDataStr:a,emsgDurationInSec:null!=(a=e.getDuration())?a:void 0,emsgId:null==i?void 0:i.id,emsgScheme:null==i?void 0:i.schemeIdUri,emsgStartTimeInSec:null!=(a=e.getStartTime())?a:void 0,representationID:r,videoID:t}}function c(e,t,n){m(t,e,n);var r=u(e),a=r[0];return _(t,e,r=r[1],n),a}function e(e,t,r,a,i){var o=[];for(e=new(n("Mp4Demuxer"))(new DataView(e));!e.atEnd();){var l=e.parseBox();if(l.getType()===n("Mp4DASHEventMessageBox").canonicalType){var s=e.parseCanonicalBox(n("Mp4DASHEventMessageBox"),e.parseFullBox(l));s instanceof n("Mp4DASHEventMessageBox")&&null!=(s=c(s=d(s,t,r),a,i))&&o.push(s)}e.skipBox(l)}return o}function p(e,t){return{debug_reason:null,error_user_info:JSON.stringify({emsgDataStr:t.emsgDataStr,emsgDurationInSec:t.emsgDurationInSec,emsgId:t.emsgId,emsgScheme:t.emsgScheme,emsgStartTimeInSec:t.emsgStartTimeInSec}),imf_emsg_id:null!=t.emsgId?String(t.emsgId):null,imf_topic:t.emsgScheme,offset_ms:null==t.emsgStartTimeInSec?null:1e3*e-1e3*t.emsgStartTimeInSec,representation_id:t.representationID}}function m(e,t,n){null!=t.emsgScheme&&![h.LIVE_HUDDLE_SCHEME_ID,h.LIVE_HUDDLE_ZLIB_SCHEME_ID].includes(t.emsgScheme)&&(null==n||n(babelHelpers["extends"]({},p(e,t),{imf_event_type:"IMF_DOWNLOAD"})))}function _(e,t,r,a){if(null!=r){var i,o=null!=r.errorName&&""!==r.errorName?r.errorName:r.name,l=null!=r.messageFormat?r.messageFormat:r.message;i=(null!=r.messageFormat&&null!=(i=r.messageParams)?i:[]).slice();var s="CometVideoPlayerEmsgParseFailed",u=s+":"+(null!=r.errorName&&""!==r.errorName?r.errorName:r.name),d=n("ErrorSerializer").toReadableMessage(n("err").apply(void 0,[l].concat(i)));(r=n("FBLogger")("comet_video_player").catching(r)).warn.apply(r,["CometVideoPlayerEmsgParseFailed:"+o+": "+l].concat(i)),null==a||a(babelHelpers["extends"]({},p(e,t),{error:u,error_code:"0",error_description:d,error_domain:s,error_type:"GenericParseError",imf_event_type:"IMF_JSON_PARSE_FAILURE"}))}else[h.LIVE_HUDDLE_SCHEME_ID,h.LIVE_HUDDLE_ZLIB_SCHEME_ID,h.LIVE_INSTREAM_ADS_SCHEME_ID,h.LIVE_STICKER_SCHEME_ID,h.LIVE_INTERACTIVE_PLUGIN_EVENT_ID].includes(t.emsgScheme)||(o=""+(r="CometVideoPlayerEmsgInvalidScheme"),null==a||a(babelHelpers["extends"]({},p(e,t),{error:o,error_code:"0",error_description:null!=(l=t.emsgScheme)?l:"",error_domain:r,error_type:"GenericParseError",imf_event_type:"INVALID_TOPIC"})))}function g(e,t){var n;return[e.type,e.emsgScheme,null!=(n=e.emsgId)?n:""].concat(t?[null!=(n=e.emsgStartTimeInSec)?n:"",null!=(t=e.emsgDurationInSec)?t:""]:[]).join(":")}function f(e,t){return e.set(g(t,!0),t),e}function t(e,t){return t.reduce(f,new Map(e))}function a(e,t,r){return e=null==t?[]:Array.from(e.values()).filter(function(e){var n=e.emsgStartTimeInSec;return e=e.emsgDurationInSec||0,null!=n&&t>=n&&t<n+e}).sort(function(e,t){return(e.emsgStartTimeInSec||0)-(t.emsgStartTimeInSec||0)}),e=Array.from(e.reduce(function(e,t){return e.set(g(t,!1),t),e},new Map).values()),n("deepEquals")(r,e)?r:e}i=r("refine").custom(function(e){return"number"==typeof e?e:"string"==typeof e&&/^[0-9]+$/.test(e)?e:void 0});var y=r("refine").object({rosterData:r("refine").object({activeSpeaker:r("refine").nullable(i),speakerInfoList:r("refine").array(r("refine").object({audioMuted:r("refine").bool(),id:i}))})}),v=r("refine").object({imf:r("refine").object({pluginEventData:r("refine").mixed(),pluginEventType:r("refine").string()})}),h={LIVE_HUDDLE_SCHEME_ID:"urn:fb:metadata",LIVE_HUDDLE_ZLIB_SCHEME_ID:"urn:fb:metadata:deflate",LIVE_INSTREAM_ADS_SCHEME_ID:"urn:fb:ads_meta",LIVE_INTERACTIVE_PLUGIN_EVENT_ID:"urn:fb:interactive_plugin",LIVE_STICKER_SCHEME_ID:"urn:fb:lvstickr"};o.KnownEmsgSchemes=h,o.parseEmsgBoxFromDetails=u,o.extractEmsgBoxDetails=d,o.parseEmsgBoxFromDetailsWithLogging=c,o.parseEmsgBoxesFromMP4Segment=e,o.makeEmsgBoxDedupKey=g,o.makeUpdatedAllEmsgBoxes=t,o.makeUpdatedActiveEmsgBoxes=a},98),__d("OzBufferVTTCaptionsVisibleStrategy",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.isActive=function(){return!this.$1()},t.getBufferTarget=function(){return 0},e}(),i["default"]=e},66),__d("oz-player/utils/OzAbrUtils",[],function(e,t,n,r,a,i){"use strict";e=function(e,t,n,r){var a=e.getNumber("resolution_constraint_factor");if(0===a)return t;var i=t.filter(function(t){var i=t.getWidth()<=n.width*r*a;return t=t.getHeight()<=n.height*r*a,e.getBool("use_strict_resolution_constraint")?i&&t:i||t});return i.length?i:[t[0]]},t=function(e,t,n,r,a,i){t=t?e.getNumber("min_switch_interval"):e.getNumber("initial_switch_interval"),r=r>=e.getNumber("abr_min_bandwidth_samples");var o=e.getNumber("abr_eval_buffer_threshold");return n=!o||n>=o,o=null,a+e.getNumber("min_eval_interval")>Date.now()?o="min_eval_interval":i+t>Date.now()?o="min_switch_interval":r?n||(o="buffer_threshold_not_satisfied"):o="min_bandwidth_samples",o},i.excludeLargeRepresentations=e,i.getReasonToPreventEvaluation=t},66),__d("oz-player/utils/OzBufferingUtils",[],function(e,t,n,r,a,i){"use strict";function e(e,t,n){if(o(e,n))return!0;n=e.currentTime;for(var r=0,a=0;a<e.buffered.length;a++){var i=e.buffered.start(a),l=e.buffered.end(a);if(i<=n&&l>=n){r=l;break}}return r-n>t}function o(e,t){for(var n=e.currentTime,r=0,a=0;a<e.buffered.length;a++){var i=e.buffered.start(a),o=e.buffered.end(a);if(i<=n&&o>=n){r=o;break}}return Math.abs(r-t)<=c||Math.abs(n-t)<=c}function t(e,t){return(e=e?e.getSourceBufferState():null)?l(t=t.getCurrentTime(),e.getBufferedRanges()):0}function l(e,t){for(var n=null,r=0;r<t.length;r++){var a=t[r];a.startTime<=e&&a.endTime>e&&(n=a)}return n?n.endTime-e:0}function n(e){for(var t=[],n=0;n<e.buffered.length;n++)t.push({rangeStart:e.buffered.start(n),rangeEnd:e.buffered.end(n)});return t}function r(e,t,n,r){if(0===n.length||0===t.size)return!1;for(var a=null,i=0;i<n.length;i++){var o=n[i],l=t.get(o);if(u(e,0,l)){a=o;break}}if(null==a)return!1;var d=!0;return t.forEach(function(t,n){a!==n&&(n=t.getBufferedRanges()).forEach(function(t){d=s(e,t,r,d)})}),!d}function s(e,t,n,r){return!(e>=t.startTime&&e<t.endTime+n)&&r}function u(e,t,n){if(void 0===t&&(t=0),n){n=n.getBufferedRanges();for(var r=0;r<n.length;r++)if(n[r].startTime<=e&&n[r].endTime>e&&n[r].endTime-e>t)return!0}return!1}a=.1;var d=1,c=.2;i.BUFFER_UNDERFLOW_THRESHOLD=a,i.BUFFER_OVERFLOW_THRESHOLD=d,i.BUFFER_FUDGE_FACTOR=c,i.hasEnoughBuffer=e,i.hasBufferedToOrReachedEnd=o,i.getBufferAheadFromPlaybackStates=t,i.getBufferAheadFromCurrentTime=l,i.getNumericalRangesFromSourceBuffer=n,i.hasEnoughPartialBuffer=r,i.hasBuffer=u},66),__d("oz-player/utils/OzPlaybackRestrictionsUtils",[],function(e,t,n,r,a,i){"use strict";var o=function(e,t){return e.getBandwidth()-t.getBandwidth()};e=function(e,t,n,r){return 0===r.length?[]:(r.sort(o),t.reduce(function(e,t){return t.applyRestriction(e,n)},r))},i.applyVideoPlaybackRestrictions=e},66),__d("OzSystemicRiskABRManager",["MosUtils","OzSystemicRiskUtils","oz-player/networks/OzBandwidthEstimator","oz-player/utils/OzAbrUtils","oz-player/utils/OzBufferingUtils","oz-player/utils/OzPlaybackRestrictionsUtils"],function(e,t,n,r,a,i,o){"use strict";var l=6e4,s=2e3,u={BANDWIDTH:"br",BUFFER:"vb",ENCODING:"er",LOW_MOS:"lm",MULTIPLIER:"m",PREVIOUS_MOS:"pm",PREVIOUS_RESOLUTION:"pr"};e=function(){function e(e,t,n,r,a,i,o,l){this.$11=!1,this.$1=e,this.$2=t,this.$3=n,this.$4=r,this.$5=a,this.$7=i,this.$8=o,this.$9=l}var t=e.prototype;return t.setSourceBuffer=function(e){this.$6=e},t.updateRepresentations=function(e){var t=this;this.$3=e,e=this.$3.find(function(e){return e.getQualityLabel()===t.$2.getQualityLabel()}),this.$2=null!=(e=e)?e:this.$3[0]},t.getBestRepresentation=function(e){var t=this.$1.getLegacyConfig(),a=r("oz-player/utils/OzBufferingUtils").getBufferAheadFromPlaybackStates(this.$6,this.$5),i=this.$5.getDuration();if(i=isNaN(i)?l:i,0===this.$3.length)return this.$10="no available representations",this.$2;var o=this.$5.getCurrentTime();i="static"===this.$9?1e3*(i-o):l,o=this.$8(),e=t.getBool("systemic_risk_use_fetch_range_duration",!1)?this.$12(e):s;var u=t.getBool("use_bandwidth_estimate_from_headers_in_abr",!1)?n("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnosticsFromHeaders(t):n("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(t);if(null==u)return this.$10="missing bandwidth diagnostics",this.$2;for(var d=this.$13(this.$3).sort(function(e,t){return e.getBandwidth()-t.getBandwidth()}),c=null,p=null,m=null,_=0;_<d.length;_++){var g=d[Math.max(_-1,0)],f=this.$14(g,o);if(g=Math.min(g.getHeight(),g.getWidth()),g=(f=p=r("OzSystemicRiskUtils").getRiskFactorsForRepresentation({bandwidthDiagnostics:u,bitrate:d[_].getBandwidth(),bufferAhead:a,config:this.$1.getLegacyConfig(),hasMadeInitialDecision:this.$11,initialRiskFactor:t.getNumber("systemic_risk_abr_initial_risk_factor",1),lowMosResolution:t.getNumber("systemic_risk_abr_low_mos_resolution",0),minWatchableMos:t.getNumber("systemic_risk_abr_min_watchable_mos",0),previousMos:f,previousResolution:g,remainingVideoDurationMs:i,segmentFetchRangeDurationMs:e})).multiplier,isNaN(g)){m=p,c=this.$2;break}if(!(f=r("OzSystemicRiskUtils").isEffectiveBitrateBelowBandwidthEstimate(d[_].getBandwidth(),p.multiplier,e,u)))break;m=p,c=d[_]}return this.$2=null==c?t.getBool("respect_playback_restrictions_in_abr_fallback",!1)&&d.length>0?d[0]:this.$3[0]:c,this.$15(null!=(g=m)?g:p,{isSystemicRiskABREnabled:t.getBool("use_systemic_risk_abr",!1),noRepresentationSelected:null==c,representationCount:d.length}),this.$11||(this.$11=!0),this.$2},t.$12=function(e){var t=s;if(null!=e&&e.length>0){var n=e[0].getTimeRange().startTime;(e=e[e.length-1].getTimeRange().endTime)-n>0&&(t=1e3*(e-n))}return t},t.$14=function(e,t){return e=e.getCustomField("playbackResolutionMos"),null!=(e=r("MosUtils").parsePlaybackMos(String(e)))?r("MosUtils").getMosValue(e,r("MosUtils").getQualityLabel(t.width,t.height)):null},t.$13=function(e){var t=this;if(!this.$1.getLegacyConfig().getBool("systemic_risk_abr_apply_representation_restrictions",!1))return e;var n=this.$1.getLegacyConfig().getBool("exclude_large_representations_after_restrictions",!1),a=e;e=function(){a=r("oz-player/utils/OzAbrUtils").excludeLargeRepresentations(t.$1,a,t.$8(),t.$7)};var i=function(){a=r("oz-player/utils/OzPlaybackRestrictionsUtils").applyVideoPlaybackRestrictions(t.$1,t.$4,t.$8(),a)};return n||(e(),i()),n&&(i(),e()),a},t.$15=function(e,t){if(null!=e){var n=t.isSystemicRiskABREnabled,r=t.noRepresentationSelected;t=t.representationCount,this.$10=[[u.LOW_MOS,e.lowMos],[u.ENCODING,e.encoding],[u.BANDWIDTH,e.bandwidth],[u.MULTIPLIER,e.multiplier],[u.BUFFER,e.buffer],[u.PREVIOUS_MOS,e.previousMos],[u.PREVIOUS_RESOLUTION,e.previousResolution]].reduce(function(e,t){var n=t[1],r="";switch(typeof n){case"number":r=n.toFixed(1);break;case"boolean":r=n?"1":"0";break;default:r="null"}return e+(t[0]+": ")+r+";"},""),n||(this.$10+="disabled;"),r&&(this.$10+="none-selected-of-"+t+";")}},t.getLastEvaluationReason=function(){return this.$10},e}(),o["default"]=e},98),__d("CometVideoPictureInPictureManagerContext",["gkx","qex","react"],function(e,t,n,r,a,i,o){"use strict";function e(){return n("gkx")("3610")}function t(){return!1}function a(){return!!n("qex")._("586")}r=(i=r("react").createContext)({openPipPlayer:function(){},setController:function(){},setPipPortableVideoID:function(){}}),i=i({hasNextChainedVideo:!1,isPipEnabled:!1,setHasNextChainedVideo:function(){},setSkippedFromPipPlayer:function(){},skippedFromPipPlayer:!1}),o.CometVideoPictureInPictureManagerAPIContext=r,o.CometVideoPictureInPictureManagerContext=i,o.isInPictureInPictureExp=e,o.isInPictureInPictureExpControlGroup=t,o.isSkipAndChainingDisabledInPictureInPicture=a},98),__d("MediaPlaybackCompoundEventStateMachineLogger",["emptyFunction","gkx","qex"],function(e,t,n,r,a,i,o){"use strict";function l(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,hasLoggedStartedPlaying:!1,hasPendingRequestedPlaying:!1,isLoggingScrubbingSequence:!1,lastLoggedCaptionState:null,lastLoggedFullscreenState:!1,lastLoggedSoundOnState:null,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1}}function e(e){function t(e){var t,n=e.eventType,r=e.snaplOverrides,a=e.state,i=null,o=null,l=null!=(null==(e=e.tags)?void 0:e.fullscreen)?null==e?void 0:e.fullscreen:C.lastLoggedFullscreenState,s=null!=(null==e?void 0:e.captions_displayed)?null==e?void 0:e.captions_displayed:C.lastLoggedCaptionState,u=null!=(null==e?void 0:e.player_sound_on)?null==e?void 0:e.player_sound_on:C.lastLoggedSoundOnState;t=null!=(t=b.coreVideoPlayerMetaData.videoFBID)?t:"-1";var d=null==b.coreVideoPlayerMetaData.adClientToken?"organic":"paid";t={current_watching_module:"",media_id:t,player_origin:b.coreVideoPlayerMetaData.playerOriginOverride,player_suborigin:b.coreVideoPlayerMetaData.subOrigin,tracking_type:d},d="",null!=(null==r?void 0:r.video_time_position)?d=Math.round(1e3*r.video_time_position).toString():null!=a.uncontrolledState.videoElementPlayheadPosition&&(d=Math.round(1e3*a.uncontrolledState.videoElementPlayheadPosition).toString()),a={client_high_res_packaging_time_ms:i,event:r={client_time_ms:Date.now().toString(),event_name:n,media_time_ms:d,tag_metadata:{captions_displayed:null==e?void 0:e.captions_displayed,fullscreen:null==e?void 0:e.fullscreen,player_sound_on:null==e?void 0:e.player_sound_on}},operational_metadata:o,required_metadata:t},S.push(a),C.lastLoggedSoundOnState=u,C.lastLoggedFullscreenState=l,C.lastLoggedCaptionState=s}function r(e){"notify_logging_metadata_change"===e.type&&(e=e.payload.loggingMetaData,b=e)}
function a(e,n){return e.controlledState.playbackState!==n.controlledState.playbackState&&"ended"===n.controlledState.playbackState&&C.canLogPausedOrFinishedPlaying?(t({eventType:"completed",state:n}),C.canLogPausedOrFinishedPlaying=!1,P):P}function i(e,n){return t({eventType:"requested_playing",snaplOverrides:n,state:e}),C.hasPendingRequestedPlaying=!0,C.canLogPausedOrFinishedPlaying=!0,P}function o(e){return C.canLogPausedOrFinishedPlaying?C.hasPendingRequestedPlaying?(u(e),C.canLogPausedOrFinishedPlaying=!1,C.hasPendingRequestedPlaying=!1,P):(t({eventType:"paused",state:e}),C.canLogPausedOrFinishedPlaying=!1,C.hasPendingRequestedPlaying=!1,P):P}function u(e){return t({eventType:"cancelled",state:e}),P}function d(e,t,n){return"dom_event_play_promise_rejected"===n.type&&C.hasPendingRequestedPlaying&&null!=(e=n.payload.playPromiseRejectionReason)&&"NotAllowedError"===e.name?(u(t),P):P}function c(e,t,n){return"controller_play_requested"!==n.type&&("dom_event_play"!==n.type||C.shouldIgnoreDomPlay)||e.controlledState.playbackState===t.controlledState.playbackState?P:(i(t),P)}function p(e,t,n){var r=t.controlledState.playbackState,a=e.controlledState.playbackState;return"controller_scrub_begin_requested"!==n.type||e.controlledState.scrubbing||"paused"===r||"ended"===r?e.controlledState.seeking||!t.controlledState.seeking||C.isLoggingScrubbingSequence||"paused"===r||"ended"===r||C.hasPendingRequestedPlaying?"controller_scrub_end_requested"===n.type&&e.controlledState.scrubbing&&"paused"!==r&&"ended"!==r?(i(t,{video_time_position:n.payload.seekTargetPosition}),P):e.controlledState.seeking&&!t.controlledState.seeking?(n=t.uncontrolledState.videoElementPlayheadPosition,null!=(e=e.controlledState.implementationSeekSourcePosition)&&null!=n&&Math.abs(e-n)>s&&(C.shouldLogRequestedPlayingForScrub&&"paused"!==r&&"ended"!==r&&i(t),C.isLoggingScrubbingSequence=!1,C.shouldLogRequestedPlayingForScrub=!1,"paused"!==a&&"ended"!==a&&(C.canLogPlayingEvent=!0)),P):P:(o(t),C.shouldLogRequestedPlayingForScrub=!0,P):(o(t),C.isLoggingScrubbingSequence=!0,P)}function m(e,n){return"stalling"===e.controlledState.playbackState&&"playing"===n.controlledState.playbackState&&C.canLogPlayingEvent?(t({eventType:C.hasLoggedStartedPlaying?"unpaused":"started_playing",state:n}),C.hasLoggedStartedPlaying=!0,C.canLogPlayingEvent=!1,C.hasPendingRequestedPlaying=!1,P):P}function _(e,t,n){return"controller_pause_requested"!==n.type&&("dom_event_pause"!==n.type||C.shouldIgnoreDomPause)||e.controlledState.playbackState===t.controlledState.playbackState?P:(o(t),P)}function g(e,t,r){return"paused"!==(e=t.controlledState.playbackState)&&"ended"!==e?(n("gkx")("1469813")&&"implementation_video_node_unmounted"===r.type?o(t):("implementation_unmounted"===r.type||"implementation_engine_destroy_requested"===r.type)&&o(t),P):P}function f(e,t,n){return"notify_fullscreen_changed"!==n.type?P:(e=C.lastLoggedFullscreenState,n=t.uncontrolledState.isFullscreen,!0!==e&&!0===n?(h(t,!0),P):!0===e&&!1===n?(h(t,!1),P):P)}function y(e,n,r){return"controller_muted_requested"!==r.type&&"controller_volume_requested"!==r.type?P:(e=n.controlledState.muted,r=n.controlledState.volume,e=!(e||0===r),!0!==(r=C.lastLoggedSoundOnState)&&!0===e?(t({eventType:"tags_changed",state:n,tags:{player_sound_on:!0}}),P):!1!==r&&!1===e?(t({eventType:"tags_changed",state:n,tags:{player_sound_on:!1}}),P):P)}function v(e,n,r){return"controller_set_captions_visible_requested"!==r.type?P:(e=C.lastLoggedCaptionState,r=n.controlledState.captionsVisible,!0!==e&&!0===r?(t({eventType:"tags_changed",state:n,tags:{captions_displayed:!0}}),P):!1!==e&&!1===r?(t({eventType:"tags_changed",state:n,tags:{captions_displayed:!1}}),P):P)}function h(e,n){t({eventType:"tags_changed",state:e,tags:{fullscreen:n}})}var P={},b=e.initialLoggingMetaData,S=[],C=l();return{consumeLoggerEvents:function(){if(S.length>0){if(!n("qex")._("1217"))return S.splice(0);if(S.some(function(e){return"paused"===e.event.event_name||"completed"===e.event.event_name||"cancelled"===e.event.event_name}))return S.splice(0)}return[]},handleStateMachine:function(e,t,n){r(n);var i=t.controlledState.playbackState;[f,d,c,p,m,a,_,y,g,v].forEach(function(r){r(e,t,n)}),("paused"===i||"ended"===i)&&(C.canLogPlayingEvent=!0),"controller_pause_requested"===n.type&&(C.shouldIgnoreDomPause=!0),"controller_play_requested"===n.type&&(C.shouldIgnoreDomPlay=!0),"dom_event_pause"===n.type&&(C.shouldIgnoreDomPause=!1),"dom_event_play"===n.type&&(C.shouldIgnoreDomPlay=!1)}}}var s=.5;n("emptyFunction"),n("emptyFunction"),n("emptyFunction"),o.createMediaPlaybackCompoundEventStateMachineLogger=e},98),__d("PlaybackSpeedExperiments",["gkx","qex"],function(e,t,n,r,a,i,o){"use strict";function l(){return n("gkx")("1755152")}function s(){return!1}function e(){return l()||s()||n("qex")._("2095")}function u(){return!s()&&(n("qex")._("2096")||n("qex")._("2097"))}function t(){return d()||u()}function d(){return!!s()||!u()&&(l()||n("qex")._("2098"))}function r(){return!l()&&(!!s()||!u()&&!!n("qex")._("2099"))}function a(){return!l()&&(!s()&&(!!u()&&!!n("qex")._("2100")))}function i(){return!0}function c(){return!!n("qex")._("2101")}o.enableWwwPlaybackSpeedControl=e,o.isInCometHeadroomTest=u,o.enableCometPlaybackSpeedControl=t,o.enableCometPlaybackSpeedControlPublicTest=d,o.enableCometPlaybackSpeedControlNUX=r,o.enableCometPlaybackSpeedControlHeadroomTestNUX=a,o.enablePlaybackSpeedLogging=i,o.enablePersistPlaybackSpeed=c},98),__d("SubscriptionsHandler",["invariant"],function(e,t,n,r,a,i,o,l){"use strict";function s(e){return e.remove||e.reset||e.unsubscribe||e.cancel||e.dispose}function u(e){s(e).call(e)}e=function(){function e(){this.$1=[]}var t=e.prototype;return t.addSubscriptions=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.every(s)||l(0,3659),null!=this.$1?this.$1=this.$1.concat(t):t.forEach(u)},t.engage=function(){null==this.$1&&(this.$1=[])},t.release=function(){null!=this.$1&&(this.$1.forEach(u),this.$1=null)},t.releaseOne=function(e){var t=this.$1;if(null!=t){var n=t.indexOf(e);-1!==n&&(u(e),t.splice(n,1),0===t.length&&(this.$1=null))}},e}(),o["default"]=e},98),__d("LiveTraceWwwVideoPlayerFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],function(e,t,n,r,a,i,o){"use strict";e=n("getFalcoLogPolicy_DO_NOT_USE")("1743810"),a=r("FalcoLoggerInternal").create("live_trace_www_video_player",e),o["default"]=a},98),__d("VideoLiveTrace",["DataViewReader","LiveTraceWwwVideoPlayerFalcoEvent","Mp4DASHEventMessageBox","Mp4Demuxer","throttle"],function(e,t,n,r,a,i,o){var l="x-fb-video-livetrace-ids",s="x-fb-video-livetrace-parentsource",u="x-fb-video-livetrace-streamtype",d="x-fb-origin-hit",c="x-fb-edge-hit",p="PLY:WWW:",m=p+"DL:",_=p+"DIS:",g=1e3,f=/[\r\n]+/;e=function(){function e(e,t,r){var a=this;this.$6=[],this.$1=e,this.$2=null,e=r+":"+t.substring(0,5),this.$3=p+e,this.$4=m+e,this.$5=_+e,this.$7=n("throttle")(function(e){return a.$8(e)},g)}var t=e.prototype;return t.setStreamType=function(e){this.$2=e},t.$9=function(e,t,r,a,i,o){var l,s=this,u=Date.now(),d=null!=(l=this.$2)?l:0;n("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:s.$1,stream_type:d,event_name:t,event_severity:i,event_creation_time:u,source:e,trace_id:r,parent_source:a,metadata:o}})},t.onUpdateStatus=function(e){this.$7(e)},t.$8=function(e){e=1e3*e.position;for(var t=this.$6.length-1;t>=0;t--){var n=this.$6[t];n.presentationTimestamp>e||null==n.displayTimestamp&&(n.displayTimestamp=Date.now(),this.$9(this.$5,"FRAME",n.traceId,this.$4,"SUCCESS",null))}},t.getAndFlushTracedFrames=function(){var e,t={currentTimeMs:Date.now(),streamId:this.$1},n={dl:[],dis:[]},r=[];return this.$6.forEach(function(e){e.hasBeenFlushedAsDownloaded||(n.dl.push({id:e.traceId,timeMs:e.downloadTimestamp}),e.hasBeenFlushedAsDownloaded=!0),null!=e.displayTimestamp?n.dis.push({id:e.traceId,timeMs:e.displayTimestamp}):r.push(e)}),this.$6=r,t[null!=(e=this.$2)?e:0]=n,n.dl.length>0||n.dis.length>0?t:null},t.handleHeadersString=function(e,t){e=e.trim().split(f),this.$10(e.map(function(e){return[(e=e.split(": ")).shift().toLowerCase(),e.shift()]}),t)},t.handleHeaders=function(e,t){this.$10(this.$11(e),t)},t.handleHeadersAndBody=function(e,t,n){this.$12(this.$11(e),t,n)},t.$11=function(e){var t=[],n=(e=e.entries(),Array.isArray(e)),r=0;for(e=n?e:e["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var a;if(n){if(r>=e.length)break;a=e[r++]}else{if((r=e.next()).done)break;a=r.value}a=a,t.push(a)}return t},t.$13=function(e){var t=Date.now(),r=new Map,a=e.reduce(function(e,t){return e+t.byteLength},0),i=new Uint8Array(a),o=0;for(e.forEach(function(e){i.set(e,o),o+=e.byteLength}),a=new(n("Mp4Demuxer"))(new DataView(i.buffer,i.byteOffset,i.byteLength));!a.atEnd();){if((e=a.parseBox()).getType()===n("Mp4DASHEventMessageBox").canonicalType){var l,s=a.parseCanonicalBox(n("Mp4DASHEventMessageBox"),a.parseFullBox(e));if(s instanceof n("Mp4DASHEventMessageBox"))if(null==(l=null==(l=s.getEmsgFields())?void 0:l.schemeIdUri)?void 0:l.startsWith("livedash:trace:")){l=s.getMessageData(),s=new(n("DataViewReader"))(l).readZeroTerminatedString(l.byteLength);try{l=JSON.parse(s),Array.isArray(l)&&l.filter(function(e){return Array.isArray(e)&&2===e.length}).forEach(function(e){var n=e[0];e=e[1],r.set(n,{displayTimestamp:null,downloadTimestamp:t,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:e,traceId:n})})}catch(e){}}}a.skipBox(e)}return r},t.$14=function(e,t){var n=this,r="null",a=Date.now(),i=new Map,o="";return e.forEach(function(e){var t=e[0].toLowerCase();(e=e[1],t===l&&e)&&e.split(",").forEach(function(e){var t=+(e=e.split(":"))[0];e=+e[1],i.set(t,{displayTimestamp:null,downloadTimestamp:a,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:e,traceId:t})});t===s&&(o=e),null===n.$2&&t===u&&(n.$2=parseInt(e,10)),(t===d||t===c)&&parseInt(e,10)&&(r=t===d?"origin":"edge")}),(e=t||{}).hit=r,""!==o?{tracedFrames:i,eventMetaData:e,parentSource:o,streamType:this.$2}:null},t.$12=function(e,t,n){var r=this.$14(e,n);if(null!=r&&""!==r.parentSource)for((null==t?void 0:t.length)&&(e=this.$13(t)).forEach(function(e,t){r.tracedFrames.set(t,e)}),this.$6=this.$6.concat(Array.from(r.tracedFrames.values())),t=n=r.tracedFrames.keys(),n=0,t=(e=Array.isArray(t))?t:t["function"==typeof Symbol?Symbol.iterator:"@@iterator"]();;){var a;if(e){if(n>=t.length)break;a=t[n++]}else{if((n=t.next()).done)break;a=n.value}a=a,this.$9(this.$4,"SEGMENT",a,r.parentSource,"SUCCESS",r.eventMetaData)}},t.$10=function(e,t){this.$12(e,null,t)},t.handleXHR=function(e,t){this.handleHeadersString(e.getAllResponseHeaders(),t)},t.getLiveTraceContext=function(){return null!=this.$2?{streamId:this.$1,streamType:this.$2,sourceId:this.$3}:null},e}(),o["default"]=e},98),__d("VideoPlayerBanzaiLogFlusher",["VideoPlayerWwwLogger","emptyFunction","gkx"],function(e,t,n,r,a,i,o){"use strict";n("emptyFunction"),t=function(){function e(e){this.$1=e}var t=e.prototype;return t.flushLogs=function(){this.$1.consumeLoggerEvents().forEach(function(e){var t={event:e.eventType,logData:e.logData,routeTracePolicy:e.routeTracePolicy,source:e.source_VPL_LOGGING_HACK};"animated_image_share"===e.source_VPL_LOGGING_HACK&&n("gkx")("1710047")||(null!=(t=null==(t=e.logData)?void 0:t.ad_client_token)?n("VideoPlayerWwwLogger").logCometImmediately(e):n("VideoPlayerWwwLogger").logComet(e))})},t.discardLogsWithoutFlushing=function(){this.$1.consumeLoggerEvents()},e}(),o["default"]=t},98),__d("VideoPlayerImplementationErrorNormalization",[],function(e,t,n,r,a,i){"use strict";function e(e){var t=e.getType();switch(t){case"OZ_NETWORK":return t=null!=(t=null==(t=e.getExtra())?void 0:t.code)?t:"0",(t=parseInt(t,10))<100||t>599?"NetworkError":"HTTPError";case"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":return null!=(e=null==(t=e.getExtra())?void 0:t.mimeType)&&e.indexOf("video")>-1?"VideoDecodeError":null!=e&&e.indexOf("audio")>-1?"AudioDecodeError":"GenericDecodeError"}return null}function t(e){switch(e){case"MEDIA_ERR_NETWORK":return"NetworkError";case"MEDIA_ERR_ABORTED":case"MEDIA_ERR_DECODE":case"MEDIA_ERR_SRC_NOT_SUPPORTED":case"MEDIA_ERR_UNKNOWN":return"GenericDecodeError";case"OZ_REPRESENTATION_PARSER":case"OZ_XML_PARSER":return"ManifestParseError";case"BUFFERING_TIMEOUT":case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError"}return null}i.getVideoPlayerNormalizedErrorTypeFromOzError=e,i.getErrorTypeFromErrorName=t},66),__d("getErrorMessageFromMediaErrorCode",[],function(e,t,n,r,a,i){"use strict";function e(e){switch(e){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}i["default"]=e},66),__d("getErrorNameFromMediaErrorCode",[],function(e,t,n,r,a,i){"use strict";function e(e){switch(e){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return"MEDIA_ERR_UNKNOWN_"+(null!=(e=e)?e:"UNDEFINED")}}i["default"]=e},66),__d("VideoPlayerImplementationErrors",["NetworkStatus","VideoPlayerImplementationErrorNormalization","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode","gkx","oz-player/utils/OzError"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.errorLocation,r=e.hostCallError,a=e.videoElementError,i=e.videoElementNetworkState;e=e.videoElementReadyState;var o=null==a?void 0:a.code,l=null!=r&&"string"==typeof r.message?r.message:null;return null==l&&(l=null==a?void 0:a.message),null==l&&null!=o&&(l=n("getErrorMessageFromMediaErrorCode")(o)),{createdTimestamp:Date.now(),errorDescription:(null!=(a=l)?a:"Empty error")+"; code: "+(null!=(l=o)?l:"undefined")+"; readyState: "+e+"; networkState: "+i,errorLocation:t,errorName:n("getErrorNameFromMediaErrorCode")(o),originalError:r}}function t(e,t){return null==e?{createdTimestamp:Date.now(),errorDescription:"Empty rejection reason from video play()",errorLocation:t,errorName:"PlayRejectedError"}:{createdTimestamp:Date.now(),errorCode:"string"==typeof e.code?e.code:"number"==typeof e.code?String(e.code):void 0,errorDescription:"string"==typeof e.message?e.message:String(e),errorLocation:t,errorName:"string"==typeof e.name?e.name:"PlayRejectedError"}}function a(e,t,r,a,i){var o,l=i?"in_play"===a&&n("NetworkStatus").isOnline()?u.BUFFERING_TIMEOUT_LIVEREWIND_INPLAY:"in_play"!==a||n("NetworkStatus").isOnline()?"start/unpause"===a&&n("NetworkStatus").isOnline()?u.BUFFERING_TIMEOUT_LIVEREWIND_START:"start/unpause"!==a||n("NetworkStatus").isOnline()?0:u.BUFFERING_TIMEOUT_LIVEREWIND_START_NO_NETWORK:u.BUFFERING_TIMEOUT_LIVEREWIND_INPLAY_NO_NETWORK:"in_play"===a&&n("NetworkStatus").isOnline()?u.BUFFERING_TIMEOUT_INPLAY:"in_play"!==a||n("NetworkStatus").isOnline()?"start/unpause"===a&&n("NetworkStatus").isOnline()?u.BUFFERING_TIMEOUT_START:"start/unpause"!==a||n("NetworkStatus").isOnline()?0:u.BUFFERING_TIMEOUT_START_NO_NETWORK:u.BUFFERING_TIMEOUT_INPLAY_NO_NETWORK;return o={message:String(null!=(o=null==t?void 0:t.message)?o:""),name:String(null!=(o=null==t?void 0:t.name)?o:"UnknownError"),stack:String((null==t?void 0:t.stack)||(new Error).stack)},{createdTimestamp:Date.now(),errorCode:String(l),errorDescription:o.name+" "+o.message,errorLocation:r,errorName:e,stack:o.stack,url:null}}function l(e,t,r,a){var i;return void 0===a&&(a=null),i={message:String(null!=(i=null==t?void 0:t.message)?i:""),name:String(null!=(i=null==t?void 0:t.name)?i:"UnknownError"),stack:String((null==t?void 0:t.stack)||(new Error).stack)},{createdTimestamp:Date.now(),errorCode:null,errorDescription:i.name+" "+i.message,errorLocation:r,errorName:e,stack:i.stack,url:null!=a&&n("gkx")("1526990")?a:null}}function i(e,t){if(e instanceof n("oz-player/utils/OzError")){var a=e,i=a.getExtra();return{createdTimestamp:Date.now(),errorCode:i.code,errorDescription:a.getDescription(),errorLocation:t,errorName:a.getType(),errorType:r("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(a),stack:a.stack,url:i.url}}return l("OZ_JAVASCRIPT_NATIVE",e,t)}function s(e,t){var n="The video node set its error property to a MediaError",r=(e=e.message).split(": ");return r.length>1&&(e=r.shift(),n=r.join(": ")),{createdTimestamp:Date.now(),errorDescription:n,errorLocation:t,errorName:e,errorType:"GenericDecodeError"}}var u={BUFFERING_TIMEOUT_INPLAY:"30000",BUFFERING_TIMEOUT_INPLAY_NO_NETWORK:"30001",BUFFERING_TIMEOUT_LIVEREWIND_INPLAY:"30010",BUFFERING_TIMEOUT_LIVEREWIND_INPLAY_NO_NETWORK:"30011",BUFFERING_TIMEOUT_LIVEREWIND_START:"30012",BUFFERING_TIMEOUT_LIVEREWIND_START_NO_NETWORK:"30013",BUFFERING_TIMEOUT_START:"30002",BUFFERING_TIMEOUT_START_NO_NETWORK:"30003"};o.createVideoPlayerErrorFromHTMLVideoElementError=e,o.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=t,o.createVideoPlayerBufferingErrorFromGenericError=a,o.createVideoPlayerErrorFromGenericError=l,o.createVideoPlayerErrorFromOzImplementationError=i,o.createVideoPlayerErrorFromVideoNodeError=s},98),__d("VideoPlayerImplementationReactVideoElement.react",["gkx","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.alt,r=e.implementationExposedState,a=e.seoWebCrawlerVideoTracks,i=e.src,o=e.videoElementCallbacks,s=e.videoElementPreloadDisabled,u=e.videoElementRefCallback;e=e.videoPixelsFit;var d=r.hasPlayEverBeenRequested;return d=(r=r.isExternalMedia)&&!d?null:i,i=r&&n("gkx")("2449")?babelHelpers["extends"]({crossOrigin:"anonymous"},o):babelHelpers["extends"]({},o),l.jsx("video",babelHelpers["extends"]({"aria-label":null!=(r=t)?r:void 0,className:"x1lliihq x5yr21d xh8yej3",controls:!1,muted:!0,playsInline:!0,preload:!0===s?"none":void 0},i,{ref:u,src:d,style:e?{objectFit:e.objectFit}:void 0,children:a}))}var l=r("react");e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerImplementationStateMachine",["VideoPlayerEmsg","VideoPlayerImplementationErrors","gkx","recoverableViolation","shallowEqual","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t=e.bufferingDetected,n=e.seeking;return e=e.waitingForDomPlaying,!t&&!n&&!e}function s(e){var t=e.bufferingDetected,r=e.prevPlaybackState,a=e.seeking;switch(t=l({bufferingDetected:t,seeking:a,waitingForDomPlaying:e=e.waitingForDomPlaying}),a=r,r){case"stalling":a=t?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:n("recoverableViolation")("unexpected playbackState: "+r,"comet_video_player")}return a}function u(e){return e.loopCount>0&&e.loopCurrent<e.loopCount||-1===e.loopCount}function d(e,t,a){switch(a.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers["extends"]({},e,{hostCallQueue:e.hostCallQueue.concat([a])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers["extends"]({},e,{latencyLevel:a.payload.latencyLevel});case"controller_override_player_format":return babelHelpers["extends"]({},e,{overriddenPlayerFormat:e.playerFormat,playerFormat:a.payload.playerFormat});case"controller_set_player_format":return babelHelpers["extends"]({},e,{playerFormat:a.payload.playerFormat});case"dom_event_ended":return babelHelpers["extends"]({},e,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":return"ended"===e.playbackState?e:!0===t.videoElementEnded?babelHelpers["extends"]({},e,{playbackState:"ended",waitingForDomPlaying:!1}):"paused"===e.playbackState?e:babelHelpers["extends"]({},e,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":var i=e.playbackState,o=i;switch(i){case"playing":case"stalling":case"ended":case"paused":o="stalling";break;default:n("recoverableViolation")("unexpected playbackState: "+i,"comet_video_player")}return i=!0,babelHelpers["extends"]({},e,{playbackState:o,waitingForDomPlaying:i});case"dom_event_playing":o=e.bufferingDetected,i=e.seeking;var l=!1,d=e.playbackState;return babelHelpers["extends"]({},e,{playbackState:s({bufferingDetected:o,prevPlaybackState:d,seeking:i,waitingForDomPlaying:l}),waitingForDomPlaying:l});case"dom_event_timeupdate":if(o=r("VideoPlayerEmsg").makeUpdatedActiveEmsgBoxes(e.allEmsgBoxes,t.videoElementPlayheadPosition,e.activeEmsgBoxes),e.waitingForDomTimeUpdateAfterSeeked){d=e.bufferingDetected,i=e.seeking,l=!1;var c=e.playbackState;return babelHelpers["extends"]({},e,{activeEmsgBoxes:o,playbackState:s({bufferingDetected:d,prevPlaybackState:c,seeking:i,waitingForDomPlaying:l}),waitingForDomPlaying:l,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers["extends"]({},e,{activeEmsgBoxes:o});case"dom_event_seeking":switch(c=d=e.playbackState,d){case"paused":case"ended":break;case"stalling":case"playing":c="stalling";break;default:n("recoverableViolation")("unexpected playbackState: "+d,"comet_video_player")}return babelHelpers["extends"]({},e,{playbackState:c,seeking:!0,waitingForDomPlaying:!0});case"dom_event_seeked":return i=e.bufferingDetected,l=e.waitingForDomPlaying,o=!1,d=e.playbackState,babelHelpers["extends"]({},e,{implementationSeekSourcePosition:null,playbackState:s({bufferingDetected:i,prevPlaybackState:d,seeking:o,waitingForDomPlaying:l}),seeking:o,waitingForDomTimeUpdateAfterSeeked:!0});case"dom_event_error":return c=r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:"dom_event_error",hostCallError:null,videoElementError:a.payload.videoElementError,videoElementNetworkState:a.payload.videoElementNetworkState,videoElementReadyState:a.payload.videoElementReadyState}),babelHelpers["extends"]({},e,{error:n("gkx")("2011")?e.error:c,playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers["extends"]({},e,{hostCallPlayIDLast:a.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return e.hostCallPlayIDLast!==a.payload.hostCallPlayID?e:babelHelpers["extends"]({},e,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":return e.hostCallPlayIDLast!==a.payload.hostCallPlayID?e:babelHelpers["extends"]({},e,{hostCallPlayIDLast:null,playbackState:"stalling"===e.playbackState?"paused":e.playbackState,waitingForDomPlaying:!1});case"implementation_host_call_queue_flushed":return babelHelpers["extends"]({},e,{hostCallQueue:[]});case"implementation_host_call_failed":return i=r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:a.payload.errorLocation,hostCallError:a.payload.hostCallError,videoElementError:a.payload.videoElementError,videoElementNetworkState:a.payload.videoElementNetworkState,videoElementReadyState:a.payload.videoElementReadyState}),babelHelpers["extends"]({},e,{error:i,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_video_node_unmounted":return n("gkx")("2118")?babelHelpers["extends"]({},e,{hostCallPlayIDLast:null}):e;case"implementation_engine_initialized":return l=null!=(d=a.payload.streamingFormat)?d:e.streamingFormat,babelHelpers["extends"]({},e,{availableQualities:a.payload.availableQualities,selectedVideoQuality:a.payload.selectedVideoQuality,streamingFormat:l,targetVideoQuality:a.payload.targetVideoQuality,videoProjection:a.payload.videoProjection});case"implementation_engine_representation_blocked":return babelHelpers["extends"]({},e,{availableQualities:a.payload.availableQualities});case"implementation_engine_destroyed":return n("gkx")("2118")?babelHelpers["extends"]({},e,{hostCallPlayIDLast:null}):e;case"implementation_fatal_error":return n("gkx")("2118")?babelHelpers["extends"]({},e,{error:a.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1}):babelHelpers["extends"]({},e,{error:a.payload.fatalError,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers["extends"]({},e,{implementationSeekSourcePosition:a.payload.seekSourcePosition});case"representation_changed":return babelHelpers["extends"]({},e,{targetVideoQuality:a.payload.targetVideoQuality});case"controller_pause_requested":return"ended"===e.playbackState?e:babelHelpers["extends"]({},e,{lastPausedTimeMs:Date.now(),lastPauseReason:a.payload.reason,lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:e.lastPlayedTimeMs>0?e.watchTimeMs+(Date.now()-e.lastPlayedTimeMs):e.watchTimeMs});case"controller_play_requested":return"paused"!==e.playbackState&&"ended"!==e.playbackState?e:babelHelpers["extends"]({},e,{hasPlayEverBeenRequested:!0,lastPlayedTimeMs:0===e.lastPlayedTimeMs?Date.now():e.lastPlayedTimeMs,lastPlayReason:a.payload.reason,loopCurrent:u(e)?"loop_initiated"===a.payload.reason?e.loopCurrent+1:e.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers["extends"]({},e,{implementationSeekSourcePosition:null!=(o=t.videoElementPlayheadPosition)?o:e.implementationSeekSourcePosition,seeking:!0,seekTargetPosition:a.payload.seekTargetPosition});case"controller_quality_requested":return babelHelpers["extends"]({},e,{selectedVideoQuality:a.payload.selectedVideoQuality});case"controller_set_caption_display_style_requested":return babelHelpers["extends"]({},e,{captionDisplayStyle:a.payload.captionDisplayStyle});case"controller_set_picture_in_picture_state_requested":return babelHelpers["extends"]({},e,{isDesktopPictureInPicture:a.payload.isInPictureInPictureMode});case"controller_set_caption_format_requested":return babelHelpers["extends"]({},e,{captionFormat:a.payload.captionFormat});case"controller_set_playback_rate":return babelHelpers["extends"]({},e,{targetPlaybackRate:a.payload.playbackRate});case"controller_muted_requested":return babelHelpers["extends"]({},e,{lastMuteReason:a.payload.reason,muted:a.payload.muted});case"controller_volume_requested":return babelHelpers["extends"]({},e,{volume:a.payload.volume});case"controller_scrub_begin_requested":return e.scrubbing?e:babelHelpers["extends"]({},e,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return e.scrubbing?babelHelpers["extends"]({},e,{implementationSeekSourcePosition:null!=(c=t.videoElementPlayheadPosition)?c:e.implementationSeekSourcePosition,scrubbing:!1,seeking:null!=a.payload.seekTargetPosition,seekTargetPosition:a.payload.seekTargetPosition}):e;case"buffering_begin_requested":switch(d=i=e.playbackState,i){case"paused":case"ended":break;case"playing":case"stalling":d="stalling";break;default:n("recoverableViolation")("unexpected playbackState: "+i,"comet_video_player")}return l=a.payload.bufferingType,babelHelpers["extends"]({},e,{bufferingDetected:!0,lastBufferingType:l,playbackState:d});case"buffering_end_requested":return o=e.seeking,c=e.waitingForDomPlaying,i=!1,l=e.playbackState,babelHelpers["extends"]({},e,{bufferingDetected:i,playbackState:s({bufferingDetected:i,prevPlaybackState:l,seeking:o,waitingForDomPlaying:c})});case"controller_set_captions_visible_requested":return d=a.payload.captionsVisible,e.captionsVisible===d?e:babelHelpers["extends"]({},e,{activeCaptions:d?e.activeCaptions:null,captionsLocale:d?e.captionsLocale:null,captionsVisible:d});case"controller_set_active_captions_requested":o=null!=(l=null==(i=a.payload.activeCaptions)?void 0:i.rows)?l:[],c=a.payload.captionsLocale;var p=null!=(l=null==(d=e.activeCaptions)?void 0:d.rows)?l:[];return p.length===o.length&&o.every(function(e,t){return p[t]===e})?e:babelHelpers["extends"]({},e,{activeCaptions:i,captionsLocale:c});case"captions_loaded":return babelHelpers["extends"]({},e,{activeCaptions:e.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers["extends"]({},e,{activeCaptions:null,captionsLoaded:!1,captionsLocale:null});case"inband_captions_autogenerated_changed":return d=a.payload.inbandCaptionsAutogenerated,e.inbandCaptionsAutogenerated===d?e:babelHelpers["extends"]({},e,{inbandCaptionsAutogenerated:d});case"stream_ended":return babelHelpers["extends"]({},e,{streamEnded:!0});case"stream_gone_before_start":return babelHelpers["extends"]({},e,{playbackState:"ended",streamEnded:!0,waitingForDomPlaying:!1});case"stream_interrupted":return babelHelpers["extends"]({},e,{streamInterrupted:!0});case"stream_resumed":return babelHelpers["extends"]({},e,{streamInterrupted:!1});case"seekable_ranges_changed":return l=a.payload.seekableRanges,babelHelpers["extends"]({},e,{seekableRanges:l});case"controller_set_is_live_rewind_active_requested":return o=a.payload.isLiveRewindActive,babelHelpers["extends"]({},e,{isLiveRewindActive:o});case"loop_count_change_requested":return(i=a.payload.loopCount)===e.loopCount?e:babelHelpers["extends"]({},e,{loopCount:i,loopCurrent:0});case"player_dimensions_changed":return d=(c=a.payload.dimensions).height,(l=c.width)===e.dimensions.width&&d===e.dimensions.height?e:babelHelpers["extends"]({},e,{dimensions:{height:d,width:l}});case"emsg_boxes_parsed":return o=r("VideoPlayerEmsg").makeUpdatedAllEmsgBoxes(e.allEmsgBoxes,a.payload.emsgBoxes),i=r("VideoPlayerEmsg").makeUpdatedActiveEmsgBoxes(o,t.videoElementPlayheadPosition,e.activeEmsgBoxes),babelHelpers["extends"]({},e,{activeEmsgBoxes:i,allEmsgBoxes:o});case"register_emsg_observer":return(c=new Set(e.emsgObserverTokens)).add(a.payload.token),babelHelpers["extends"]({},e,{emsgObserverTokens:c});case"unregister_emsg_observer":return(d=new Set(e.emsgObserverTokens))["delete"](a.payload.token),babelHelpers["extends"]({},e,{emsgObserverTokens:d});default:return e}}function c(e,t,r){var a="dom_seeking"!==t.type;a=a?r:e.uncontrolledState,r=!n("shallowEqual")(a,e.uncontrolledState),t=d(e.controlledState,a,t);var i=!n("shallowEqual")(t,e.controlledState);return r||i?babelHelpers["extends"]({},e,{controlledState:i?t:e.controlledState,uncontrolledState:r?a:e.uncontrolledState}):e}function p(e){var t=e.collectUncontrolledState,r=e.debugLogId;r=e.initialState;var a=e.onDispatched,i=e.onFatalError,o=r,l=o,s=0,u=!1,d=!1,p=!0,m=!0;return{dispatch:function(e){if(m){var r=null,o=null;try{if(++s>=10){if(u)return;throw u=!0,n("unrecoverableViolation")("Video player state machine loop detected","comet_video_player")}var _=l.uncontrolledState;if(p)try{_=t()}catch(e){p=!1,o=e}var g=l;_=c(g,e,_),l=_,a(g,_,e)}catch(e){m=!1,r=e}finally{if(!d&&(null!=r||null!=o)){d=!0;try{i(null!=(g=r)?g:o)}catch(e){}}--s}}},getCurrentState:function(){return l},getInitialState:function(){return o}}}function e(e){function t(e,t,n){try{for(var r=!0,a=0;r&&a<o.length;){r=(0,o[a])(e,t,n),++a}}finally{}}var n=e.collectUncontrolledState,r=e.debugLogId,a=e.initialState,i=e.onFatalError,o=e.stateTransitionHandlers;return p({collectUncontrolledState:n,debugLogId:r,initialState:a,onDispatched:t,onFatalError:i})}function t(e,t){function n(){}function r(e){return e}function a(n){return function(a){var i=r(a.currentTarget);t(i,["reactEvent("+a.type+")"]),e.dispatch(n)}}function i(n){return function(a){var i=r(a.currentTarget);t(i,["reactEvent("+a.type+")"]),e.dispatch(n(a,i))}}return{onAbort:n,onCanPlay:n,onCanPlayThrough:n,onDurationChange:a({type:"dom_event_durationchange"}),onEmptied:n,onEncrypted:n,onEnded:a({type:"dom_event_ended"}),onError:i(function(e,t){return{payload:{videoElementError:t.error,videoElementNetworkState:t.networkState,videoElementReadyState:t.readyState},type:"dom_event_error"}}),onLoadedData:n,onLoadedMetadata:n,onLoadStart:n,onPause:a({type:"dom_event_pause"}),onPlay:a({type:"dom_event_play"}),onPlaying:i(function(e){return{payload:{domEventPerfTimestamp:e.timeStamp},type:"dom_event_playing"}}),onProgress:a({type:"dom_event_progress"}),onRateChange:a({type:"dom_event_ratechange"}),onSeeked:a({type:"dom_event_seeked"}),onSeeking:a({type:"dom_event_seeking"}),onStalled:n,onSuspend:n,onTimeUpdate:a({type:"dom_event_timeupdate"}),onVolumeChange:a({type:"dom_event_volumechange"}),onWaiting:a({type:"dom_event_waiting"})}}o.createVideoPlayerImplementationStateMachine=p,o.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=e,o.createReactVideoElementCallbacksForStateMachine=t},98),__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","gkx","promiseDone"],function(e,t,n,r,a,i,o){"use strict"
;function l(){return"id-vpdom-"+n("cometUniqueID")()}function s(e){var t=e.engineExtrasAPI,r=e.hostCall,a=e.machine;switch(e=e.videoElementAPI,r.type){case"host_call_play":var i=e.play();i&&(a.dispatch({payload:{hostCallPlayID:r.payload.hostCallID},type:"dom_event_play_promise_created"}),n("promiseDone")(i.then(function(){a.dispatch({payload:{hostCallPlayID:r.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(e){a.dispatch({payload:{hostCallPlayID:r.payload.hostCallID,playPromiseRejectionReason:e},type:"dom_event_play_promise_rejected"})})));break;case"host_call_pause":e.pause();break;case"host_call_set_playback_rate":e.setPlaybackRate(r.payload.playbackRate);break;case"host_call_set_muted":e.setMuted(r.payload.muted);break;case"host_call_set_volume":e.setVolume(r.payload.volume);break;case"host_call_set_current_time":e.setPlayheadPosition(r.payload.currentTime);break;case"host_call_set_video_quality":t.setUserSelectedVideoQuality(r.payload.selectedVideoQuality);break;case"host_call_set_latency_level":t.setLatencyLevel(r.payload.latencyLevel);break;case"host_call_picture_in_picture":e.requestPictureInPicture();break;case"host_call_exit_picture_in_picture":e.exitPictureInPicture();break;default:return r.type,!1}return!0}function u(e){var t=e.engineExtrasAPI,n=e.hostCall,r=e.machine;if((e=e.videoElementAPI)&&t){var a=!1;try{a=s({engineExtrasAPI:t,hostCall:n,machine:r,videoElementAPI:e})}catch(t){r.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:n,hostCallError:t,videoElementError:e.getError(),videoElementNetworkState:e.getNetworkState(),videoElementReadyState:e.getReadyState()},type:"implementation_host_call_failed"})}a&&r.dispatch({payload:{hostCall:n},type:"implementation_host_call_applied"})}else r.dispatch(n)}function d(e){function t(){r=r.filter(function(e){return"host_call_play"!==e.type&&"host_call_pause"!==e.type})}function n(e){r=r.filter(function(t){return t.type!==e})}var r=[];return e.forEach(function(e){switch(e.type){case"host_call_play":case"host_call_pause":t();break;case"host_call_set_playback_rate":case"host_call_set_muted":case"host_call_set_volume":case"host_call_set_current_time":case"host_call_set_video_quality":case"host_call_set_latency_level":case"host_call_picture_in_picture":case"host_call_exit_picture_in_picture":n(e.type);break;default:e.type}r=r.concat([e])}),r}function e(e){var t=e.engineExtrasAPI,n=e.machine,r=e.reason,a=e.state,i=e.videoElementAPI;e=[{payload:{hostCallID:l(),reason:r,volume:a.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:l(),muted:a.controlledState.muted,reason:r},type:"host_call_set_muted"},{payload:{hostCallID:l(),reason:r,selectedVideoQuality:a.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}],(r=d(a.controlledState.hostCallQueue.concat(e))).forEach(function(e){u({engineExtrasAPI:t,hostCall:e,machine:n,videoElementAPI:i})}),n.dispatch({payload:{hostCallsFlushed:r},type:"implementation_host_call_queue_flushed"})}n("emptyFunction"),o.makeHostCallID=l,o.applyOrQueueHostCall=u,o.flushHostCallQueue=e},98),__d("VideoMimeTypes",[],function(e,t,n,r,a,i){function e(e,t,n){return e+'; codecs="'+t+", "+n+'"'}function t(e){return"avc1.42E0"+e.toString(16).toUpperCase()}function n(e){return"avc1.4D40"+e.toString(16).toUpperCase()}function r(e){return"avc1.6400"+e.toString(16).toUpperCase()}a="mp4a.40.2";var o="video/mp4";o={h264baseline:t=e(o,t(30),a),h264main30avc:e(o,n(30),a),h264main31avc:n=e(o,n(31),a),h264high50avc:e(o,r(50),a),h264high51avc:e=e(o,r(51),a)},i["default"]=o},66),__d("XPlatReactEnvironment",["gkx"],function(e,t,n,r,a,i,o){"use strict";function e(){return n("gkx")("3422")}function t(){return n("gkx")("1902661")}function r(){return!0}o.isFRLEnvironment=e,o.isInstagramEnvironment=t,o.isWeb=r},98),__d("isSSR",["ExecutionEnvironment","XPlatReactEnvironment"],function(e,t,n,r,a,i,o){"use strict";t=r("XPlatReactEnvironment").isWeb()&&!n("ExecutionEnvironment").canUseDOM,o["default"]=t},98),__d("VideoPlayerConnectionQuality",["isSSR"],function(e,t,n,r,a,i,o){"use strict";var l={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},s=[{bandwidth:5e5,connectionQuality:l.POOR},{bandwidth:2e6,connectionQuality:l.MODERATE},{bandwidth:1e7,connectionQuality:l.GOOD}],u=100,d=null,c=null;e=function(e){if(n("isSSR"))return"MODERATE";if(null!==d&&null!==c&&d>=Date.now()-u)return c;var t=null;if(null!=(e=e()))for(var r=0;r<s.length;r++)if(e<s[r].bandwidth){t=s[r].connectionQuality;break}return null===t&&(t=l.EXCELLENT),d=Date.now(),c=t,t},o.evaluate=e},98),__d("VideoPlayerLoggerPlayerStates",[],function(e,t,n,r,a,i){n={STARTED:"started",UNPAUSED:"unpaused"},i["default"]=n},66),__d("VideoPlayerMutedStateChange",[],function(e,t,n,r,a,i){"use strict";function e(e){var t=e.currMuted,n=e.currVolume,r=e.prevMuted;return e=e.prevVolume,t=t||0===n,(n=r||0===e)===t?null:t?"muted":"unmuted"}i.getVideoPlayerMutedStateChange=e},66),__d("getVideoBrowserTabId",["guid"],function(e,t,n,r,a,i,o){function e(){return l}var l=n("guid")().slice(-8);o["default"]=e},98),__d("VideoPlayerImplementationStateMachineLogger",["CometProductAttribution","NetworkStatus","PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents","emptyFunction","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","mapObject","performanceAbsoluteNow","qex","recoverableViolation","removeFromArray"],function(e,t,n,r,a,i,o){"use strict";function l(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,errorRecoveryAttemptState:{currentRecoverableError:null,eventsLogged:0,repeatCount:0},hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,inPlayStallCount200ms:0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedRepresentation:null,nextHeartbeatTime:null,nextPlayedThreeSecondsPlayheadPosition:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallCountTotal:0,stallDuration:0,stallDurationTotal:0,stallStartTimestamp:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0}}function s(e,t){return"muted"===t||"unmuted"===t||"started_playing"===t||"caption_change"===t||"unpaused"===t?e.controlledState.captionsVisible?"on":"off":void 0}function e(e){function t(e){return ae.debugSubscribers.push(e),function(){n("removeFromArray")(ae.debugSubscribers,e)}}function a(e){ae.debugSubscribers.forEach(function(t){return t(e)})}function i(e){var t=ae.stallStartTimestamp;t>0&&(ae.stallCount+=1,ae.stallCountTotal+=1,ae.hasPendingRequestedPlaying&&(ae.startStallCountTotal+=1),t=(e-=t)>200,ae.stallDurationTotal+=e,ae.stallDuration+=e,ae.stallCount200ms+=t?1:0,ae.inPlayStallCount200ms+=t&&!ae.hasPendingRequestedPlaying?1:0,ae.hasPendingRequestedPlaying&&(ae.startStallDurationTotal+=e))}function o(e,t){e=null==e.uncontrolledState.videoElementPlayheadPosition?null:e.uncontrolledState.videoElementPlayheadPosition;var n=null;switch(t){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":n=ae.lastStartTimePosition;break;case"scrubbed":n=e}switch(t){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":ae.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":ae.lastStartTimePosition=e}return{video_last_start_time_position:n}}function m(e,t){var n=t.uncontrolledState.clockTimestamp;e=e.controlledState.streamInterrupted,t=t.controlledState.streamInterrupted,!e&&t?ae.interruptStartTimestamp=n:e&&!t&&ae.interruptStartTimestamp>0&&(ae.interruptEndTimestamp=n,ae.interruptCount+=1,ae.interruptDuration+=ae.interruptEndTimestamp-ae.interruptStartTimestamp)}function f(e,t,n){var r=t.uncontrolledState.clockTimestamp;e=e.controlledState.playbackState;var o=t.controlledState.playbackState;"stalling"!==e&&"stalling"===o&&(a("stall_start"),ae.stallStartTimestamp=r),"stalling"===e&&"stalling"!==o&&(r=0,("dom_event_playing"===n.type||"buffering_end_requested"===n.type)&&null!=n.payload.domEventPerfTimestamp&&(r=Math.max(t.uncontrolledState.perfTimestamp-n.payload.domEventPerfTimestamp,0)),i(t.uncontrolledState.clockTimestamp-r),ae.stallStartTimestamp=0,a("stall_end"))}function y(e,t,n){switch(t=(e=t.uncontrolledState).videoElementPlayheadPosition,n){case"unpaused":case"started_playing":ae.nextPlayedThreeSecondsPlayheadPosition=(null!=(e=t)?e:0)+3;break;case"paused":case"finished_playing":ae.nextPlayedThreeSecondsPlayheadPosition=null}}function v(e){return ae.interruptCount>0&&ae.interruptDuration>0?(e={interrupt_count:ae.interruptCount,interrupt_time:ae.interruptDuration},ae.interruptCount=0,ae.interruptDuration=0,ae.interruptStartTimestamp=0,ae.interruptEndTimestamp=0,e):{interrupt_count:null,interrupt_time:null}}function h(e,t,n){var r={stall_count:null,stall_count_200_ms:null,stall_time:null},a=t.uncontrolledState.clockTimestamp,o=function(){var e={stall_count:ae.stallCount,stall_count_200_ms:ae.stallCount200ms,stall_time:ae.stallDuration};return ae.stallCount=0,ae.stallCount200ms=0,ae.stallDuration=0,ae.stallStartTimestamp=0,e};e=e.controlledState.playbackState;var l=t.controlledState.playbackState;switch("stalling"!==e&&"stalling"===l&&(ae.stallStartTimestamp=a),n){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"playback_speed_changed":case"representation_ended":i(t.uncontrolledState.clockTimestamp),r=o();break;case"heart_beat":"stalling"!==t.controlledState.playbackState&&(i(t.uncontrolledState.clockTimestamp),r=o())}return r}function P(e,t,n){return e="paused"===t.controlledState.playbackState&&"stalling"===e.controlledState.playbackState,n>0&&("stalling"===t.controlledState.playbackState||e)}function b(e,t){e=e.current;var n=null;switch(t){case"finished_playing":case"paused":case"heart_beat":return e&&(n=e.getAndFlushTracedFrames()),null!=n?JSON.stringify(n):null;default:return null}}function S(e){switch(e=e.controlledState.playbackState){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:return"unknown"}}function C(e){switch(e){case"normal":return"normal";case"low":return"low";case"ultra-low":return"ultra_low";default:return null}}function w(){return{state:ae.hasLoggedStartedPlaying?n("VideoPlayerLoggerPlayerStates").UNPAUSED:n("VideoPlayerLoggerPlayerStates").STARTED}}function E(e){if(n("gkx")("2714")&&(null==e?void 0:e.v2)&&(null==e?void 0:e.v2.length)>0){var t=null==e?void 0:e.v2;return[(t=t[t.length-1])["class"],t.module].map(r("CometProductAttribution").filterEntryValue).join(":")}return null!=(e=null==e?void 0:null==(t=e.v2)?void 0:t.map(function(e){return[e["class"],e.module].map(r("CometProductAttribution").filterEntryValue).join(":")}).join(";"))?e:""}function I(t){var a,i=t.eventType,l=t.logDataOverrides,u=t.prevState,d=t.state;t=(t=o(d,i)).video_last_start_time_position;var c=h(u,d,i),p=c.stall_count,m=c.stall_count_200_ms;c=c.stall_time;var _=v(u,d,i),f=_.interrupt_count;_=_.interrupt_time;var w=b(e.videoLiveTraceRef,i),I=[],V=e.initialLoggingMetaData.coreVideoPlayerMetaData.autoplayGatingResult;V&&I.push(V),V="entered_fs"===i||"exited_fs"!==i&&ae.lastLoggedFullscreenState,a=n("getPlayerFormatForLogData")({isDesktopPictureInPicture:null!=(a=d.controlledState.isDesktopPictureInPicture)&&a,isFullscreen:V},te.coreVideoPlayerMetaData.playerFormat);var D=d.uncontrolledState.viewabilityPercentage,k=Boolean(d.uncontrolledState.isFBIsLiveTemplated),x=Boolean(d.uncontrolledState.isFBWasLive),T=d.uncontrolledState.videoElementPlaybackRate;T=null==T||0===T?ae.lastLoggedPlaybackSpeed:T;var R=e.initialLoggingMetaData.productAttribution;if("watch_scroll"===a&&R&&R.v2){var O,z={0:babelHelpers["extends"]({},R[0]),v2:[babelHelpers["extends"]({},R.v2[0])]};if(O=null==(O=te.productAttribution)?void 0:null==(O=O.v2)?void 0:O[0]){var F=z.v2[0];F["class"]=O["class"],F.scope_id=O.scope_id,F.ts=O.ts}R=z}F=null,O=null,n("gkx")("3013")&&(F=null!=R?r("CometProductAttribution").minifyProductAttributionV2(R):null,O=null!=R?E(R):null),z=P(u,d,null!=(z=c)?z:0),O={access_token:e.initialLoggingMetaData.accessToken,ad_client_token:te.coreVideoPlayerMetaData.adClientToken,attribution_id:null!=R&&Object.prototype.hasOwnProperty.call(R,"0")?JSON.stringify({0:R[0]}):null,attribution_id_v2:F,attribution_id_v2_root:O,audio_only:te.coreVideoPlayerMetaData.audioOnly,audio_representation_id:d.uncontrolledState.audioRepresentationID,autoplay_eligible:"allow"===e.initialLoggingMetaData.coreVideoPlayerMetaData.canAutoplay,autoplay_failure_reasons:JSON.stringify(I),autoplay_setting:e.initialLoggingMetaData.coreVideoPlayerMetaData.autoplaySetting,available_qualities:d.controlledState.availableQualities.length,broadcaster_origin:e.initialLoggingMetaData.coreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:n("getVideoBrowserTabId")(),caption_state:s(d,i),client_latency_setting:C(d.controlledState.latencyLevel),current_playback_speed:g?T:null,current_viewability_percentage:D,dash_perf_logging_enabled:null!=te.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass&&te.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass.isEnabled(),data_connection_quality:r("VideoPlayerConnectionQuality").evaluate(function(){return d.uncontrolledState.estimatedBandwidth}),dropped_frame_count:d.uncontrolledState.videoElementDroppedFrameCount,external_log_id:te.coreVideoPlayerMetaData.externalLogID,external_log_type:te.coreVideoPlayerMetaData.externalLogType,fb_manifest_identifier:d.uncontrolledState.manifestIdentifier,frame_events:w,interrupt_count:f,interrupt_time:_,is_abr_enabled:d.isAbrEnabled,is_fbms:d.uncontrolledState.isFBMS,is_live_video_rewound:d.controlledState.isLiveRewindActive,is_pip:d.controlledState.isDesktopPictureInPicture,is_predictive_playback:d.uncontrolledState.isPredictiveDash,is_sound_on:!d.controlledState.muted,is_stalling:z,is_templated_manifest:k||x,last_viewability_percentage:ae.lastLoggedViewabilityPercentage,mpd_validation_errors:d.uncontrolledState.mpdValidationErrors,network_connected:d.uncontrolledState.networkConnected,playback_caption_format:d.controlledState.captionFormat,playback_caption_locale:d.controlledState.captionsLocale,playback_duration:d.uncontrolledState.videoElementDuration,playback_is_broadcast:e.initialLoggingMetaData.coreVideoPlayerMetaData.isVideoBroadcast,playback_is_drm:Boolean(e.initialLoggingMetaData.coreVideoPlayerMetaData.graphQLVideoDRMInfo),playback_is_live_streaming:e.initialLoggingMetaData.coreVideoPlayerMetaData.isLiveStreaming,player_format:a,player_instance_key:te.instanceKey,player_origin:te.coreVideoPlayerMetaData.playerOriginOverride,player_state:S(d),player_suborigin:te.coreVideoPlayerMetaData.subOrigin,player_version:d.playerVersion,representation_id:d.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:te.coreVideoPlayerMetaData.source_VPL_LOGGING_HACK,stall_count:p,stall_count_200_ms:m,stall_time:c,streaming_format:d.controlledState.streamingFormat,total_frame_count:d.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:e.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:e.initialLoggingMetaData.trackingNodes,v2_heart_beat:!(!n("gkx")("1434599")||"heart_beat"!==i)||null,video_bandwidth:d.uncontrolledState.estimatedBandwidth,video_buffer_end_position:d.uncontrolledState.videoElementLastBufferEndPosition,video_id:te.coreVideoPlayerMetaData.videoFBID,video_last_start_time_position:t,video_play_reason:d.controlledState.lastPlayReason,video_player_height:null==(R=te.dimensions)?void 0:R.height,video_player_width:null==(F=te.dimensions)?void 0:F.width,video_time_position:d.uncontrolledState.videoElementPlayheadPosition,web_client_revision:n("SiteData").client_revision},I=n("gkx")("1286")&&"error_recovery_attempt"===i?null:ie.has(i)?++ae.sequenceNumber:null,f={event_seq_num:++ae.vplEventSequenceNumber,seq_num:I,time_ms:Date.now(),vpts:null!=(w=n("qex")._("33"))&&w?n("performanceAbsoluteNow")():null};var $={};ee.forEach(function(e,t){$[t]=e}),_=te.coreVideoPlayerMetaData.additionalLogData,z=babelHelpers["extends"]({},_,$),k=babelHelpers["extends"]({},z,O,l,f),a=null!=(x=ae.initialSuborigin)?x:te.coreVideoPlayerMetaData.subOrigin,m=null!=(p=k.source_VPL_LOGGING_HACK)?p:a,R={eventType:i,logData:k,routeTracePolicy:t=null!=(c=te.coreVideoPlayerMetaData.initialTracePolicy)?c:te.coreVideoPlayerMetaData.routeTracePolicy,source_VPL_LOGGING_HACK:m},re.push(R),y(u,d,i),null==ae.initialSuborigin&&null!=a&&(ae.initialSuborigin=a),ae.lastLoggedFullscreenState=V,ae.lastLoggedPlaybackSpeed=T,"viewability_changed"===i&&(ae.lastLoggedViewabilityPercentage=D)}function V(e,t,n){return I({eventType:"requested_playing",logDataOverrides:babelHelpers["extends"]({},n,w()),prevState:e,state:t}),ae.hasPendingRequestedPlaying=!0,ae.canLogPausedOrFinishedPlaying=!0,oe}function D(e,t,n){return ae.canLogPausedOrFinishedPlaying?ae.hasPendingRequestedPlaying?(k(e,t,n),ae.canLogPausedOrFinishedPlaying=!1,ae.hasPendingRequestedPlaying=!1,oe):(I({eventType:"paused",logDataOverrides:babelHelpers["extends"]({},n,{error_user_info:JSON.stringify({is_document_hidden:t.uncontrolledState.isDocumentHidden})}),prevState:e,state:t}),ae.canLogPausedOrFinishedPlaying=!1,ae.hasPendingRequestedPlaying=!1,oe):oe}function k(e,t,n){var r=t.uncontrolledState.liveTraceContext;return I({eventType:"cancelled_requested_playing",logDataOverrides:n=babelHelpers["extends"]({},n,w(),{live_trace_source_id:r?r.sourceId:void 0,live_trace_stream_id:r?r.streamId:void 0,live_trace_stream_type:r?r.streamType:void 0}),prevState:e,state:t}),oe}function x(e,t,r){return"dom_event_play_promise_rejected"===r.type&&(!n("gkx")("2118")||r.payload.hostCallPlayID===e.controlledState.hostCallPlayIDLast&&null==t.controlledState.hostCallPlayIDLast)&&ae.hasPendingRequestedPlaying?null!=(r=r.payload.playPromiseRejectionReason)&&"NotAllowedError"===r.name?(k(e,t,{debug_reason:"not_allowed"}),oe):null!=r&&"AbortError"===r.name&&n("gkx")("4708")?(k(e,t,{debug_reason:"aborted"}),oe):oe:oe}function T(e,t,n){return"controller_play_requested"!==n.type&&("dom_event_play"!==n.type||ae.shouldIgnoreDomPlay)||e.controlledState.playbackState===t.controlledState.playbackState?oe:(V(e,t,n=(n=t.uncontrolledState.liveTraceContext)?{live_trace_source_id:n.sourceId,live_trace_stream_id:n.streamId,live_trace_stream_type:n.streamType}:null),oe)}function R(e,t,n){return"stalling"===e.controlledState.playbackState&&"playing"===t.controlledState.playbackState&&ae.canLogPlayingEvent?(n=(n=t.uncontrolledState.liveTraceContext)?{live_trace_source_id:n.sourceId,live_trace_stream_id:n.streamId,live_trace_stream_type:n.streamType}:null,I({eventType:ae.hasLoggedStartedPlaying?"unpaused":"started_playing",logDataOverrides:n,prevState:e,state:t}),ae.hasLoggedStartedPlaying=!0,ae.canLogPlayingEvent=!1,ae.hasPendingRequestedPlaying=!1,oe):oe}function O(e,t,r){var a=t.controlledState.playbackState,i=e.controlledState.playbackState;if("controller_scrub_begin_requested"!==r.type||e.controlledState.scrubbing||"paused"===a||"ended"===a){if(e.controlledState.seeking||!t.controlledState.seeking||ae.isLoggingScrubbingSequence||"paused"===a||"ended"===a||ae.hasPendingRequestedPlaying){if("controller_scrub_end_requested"===r.type&&e.controlledState.scrubbing&&"paused"!==a&&"ended"!==a)return V(e,t,{video_time_position:r.payload.seekTargetPosition}),oe;if(e.controlledState.seeking&&!t.controlledState.seeking){r=t.uncontrolledState.videoElementPlayheadPosition;var o=e.controlledState.implementationSeekSourcePosition;return(!n("gkx")("1482680")||null!=o&&null!=r&&Math.abs(o-r)>d)&&(ae.shouldLogRequestedPlayingForScrub&&"paused"!==a&&"ended"!==a&&V(e,t),I({eventType:"scrubbed",prevState:e,state:t}),ae.isLoggingScrubbingSequence=!1,ae.shouldLogRequestedPlayingForScrub=!1,"paused"!==i&&"ended"!==i&&(ae.canLogPlayingEvent=!0)),oe}return oe}return D(e,t),ae.shouldLogRequestedPlayingForScrub=!0,oe}return D(e,t),ae.isLoggingScrubbingSequence=!0,oe}function z(e,t){return e.controlledState.playbackState!==t.controlledState.playbackState&&"ended"===t.controlledState.playbackState&&ae.canLogPausedOrFinishedPlaying?(I({eventType:"finished_playing",prevState:e,state:t}),ae.canLogPausedOrFinishedPlaying=!1,oe):oe}function F(e,t,n){return"controller_pause_requested"!==n.type&&("dom_event_pause"!==n.type||ae.shouldIgnoreDomPause)||e.controlledState.playbackState===t.controlledState.playbackState?oe:(D(e,t,{debug_reason:"paused"}),oe)}function $(e,t,r){var a=t.controlledState.playbackState;return"paused"!==a&&"ended"!==a?(n("gkx")("1469813")&&"implementation_video_node_unmounted"===r.type?D(e,e,{debug_reason:"unloaded"}):("implementation_unmounted"===r.type||"implementation_engine_destroy_requested"===r.type)&&D(e,t,{debug_reason:"unloaded"}),oe):oe}function L(e,t,n){return"implementation_engine_representation_blocked"===n.type&&I({eventType:"video_playback_fallback",logDataOverrides:{representation_id:n=n.payload.blockedRepresentationID},prevState:e,state:t}),oe}function M(e,t,a){a=t.controlledState.muted;var i=t.controlledState.volume,o=e.controlledState.muted,l=e.controlledState.volume;switch(a=r("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:a,currVolume:i,prevMuted:o,prevVolume:l}),o={current_volume:Math.round(100*i)},a){case"muted":return I({eventType:"muted",logDataOverrides:o,prevState:e,state:t}),oe;case"unmuted":return I({eventType:"unmuted",logDataOverrides:o,prevState:e,state:t}),oe;case null:return l<i?(I({eventType:"volume_increase",logDataOverrides:o,prevState:e,state:t}),oe):l>i?(I({eventType:"volume_decrease",logDataOverrides:o,prevState:e,state:t}),oe):oe;default:return n("recoverableViolation")('Unexpected mutedStateChange "'+a+'"',"comet_video_player"),oe}}function A(e,t,n){n=t.uncontrolledState.videoRepresentationID;var r=ae.lastTrackedRepresentation,i=t.controlledState.playbackState;return t.controlledState.seeking||"paused"===i||"ended"===i||null==r||r===n?null==r&&r!==n?(ae.lastTrackedRepresentation=n,oe):oe:(I({eventType:"representation_ended",logDataOverrides:{next_representation_id:n,representation_id:r},prevState:e,state:t}),ae.lastTrackedRepresentation=n,a("quality_change"),oe)}function B(e,t){var r=e.controlledState.error;return{currentVideo:{audioStreamId:e.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:e.controlledState.captionsLoaded,isDrm:Boolean(te.coreVideoPlayerMetaData.graphQLVideoDRMInfo),isHD:void 0,isLiveStream:te.coreVideoPlayerMetaData.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:void 0,resourceUrl:void 0,streamId:e.uncontrolledState.videoRepresentationID,streamType:e.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:te.coreVideoPlayerMetaData.videoFBID},player:{canPlayType:n("mapObject")(n("VideoMimeTypes"),_),dimensions:te.dimensions?{height:te.dimensions.height,width:te.dimensions.width}:null,droppedFrames:e.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:r,loggedError:ae.lastLoggedError,stack:null==r?void 0:r.stack,stallCount:ae.stallCount,stallTime:ae.stallDuration,state:S(e),totalFrames:e.uncontrolledState.videoElementTotalFrameCount,version:e.playerVersion,videoSource:void 0,viewabilityPercentage:e.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:t,state:e}}}function U(e,t,a){var i=t.controlledState.error;if(null!=i&&i!==ae.lastLoggedError&&"410"!==i.errorCode){var o=i.errorDescription,l=i.errorName,s=i.errorType,u=i.url,d=null==i.errorCode||""===i.errorCode?l:i.errorCode;a=B(t,a),I({eventType:"error",logDataOverrides:babelHelpers["extends"]({},n("gkx")("1565232")?w():null,{error:l,error_code:d,error_description:o,error_domain:l,error_type:null!=(d=s)?d:r("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(l),error_user_info:JSON.stringify(a),resource_url:u}),prevState:e,state:t}),ae.lastLoggedError=i}return oe}function N(e,t){var n=ae.errorRecoveryAttemptState.currentRecoverableError;if(null!=n){var r=n.errorCode,a=n.errorDescription,i=n.errorName,o=n.errorType;n=n.url,ae.errorRecoveryAttemptState.eventsLogged++,ae.errorRecoveryAttemptState.repeatCount=0,I({eventType:"error_recovery_attempt",logDataOverrides:{error:i,error_code:r,error_description:a,error_domain:i,error_type:o,resource_url:n},prevState:e,state:t})}return oe}function H(e,t,r){if("error_recovery_attempt"===r.type&&ae.errorRecoveryAttemptState.eventsLogged<p){var a=ae.errorRecoveryAttemptState.currentRecoverableError;if(r=r.payload.recoverableError,n("gkx")("1541")&&null!=r&&"OZ_NETWORK"===r.errorName&&!n("NetworkStatus").isOnline())return oe;ae.errorRecoveryAttemptState.currentRecoverableError=r,null==a||a.errorName!==r.errorName||a.errorCode!==r.errorCode?N(e,t):(ae.errorRecoveryAttemptState.repeatCount++,ae.errorRecoveryAttemptState.repeatCount>c&&N(e,t))}return oe}function q(e,t,n){if(!g)return oe;var r=t.uncontrolledState.videoElementPlaybackRate;return"dom_event_ratechange"===n.type&&null!=ae.lastLoggedPlaybackSpeed&&0!==r&&r!==ae.lastLoggedPlaybackSpeed&&I({eventType:"playback_speed_changed",prevState:e,state:t}),oe}function W(e,t,n){"paused"===(n=t.controlledState.playbackState)||"ended"===n?ae.nextHeartbeatTime=null:"stalling"!==n&&null==ae.nextHeartbeatTime&&(ae.nextHeartbeatTime=Date.now()+u);var r=ae.nextHeartbeatTime;if(null!=r){var a=Date.now();a>=r&&("stalling"!==n&&I({eventType:"heart_beat",prevState:e,state:t}),ae.nextHeartbeatTime=a+u)}return oe}function Q(e,t,n){return"implementation_mounted"===n.type?(I({eventType:"player_loaded",prevState:e,state:t}),oe):oe}function j(e,t,n){I({eventType:n?"entered_fs":"exited_fs",prevState:e,state:t})}function G(e,t,n){var r=te.coreVideoPlayerMetaData.playerFormat;return(ne.coreVideoPlayerMetaData.playerFormat!==r||"controller_override_player_format"===n.type)&&I({eventType:"player_format_changed",prevState:e,state:t}),oe}function J(e,t,n){if("dom_event_timeupdate"===n.type&&null!=(n=ae.nextPlayedThreeSecondsPlayheadPosition)){var r=t.uncontrolledState;null!=(r=r.videoElementPlayheadPosition)&&n<=r&&(I({eventType:"played_for_three_seconds",prevState:e,state:t}),ae.nextPlayedThreeSecondsPlayheadPosition=null)}return oe}function K(e,t,n){if("notify_fullscreen_changed"!==n.type)return oe;n=ae.lastLoggedFullscreenState;var r=t.uncontrolledState.isFullscreen;return!0!==n&&!0===r?(j(e,t,r),oe):!0===n&&!1===r?(j(e,t,r),oe):oe}function X(e,t,r){if((null==(r=te.coreVideoPlayerMetaData.adClientToken)||""===r)&&n("gkx")("1401747"))return oe;r=t.controlledState.playbackState;var a=ae.lastLoggedViewabilityPercentage,i=t.uncontrolledState.viewabilityPercentage;return"paused"!==r&&"ended"!==r&&null!=a&&a!==i?(I({eventType:"viewability_changed",prevState:e,state:t}),oe):oe}function Z(e,t,n){return"controller_set_captions_visible_requested"===n.type?(I({eventType:"caption_change",prevState:e,state:t}),oe):oe}function Y(e){ne=te,"notify_logging_metadata_change"===e.type&&(e=e.payload.loggingMetaData,te=e)}var ee=new Map,te=e.initialLoggingMetaData,ne=te,re=[],ae=l(),ie=new Set(n("VideoPlayerStateBasedLoggingEvents").StateBasedLoggingEventNames),oe={};return{addDebugSubscriber:function(e){return t(e)},consumeLoggerEvents:function(){return re.splice(0)},getLoggerState:function(){return ae},handleStateMachine:function(e,t,n){Y(n);var r=t.controlledState.playbackState;f(e,t,n),m(e,t),[G,K,X,x,T,O,R,z,F,L,M,$,Q,Z,A,U,H,W,q,J].forEach(function(r){r(e,t,n)}),("paused"===r||"ended"===r)&&(ae.canLogPlayingEvent=!0),"controller_pause_requested"===n.type&&(ae.hasPausedOnce=!0,ae.shouldIgnoreDomPause=!0),"controller_play_requested"===n.type&&(ae.hasPausedOnce=!0,ae.shouldIgnoreDomPlay=!0),"dom_event_pause"===n.type&&(ae.shouldIgnoreDomPause=!1),"dom_event_play"===n.type&&(ae.shouldIgnoreDomPlay=!1,ae.lastLoggedViewabilityPercentage=t.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(e){I({eventType:e.eventType,logDataOverrides:e.logDataOverrides,prevState:e=e.state,state:e})},setAdditionalLogData:function(e,t){ee.set(e,t)}}}var u=6e4,d=.5,c=null!=(t=n("qex")._("1675"))?t:0,p=1e3,m=null,_=function(e){var t;return"canPlayType"in(m=null!=(t=m)?t:document.createElement("video"))?m.canPlayType(e):""};n("emptyFunction"),i=n("emptyFunction"),t=n("emptyFunction"),n("emptyFunction");var g=null!=(i=r("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())&&i;o.HEARTBEAT_INTERVAL=u,o.createVideoPlayerImplementationStateMachineLogger=e},98),__d("convertToViewabilityPercentage",[],function(e,t,n,r,a,i){"use strict";function e(e){return e>=.99?100:e>=.75?75:e>=.5?50:e>=.25?25:e>=0?0:-2}i["default"]=e},66),__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["NetworkStatus","convertToViewabilityPercentage","gkx","performance"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.engineExtrasAPI,r=e.fullscreenControllerRef,a=e.videoElementAPI,i=e.videoLiveTraceRef;e=e.videoPlayerPassiveViewabilityInfoRef,i=i.current;var o,l=Date.now(),s="function"==typeof n("performance").now?n("performance").now():0;return null==a?{audioRepresentationID:void 0,clockTimestamp:l,currentPlayingVideoQuality:void 0,estimatedBandwidth:void 0,isDocumentHidden:document.hidden,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:r.current?r.current.getIsFullscreen():void 0,isPredictiveDash:void 0,liveTraceContext:i&&null!=(o=i.getLiveTraceContext())?o:void 0,manifestIdentifier:void 0,mpdValidationErrors:void 0,networkConnected:void 0,perfTimestamp:s,videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0}:(o=a.getPlayheadPosition(),e=(e=e&&e.current)&&e.getCurrent(),{audioRepresentationID:t?t.getAudioRepresentationIDAtTime(o):void 0,clockTimestamp:l,currentPlayingVideoQuality:t?t.getCurrentPlayingVideoQuality():void 0,estimatedBandwidth:t?t.getEstimatedBandwidth():void 0,isDocumentHidden:document.hidden,isFBIsLiveTemplated:t?t.isFBIsLiveTemplated():void 0,isFBMS:t?t.isFBMS():void 0,isFBWasLive:t?t.isFBWasLive():void 0,isFullscreen:r.current?r.current.getIsFullscreen():void 0,isPredictiveDash:t?t.isPredictiveDash():void 0,liveTraceContext:i&&null!=(l=i.getLiveTraceContext())?l:void 0,manifestIdentifier:t?t.getManifestIdentifier():void 0,mpdValidationErrors:t?t.getMpdValidationErrors():void 0,networkConnected:n("NetworkStatus").isOnline(),perfTimestamp:s,videoElementDebugCurrentSrc:n("gkx")("1526990")?null==(r=a.getUnderlyingVideoElement())?void 0:r.currentSrc:void 0,videoElementDebugSrc:n("gkx")("1526990")?null==(i=a.getUnderlyingVideoElement())?void 0:i.src:void 0,videoElementDroppedFrameCount:a.getDroppedFrameCount(),videoElementDuration:a.getDuration(),videoElementEnded:a.getEnded(),videoElementError:a.getError(),videoElementLastBufferEndPosition:a.getLastBufferEndPosition(),videoElementMuted:a.getMuted(),videoElementNetworkState:a.getNetworkState(),videoElementPaused:a.getPaused(),videoElementPlaybackRate:a.getPlaybackRate(),videoElementPlayheadPosition:o,videoElementReadyState:a.getReadyState(),videoElementTotalFrameCount:a.getTotalFrameCount(),videoElementVolume:a.getVolume(),videoRepresentationID:t?t.getVideoRepresentationIDAtTime(o):void 0,viewabilityPercentage:e?n("convertToViewabilityPercentage")(e.visiblePercentage):void 0})}o.createVideoPlayerImplementationStateMachineStateUncontrolledState=e},98),__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],function(e,t,n,r,a,i,o){"use strict";function e(e){
var t=e.alwaysShowCaptions,n=e.areCaptionsAutogenerated,a=e.captionDisplayStyle,i=e.dimensions,o=e.isAbrEnabled,l=e.playerImplementationName,s=e.playerVersion;e=e.streamingFormat;var u=!0,d=1,c=r("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfoRef:{current:null}});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],allEmsgBoxes:new Map,availableQualities:[],bufferingDetected:!1,captionDisplayStyle:a,captionFormat:null,captionsLoaded:!1,captionsLocale:null,captionsVisible:t,dimensions:i,emsgObserverTokens:new Set,error:null,hasPlayEverBeenRequested:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:n,isDesktopPictureInPicture:!1,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPausedTimeMs:0,lastPauseReason:null,lastPlayedTimeMs:0,lastPlayReason:null,latencyLevel:"normal",loopCount:0,loopCurrent:0,muted:u,overriddenPlayerFormat:"unknown",playbackState:"paused",playerFormat:"unknown",scrubbing:!1,seekableRanges:null,seeking:!1,seekTargetPosition:null,selectedVideoQuality:"notselected",streamEnded:!1,streamingFormat:e,streamInterrupted:!1,targetAudioQuality:"",targetPlaybackRate:1,targetVideoQuality:"",videoProjection:null,volume:d,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:o,playerImplementationName:l,playerVersion:s,uncontrolledState:c}}o.createVideoPlayerImplementationStateMachineInitialState=e},98),__d("VideoPlayerImplementationEngineAPI",["CometEventListener","CometVideoPictureInPictureManagerContext","CurrentUser","ErrorMetadata","FBLogger","MediaPlaybackCompoundEventStateMachineLogger","NetworkStatus","PlaybackSpeedExperiments","RunComet","SubscriptionsHandler","VideoLiveTrace","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationErrors","VideoPlayerImplementationReactVideoElement.react","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerVideoPixelsFitContext","clearTimeout","cr:4081","cr:506","cr:683059","deepEquals","err","gkx","killswitch","qex","react","recoverableViolation","removeFromArray","setTimeout","unrecoverableViolation","useConcurrentAutoplayManagementAPI","useSEOLoggedOutWebCrawler","useStable"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t=e.concurrentAutoplayManagementAPI,r=e.debugAPI,a=e.exitPictureInPictureImpl,i=e.fullscreenControllerRef,o=e.getCurrentExposedState,l=e.getCurrentIsDesktopPictureInPicture,s=e.getCurrentIsFullscreen,u=e.getCurrentLiveRewindPlayheadPosition,d=e.getCurrentPlayheadPosition,c=e.internal_getCurrentStateMachineState,p=e.loggerAPI,m=e.overridePlayerFormatImpl,_=e.pauseImpl,g=e.playImpl,f=e.registerEmsgObserverImpl,y=e.requestPictureInPictureImpl,v=e.scrubBeginImpl,h=e.scrubEndImpl,P=e.seekImpl,S=e.selectVideoQualityImpl,C=e.setCaptionsDisplayStyleImpl,w=e.setCaptionsUrlImpl,E=e.setCaptionsVisibleImpl,I=e.setIsLiveRewindActiveImpl,V=e.setLatencyLevelImpl,D=e.setMutedImpl,k=e.setPictureInPictureStateImpl,x=e.setPlaybackRateImpl,T=e.setVolumeImpl,R=e.subscribers,O=e.unregisterEmsgObserverImpl,z=e.videoElementAPIRef,F=new Set,$=!1,L=null,M=[],A=[],B=[],U=[],N=new b({pauseRequestCallbacks:A,playRequestCallbacks:M,scrubBeginRequestCallbacks:B,scrubEndRequestCallbacks:U}),H={freeze:function(){if(!o().paused)throw n("unrecoverableViolation")("Video player must be paused before the controller freeze","comet_video_player");var e={};try{var t=!1;0===F.size&&(t=!0,L={exposedState:o(),isFullscreen:s(),liveRewindPlayheadPosition:u(),playheadPosition:d(),stateMachineState:c()}),F.add(e),t&&($=!0,R.forEach(function(e){e()}))}finally{$=!1}return e},isFrozen:function(){return null!=L},unfreeze:function(e){if(!F.has(e))throw n("unrecoverableViolation")("Video player controller unfreeze token not found","comet_video_player");F["delete"](e),0===F.size&&(L=null,R.forEach(function(e){e()}))}},q=babelHelpers["extends"]({},t,H,p,{debugAPI:r,exitPictureInPicture:function(){H.isFrozen()||a()},getCurrentState:function(){return null!=L?L.exposedState:o()},getIsDesktopPictureInPicture:function(){return null!=L?L.isFullscreen:l()},getIsFullscreen:function(){return null!=L?L.isFullscreen:s()},getLiveRewindPlayheadPosition:function(){return null!=L?L.liveRewindPlayheadPosition:u()},getPlayheadPosition:function(){return null!=L?L.playheadPosition:d()},internal_getStateMachineState:function(){return null!=L?L.stateMachineState:c()},internal_getVideoElement:function(){var e=z.current;return null!=e?e=e.getUnderlyingVideoElement():null},observeOn:function(){return N},overridePlayerFormat:function(e){H.isFrozen()||m(e)},pause:function(e){H.isFrozen()||(A.forEach(function(t){return t(e)}),_(e))},play:function(e){H.isFrozen()||(M.forEach(function(t){return t(e)}),g(e))},registerEmsgObserver:function(){var e={};return f(e),e},requestPictureInPicture:function(){H.isFrozen()||y()},requestSetIsFullscreen:function(e){if(!H.isFrozen()){var t=i.current;if(t){var n=q.internal_getVideoElement();t.requestSetIsFullscreen(e,n)}}},scrollIntoView:function(e){var t=q.internal_getVideoElement();t&&t.scrollIntoView(e)},scrubBegin:function(){H.isFrozen()||(B.forEach(function(e){return e()}),v())},scrubEnd:function(e){H.isFrozen()||(U.forEach(function(t){return t(e)}),h(e))},seek:function(e){H.isFrozen()||P(e)},selectVideoQuality:function(e){H.isFrozen()||S(e)},setCaptionsDisplayStyle:function(e){H.isFrozen()||C(e)},setCaptionsUrl:function(e){H.isFrozen()||w(e)},setCaptionsVisible:function(e){H.isFrozen()||E(e)},setIsLiveRewindActive:function(e){H.isFrozen()||I(e)},setLatencyLevel:function(e){H.isFrozen()||V(e)},setMuted:function(e,t){H.isFrozen()||D(e,t)},setPictureInPictureState:function(e){H.isFrozen()||k(e)},setPlaybackRate:function(e){H.isFrozen()||x(e)},setVolume:function(e){H.isFrozen()||T(e)},subscribe:function(e){var t=function(){H.isFrozen()&&!$||e()},r=i.current,a=r?r.subscribe(t):null;return R.push(t),{remove:function(){a&&a.remove(),n("removeFromArray")(R,t)}}},unregisterEmsgObserver:function(e){O(e)},videoElementAPIRef:z});return q}function s(e){var t=e.concurrentAutoplayManagementAPI,r=e.createExposedState,a=e.debugAPI,i=e.fullscreenControllerRef,o=e.logger,s=e.machine,u=e.subscribers,d=e.videoElementAPIRef;return l({concurrentAutoplayManagementAPI:t,debugAPI:a,exitPictureInPictureImpl:function(){s.dispatch({type:"controller_picture_in_picture_exit_requested"})},fullscreenControllerRef:i,getCurrentExposedState:function(){return r(s.getCurrentState())},getCurrentIsDesktopPictureInPicture:function(){var e;return null!=(e=s.getCurrentState().controlledState.isDesktopPictureInPicture)&&e},getCurrentIsFullscreen:function(){var e=i.current;return!!e&&e.getIsFullscreen()},getCurrentLiveRewindPlayheadPosition:function(){var e=s.getCurrentState(),t=(e=e.controlledState).isLiveRewindActive,n=e.seekableRanges;return e=e.seekTargetPosition,t&&null!=e?e-(n=null!=(t=null==n?void 0:n.end(0))?t:0):null},getCurrentPlayheadPosition:function(){var e,t=0;return null!=(e=null!=(e=n("gkx")("3464")?null==(e=d.current)?void 0:e.getPlayheadPosition():void 0)?e:s.getCurrentState().uncontrolledState.videoElementPlayheadPosition)?e:t},internal_getCurrentStateMachineState:function(){return s.getCurrentState()},loggerAPI:e={logVPLEvent_DO_NOT_USE:function(e,t){o.logVPLEvent({eventType:e,logDataOverrides:t,state:s.getCurrentState()})},setAdditionalLogData:function(e,t){o.setAdditionalLogData(e,t)}},overridePlayerFormatImpl:function(e){s.dispatch({payload:{playerFormat:e},type:"controller_override_player_format"})},pauseImpl:function(e){s.dispatch({payload:{reason:e},type:"controller_pause_requested"})},playImpl:function(e){s.dispatch({payload:{reason:e},type:"controller_play_requested"})},registerEmsgObserverImpl:function(e){s.dispatch({payload:{token:e},type:"register_emsg_observer"})},requestPictureInPictureImpl:function(){s.dispatch({type:"controller_picture_in_picture_requested"})},scrubBeginImpl:function(){s.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(e){s.dispatch({payload:{seekTargetPosition:e},type:"controller_scrub_end_requested"})},seekImpl:function(e){s.dispatch({payload:{seekTargetPosition:e},type:"controller_seek_requested"})},selectVideoQualityImpl:function(e){s.dispatch({payload:{selectedVideoQuality:e},type:"controller_quality_requested"})},setCaptionsDisplayStyleImpl:function(e){s.dispatch({payload:{captionDisplayStyle:e},type:"controller_set_caption_display_style_requested"})},setCaptionsUrlImpl:function(e){s.dispatch({payload:{captionsUrl:e},type:"controller_set_captions_url_requested"})},setCaptionsVisibleImpl:function(e){s.dispatch({payload:{captionsVisible:e},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(e){s.dispatch({payload:{isLiveRewindActive:e},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(e){s.dispatch({payload:{latencyLevel:e},type:"controller_set_latency_level_requested"})},setMutedImpl:function(e,t){s.dispatch({payload:{muted:e,reason:t},type:"controller_muted_requested"})},setPictureInPictureStateImpl:function(e){s.dispatch({payload:{isInPictureInPictureMode:e},type:"controller_set_picture_in_picture_state_requested"})},setPlaybackRateImpl:function(e){s.dispatch({payload:{playbackRate:e},type:"controller_set_playback_rate"})},setVolumeImpl:function(e){s.dispatch({payload:{volume:e},type:"controller_volume_requested"})},subscribers:u,unregisterEmsgObserverImpl:function(e){s.dispatch({payload:{token:e},type:"unregister_emsg_observer"})},videoElementAPIRef:d})}function u(e){if(null==(e=e.current))throw n("unrecoverableViolation")("Attempted to access VideoElementAPI while it is not available.","comet_video_player");return e}function d(e){function a(e){r("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:m,hostCall:e,machine:w,videoElementAPI:v.current})}var i=e.alwaysShowCaptions,o=e.areCaptionsAutogenerated,l=e.captionDisplayStyle,s=e.captionsControllerRef,d=e.debugLogId,p=e.dimensions,m=e.engineExtrasAPI,_=e.engineMetadata,g=e.fullscreenControllerRef,f=e.handleFatalError,y=e.handleStateMachine,v=e.videoElementAPIRef,h=e.videoLiveTraceRef,b=e.videoPlayerPassiveViewabilityInfoRef,S=null,C=null;e=[function(e,n,r){return t("cr:683059")&&"implementation_host_call_applied"===r.type&&"host_call_play"===r.payload.hostCall.type&&"autoplay_initiated"===n.controlledState.lastPlayReason?t("cr:683059").addFirstMarkerPoint("firstVideoAutoplayStalling"):t("cr:683059")&&n.controlledState.playbackState!==e.controlledState.playbackState&&"playing"===n.controlledState.playbackState&&"autoplay_initiated"===n.controlledState.lastPlayReason&&t("cr:683059").addFirstMarkerPoint("firstVideoAutoplayPlaying"),!0},function(e,t,n){return y(e,t,n),!0},function(e,t,i){if(n("gkx")("1633455")&&(!1===e.controlledState.streamInterrupted&&!0===t.controlledState.streamInterrupted||!0===e.controlledState.streamInterrupted&&!1===t.controlledState.streamInterrupted)){t=(e=t.controlledState).bufferingDetected;var o=e.lastBufferingType,l=e.streamInterrupted;e=e.targetPlaybackRate,l?(t&&w.dispatch({payload:{domEventPerfTimestamp:null},type:"buffering_end_requested"}),a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:i.type},type:"host_call_set_playback_rate"})):(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:e,reason:i.type},type:"host_call_set_playback_rate"}),t&&w.dispatch({payload:{bufferingType:o||"in_play"},type:"buffering_begin_requested"}))}return!0},function(e,t,a){if(!1===e.controlledState.bufferingDetected&&!0===t.controlledState.bufferingDetected||!0===e.controlledState.bufferingDetected&&!1===t.controlledState.bufferingDetected)if(null!==S&&(n("clearTimeout")(S),S=null),!t.controlledState.bufferingDetected||n("gkx")("1633455")&&t.controlledState.streamInterrupted)!t.controlledState.bufferingDetected&&null!=C&&(C.log(),C=null);else{a=function l(){if(S=null,n("gkx")("1849507")&&!n("NetworkStatus").isOnline())S=n("setTimeout")(l,o);else{var e=r("VideoPlayerImplementationErrors").createVideoPlayerBufferingErrorFromGenericError("BUFFERING_TIMEOUT",n("err")("The video has been in a buffering state for over "+o+" ms."),"buffering_timeout",i,t.controlledState.isLiveRewindActive);C&&(C.log(),C=null),w.dispatch({payload:{fatalError:e},type:"implementation_fatal_error"}),null==(e=m.getPerfLoggerProvider())||e.getOperationLogger("buffering_timeout").setType(i).setInitiator("engine_api").setLength(o).setResult("failed").log()}};var i=null!=(e=t.controlledState.lastBufferingType)?e:"in_play";e=null!=(e=n("qex")._("1654"))?e:P;var o="in_play"===i?e:P;o>0&&(S=n("setTimeout")(a,o)),e=m.getPerfLoggerProvider(),C=e?e.getOperationLogger("buffering").setState("buffering").setType(i).start():null}return!0},function(e,t,r){return"implementation_engine_destroy_requested"!==r.type||(null!==S&&n("clearTimeout")(S),S=null,!1)},function(e,t,n){return"implementation_engine_initialized"!==n.type||(e=u(v),n=n.type,r("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:m,machine:w,reason:n,state:t,videoElementAPI:e}),!1)},function(e,t,n){return"dom_event_ended"!==n.type||(((e=t.controlledState).loopCount>0&&e.loopCurrent<e.loopCount||-1===e.loopCount)&&w.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"}),!1)},function(e,t,n){return"controller_pause_requested"!==n.type||"paused"===t.controlledState.playbackState&&(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_pause"}),!1)},function(e,t,n){return"controller_play_requested"!==n.type||"stalling"===t.controlledState.playbackState&&(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_play"}),!1)},function(e,t,n){return"controller_seek_requested"!==n.type||(t=(e=t.controlledState).seeking,e=e.seekTargetPosition,t&&null!=e&&a({payload:{currentTime:e,hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_set_current_time"}),!1)},function(e,t,n){return"controller_muted_requested"!==n.type||(e=t.controlledState.muted)===n.payload.muted&&(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:e,reason:n.type},type:"host_call_set_muted"}),!1)},function(e,t,n){return"controller_scrub_begin_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){if("controller_scrub_end_requested"!==n.type)return!0;t=(e=t.controlledState).seeking;var i=e.seekTargetPosition;return e=e.targetPlaybackRate,t&&null!=i?(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:e,reason:n.type+":seek"},type:"host_call_set_playback_rate"}),a({payload:{currentTime:i,hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type+":seek"},type:"host_call_set_current_time"})):a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:e,reason:n.type+":cancel"},type:"host_call_set_playback_rate"}),!1},function(e,t,n){return"buffering_begin_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return"controller_set_playback_rate"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:n.payload.playbackRate,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return"buffering_end_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:t.controlledState.targetPlaybackRate,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return"controller_volume_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type,volume:t.controlledState.volume},type:"host_call_set_volume"}),!1)},function(e,t,n){return"controller_quality_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type,selectedVideoQuality:t.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}),!1)},function(e,t,n){return"controller_set_latency_level_requested"!==n.type&&"implementation_set_latency_level_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:n.payload.latencyLevel,reason:n.type},type:"host_call_set_latency_level"}),!1)},function(e,t,n){if("dom_event_timeupdate"!==n.type&&"captions_loaded"!==n.type)return!0;n=s.current;var a=t.controlledState.captionsVisible,i=v.current;if(i=i?i.getPlayheadPosition():0,r("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&t.controlledState.isLiveRewindActive){var o=t.controlledState.seekableRanges;i>=(o=null!=o&&null!=(o=o.end(o.length()-1))?o:0)&&w.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}return!m.getRepresentationCaptionsExpectedFromManifest()&&n&&a&&t.controlledState.captionsLoaded&&(o=n.handleTimeUpdate(i),a=n.getCaptionFormat(),t=e.controlledState.activeCaptions,a!==(n=e.controlledState.captionFormat)&&w.dispatch({payload:{captionFormat:a},type:"controller_set_caption_format_requested"}),c(t,o)&&w.dispatch({payload:{activeCaptions:o,captionsLocale:null},type:"controller_set_active_captions_requested"})),null!=(e=h.current)&&e.onUpdateStatus({position:i}),!1},function(e,t,n){return"cea608_bytes_received"!==n.type||((e=s.current)&&(n=(t=n.payload).timescale,t=t.videoBytes,e.handleCea608BytesReceived({timescale:n,videoBytes:t})),!1)},function(e,t,n){return"controller_set_captions_url_requested"!==n.type||((e=s.current)&&(t=n.payload.captionsUrl,e.updateCaptionsUrl(t)),!1)},function(e,t,n){return"controller_set_is_live_rewind_active_requested"!==n.type||(m.setEnableLiveheadCatchup(!n.payload.isLiveRewindActive),r("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!n.payload.isLiveRewindActive&&w.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"}),!1)},function(e,t,n){return"controller_picture_in_picture_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_picture_in_picture"}),!1)},function(e,t,n){return"controller_picture_in_picture_exit_requested"!==n.type||(a({payload:{hostCallID:r("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_exit_picture_in_picture"}),!1)}];var w=r("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var e=v.current;return r("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:m,fullscreenControllerRef:g,videoElementAPI:e,videoLiveTraceRef:h,videoPlayerPassiveViewabilityInfoRef:b})},debugLogId:d,initialState:r("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:i,areCaptionsAutogenerated:o,captionDisplayStyle:l,dimensions:p,isAbrEnabled:_.isAbrEnabled,playerImplementationName:_.playerImplementationName,playerVersion:_.playerVersion,streamingFormat:_.streamingFormat}),onFatalError:f,stateTransitionHandlers:e});return w}function c(e,t){if(null===e&&null===t)return!1;if(null===e||null===t)return!0;var n=null!=(t=t.rows)?t:[];return(e=null!=(t=e.rows)?t:[]).length!==n.length||e.some(function(e,t){return e!==n[t]})}function p(e,t,n,r){e!==t.current&&(n.current&&(n.current.remove(),n.current=null),t.current=e),t.current&&!n.current&&(n.current=t.current.subscribe(function(){r.dispatch({type:"notify_fullscreen_changed"})}))}function m(e,t,n,r){e!==t.current&&(n.current&&(n.current.remove(),n.current=null),t.current=e),t.current&&!n.current&&(n.current=t.current.subscribe(function(){r.dispatch({type:"notify_viewability_changed"})}))}function _(e){var t=e.engineMetadata,n=(e=e.state).controlledState,r=n.activeCaptions,a=n.activeEmsgBoxes,i=n.availableQualities,o=n.captionDisplayStyle,l=n.captionsLoaded,s=n.captionsVisible,u=n.error,d=n.hasPlayEverBeenRequested,c=n.implementationSeekSourcePosition,p=n.inbandCaptionsAutogenerated,m=n.isDesktopPictureInPicture,_=n.isLiveRewindActive,g=n.lastMuteReason,f=n.lastPauseReason,y=n.lastPlayedTimeMs,v=n.lastPlayReason,h=n.latencyLevel,P=n.loopCount,b=n.loopCurrent,S=n.muted,C=n.overriddenPlayerFormat,w=n.playbackState,E=n.seekableRanges,I=n.seeking,V=n.seekTargetPosition,D=n.selectedVideoQuality,k=n.streamInterrupted,x=n.targetAudioQuality,T=n.targetPlaybackRate,R=n.targetVideoQuality,O=n.videoProjection,z=n.volume;n=n.watchTimeMs;var F=e.uncontrolledState,$=F.currentPlayingVideoQuality,L=F.isFullscreen,M=F.videoElementDuration,A=F.videoElementLastBufferEndPosition;F=F.videoRepresentationID;var B="ended"===w,U="paused"===w||B,N="playing"===w,H="inPlayStalling"===w;return w="stalling"===w||H,o={activeCaptions:r,activeEmsgBoxes:a,availableVideoQualities:i,bufferEnd:null!=(r=A)?r:0,captionDisplayStyle:o,captionsLoaded:l,captionsVisible:s,currentVideoQuality:null!=(a=$)?a:"",duration:null!=(i=M)?i:0,ended:B,error:u,hasPlayEverBeenRequested:d,inbandCaptionsAutogenerated:p,inPlayStalling:H,isAbrEnabled:t.isAbrEnabled,isDesktopPictureInPicture:null!=(A=m)&&A,isExternalMedia:t.isExternalMedia,isFullscreen:null!=(r=L)&&r,isLiveRewindActive:_,lastMuteReason:g,lastPauseReason:f,lastPlayedTimeMs:y,lastPlayReason:v,latencyLevel:h,loopCount:P,loopCurrent:b,muted:S,overriddenPlayerFormat:C,paused:U,playerImplementationName:e.playerImplementationName,playerVersion:e.playerVersion,playing:N,seekableRanges:E,seeking:I,seekSourcePosition:c,seekTargetPosition:V,selectedVideoQuality:D,stalling:w,streamInterrupted:k,targetAudioQuality:x,targetPlaybackRate:T,targetVideoQuality:R,videoProjection:O,videoRepresentationID:F,volume:z,watchTimeMs:n}}function e(e){function a(){return"mounted"===Q}function i(e){return e.sideLoadCaptionsExpectedFromProps&&null!==e.sideLoadCaptionsUrlFromProps}function o(e){return e.inbandCaptionsExpectedFromProps&&null!=(e=e.inbandCaptionsExpectedFromManifest)&&e}function l(e){return null!=(e=e.inbandCaptionsAutogeneratedFromManifest)&&e}var u=e.createDebugAPI,c=e.createVideoPlayerError,g=e.debugLog,f=e.debugLogId,y=e.destroyEngineParts,v=e.engineExtrasAPI,h=e.engineMetadata,P=e.handleFatalError,b=e.handleVideoElementMounted,S=e.handleVideoElementUnmounted,C=e.handleVideoInfoChange,w=e.initialProps,E=e.setExposedStateInReact,I=w.loggingMetaData.instanceKey;e=(g=w.loggingMetaData.coreVideoPlayerMetaData).broadcastId;var V=g.isLiveStreaming;g=g.isLiveTraceEnabled;var D={current:Boolean(V)&&Boolean(g)&&null!=e?new(n("VideoLiveTrace"))(e,I,n("CurrentUser").getAccountID()):null},k=r("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:f,initialLoggingMetaData:w.loggingMetaData,videoLiveTraceRef:D}),x=t("cr:4081")?r("MediaPlaybackCompoundEventStateMachineLogger").createMediaPlaybackCompoundEventStateMachineLogger({debugLogId:f,initialLoggingMetaData:w.loggingMetaData}):null,T=t("cr:4081")&&x?new(t("cr:4081"))(x):null,R=new(n("VideoPlayerBanzaiLogFlusher"))(k),O={current:null!=(V=w.videoPlayerPassiveViewabilityInfo)?V:null},z={current:null!=(g=w.fullscreenController)?g:null},F={current:null};e=r("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI();var $=[],L=function(){$.forEach(function(e){e()}),w.disableLogging?(R.discardLogsWithoutFlushing(),t("cr:4081")&&(null==T||T.discardLogsWithoutFlushing())):(R.flushLogs(),null==T||T.flushLogs())},M={current:w.onExposedStateChanged},A={current:null},B=null,U={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:w.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:!1,sideLoadCaptionsExpectedFromProps:w.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:null!=(V=w.captionsUrl)?V:null}},N={current:null},H={current:null},q=new(n("SubscriptionsHandler")),W=new(n("SubscriptionsHandler")),Q="before_mounted",j={current:null},G=function(e){return e=_({engineMetadata:h,state:e})},J={current:null},K={current:null},X=function(e){if(a()){if(e===J.current)return;var t=G(e);if(null!=K.current&&n("deepEquals")(K.current,t))return;J.current=e,K.current=t,E(t),(e=M.current)&&e({implementationController:se,implementationExposedState:t})}};g=function(e,t,n){k.handleStateMachine(e,t,n),null==x||x.handleStateMachine(e,t,n),X(t),L()};var Z=function(){};V=function(e){Z(e,"state_machine_fatal_error")};var Y=d({alwaysShowCaptions:Boolean(w.alwaysShowCaptions),areCaptionsAutogenerated:Boolean(w.areCaptionsAutogenerated),captionDisplayStyle:w.captionDisplayStyle,captionsControllerRef:F,debugLogId:f,dimensions:w.dimensions,engineExtrasAPI:v,engineMetadata:h,fullscreenControllerRef:z,handleFatalError:V,handleStateMachine:g,videoElementAPIRef:j,videoLiveTraceRef:D,videoPlayerPassiveViewabilityInfoRef:O}),ee=!1,te=function(e){var t=null!=A.current,r=null!=j.current;q.release(),Y.dispatch({payload:{reason:e,videoElementAPIExisted:r,videoElementExisted:t},type:"implementation_engine_destroy_requested"});try{ee||(ee=!0,y(["destroyEngine("+e+")"]))}catch(g){try{var a=n("FBLogger")("comet_video_player").catching(g),i=w.videoFBID;null!=i&&(a=a.addMetadata("COMET_VIDEO","VIDEO_ID",i)),(a=a.addMetadata("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({destroy_reason:e,player_instance_key:I,player_version:h.playerVersion,video_element_api_existed:r,video_element_existed:t}))).warn("Error thrown by destroyEngineParts: %s",g.message)}catch(e){}}null!=(i=F.current)&&(Y.getCurrentState().controlledState.captionsLoaded&&Y.dispatch({type:"captions_unloaded"}),F.current=null,i.destroy()),p(null,z,N,Y),m(null,O,H,Y),Y.dispatch({payload:{reason:e,videoElementAPIExisted:r,videoElementExisted:t},type:"implementation_engine_destroyed"})};Z=function(e,t){e=c(e,t),Y.dispatch({payload:{fatalError:e},type:"implementation_fatal_error"}),te("implementation_fatal_error"),P(e)};var ne=function(e){var t=i(e),n=o(e),a=l(e),s=F.current;a!==l(U.current)&&Y.dispatch({payload:{inbandCaptionsAutogenerated:a},type:"inband_captions_autogenerated_changed"}),null!=s?n!==o(U.current)&&(s.updateInbandCaptionsExpected(n),!n&&Y.getCurrentState().controlledState.captionsLoaded&&Y.dispatch({type:"captions_unloaded"})):(t||n)&&null==s&&(F.current=r("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:t?e.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:n,onCaptionsLoaded:function(){Y.getCurrentState().controlledState.captionsLoaded||Y.dispatch({type:"captions_loaded"})}})),U.current=e},re=function(e){null!=v&&e&&e.width>0&&e.height>0&&(v.setDimensions(e),Y.dispatch({payload:{dimensions:{height:e.height,width:e.width}},type:"player_dimensions_changed"}))},ae=function(e){e!==Y.getCurrentState().controlledState.loopCount&&Y.dispatch({payload:{loopCount:e},type:"loop_count_change_requested"})},ie=function(e){"srcObject"in e&&(e.srcObject=null),n("gkx")("8054")&&e.removeAttribute("src"),W.release(),W.engage()},oe=function(e,a){if(A.current!==e){null!=e&&null!=A.current&&A.current!==e&&n("recoverableViolation")("The video element was recreated","comet_video_player"),null!=B&&B();var i=A.current;i&&ie(i),A.current=e,null!=t("cr:506")&&null!=e&&(B=t("cr:506")(e,f)),null!=e&&W.addSubscriptions(n("CometEventListener").listen(e,"enterpictureinpicture",function(){r("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp()&&Y.dispatch({payload:{isInPictureInPictureMode:!0},type:"controller_set_picture_in_picture_state_requested"})}),n("CometEventListener").listen(e,"leavepictureinpicture",function(){r("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp()&&Y.dispatch({payload:{isInPictureInPictureMode:!1},type:"controller_set_picture_in_picture_state_requested"})})),null!=A.current?(Y.dispatch({type:"implementation_video_node_mounted"}),b([].concat(a,["handleVideoElement(non-null)"]))):(Y.dispatch({type:"implementation_video_node_unmounted"}),S([].concat(a,["handleVideoElement(null)"])))}};V=w.loggingMetaData.instanceKey,g=function(e){var t;M.current=e.onExposedStateChanged,a()&&(p(null!=(t=e.fullscreenController)?t:null,z,N,Y),m(null!=(t=e.videoPlayerPassiveViewabilityInfo)?t:null,O,H,Y),C(e)||(t={inbandCaptionsAutogeneratedFromManifest:U.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:U.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:e.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:U.current.representationCaptionsExpectedFromManifest,sideLoadCaptionsExpectedFromProps:e.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:null!=(t=e.captionsUrl)?t:null},ne(t),re(e.dimensions),ae(null!=(t=e.loopCount)?t:0)),Y.dispatch({payload:{loggingMetaData:e.loggingMetaData},type:"notify_logging_metadata_change"}))},V=function(){a()||(Q="mounted",q.addSubscriptions(r("RunComet").onUnload(function(){te("page_unload")})),Y.dispatch({type:"implementation_mounted"}),b(["handleReactMount"]))};var le=function(){a()&&(Q="unmounted",Y.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),te("implementation_unmounted:react_effect_cleanup"))},se=s({concurrentAutoplayManagementAPI:e,createExposedState:G,debugAPI:u({getVideoElementAPI:function(){return j.current},logger:k}),fullscreenControllerRef:z,logger:k,machine:Y,subscribers:$,videoElementAPIRef:j});return e=r("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(Y,oe),u=G(Y.getInitialState()),{engine:V={destroy:te,handleReactMount:V,handleReactPropsChanged:g,handleReactUnmount:le,implementationController:se,initialExposedState:u,logFlusher:R,machine:Y,notifySubscribers:L,videoElementCallbacks:e,videoElementRefCallback:function(e){oe(e,["videoElementRefCallback"])}},getCaptionsInfo:function(){return U.current},getVideoElement:function(){return A.current},getVideoLiveTrace:function(){return D.current},handleCaptionsInfoChange:ne,handleFatalImplementationError:Z,logger:k,machine:Y,videoElementAPIRef:j}}function g(e,t){var r,a=n("err")(e.errorName+": "+e.errorDescription);a.name=e.errorName,a.errorName=e.errorName,a.type="error",null!=e.stack&&""!==e.stack&&(a.stack=e.stack);var i=new(n("ErrorMetadata"));return i.addEntries(["COMET_VIDEO","ERROR_LOCATION",e.errorLocation],["COMET_VIDEO","ERROR_CODE",null!=(r=e.errorCode)?r:""],["COMET_VIDEO","ERROR_URL",null!=(r=e.url)?r:""]),null!=t&&i.addEntry("COMET_VIDEO","VIDEO_ID",t),null!=(r=e.originalError)&&("string"==typeof r?i.addEntry("COMET_VIDEO","ORIGINAL_ERROR",r):r instanceof Error&&null!=r.message&&i.addEntry("COMET_VIDEO","ORIGINAL_ERROR",r.message)),a.metadata=i,a}function a(e,t){var r=h(null),a=r[0],i=r[1],o=(r=h(null))[0],l=r[1];r=e.wrapVideoPixels_EXPERIMENTAL;var s=v(e),u=v(t),d=n("useStable")(function(){return u.current({debugLogId:String(s.current.loggingMetaData.instanceKey),handleFatalError:function(e){l(e)},initialProps:s.current,setExposedStateInReact:i})});if(a=null!=(t=a)?t:d.initialExposedState,null!=(t=null!=(t=a.error)?t:o)){if(n("killswitch")("COMET_VIDEO_ERROR_DEAGGREGATION"))throw n("unrecoverableViolation")(t.errorName+": "+t.errorDescription,"comet_video_player",{error:t.originalError instanceof Error?t.originalError:void 0});throw(o=e.VideoPlayerShakaPerformanceLoggerClass)&&(n("gkx")("2007883")||n("qex")._("1655"))&&o.flushQueuedLogs(),g(t,s.current.videoFBID)}y(function(){return d.handleReactMount(),function(){d.handleReactUnmount()}},[d]);var c=v(null);y(function(){e!==c.current&&d.handleReactPropsChanged(e),c.current=e}),
o=n("useSEOLoggedOutWebCrawler")(),t=e.renderVideoPixelsFit?e.renderVideoPixelsFit(a):null,o=f.jsx(n("VideoPlayerImplementationReactVideoElement.react"),{alt:e.alt,implementationExposedState:a,seoWebCrawlerVideoTracks:o&&null!=e.seoWebCrawlerVideoTracks?e.seoWebCrawlerVideoTracks:null,src:o?e.seoWebCrawlerLookasideUrl:null,videoElementCallbacks:o?null:d.videoElementCallbacks,videoElementPreloadDisabled:e.preloadForProgressiveDisabled,videoElementRefCallback:o?null:d.videoElementRefCallback,videoPixelsFit:t});var p=e.renderWithExposedState({implementationController:d.implementationController,implementationExposedState:a});return r=f.jsxs(f.Fragment,{children:[r?r(o):o,f.jsx(n("VideoPlayerVideoPixelsFitContext").Provider,{value:t,children:p})]}),{engine:d,exposedState:a,reactVideoComponents:p,reactVideoFrame:o,reactVideoFrameAndComponents:r}}var f=r("react"),y=(i=r("react")).useEffect,v=i.useRef,h=i.useState,P=null!=(i=n("qex")._("1653"))?i:0,b=function(){function e(e){var t=e.pauseRequestCallbacks,n=e.playRequestCallbacks,r=e.scrubBeginRequestCallbacks;e=e.scrubEndRequestCallbacks,this.$1=n,this.$2=t,this.$3=r,this.$4=e}var t=e.prototype;return t.playRequest=function(e){var t=this;return this.$1.push(e),function(){n("removeFromArray")(t.$1,e)}},t.pauseRequest=function(e){var t=this;return this.$2.push(e),function(){n("removeFromArray")(t.$2,e)}},t.scrubBeginRequest=function(e){var t=this;return this.$3.push(e),function(){n("removeFromArray")(t.$3,e)}},t.scrubEndRequest=function(e){var t=this;return this.$4.push(e),function(){n("removeFromArray")(t.$4,e)}},e}();o.internal_createVideoPlayerImplementationControllerImpl=l,o.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=d,o.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=_,o.createVideoPlayerImplementationEngine=e,o.internal_makeExpandedErrorFromVideoPlayerError=g,o.useVideoPlayerImplementationEngine=a},98),__d("VideoPlaybackQuality",[],function(e,t,n,r,a,i){function e(e){return"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().droppedVideoFrames:"number"==typeof(e=e.webkitDroppedFrameCount)?e:0}function t(e){return"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof(e=e.webkitDecodedFrameCount)?e:0}i.getDroppedFrames=e,i.getTotalFrames=t},66),__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig"],function(e,t,n,r,a,i,o){"use strict";function l(e){return isNaN(e)?0:e}function s(e){return l(e.duration)}function u(e){return(e=e.buffered).length>0?e.end(e.length-1):0}function d(e){return l(e.currentTime)}function c(e){return 0===e.buffered.length?0:e.buffered.start(0)}function e(e,a){var i=!0!==a,o=null,l=function(t){i?null==t||""===t?e.removeAttribute("src"):e.setAttribute("src",t):o=t};return{exitPictureInPicture:function(){window.document.exitPictureInPicture()},getCanPlayPromise:function(){return new(t("Promise"))(function(t){4===e.readyState?t():e.addEventListener("canplay",function(){return t()})})},getDOMLoadedMetadataPromise:function(){return new(t("Promise"))(function(t){e.addEventListener("loadedmetadata",function(){return t()})})},getDroppedFrameCount:function(){return r("VideoPlaybackQuality").getDroppedFrames(e)},getDuration:function(){return s(e)},getEnded:function(){return e.ended},getError:function(){return e.error},getLastBufferEndPosition:function(){return u(e)},getMuted:function(){return e.muted},getNetworkState:function(){return e.networkState},getPaused:function(){return e.paused},getPlaybackRate:function(){return e.playbackRate},getPlayheadPosition:function(){return d(e)},getReadyState:function(){return e.readyState},getTotalFrameCount:function(){return r("VideoPlaybackQuality").getTotalFrames(e)},getUnderlyingVideoElement:function(){return e},getVolume:function(){return e.volume},pause:function(){e.pause()},play:function(){i||(i=!0,l(o),o=null);var n=e.play();return n=n&&"function"==typeof n.then?t("Promise").resolve(n):null},requestPictureInPicture:function(){"function"==typeof e.requestPictureInPicture&&e.requestPictureInPicture()},setDuration:function(t){e.duration=t},setMuted:function(t){e.muted=t},setPlaybackRate:function(t){e.playbackRate=t},setPlayheadPosition:function(t){var r=t;if(0===t&&(t=n("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0))>0){var a=c(e);a>0&&a<=t&&(r=a)}e.currentTime=r},setSrc:l,setVolume:function(t){e.volume=t}}}o.getDurationFromVideoElement=s,o.getLastBufferEndPositionFromVideoElement=u,o.getPlayheadPositionFromVideoElement=d,o.createVideoPlayerImplementationEngineVideoElementAPI=e},98),__d("VideoPlayerImplementationLoadSequenceManager",["setTimeout"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(){this.$1=[],this.$2=[]}var t=e.prototype;return t.schedule=function(e,t,r){var a=this,i={load:r,maximumBlockTimeMs:e.getNumber("load_sequence_max_delay_ms",0),sequence:t},o=e.getNumber("load_sequence_only_prioritize_first_count",0);return(r=o>0?!this.$2.find(function(e){return e.sequence<o}):!this.$2.find(function(e){return e.sequence<t}))?this.$3(i):(this.$1.push(i),n("setTimeout")(function(){return a.$4(i)},i.maximumBlockTimeMs)),function(){return a.$5(i)}},t.$4=function(e){var t=this.$1.find(function(t){return t===e});t&&(this.$1=this.$1.filter(function(t){return t!==e}),this.$3(t))},t.$3=function(e){var t=this;this.$2.push(e),e.load().then(function(){return t.$6(e)})["catch"](function(n){throw t.$6(e),n}),n("setTimeout")(function(){return t.$6(e)},e.maximumBlockTimeMs)},t.$7=function(){var e=this,t=Math.min.apply(Math,this.$1.map(function(e){return e.sequence}));this.$1.filter(function(e){return e.sequence===t}).forEach(function(t){return e.$4(t)})},t.$5=function(e){this.$1=this.$1.filter(function(t){return t!==e})},t.$6=function(e){this.$2.find(function(t){return t===e})&&(this.$2=this.$2.filter(function(t){return t!==e}),!!this.$2.find(function(t){return t.sequence===e.sequence})&&this.$7())},e}(),r=new e,o["default"]=r},98),__d("VideoPlayerOzImplementationData",["err"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.canUseOz,r=e.dashManifest,a=e.dashUrl,i=e.experimentationConfig,o=e.minQualityPreference;return e=e.videoFBID,!0!==t?((t=n("err")("The DASH player is not available for this video")).name="VideoImplementationsDashPlayerUnavailable",t):null==e?((t=n("err")("video has no FBID")).name="VideoImplementationsNoFBID",t):(t=null==a||""===a?null:a,null==(e=null==r||""===r?null:r)&&null==t?((r=n("err")("video has no manifest and no manifest URL")).name="VideoImplementationsNoManifestOrURL",r):{experimentationConfig:i,manifest:e,manifestUrl:t,minQualityPreference:null!=(a=o)?a:null,seoWebCrawlerLookasideUrl:t})}o.makeOzImplementationData=e},98),__d("VideoPlayerODS",["ODS","Random"],function(e,t,n,r,a,i,o){"use strict";e=function(e,t,n){r("Random").coinflip(n)&&r("ODS").bumpEntityKey(2079,e,t,n)},o.bumpEntityKey=e},98),__d("handleVideoPlayerLatencyLevelChange",[],function(e,t,n,r,a,i){"use strict";function e(e,t,n,r){if(e&&t&&n){var a=e.getAllContexts().latency_level;n=[];try{n=JSON.parse(e.getString("seek_on_latency_level_change_allowed","[]"))}catch(e){}if(n=n.some(function(e){return 2===e.length&&e[0]===a&&e[1]===r}),e.setContext("latency_level",r),!n)return;null!=(n=null!=(n=t.getDuration())?n+e.getNumber("live_initial_playback_position",0):null)&&t.setPlayheadPosition(n)}}i["default"]=e},66),__d("VideoPlayerOzImplementationEngineExtrasAPI",["VideoPlayerOzWWWGlobalConfig","emptyFunction","gkx","handleVideoPlayerLatencyLevelChange","oz-player/networks/OzBandwidthEstimator"],function(e,t,n,r,a,i,o){"use strict";function l(e){return e.getSelectedVideoQuality()}function s(e){return null==(e=e.getCurrentVideoRepresentation())?"":e.getQualityLabel()}function u(e){return e=e.getIsVideoQualityAdaptationEnabled()?"auto":e.getSelectedVideoQuality()}function d(e){return null!=(e=null==(e=e.getMpd())?void 0:e.getCustomField("fbProjection"))?e:null}function c(e,t){var n=u(e);return"notselected"!==t&&t!==n&&("auto"===t?(e.enableVideoQualityAdaptation(),!0):t!==e.getSelectedVideoQuality()&&(n=t,e.switchToVideoQuality(n),!0))}function e(e){var t=e.getConfig,r=e.getOzPlayer,a=e.getVideoElementAPI;return e={getApproximateFBLSToPlayerDisplayLatency:function(){var e;return null!=(e=null==(e=r())?void 0:e.getApproximateFBLSToPlayerDisplayLatency())?e:null},getAudioRepresentationIDAtTime:function(e){var t;return null!=(e=t=null==(t=r())?void 0:t.getAudioRepresentationIDAtTime(e))?e:null},getAvailableVideoQualities:function(){var e;return null!=(e=null==(e=r())?void 0:e.getVideoQualities())?e:[]},getCurrentAudioRepresentation:function(){var e;return null!=(e=null==(e=r())?void 0:e.getCurrentAudioRepresentation())?e:null},getCurrentPlayingVideoQuality:function(){var e=r();return e?s(e):""},getCurrentTargetVideoQuality:function(){var e=r();return e?l(e):""},getCurrentVideoRepresentation:function(){var e;return null!=(e=null==(e=r())?void 0:e.getCurrentVideoRepresentation())?e:null},getEstimatedBandwidth:function(){return n("oz-player/networks/OzBandwidthEstimator").getBandwidth(n("VideoPlayerOzWWWGlobalConfig"))},getInbandCaptionsAutogeneratedFromManifest:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))},getInbandCaptionsExpectedFromManifest:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("hasInbandCaptionsFromUsingASRCaptions"))||Boolean(null==e?void 0:e.getCustomField("hasInbandCaptionsFromAccessibility"))},getManifestIdentifier:function(){var e;return null!=(e=null==(e=r())?void 0:null==(e=e.getMpd())?void 0:e.getCustomField("fbManifestIdentifier"))?String(e):null},getMpdValidationErrors:function(){var e;return null!=(e=null==(e=r())?void 0:null==(e=e.getMpd())?void 0:e.getCustomField("validationErrors"))?String(e):null},getPerfLoggerProvider:function(){var e=r();return e?e.getPerfLoggerProvider():null},getRepresentationCaptionsExpectedFromManifest:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("hasVTTRepresentationCaptions"))},getStreamType:function(){return"dash"},getUserSelectedVideoQuality:function(){var e=r();return e?u(e):""},getVideoProjectionType:function(){var e=r();return null!=e?d(e):null},getVideoRepresentationIDAtTime:function(e){var t;return null!=(e=t=null==(t=r())?void 0:t.getVideoRepresentationIDAtTime(e))?e:null},getVideoRepresentations:function(){var e;return null!=(e=null==(e=r())?void 0:null==(e=e.getMpd())?void 0:e.getVideoRepresentations())?e:null},isDrm:function(){var e;return Boolean(null==(e=r())?void 0:e.isDrm())},isFBIsLiveTemplated:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("isLiveTemplated"))},isFBMS:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("isFBMS"))},isFBWasLive:function(){var e;return e=null==(e=r())?void 0:e.getMpd(),Boolean(null==e?void 0:e.getCustomField("isFBWasLive"))},isPredictiveDash:function(){var e;return null!==(e=null!=(e=null==(e=r())?void 0:null==(e=e.getMpd())?void 0:e.getVideoRepresentations()[0])?e:null)&&e.canPredict()},setDimensions:function(){},setEnableLiveheadCatchup:function(e){var t=r();null!=t&&t.setEnableLiveheadCatchup(e)},setLatencyLevel:function(e){n("handleVideoPlayerLatencyLevelChange")(t(),a(),r(),e)},setUserSelectedVideoQuality:function(e){var t=r();null!=t&&c(t,e)}}}n("emptyFunction"),o.createVideoPlayerOzImplementationEngineExtrasAPI=e},98),__d("OzActiveActiveFailoverNetworkRequestStreamHandler",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.onResponse=function(e,t){var n=e.headers;return n&&n.has("x-fb-video-replica")&&this.$1(e,t),null},t.onError=function(){return null},e}(),i["default"]=e},66),__d("OzCustomParsers",[],function(e,t,n,r,a,i){function e(){return new Map([["fbProjection",function(e){try{return e.Period[0].AdaptationSet[0].$.FBProjection||null}catch(e){return null}}],["hasInbandCaptionsFromAccessibility",function(e){return!(!(e=(e=e.Period[0])&&e.AdaptationSet[0].Accessibility)||!e[0])&&"urn:scte:dash:cc:cea-608:2015"===e[0].$.schemeIdUri}],["hasInbandCaptionsFromUsingASRCaptions",function(e){return e=Number.parseInt(e.$.usingASRCaptions,0),!isNaN(e)&&0!=e}],["hasInbandCaptionsFromIsUsingAsrCaptionsEmployeeDogfooding",function(e){return e=Number.parseInt(e.$.isUsingAsrCaptionsEmployeeDogfooding,0),!isNaN(e)&&0!=e}],["hasVTTRepresentationCaptions",function(e){return null!=e.Period[0].AdaptationSet.find(function(e){var t;return(null==(t=e.$.mimeType)?void 0:t.startsWith("application"))&&null!=e.$.lang})}],["isLiveTemplated",function(e){return"true"===e.$.FBIsLiveTemplated}],["isFBMS",function(e){return"true"===e.$.FBMS}],["isFBWasLive",function(e){return"true"===e.$.FBWasLive}],["loapStreamType",function(e){return e.$.loapStreamType?parseInt(e.$.loapStreamType,10):0}],["fbManifestIdentifier",function(e){return null!=(e=e.$.FBManifestIdentifier)?e:""}],["lastVideoFrameTs",function(e){return e.$.lastVideoFrameTs?Number.parseInt(e.$.lastVideoFrameTs,10):null}],["currentServerTimeMs",function(e){return e.$.currentServerTimeMs?Number.parseInt(e.$.currentServerTimeMs,10):null}],["validationErrors",function(e){return null!=(e=e.$.validationErrors)?e:""}]])}i.createOzCustomParser=e},66),__d("oz-player/manifests/OzSegmentOptions",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(){this.$1=!1,this.$2=null}var t=e.prototype;return t.setSegmentNumDecisionTime=function(e){this.$2=e},t.getSegmentNumDecisionTime=function(){return this.$2},t.setIsDVLEnabled=function(e){this.$1=e},t.isDVLEnabled=function(){return this.$1},e}(),i["default"]=e},66),__d("oz-player/shims/www/OzURIWWWImplConstUri",["ConstUriUtils"],function(e,t,n,r,a,i,o){"use strict";function l(e){e=e.getQueryParams();var t={};return e.forEach(function(e,n){t[n]="string"==typeof e||"number"==typeof e?e:String(e)}),t}e=function(){function e(e){if(this.$1=r("ConstUriUtils").getUri(e),null==this.$1)throw new Error("Invalid URI passed to OzURI");this.$2=l(this.$1)}var t=e.prototype;return t.addQueryData=function(e,t){var n=this.$1;if("string"==typeof e){var r;n=null==(r=n)?void 0:r.addQueryParam(e,void 0===t?"":t)}else{var a=new Map;Object.keys(e).forEach(function(t){a.set(t,e[t])}),n=null==(r=n)?void 0:r.addQueryParams(a)}null!=n&&(this.$1=n,this.$2=l(this.$1))},t.getQueryData=function(){return this.$2},t.getDomain=function(){var e;return null!=(e=null==(e=this.$1)?void 0:e.getDomain())?e:""},t.toString=function(){var e;return null!=(e=null==(e=this.$1)?void 0:e.toString())?e:""},t.getPath=function(){var e;return null!=(e=null==(e=this.$1)?void 0:e.getPath())?e:""},e}(),o["default"]=e},98),__d("oz-player/shims/www/OzURIWWW",["oz-player/shims/www/OzURIWWWImplConstUri"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("oz-player/shims/www/OzURIWWWImplConstUri")},98),__d("oz-player/shims/OzURI",["oz-player/shims/www/OzURIWWW"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("oz-player/shims/www/OzURIWWW")},98),__d("oz-player/utils/ozConcatUint8Arrays",["oz-player/utils/OzError"],function(e,t,n,r,a,i,o){"use strict";function e(e){for(var t,r,a=0,i=0;i<e.length;++i)a+=e[i].byteLength;try{t=new ArrayBuffer(a),r=new Uint8Array(t)}catch(e){throw new(n("oz-player/utils/OzError"))({type:"OZ_ALLOCATION_FAILURE",description:e.name+": "+e.message})}for(i=0,a=0;a<e.length;++a){var o=e[a];r.set(o,i),i+=o.byteLength}return{buffer:t,view:r}}o["default"]=e},98),__d("oz-player/utils/OzReadableStreamUtils",["oz-player/utils/ozConcatUint8Arrays"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t=[];return function r(){return e.read().then(function(e){var n=e.value;return(e=e.done)?null:n?(t.push(n),r()):null})}().then(function(){var e=n("oz-player/utils/ozConcatUint8Arrays")(t);return e=e.view})}function e(e){return l(e).then(function(e){return s(e)})}function t(e){return new Uint8Array(e.length).map(function(t,n){return e.charCodeAt(n)})}var s="undefined"!=typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(new Uint8Array(e))}:function(e){return String.fromCharCode.apply(null,e)};o.pumpAllData=l,o.pumpString=e,o.stringToUint8Array=t},98),__d("OzCustomRepresentationParsers",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzURI","oz-player/utils/OzReadableStreamUtils"],function(e,t,n,r,a,i,o){function e(e){var t=e.ozConfig,a=e.startTimestamp;return e={timescale:function(e){return(e=e.SegmentTemplate)&&e.length>0&&(e=e[0].$)&&Number.parseInt(e.timescale,0)||null}},t.getBool("parse_initialization_binary",!1)&&(e.initializationBinary=function(e){try{return e=window.atob(e.FBInitializationBinary[0]._),r("oz-player/utils/OzReadableStreamUtils").stringToUint8Array(e)}catch(e){return null}}),e.playbackResolutionMos=function(e){try{return e.$.FBPlaybackResolutionMos}catch(e){return null}},e.qualityLabel=function(e){try{return e.$.FBQualityLabel}catch(e){return null}},t.getBool("parse_first_segment",!1)&&(e.firstSegmentParser=function(e){if(null!=a&&a>0)return null;try{var t=e.SegmentBase[0].$.FBFirstSegmentRange.split("-").map(Number),r={startByte:t[0],endByte:t[1]};t=e.BaseURL[0]._;var i=new(n("oz-player/shims/OzURI"))(t),o=new(n("oz-player/manifests/OzSegmentOptions"));return{getData:function(){return null},getURI:function(){return i},getByteRange:function(){return r},getTimeRange:function(){return{startTime:0,endTime:2}},getSequenceNumber:function(){return null},getOptions:function(){return o}}}catch(e){return null}}),e}o.createOzCustomRepresentationParsers=e},98),__d("oz-player/shims/www/ozvariantWWW",["invariant"],function(e,t,n,r,a,i,o,l){e=l,o["default"]=e},98),__d("oz-player/shims/ozvariant",["oz-player/shims/www/ozvariantWWW"],function(e,t,n,r,a,i,o){o["default"]=n("oz-player/shims/www/ozvariantWWW")},98),__d("oz-player/utils/OzNumericalHelper",[],function(e,t,n,r,a,i){"use strict";function o(e,t,n){return void 0===n&&(n=u),Math.abs(t-e)<=n}function l(e,t,n){return void 0===n&&(n=u),e>t&&!o(e,t,n)}function s(e,t,n){return void 0===n&&(n=u),e<t&&!o(e,t,n)}function e(e,t,n){return void 0===n&&(n=u),s(e,t,n)||o(e,t,n)}function t(e,t,n){return void 0===n&&(n=u),l(e,t,n)||o(e,t,n)}var u=1e-5;i.equalTo=o,i.greaterThan=l,i.lessThan=s,i.lessThanOrEqual=e,i.greaterThanOrEqual=t},66),__d("oz-player/utils/OzNumericalRangeUtil",["oz-player/utils/OzNumericalHelper"],function(e,t,n,r,a,i,o){"use strict";function l(e,t){return null!=(t=t.rangeEnd)&&(Math.abs(e.rangeStart-t)>_&&e.rangeStart>t)}function s(e,t){return e=e.rangeEnd,t=t.rangeEnd,null==e||null!=t&&(Math.abs(e-t)>_&&e>t)}function u(e,t,n,r){return null!=(e=n.rangeEnd)&&(t===e||Math.abs(t-e)>(null!=(n=r)?n:_)&&t>e)}function e(e,t,n){var r=t.rangeEnd;return null!=r&&(n=null!=(n=n)?n:_,e-t.rangeStart>=n&&r-e>=n)}function d(e,t){return e>t-_}function t(e){if(!e.length)return[];var t=[],n=e[0];t.push(n);for(var r=1;r<e.length;r++){var a=e[r];s(a,n)&&(l(a,n)?(n={rangeStart:a.rangeStart,rangeEnd:a.rangeEnd},t.push(n)):n.rangeEnd=a.rangeEnd)}return t}function n(e,t,n){return t.reduceRight(function(t,r){return u(e,r.rangeStart,n)||u(e,n.rangeStart,r)?t.push(r):(null!=n.rangeEnd&&(null==r.rangeEnd||u(e,r.rangeEnd,n))&&t.push({rangeStart:n.rangeEnd,rangeEnd:r.rangeEnd}),d(n.rangeStart,r.rangeStart)&&t.push({rangeStart:r.rangeStart,rangeEnd:n.rangeStart})),t},[]).filter(function(e){return null==e.rangeEnd||e.rangeStart<e.rangeEnd}).reverse()}function a(e,t,n,r){void 0===r&&(r=_);for(var a=0;a<n.length;a++){var i=n[a];if(d(t,i.rangeStart)&&!u(e,t,i,r))return a}return-1}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(!d(e,r=r.rangeStart))return n}return-1}function c(e,t,n){return e>=t?0:n.reduceRight(function(n,r){var a=r.rangeStart;return r=r.rangeEnd,t<a||null!=r&&e>r?n:null==r||t<=r?Math.min(t-a,t-e)+n:e>=a?Math.min(r-e,t-e)+n:r-a+n},0)}function p(e,t){var n;n=0==e.length&&null!=(n=t[t.length-1])?n:null;for(var a=0;a<e.length;a++){for(var i=e[a],o=a;o<t.length;o++){var l=t[o];if(r("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,l.rangeStart)&&null!=i.rangeEnd&&null!=l.rangeEnd&&r("oz-player/utils/OzNumericalHelper").equalTo(i.rangeEnd,l.rangeEnd))break;if(null!=l.rangeEnd&&null!=i.rangeEnd&&!r("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,l.rangeStart)){n={rangeStart:l.rangeStart,rangeEnd:l.rangeEnd};break}if(null!=l.rangeEnd&&null!=i.rangeEnd&&r("oz-player/utils/OzNumericalHelper").equalTo(i.rangeStart,l.rangeStart)&&!r("oz-player/utils/OzNumericalHelper").equalTo(i.rangeEnd,l.rangeEnd)){n={rangeStart:i.rangeEnd,rangeEnd:l.rangeEnd};break}}if(null!==n)break}return n}function m(e){for(var t=[],n=0;n<e.length;n++)t.push({rangeStart:e[n].startTime,rangeEnd:e[n].endTime});return t}var _=.01;o.isAfter=u,o.isWithin=e,o.isLargerThan=d,o.mergeSortedRanges=t,o.diffSortedRanges=n,o.findCurrentRangeIndex=a,o.findNextRangeIndex=i,o.findDiffCoveredByRanges=c,o.firstAddedInSortedRanges=p,o.convertFromTimeRanges=m},98),__d("oz-player/manifests/SegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/shims/OzEventEmitter","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil"],function(e,t,n,r,a,i,o){"use strict";var l=1e-4;e=function(){function e(e,t,r,a,i,o){void 0===o&&(o=!1),this.$7=new(n("oz-player/shims/OzEventEmitter")),this.$10=null,this.$8=e,this.$2=t,this.$3=r,this.$1=i,this.$4=a,this.$5=this.$11(this.$4),this.$6=o,this.$9=this.$8.getNumber("live_numerical_error_epsilon")}var t=e.prototype;return t.getSegmentByTime=function(e){e=this.$12(e),e*=this.$3;for(var t=null,n=this.$4.length-1;n>=0;n--){var a=this.$4[n];if(r("oz-player/utils/OzNumericalHelper").lessThanOrEqual(a.t+a.d*(a.r+1),e,this.$9))break;t=a}return null===t?null:r("oz-player/utils/OzNumericalHelper").greaterThan(t.t,e,this.$9)?null:(a=Math.max(0,Math.floor((e-t.t+this.$9)/t.d)),this.$13(t,a))},t.getSegment=function(e){var t=0;for(e=e;e>=0&&t<this.$4.length;){var n=this.$4[t];if(n=n.r,!(e>=(n+=1)))break;e-=n,t++}return(n=this.$4[t])?this.$13(n,e):null},t.getSegmentAfter=function(e){return e=e.getTimeRange().endTime,this.getSegmentByTime(e)},t.getPredictedSegmentAfter=function(){return null},t.canPredict=function(){return!1},t.canApproximateId=function(){return!1},t.isEndingSegment=function(e){if(!this.$4||!this.$4.length||!this.$6)return!1;var t=this.$4[this.$4.length-1],n=t.r;return t=this.$13(t,n),Math.abs(t.getTimeRange().startTime-e.getTimeRange().startTime)+Math.abs(t.getTimeRange().endTime-e.getTimeRange().endTime)<l},t.updateWith=function(t){t instanceof e||n("oz-player/shims/ozvariant")(0,646),this.$6=t.$6,this.$14(t.$4),this.$15(t.$4),this.$7.emit("segment_updated")},t.getTimeRanges=function(){return this.$10?this.$16(this.$5,this.$10):this.$5},t.blockTimeRange=function(e){this.$10=e},t.$16=function(e,t){return r("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$8,e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}),{rangeStart:t.startTime,rangeEnd:t.endTime}).map(function(e){return{startTime:e.rangeStart,endTime:null==e.rangeEnd?Infinity:e.rangeEnd}})},t.addUpdateListener=function(e){return this.$7.addListener("segment_updated",e)},t.$12=function(e){var t=e,n=r("oz-player/utils/OzNumericalRangeUtil").findCurrentRangeIndex(this.$8,e,this.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}));return-1===n&&-1!==(n=r("oz-player/utils/OzNumericalRangeUtil").findNextRangeIndex(e,this.getTimeRanges().map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}})))&&(t=this.getTimeRanges()[n].startTime),t},t.$14=function(e){var t;(t=this.$4).splice.apply(t,[0,this.$4.length].concat(e))},t.$15=function(e){e=this.$11(e),e=r("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$5.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}).concat(e.map(function(e){return{rangeStart:e.startTime,rangeEnd:e.endTime}}))),this.$5=e.map(function(e){return{startTime:e.rangeStart,endTime:null==e.rangeEnd?Infinity:e.rangeEnd}})},t.$11=function(){var e=this;return r("oz-player/utils/OzNumericalRangeUtil").mergeSortedRanges(this.$4.map(function(t){return{rangeStart:e.$13(t,0).getTimeRange().startTime,rangeEnd:t=e.$13(t,t.r).getTimeRange().endTime}})).map(function(e){return{startTime:e.rangeStart,endTime:e=null==(e=e.rangeEnd)?Infinity:e}})},t.$13=function(e,t){var r=this;void 0===t&&(t=0);var a=e.t,i=e.d,o=e.r;e=e.id;var l=a+i*t,s=this.$8.getBool("use_scf_timebased_segments"),u=null!=e?e-(o-t):null,d=new(n("oz-player/manifests/OzSegmentOptions"));return{getData:function(){return null},getURI:function(){var e=null!=r.$1&&null!=u?r.$1.replace("$Number$",u.toString()):r.$2.replace("$Time$",l.toString());return e=new(n("oz-player/shims/OzURI"))(e),s&&e.addQueryData("_nc_scf",1),e},getTimeRange:function(){return{startTime:l/r.$3,endTime:(l+i)/r.$3}},getByteRange:function(){return null},getSequenceNumber:function(){return null},getOptions:function(){return d}}},t.getSegmentGroups=function(){return this.$4},t.getEndingSegment=function(){if(0==this.$4.length)return null;var e=this.$4[this.$4.length-1],t=e.r;return this.$13(e,t)},t.forceParseIfNotParsed=function(){},t.getMaxGopSec=function(){return null},e}(),o["default"]=e},98),__d("oz-player/utils/OzUrlHelper",[],function(e,t,n,r,a,i){"use strict";function e(e){var t=(e=e).indexOf("://"),n=e.indexOf("/",t+3);return n>t&&(e=e.substring(n)),e}function o(e){var t=(e=e).lastIndexOf("/");return t>e.lastIndexOf("://")+2&&(e=e.substring(0,t+1)),e}function l(e){return(e=o(e=e)).endsWith("/")?o(e.substring(0,e.length-1)):e}function s(e,t){for(e=o(e),t=t;t.length;)if(t.startsWith("./"))t=t.substring(2);else if(t.startsWith("../"))t=t.substring(3),(e=l(e)).endsWith("/")&&(e=e.substring(0,e.length-1));else if(t.startsWith(".."))t=t.substring(2),e=l(e);else{if(!t.startsWith("."))break;t=t.substring(1)}return t&&t.length&&(e.endsWith("/")||(e+="/"),e+=t),e}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length)return"";if(1===t.length)return t[0];for(var r=t.shift();t.length>0;)r=s(r,t.shift());return r}function t(e,t){return d(t)?t:u(e,t)}function d(e){return/^https?:\/\//i.test(e)}i.stripToPathAndQueryOnly=e,i.joinRelativeUrlPaths=u,i.joinUrlPaths=t},66),__d("PredictedSegmentTemplateSegmentsContainer",["oz-player/manifests/OzSegmentOptions","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/shims/OzURI","oz-player/shims/ozvariant","oz-player/utils/OzNumericalHelper","oz-player/utils/OzNumericalRangeUtil","oz-player/utils/OzUrlHelper"],function(e,t,n,r,a,i,o){"use strict";e=function(e){function t(t,n,r,a,i,o,l,s,u,d){for(void 0===d&&(d=!1),(n=e.call(this,t,n,a,i,null,d)||this).$PredictedSegmentTemplateSegmentsContainer9=0,n.$PredictedSegmentTemplateSegmentsContainer11=null,n.$PredictedSegmentTemplateSegmentsContainer10=r,n.$PredictedSegmentTemplateSegmentsContainer8=d,n.$PredictedSegmentTemplateSegmentsContainer12=i,n.$PredictedSegmentTemplateSegmentsContainer7=t,n.$PredictedSegmentTemplateSegmentsContainer5=a,n.$PredictedSegmentTemplateSegmentsContainer1=o,n.$PredictedSegmentTemplateSegmentsContainer3=s,n.$PredictedSegmentTemplateSegmentsContainer2=l,n.$PredictedSegmentTemplateSegmentsContainer4=u,n.$PredictedSegmentTemplateSegmentsContainer6=t.getNumber("live_numerical_error_epsilon"),r=0;r<n.$PredictedSegmentTemplateSegmentsContainer12.length;r++)n.$PredictedSegmentTemplateSegmentsContainer9=Math.max(n.$PredictedSegmentTemplateSegmentsContainer12[r].d,n.$PredictedSegmentTemplateSegmentsContainer9);return n}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.$PredictedSegmentTemplateSegmentsContainer13=function(){return null!=this.$PredictedSegmentTemplateSegmentsContainer2&&null!=this.$PredictedSegmentTemplateSegmentsContainer4?{predictedAverageDuration:this.$PredictedSegmentTemplateSegmentsContainer4,predictedMediaStartNumber:this.$PredictedSegmentTemplateSegmentsContainer2}:null},a.$PredictedSegmentTemplateSegmentsContainer14=function(e,t,a){var i=this;Number.isNaN(a)&&n("oz-player/shims/ozvariant")(0,54238);var o=this.$PredictedSegmentTemplateSegmentsContainer1.replace("$Number$",a.toString()),l=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getString("cdn_experiment_id",""),s=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getNumber("use_dvl_with_timeout_ms",0),u=new(n("oz-player/manifests/OzSegmentOptions"));return{getByteRange:function(){return null},getData:function(){return null},getOptions:function(){return u},getSequenceNumber:function(){return a},getTimeRange:function(){return{endTime:t,startTime:e}},getURI:function(){var e=new(n("oz-player/shims/OzURI"))(o);return 0!==l.length&&e.addQueryData("_nc_expid",l),u.isDVLEnabled()&&s>0&&null!=i.$PredictedSegmentTemplateSegmentsContainer10&&(e.addQueryData("_nc_dinfo-manifest-url",r("oz-player/utils/OzUrlHelper").stripToPathAndQueryOnly(i.$PredictedSegmentTemplateSegmentsContainer10)),e.addQueryData("_nc_dinfo-timeout",s)),e}}},a.updateWith=function(r){for(r instanceof t||n("oz-player/shims/ozvariant")(0,646),this.$PredictedSegmentTemplateSegmentsContainer3=r.$PredictedSegmentTemplateSegmentsContainer3,this.$PredictedSegmentTemplateSegmentsContainer1=r.$PredictedSegmentTemplateSegmentsContainer1,e.prototype.updateWith.call(this,r),this.$PredictedSegmentTemplateSegmentsContainer12=r.$PredictedSegmentTemplateSegmentsContainer12,this.$PredictedSegmentTemplateSegmentsContainer8=r.$PredictedSegmentTemplateSegmentsContainer8,r=0;r<this.$PredictedSegmentTemplateSegmentsContainer12.length;r++)this.$PredictedSegmentTemplateSegmentsContainer9=Math.max(this.$PredictedSegmentTemplateSegmentsContainer12[r].d,this.$PredictedSegmentTemplateSegmentsContainer9)},a.getSegmentByTime=function(e){return this.canApproximateId()?this.$PredictedSegmentTemplateSegmentsContainer15(e):this.$PredictedSegmentTemplateSegmentsContainer16(e)},a.getPredictedSegmentAfter=function(e){return null!=(e=null!=e?e.getSequenceNumber():null)&&this.canPredict()?this.$PredictedSegmentTemplateSegmentsContainer14(0,0,e+1):null},a.blockTimeRange=function(t){this.$PredictedSegmentTemplateSegmentsContainer11=t,e.prototype.blockTimeRange.call(this,t)},a.getTimeRanges=function(){var t=this.$PredictedSegmentTemplateSegmentsContainer13();if(t){t=[{endTime:(this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d)/this.$PredictedSegmentTemplateSegmentsContainer5,startTime:(this.$PredictedSegmentTemplateSegmentsContainer12[0].t-t.predictedAverageDuration-(this.$PredictedSegmentTemplateSegmentsContainer3-this.$PredictedSegmentTemplateSegmentsContainer12.length-Number(this.$PredictedSegmentTemplateSegmentsContainer2))*Number(t.predictedAverageDuration))/this.$PredictedSegmentTemplateSegmentsContainer5}];var n=this.$PredictedSegmentTemplateSegmentsContainer11;return null==n?t:r("oz-player/utils/OzNumericalRangeUtil").diffSortedRanges(this.$PredictedSegmentTemplateSegmentsContainer7,t.map(function(e){return{rangeEnd:e.endTime,rangeStart:e.startTime}}),{rangeEnd:n.endTime,rangeStart:n.startTime}).map(function(e){return{endTime:null==e.rangeEnd?Infinity:e.rangeEnd,startTime:e.rangeStart}})}return e.prototype.getTimeRanges.call(this)},a.canPredict=function(){return!0},a.canApproximateId=function(){return null!=this.$PredictedSegmentTemplateSegmentsContainer13()},a.$PredictedSegmentTemplateSegmentsContainer16=function(e){var t=null;e*=this.$PredictedSegmentTemplateSegmentsContainer5;var a=this.$PredictedSegmentTemplateSegmentsContainer12.length>0?this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d:null,i=this.$PredictedSegmentTemplateSegmentsContainer7.getLegacyConfig().getNumber("pdash_future_edgelatency_gops",0);if(null!=a&&a<=e&&0!==i&&e<a+this.$PredictedSegmentTemplateSegmentsContainer9*i)return a=e-(this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].t+this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1].d),a=this.$PredictedSegmentTemplateSegmentsContainer9?0:Math.floor(a/this.$PredictedSegmentTemplateSegmentsContainer9),this.$PredictedSegmentTemplateSegmentsContainer14(0,0,this.$PredictedSegmentTemplateSegmentsContainer3+1+a)
;a=0;for(var o=0;this.$PredictedSegmentTemplateSegmentsContainer12.length-1-o>=0;o++){var l=this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1-o];if(0===l.r||n("oz-player/shims/ozvariant")(0,18769),r("oz-player/utils/OzNumericalHelper").lessThanOrEqual(l.t+l.d*(l.r+1),e,this.$PredictedSegmentTemplateSegmentsContainer6))break;t=l,a=o}return null===t||i>0&&e<t.t?null:this.$PredictedSegmentTemplateSegmentsContainer14(t.t/this.$PredictedSegmentTemplateSegmentsContainer5,(t.t+t.d)/this.$PredictedSegmentTemplateSegmentsContainer5,this.$PredictedSegmentTemplateSegmentsContainer3-a)},a.$PredictedSegmentTemplateSegmentsContainer15=function(e){var t=e*this.$PredictedSegmentTemplateSegmentsContainer5,n=this.getTimeRanges();return r("oz-player/utils/OzNumericalHelper").greaterThan(n[0].startTime,e)?null:r("oz-player/utils/OzNumericalHelper").lessThanOrEqual(this.$PredictedSegmentTemplateSegmentsContainer12[0].t,t)?this.$PredictedSegmentTemplateSegmentsContainer16(e):(n=Math.ceil((this.$PredictedSegmentTemplateSegmentsContainer12[0].t-t)/Number(this.$PredictedSegmentTemplateSegmentsContainer4)),t=Math.max(Number(this.$PredictedSegmentTemplateSegmentsContainer2),this.$PredictedSegmentTemplateSegmentsContainer3-this.$PredictedSegmentTemplateSegmentsContainer12.length+1-n),this.$PredictedSegmentTemplateSegmentsContainer14(e,e+Number(this.$PredictedSegmentTemplateSegmentsContainer4)/this.$PredictedSegmentTemplateSegmentsContainer5,t))},a.isEndingSegment=function(t){if(!this.$PredictedSegmentTemplateSegmentsContainer8)return!1;var n=t.getSequenceNumber();return null!=n?n>=this.$PredictedSegmentTemplateSegmentsContainer3:e.prototype.isEndingSegment.call(this,t)},a.getEndingSegment=function(){if(0===this.$PredictedSegmentTemplateSegmentsContainer12.length)return null;var e=this.$PredictedSegmentTemplateSegmentsContainer12[this.$PredictedSegmentTemplateSegmentsContainer12.length-1];return this.$PredictedSegmentTemplateSegmentsContainer14(e.t/this.$PredictedSegmentTemplateSegmentsContainer5,(e.t+e.d)/this.$PredictedSegmentTemplateSegmentsContainer5,this.$PredictedSegmentTemplateSegmentsContainer3)},a.getMaxGopSec=function(){return this.$PredictedSegmentTemplateSegmentsContainer9/this.$PredictedSegmentTemplateSegmentsContainer5},t}(n("oz-player/manifests/SegmentTemplateSegmentsContainer")),o["default"]=e},98),__d("oz-player/parsers/OzDefaultSegmentTimelineParser",["oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/utils/OzUrlHelper"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(){}return e.parseSegments=function(e,t){return e=[],t.SegmentTimeline[0].S&&(e=t.SegmentTimeline[0].S.map(function(e){return{t:Number.parseInt(e.$.t,10),d:Number.parseInt(e.$.d,10),r:Number.parseInt(e.$.r||"0",10),id:e.$.id?Number.parseInt(e.$.id,10):void 0}})),e},e.prototype.parseSegmentsContainer=function(t,a,i){return new(n("oz-player/manifests/SegmentTemplateSegmentsContainer"))(t,r("oz-player/utils/OzUrlHelper").joinUrlPaths(a.baseUrl,i.$.media),Number.parseInt(i.$.timescale,10),e.parseSegments(t,i),null,a.isStaticMpd)},e}(),o["default"]=e},98),__d("OzPredictedSegmentTimelineParser",["PredictedSegmentTemplateSegmentsContainer","oz-player/manifests/SegmentTemplateSegmentsContainer","oz-player/parsers/OzDefaultSegmentTimelineParser","oz-player/shims/OzURI","oz-player/utils/OzUrlHelper"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(){}return e.prototype.parseSegmentsContainer=function(e,t,a){var i,o,l,s;if(a.SegmentTimeline[0].$.FBPredictedMedia){i=r("oz-player/utils/OzUrlHelper").joinUrlPaths(t.baseUrl,a.SegmentTimeline[0].$.FBPredictedMedia);var u=new(n("oz-player/shims/OzURI"))(i);u.addQueryData("_nc_sc",1),i=u.toString()}return a.SegmentTimeline[0].$.FBPredictedMediaStartNumber&&(o=Number.parseInt(a.SegmentTimeline[0].$.FBPredictedMediaStartNumber,0)),a.SegmentTimeline[0].$.FBPredictedMediaEndNumber&&(l=Number.parseInt(a.SegmentTimeline[0].$.FBPredictedMediaEndNumber,0)),a.SegmentTimeline[0].$.FBAverageDuration&&(s=Number.parseInt(a.SegmentTimeline[0].$.FBAverageDuration,0)),u=n("oz-player/parsers/OzDefaultSegmentTimelineParser").parseSegments(e,a),(t.isTemplatedMpd&&null!=o&&null!=s||!t.isTemplatedMpd)&&null!=i&&null!=l?new(n("PredictedSegmentTemplateSegmentsContainer"))(e,r("oz-player/utils/OzUrlHelper").joinUrlPaths(t.baseUrl,a.$.media),t.mpdUrl,Number.parseInt(a.$.timescale,10),u,i,o,l,s,t.isStaticMpd):new(n("oz-player/manifests/SegmentTemplateSegmentsContainer"))(e,r("oz-player/utils/OzUrlHelper").joinUrlPaths(t.baseUrl,a.$.media),Number.parseInt(a.$.timescale,10),u,i,t.isStaticMpd)},e}(),o["default"]=e},98),__d("oz-player/shims/www/OzStreamsWWW",["cr:927622","cr:927623"],function(e,t,n,r,a,i,o){"use strict";n=Boolean(t("cr:927622")),r=Boolean(t("cr:927623")),a=t("cr:927622")?t("cr:927622").ReadableStream:e.ReadableStream,i=t("cr:927623")?t("cr:927623").WritableStream:e.WritableStream,o.OzReadableStream=a,o.OzReadableStreamIsPolyfilled=n,o.OzWritableStream=i,o.OzWritableStreamIsPolyfilled=r},98),__d("oz-player/shims/OzStreams",["oz-player/shims/www/OzStreamsWWW"],function(e,t,n,r,a,i,o){"use strict";o.OzReadableStream=r("oz-player/shims/www/OzStreamsWWW").OzReadableStream,o.OzReadableStreamIsPolyfilled=r("oz-player/shims/www/OzStreamsWWW").OzReadableStreamIsPolyfilled,o.OzWritableStream=r("oz-player/shims/www/OzStreamsWWW").OzWritableStream,o.OzWritableStreamIsPolyfilled=r("oz-player/shims/www/OzStreamsWWW").OzWritableStreamIsPolyfilled},98),__d("oz-player/networks/OzTransformStream",["oz-player/shims/OzEventEmitter","oz-player/shims/OzStreams","oz-player/utils/OzError"],function(e,t,n,r,a,i,o){"use strict";e=function(e){function t(t){var a;a=e.call(this)||this;var i,o,l=null!=(t=null==t?void 0:t.errorTransform)?t:function(e){return e};return a.writable=new(r("oz-player/shims/OzStreams").OzWritableStream)({start:function(e){o=e},write:function(e){a.emit("writableWrite",e);try{a.onDataWritten(e)}catch(e){i.error(new(n("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from write handler: "+a.constructor.name,extra:{code:"OZ_S-0",originalError:e}}))}i.enqueue(e)},close:function(){a.emit("writableClose");try{a.onClose()}catch(e){i.error(new(n("oz-player/utils/OzError"))({type:"OZ_STREAM",description:"Error from close handler: "+a.constructor.name,extra:{code:"OZ_S-1",originalError:e}}))}i.close()},abort:function(e){e=l(e),i.error(e)}}),a.readable=new(r("oz-player/shims/OzStreams").OzReadableStream)({start:function(e){i=e},cancel:function(e){a.emit("readableCancel",e),o.error(e)}}),a}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.onDataWritten=function(){},a.onClose=function(){},t}(n("oz-player/shims/OzEventEmitter")),o["default"]=e},98),__d("oz-player/shims/www/OzPerformanceWWW",["performance","performanceNow"],function(e,t,n,r,a,i,o){t={now:function(){return n("performanceNow")()},getEntriesByName:function(e,t){return"function"==typeof n("performance").getEntriesByName?n("performance").getEntriesByName(e,t):[]}},o["default"]=t},98),__d("oz-player/shims/OzPerformance",["oz-player/shims/www/OzPerformanceWWW"],function(e,t,n,r,a,i,o){o["default"]=n("oz-player/shims/www/OzPerformanceWWW")},98),__d("oz-player/utils/OzResourceTimingUtils",["oz-player/shims/OzPerformance"],function(e,t,n,r,a,i,o){"use strict";e=function(e){return(e=n("oz-player/shims/OzPerformance").getEntriesByName(e,"resource")).reduce(function(e,t){return null==e?t:t.responseEnd<e.responseEnd?e:t},null)},o.getLatestResourceTimingEntry=e},98),__d("OzVideoLiveTraceNetworkRequestStreamHandler",["oz-player/networks/OzTransformStream","oz-player/utils/OzResourceTimingUtils"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e,t){void 0===t&&(t=!1),this.$2=!1,this.$1=e,this.$2=t}var t=e.prototype;return t.onResponse=function(e,t){var a=this,i=e.headers,o=null;return this.$1?((e=new(n("oz-player/networks/OzTransformStream"))).addListener("writableClose",function(){var e={},n=r("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(t);n&&(e.lat=Math.round(n.responseStart-n.requestStart).toString()),a.$1&&i&&a.$1(i,o,e)}),this.$2&&e.addListener("writableWrite",function(e){null===o?o=[e]:o.push(e)}),e):null},t.onError=function(){return null},e}(),o["default"]=e},98),__d("TimeRanges",["invariant"],function(e,t,n,r,a,i,o,l){e=function(){function e(e){this.$1=[],this.$1=e}var t=e.prototype;return t.start=function(e){return this.$1[e]||l(0,2205),this.$1[e].startTime},t.end=function(e){return this.$1[e]||l(0,2205),this.$1[e].endTime},t.length=function(){return this.$1.length},e}(),o["default"]=e},98),__d("oz-player/drm/OzDrmUtils",[],function(e,t,n,r,a,i){"use strict";e=function(e){return Uint8Array.from(window.atob(e),function(e){return e.charCodeAt(0)})},t=function(e){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(e)))},i.base64ToUint8Array=e,i.arrayBufferToBase64=t},66),__d("OzWidevineDrmProvider",["ConstUriUtils","FBLogger","oz-player/drm/OzDrmUtils"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e,t,a,i,o){if(this.$2=[],this.$4=!0,this.$5=!1,null!=o&&""!==o&&(this.$1=r("oz-player/drm/OzDrmUtils").base64ToUint8Array(o)),null!=t&&null!=i){if(null==(t=null==(o=r("ConstUriUtils").getUri(t))?void 0:o.addQueryParam("access_token",i)))throw n("FBLogger")("comet_video_player").mustfixThrow("Invalid Graph API license uri for video: %s",e);this.$3=t.toString(),this.$5=!0,this.$4=!1}else if(null==(o=a[0])){if(o="/video/drm/getlicense",null==(t=null==(i=r("ConstUriUtils").getUri(o))?void 0:i.addQueryParam("video_id",e)))throw n("FBLogger")("comet_video_player").mustfixThrow("Invalid server license uri for video: %s",e);this.$3=t.toString()}else this.$3=o}var t=e.prototype;return t.getKeySystem=function(){return"com.widevine.alpha"},t.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"},t.getInitDatas=function(){return this.$2},t.setInitDatas=function(e){this.$2=e},t.getRequireDistinctiveIdentifier=function(){return"optional"},t.getRequirePersistentState=function(){return"optional"},t.getInitDataTypes=function(){},t.getDrmSessionTypes=function(){return["temporary"]},t.getAudioRobustness=function(){return""},t.getVideoRobustness=function(){return""},t.getServerCertificate=function(){return this.$1},t.getLicenseRequestInfo=function(e){var t={url:this.$3,method:"POST",body:"",headers:{},credentials:void 0};if(this.$4&&(t.credentials="include"),e=r("oz-player/drm/OzDrmUtils").arrayBufferToBase64(e),this.$5){var n={request:e};t.body=JSON.stringify(n),t.headers["Content-Type"]="application/json"}else t.body=e,t.headers["Content-Type"]="application/text";return t},t.parseLicenseResponse=function(e){var t,n;e=String.fromCharCode.apply(null,e);try{t=JSON.parse(e)}catch(e){t=void 0}if(void 0!==t&&void 0!==t.data&&1===t.data.length?null!=(t=t.data[0]).error||(n=t.license):n=e,null!=n&&""!==n)try{return r("oz-player/drm/OzDrmUtils").base64ToUint8Array(n)}catch(e){throw"InvalidCharacterError"===e.name?new Error("Endpoint returned error: "+n):e}return null},e}(),o["default"]=e},98),__d("OzDOMEventListenerImpl",["CometEventListener"],function(e,t,n,r,a,i,o){"use strict";t={listenDOMEvent:n("CometEventListener").listen,captureDOMEvent:n("CometEventListener").capture,suppressDOMEvent:n("CometEventListener").suppress},o["default"]=t},98),__d("oz-player/shims/www/OzDOMEventListenerWWW",["OzDOMEventListenerImpl"],function(e,t,n,r,a,i){"use strict";e=t("OzDOMEventListenerImpl"),i["default"]=e},66),__d("oz-player/shims/OzDOMEventListener",["oz-player/shims/www/OzDOMEventListenerWWW"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("oz-player/shims/www/OzDOMEventListenerWWW")},98),__d("oz-player/shims/www/OzSubscriptionsHandlerWWW",["SubscriptionsHandler"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("SubscriptionsHandler")},98),__d("oz-player/shims/OzSubscriptionsHandler",["oz-player/shims/www/OzSubscriptionsHandlerWWW"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("oz-player/shims/www/OzSubscriptionsHandlerWWW")},98),__d("oz-player/shims/www/ozThrottleWWW",["throttle"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("throttle")},98),__d("oz-player/shims/ozThrottle",["oz-player/shims/www/ozThrottleWWW"],function(e,t,n,r,a,i,o){"use strict";o["default"]=n("oz-player/shims/www/ozThrottleWWW")},98),__d("oz-player/strategies/OzBufferingDetectorStates",["oz-player/utils/OzBufferingUtils"],function(e,t,n,r,a,i,o){"use strict";var l=function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}return e.prototype.handleEvent=function(e,t,n){return"pause"===e.type||t.paused?new s(this.$1,this.$2):(e=this.$3 instanceof u?this.$1.getInPlayBufferOverflowTarget():this.$1.getStartBufferUnderflowTarget(),r("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(t,e,n)?new u(this.$1,this.$2):this)},e}(),s=function(){function e(e,t){this.$1=e,this.$2=t}return e.prototype.handleEvent=function(e,t,n){return"play"!==e.type&&"playing"!==e.type&&t.paused?this:r("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(t,this.$1.getStartBufferUnderflowTarget(),n)?new u(this.$1,this.$2):new l(this.$1,this.$2,this)},e}(),u=function(){function e(e,t){this.$1=e,this.$2=t,this.$3=t.getString("stream_types_eligible_for_partial_playback","").split(",")}var t=e.prototype;return t.handleEvent=function(e,t,n,a){return void 0===a&&(a=new Map),"pause"===e.type||t.paused?new s(this.$1,this.$2):r("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(t,this.$1.getInPlayBufferUnderflowTarget(),n)||this.$4(e,t.currentTime,a)?this:new l(this.$1,this.$2,this)},t.$4=function(e,t,n){return"waiting"!==e.type&&r("oz-player/utils/OzBufferingUtils").hasEnoughPartialBuffer(t,n,this.$3,this.$2.getNumber("partial_playback_buffer_overflow",0))},e}();o.OzVideoBufferingState=l,o.OzVideoPausedState=s,o.OzVideoPlayingState=u},98),__d("oz-player/strategies/OzBufferingStateThresholdManager",["oz-player/shims/OzPerformance","oz-player/utils/OzBufferingUtils"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e){this.$2=!1,this.$3=-Infinity,this.$4=-Infinity,this.$1=e}var t=e.prototype;return t.getInPlayBufferUnderflowTarget=function(){return this.$1.getNumber("in_play_buffer_underflow_target",r("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)},t.getInPlayBufferOverflowTarget=function(){return this.$5()?this.$1.getNumber("stream_interrupt_in_play_buffer_overflow_target",r("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):n("oz-player/shims/OzPerformance").now()-this.$4<this.$1.getNumber("recent_buffer_timeout_ms",0)?this.$1.getNumber("recent_buffer_in_play_buffer_overflow_target",r("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD):this.$1.getNumber("in_play_buffer_overflow_target",r("oz-player/utils/OzBufferingUtils").BUFFER_OVERFLOW_THRESHOLD)},t.getStartBufferUnderflowTarget=function(){return this.$1.getNumber("start_buffer_underflow_target",r("oz-player/utils/OzBufferingUtils").BUFFER_UNDERFLOW_THRESHOLD)},t.notifyBufferingEnd=function(){this.$4=n("oz-player/shims/OzPerformance").now()},t.notifyStreamInterrupted=function(){this.$2=!0},t.notifyStreamResumed=function(){this.$2=!1,this.$3=n("oz-player/shims/OzPerformance").now()},t.$5=function(){var e=this.$1.getNumber("stream_interrupt_buffer_target_timeout_ms",0);return 0!==e&&(this.$2||n("oz-player/shims/OzPerformance").now()-this.$3<e)},e}(),o["default"]=e},98),__d("oz-player/strategies/OzBufferingDetector",["oz-player/shims/OzDOMEventListener","oz-player/shims/OzEventEmitter","oz-player/shims/OzSubscriptionsHandler","oz-player/shims/ozThrottle","oz-player/strategies/OzBufferingDetectorStates","oz-player/strategies/OzBufferingStateThresholdManager","oz-player/utils/OzBufferingUtils"],function(e,t,n,r,a,i,o){"use strict";var l=150;e=function(e){function t(t,a,i){var o;return(o=e.call(this)||this).$OzBufferingDetector3=new(n("oz-player/shims/OzSubscriptionsHandler")),o.$OzBufferingDetector6=new Map,o.$OzBufferingDetector8=null,o.$OzBufferingDetector9=function(e){o.$OzBufferingDetector11(e)},o.$OzBufferingDetector2=t,o.$OzBufferingDetector4=a,o.$OzBufferingDetector5=i,o.$OzBufferingDetector7=new(n("oz-player/strategies/OzBufferingStateThresholdManager"))(a),o.$OzBufferingDetector2.paused?o.$OzBufferingDetector1=new(r("oz-player/strategies/OzBufferingDetectorStates").OzVideoPausedState)(o.$OzBufferingDetector7,o.$OzBufferingDetector4):o.$OzBufferingDetector1=r("oz-player/utils/OzBufferingUtils").hasEnoughBuffer(o.$OzBufferingDetector2,o.$OzBufferingDetector7.getInPlayBufferUnderflowTarget(),o.$OzBufferingDetector5())?new(r("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState)(o.$OzBufferingDetector7,o.$OzBufferingDetector4):new(r("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState)(o.$OzBufferingDetector7,o.$OzBufferingDetector4,null),o.$OzBufferingDetector3.addSubscriptions(n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"pause",o.$OzBufferingDetector9),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"play",o.$OzBufferingDetector9),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"progress",n("oz-player/shims/ozThrottle")(o.$OzBufferingDetector9,l)),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"timeupdate",n("oz-player/shims/ozThrottle")(o.$OzBufferingDetector9,l)),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"seeked",o.$OzBufferingDetector9),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"seeking",o.$OzBufferingDetector9),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"waiting",o.$OzBufferingDetector9)),o.$OzBufferingDetector3.addSubscriptions(n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"canplay",o.$OzBufferingDetector9),n("oz-player/shims/OzDOMEventListener").listenDOMEvent(o.$OzBufferingDetector2,"canplaythrough",o.$OzBufferingDetector9)),o}babelHelpers.inheritsLoose(t,e);var a=t.prototype;return a.$OzBufferingDetector10=function(){var e=this,t="unavailable",n=this.$OzBufferingDetector7.getInPlayBufferUnderflowTarget();return this.$OzBufferingDetector6.forEach(function(a,i){var o=e.$OzBufferingDetector2.currentTime;r("oz-player/utils/OzBufferingUtils").hasBuffer(o,n,a)||(t="unavailable"===t?i:"audio/video")}),t},a.setSourceBufferState=function(e,t){this.$OzBufferingDetector6.set(e,t)},a.$OzBufferingDetector11=function(e){var t=this.$OzBufferingDetector1.handleEvent(e,this.$OzBufferingDetector2,this.$OzBufferingDetector5(),this.$OzBufferingDetector6),n=this.$OzBufferingDetector1;this.$OzBufferingDetector1=t;var a=t instanceof r("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState,i=n instanceof r("oz-player/strategies/OzBufferingDetectorStates").OzVideoBufferingState;return t===n?(a&&this.$OzBufferingDetector8&&this.$OzBufferingDetector8.cloneContext().getOperationLogger("buffering_handle_event").setInitiator(e.type).log(),t):(a?(a=n instanceof r("oz-player/strategies/OzBufferingDetectorStates").OzVideoPlayingState?"in_play":"start/unpause",this.$OzBufferingDetector8&&this.$OzBufferingDetector8.cloneContext().getOperationLogger("enter_buffering").setState("buffering").setType(a).setReason(this.$OzBufferingDetector10()).setInitiator(e.type).log(),this.emit("enterBuffering",a)):i&&(this.$OzBufferingDetector8&&this.$OzBufferingDetector8.cloneContext().getOperationLogger("leave_buffering").setInitiator(e.type).log(),this.$OzBufferingDetector7.notifyBufferingEnd(),this.emit("leaveBuffering",{domEventPerfTimestamp:e.timeStamp})),t)},a.notifyStreamInterrupted=function(){this.$OzBufferingDetector7.notifyStreamInterrupted()},a.notifyStreamResumed=function(){this.$OzBufferingDetector7.notifyStreamResumed()},a.attachPerfLoggerProvider=function(e){this.$OzBufferingDetector8=e},a.destroy=function(){this.$OzBufferingDetector3.release()},t}(n("oz-player/shims/OzEventEmitter")),o["default"]=e},98),__d("VideoPlayerOzImplementationEnginePartsImplUtils",["OzSystemicRiskABRManager","OzWidevineDrmProvider","cr:72","gkx","justknobx","oz-player/networks/OzBandwidthEstimator","oz-player/strategies/OzBufferingDetector","qex"],function(e,t,n,r,a,i,o){"use strict";function l(){return null!=m&&""!==m?m:null}function e(e){return p.test(e.getDomain())}function t(e,t,r,a,i,o){if(null==i.current){var l=!0,s=function(){return!l&&!(!(i.current!==u)||!n("gkx")("1508440"))},u=new(n("oz-player/strategies/OzBufferingDetector"))(e,r,function(){var e=a.getCurrentState();return(e=e.controlledState).streamEnded?t.getDuration():Infinity});i.current=u,l=!1,e=function(e){if(!s()&&!n("gkx")("1235655")&&(a.dispatch({payload:{bufferingType:e},type:"buffering_begin_requested"}),(e=r.getNumber("ull_fallback_stall_count",0))>0)){var t=o.getLoggerState().stallCountTotal;r.getBool("fix_ull_fallback_stall_count",!1)&&(t=o.getLoggerState().inPlayStallCount200ms),"ultra-low"===a.getCurrentState().controlledState.latencyLevel&&t>e&&a.dispatch({payload:{latencyLevel:"low"},type:"implementation_set_latency_level_requested"})}};var d=function(e){s()||a.dispatch({payload:{domEventPerfTimestamp:e.domEventPerfTimestamp},type:"buffering_end_requested"})};u.addListener("enterBuffering",e),u.addListener("leaveBuffering",d)}}function r(e){var t=e.accessToken,r=e.graphQLVideoDRMInfo;e=e.videoFBID;var a=[];if(r&&null!=e){var i=n("justknobx")._("717")?null:r.widevineCert;a.push(new(n("OzWidevineDrmProvider"))(e,r.graphApiVideoLicenseUri,r.videoLicenseUriMap,t,null!=(e=i)?e:null))}return a}function a(e){var t=e.VideoPlayerShakaPerformanceLoggerClass,n=e.accessToken,r=e.disableLogging,a=e.getApproximateFBLSToPlayerDisplayLatency,i=e.getBandwidthEstimate,o=e.getPlayerDimensions,l=e.getPlayerFormat,s=e.playbackIsLiveStreaming,u=e.playerInstanceCount,d=e.playerInstanceKey,c=e.playerSuborigin,p=e.playerVersion,m=e.videoElement,_=e.videoFBID;return e=e.videoPlayerShakaPerformanceLoggerBuilder,!r&&(e||t&&t.shouldInitialize())?(n={accessToken:n,getApproximateFBLSToPlayerDisplayLatency:a,getBandwidthEstimate:i,getPlayerDimensions:o,getPlayerFormat:l,isLive:s,isServableViaFbms:!1,playerInstanceCount:u,playerOrigin:null,playerSuborigin:c,playerVersion:p,representationId:null,uniqueID:d,video:m,videoID:null!=(r=_)?r:""},null!=e?[e.build(n)]:t?[new t(n)]:[]):[]}function i(e,t){return t>0?t/1e3*-1:e.getNumber("live_initial_playback_position",0)}function s(e,t,n){return t>0&&n>0?(t+n)/1e3:e.getNumber("livehead_fall_behind_block_threshold",0)}function u(e,t){return t>0?t/2/1e3:e.getNumber("live_time_range_block_margin",0)}function d(){return function(e,t,r,a,i,o,l,s){return e.getLegacyConfig().getBool("use_systemic_risk_abr",!1)?new(n("OzSystemicRiskABRManager"))(e,t,r,a,i,o,l,s):null}}function c(e,t){var r=t.experimentationConfig,a=t.getCurrentVideoRepresentation,i=t.getOzCDNSignedQueryParams,o=t.isClientTriggeredTraceEnabled,s=t.playbackIsLiveStreaming,u=t.playbackSessionId;t=t.shouldRefresh403;var d,c=e.getQueryData();if(s){d={};var p=l(e);null!==p&&""!==p&&(d=babelHelpers["extends"]({},d,{os_param:p})),r.getBool("server_side_abr_send_client_estimates",!1)&&((p=n("oz-player/networks/OzBandwidthEstimator").getBandwidthDiagnostics(r))&&(d=babelHelpers["extends"]({},d,{_nc_bwe:String(p.bandwidthEstimate),_nc_bwe_std:String(p.bandwidthStandardDeviation),_nc_ttfb:String(p.timeToFirstByteMsEstimate),_nc_ttfb_std:String(p.timeToFirstByteMsStandardDeviation)})),(p=a())&&(d=babelHelpers["extends"]({},d,{_nc_abr_bitrate:String(p.getBandwidth()),_nc_abr_qlabel:p.getQualityLabel()}))),n("gkx")("2047")&&(d=babelHelpers["extends"]({},d,{_nc_wclk:"1",_nc_wclk_ms:"1"}))}if(s&&n("gkx")("1998922")&&(d=babelHelpers["extends"]({},d,{_nc_nc:"1"})),a=r.getNumber("live_video_chunk_duration",0),s&&a>0&&(d=babelHelpers["extends"]({},d,{chk_dur:a.toString(10)})),n("gkx")("1836350")&&null!=c.uss&&null!=c.odm&&(d=babelHelpers["extends"]({},d,{manual_redirect:"1"})),o&&(d=babelHelpers["extends"]({},d,{_nc_psid:u})),t&&null!=(p=i())&&(r=e.getDomain()+e.getPath(),null!=(s=p.get(r))))for(a in s)d=babelHelpers["extends"]({},d,((c={})[a]=s[a],c));return d}var p=/(livestream-)?lookaside\.(facebook|workplace)\.com$/,m=n("qex")._("1658");o.getOsParamValue=l,o.checkShouldIncludeCredentials=e,o.createOzBufferingDetector=t,o.createOzDrmProviders=r,o.createOzPerfLoggerProviders=a,o.calculateInitialPlaybackPositionForDynamicMpd=i,o.calculateLiveheadFallBehindBlockThreshold=s,o.calculateLiveheadFallBehindBlockMargin=u,o.getVideoAbrManagerFactory=d,o.getCustomRequestParametersForURI=c},98),__d("OzMinimumSmallestDimensionRestriction",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(e){this.$1=e}return e.prototype.applyRestriction=function(e,t){var n=this;return 0===e.length?[]:(t=e.filter(function(e){var t=e.getWidth();return(t=t<(e=e.getHeight())?t:e)>=n.$1})).length>0?t:[e[e.length-1]]},e}(),i["default"]=e},66),__d("OzMosThresholdRestriction",["MosUtils"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e){this.$3=new Map,this.$4=e,this.$1=e.getNumber("mos_upper_threshold",0),this.$2=e.getNumber("mos_lower_threshold",0)}var t=e.prototype;return t.$5=function(){return this.$4.getBool("cache_mos_threshold",!1)?{mosUpperThreshold:this.$1,mosLowerThreshold:this.$2}:{mosUpperThreshold:this.$4.getNumber("mos_upper_threshold",0),mosLowerThreshold:this.$4.getNumber("mos_lower_threshold",0)}},t.$6=function(e,t){var n=null;if(this.$3.get(e))n=this.$3.get(e);else{var a=e.getCustomField("playbackResolutionMos");null!=a&&((n=r("MosUtils").parsePlaybackMos(String(a)))&&this.$3.set(e,n))}return null!=n?r("MosUtils").getMosValue(n,r("MosUtils").getQualityLabel(t.width,t.height)):null},t.$7=function(e,t){var n=this,r=null,a=this.$5().mosUpperThreshold;return e.forEach(function(e){null!=(e=n.$6(e,t))&&e>a&&(null==r||r>e)&&(r=e)}),null==r?e:e.filter(function(e){return null==(e=n.$6(e,t))||(e<=a||e===r)})},t.$8=function(e,t){var n=this,r=[],a=this.$5().mosLowerThreshold;return e.forEach(function(e){var i=n.$6(e,t);null!=i&&i>a&&r.push(e)}),0===r.length&&r.push(e[e.length-1]),r},t.applyRestriction=function(e,t){if(0===e.length)return[];e=e;var n=this.$5(),r=n.mosLowerThreshold;return(n=n.mosUpperThreshold)>0&&(e=this.$7(e,t)),r>0&&(e=this.$8(e,t)),e},e}(),o["default"]=e},98),__d("getOzPlaybackRestrictions",["OzMinimumSmallestDimensionRestriction","OzMosThresholdRestriction","qex"],function(e,t,n,r,a,i,o){"use strict";function e(e,t){var r=[];switch(e){case"HD":r.push(new(n("OzMinimumSmallestDimensionRestriction"))(l))}e=t.getNumber("mos_upper_threshold",0);var a=t.getNumber("mos_lower_threshold",0);return(e>0||a>0)&&r.push(new(n("OzMosThresholdRestriction"))(t)),r}var l=null!=(t=n("qex")._("930"))?t:720;o["default"]=e},98),__d("oz-player/configs/OzPlayerConfigDefaults",[],function(e,t,n,r,a){e={append_once_per_stream_in_application_stream:!1,bandwidth_ignore_on_stream_write_samples:!1,bandwidth_use_response_time_adjustment:!1,catchup_use_timeline_range_end_time_as_end:!1,clear_on_seek:!0,debug_live_replay:!1,do_not_end_stream:!1,fix_dom_exception_as_message:!0,ignore_reset_after_seek_if_bufferahead:!1,latencymanager_stalled_edgelatency_sec_on:!1,live_audio_ibr:!0,mpd_parse_all_adaptation_sets:!0,ms_promise_for_null:!1,normalize_mpd_fetch_errors:!0,pdash_use_pdash_segmentlocator:!1,player_emit_mpdparsed_early:!1,playhead_manager_buffered_timerange_update_on_timeupdate:!0,playhead_manager_clamp_initial_playback_position:!1,reset_catchup_timeout_after_play_sec_on_overwrite:!0,retry_video_element_error:!0,sidx_parser_memory_optimization:!1,skip_videobuffer_gaps:!0,skip_videobuffer_gaps_on_buffer_updated:!0,stub_safari_source_buffer_abort:!1,use_live_latency_manager:!1,use_scf_timebased_segments:!1,use_strict_resolution_constraint:!0,vtt_caption_representation:!0},t={abr_confidence_threshold:.9,abr_eval_buffer_threshold:0,abr_min_bandwidth_samples:0,abr_prevent_down_switch_buffer_threshold:11,abr_restrict_from_index:0,abr_restrict_to_index:0,append_byte_target_without_range:1e5,appends_per_segment:6,auto_seek_playhead_slack:.5,bandwidth_boundary_standard_deviation_factor:1,bandwidth_estimator_half_life:6,bandwidth_estimator_outlier_exclusion_factor:50,bandwidth_estimator_std_dev_penalty_factor:0,bandwidth_header_expire_threshold:0,bandwidth_response_time_handicap:0,bandwidth_ttfb_samples_to_save:5,buffer_ahead_target:22,buffer_target_constraint_append_succeeded_reward:.2,buffer_target_constraint_minimum_sec:2,buffer_target_constraint_quota_exceeded_penalty:.3,byte_count_per_sample:2e5,catchup_timeout_after_buffering_sec:0,catchup_timeout_after_play_sec:0,clear_buffer_around_playhead_boundary_ms:5e3,clear_buffer_on_seek_epsilon_s:0,clear_buffer_on_seek_nudge_s:0,default_bandwidth_estimate:1e6,download_cursor_buffer_ahead_time_max_sec:0,download_cursor_total_buffer_max_sec:0,dvl_initial_segment_ignore_count:1,dvl_update_interval_ms:0,dynamic_mpd_initial_playback_position_offset_modifier:4,initial_manifest_request_retry_count:3,initial_switch_interval:0,in_play_buffer_overflow_target:1,in_play_buffer_underflow_target:.1,latencymanager_stalled_edgelatency_sec:0,live_audio_ibr_bandwidth_percentage:.05,live_numerical_error_epsilon:1e-4,loop_body_handle_error_interval_ms:1,low_buffer_bandwidth_target_increase_factor:0,low_buffer_bandwidth_target_threshold:10,low_segment_stream_playhead_threshold:0,manifest_initial_update_delay_ms:0,manifest_update_frequency_ms:0,max_bandwidth_sample_count:30,maximum_bandwidth_sample_bandwidth:1e8,max_start_eme_attempts:3,min_eval_interval:100,minimum_bandwidth_sample_duration:10,minimum_bytes_to_sample_on_close:25e3,min_switch_interval:100,mpd_updater_network_request_timeout_ms:2e4,ms_promise_for_null_ms:0,network_seg_timeout_ms:0,overwrite_livehead_fall_behind_block_threshold:0,overwrite_live_time_range_block_margin:0,partial_playback_buffer_overflow:.75,paused_stream_segments_count:2,pdash_download_cursor_between_catchups_seg:0,pdash_download_cursor_catchup_threshold_gop_multiplier:0,pdash_download_cursor_catchup_threshold_sec:0,pdash_download_cursor_catchup_tolerance_sec:0,per_stream_duration_target:0,pixels_above_viewport_to_observe:0,pixels_below_viewport_to_observe:0,playback_speed_enabled_delay_sec:4,playback_speed_latency_adjustment_rate:0,playback_speed_latency_slowdown_adjustment_rate:0,playback_speed_latency_speedup_adjustment_rate:0,playback_speed_min_buffer_sec:1,playback_speed_min_duration_sec:2,playback_speed_min_sharpness_factor:3,playback_speed_restore_min_duration_sec:1,playhead_manager_buffered_auto_seek_playhead_slack:.5,playhead_manager_buffered_is_near_gap_threshold:1.5,playhead_manager_buffered_numerical_error:.01,playhead_manager_timeupdate_throttle_ms:1e3,pre_start_buffer_ahead_target:16.924449682236,prioritize_by_viewport_static_penalty:0,recent_buffer_in_play_buffer_overflow_target:3,recent_buffer_timeout_ms:1e4,resolution_constraint_factor:2,seconds_to_stream:10,seconds_to_stream_near_bandwidth_boundary:10,seek_ahead_epsilon:.05,segments_to_stream:5,segments_to_stream_near_bandwidth_boundary:5,segments_to_stream_under_playhead_threshold:0,sidx_segment_retry_attempts:9999,sidx_segment_retry_interval_ms:100,skip_videobuffer_gaps_max_gap_size_sec:0,stale_mpd_buffer_ahead_target:0,start_buffer_underflow_target:.1,steadystate_minbuffer_buckets:0,steadystate_minbuffer_buckets_sec:1,steadystate_minbuffer_sec:0,stream_interrupt_buffer_target_timeout_ms:1e4,stream_interrupt_check_mpd_stale_count_threshold:6,stream_interrupt_in_play_buffer_overflow_target:1,timeline_offset_threshold:10,time_to_first_byte_estimate_half_life_ms:500,time_to_first_byte_ignore_above_threshold_ms:0},n={bandwidth_estimate_header_key:"",bandwidth_estimate_key:"",block_representation_status_codes_json:"[500]",block_representation_status_codes_temporarily_json:"{}",cdn_experiment_id:"",stream_types_eligible_for_partial_playback:""},a.exports={defaultBools:e,defaultNumbers:t,defaultStrings:n}},null),__d("oz-player/configs/OzPlayerConfig",["oz-player/configs/OzPlayerConfigDefaults"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e){void 0===e&&(e={}),this.$1=e}var t=e.prototype;return t.getBool=function(e){return"boolean"==typeof this.$1[e]?this.$1[e]:r("oz-player/configs/OzPlayerConfigDefaults").defaultBools[e]},t.getNumber=function(e){return"number"==typeof this.$1[e]?this.$1[e]:r("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[e]},t.getString=function(e){return"string"==typeof this.$1[e]?this.$1[e]:r("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[e]},t.getLegacyConfig=function(){var e=this;return{getBool:function(t,n){return"boolean"==typeof e.$1[t]?e.$1[t]:null!=(t=r("oz-player/configs/OzPlayerConfigDefaults").defaultBools[t])?t:n},
getNumber:function(t,n){return"number"==typeof e.$1[t]?e.$1[t]:null!=(t=r("oz-player/configs/OzPlayerConfigDefaults").defaultNumbers[t])?t:n},getString:function(t,n){return"string"==typeof e.$1[t]?e.$1[t]:null!=(t=r("oz-player/configs/OzPlayerConfigDefaults").defaultStrings[t])?t:n}}},e}(),o["default"]=e},98),__d("oz-player/configs/OzConfigUtils",["oz-player/configs/OzPlayerConfig"],function(e,t,n,r,a,i,o){"use strict";var l=new(n("oz-player/configs/OzPlayerConfig"));e=function(e){return{getBool:function(t){return e.getBool(t,l.getBool(t))},getNumber:function(t){return e.getNumber(t,l.getNumber(t))},getString:function(t){return e.getString(t,l.getString(t))},getLegacyConfig:function(){return e}}},o.provideConfigWithDefaults=e},98),__d("oz-player/networks/OzClientClock",["oz-player/shims/OzPerformance","oz-player/utils/OzResourceTimingUtils"],function(e,t,n,r,a,i,o){"use strict";function l(e){return null===e||(e=parseInt(e,10),isNaN(e))?null:e}e=function(){function e(){this.$1=null,this.$2=0,this.$2=Date.now()-n("oz-player/shims/OzPerformance").now()}var t=e.prototype;return t.updateOffsetFromHeaderResponse=function(e,t){var n=l(t.get("x-fb-dynamic-server-wallclock-ms"));t=l(t.get("x-fb-dynamic-rtt-ms")),e=r("oz-player/utils/OzResourceTimingUtils").getLatestResourceTimingEntry(e),null!==n&&null!==t&&null!=e&&e.responseStart>0&&e.duration>10&&(n=n-(e=e.requestStart+this.$2)-t/2,this.$1=n)},t.now=function(){var e;return n("oz-player/shims/OzPerformance").now()+this.$2+(null!=(e=this.$1)?e:0)},t.getClientClockOffsetMs=function(){return this.$1},e}(),t=new e,o["default"]=t},98),__d("oz-player/networks/OzClockSyncNetworkRequestStreamHandler",["oz-player/networks/OzClientClock","oz-player/networks/OzTransformStream"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(){}var t=e.prototype;return t.onResponse=function(e,t){var r=e.headers;return r?((e=new(n("oz-player/networks/OzTransformStream"))).addListener("writableClose",function(){n("oz-player/networks/OzClientClock").updateOffsetFromHeaderResponse(t,r)}),e):null},t.onError=function(){return null},e}(),o["default"]=e},98),__d("VideoPlayerOzImplementationEnginePartsImplFunction",["CometThrottle","ConstUriUtils","Deferred","FBLogger","NetworkStatus","OzActiveActiveFailoverNetworkRequestStreamHandler","OzBufferVTTCaptionsVisibleStrategy","OzCDNSignedQueryParams","OzCustomParsers","OzCustomRepresentationParsers","OzOneSemanticHandler","OzOneSemanticHandlerUtils","OzPredictedSegmentTimelineParser","OzVideoLiveTraceNetworkRequestStreamHandler","Promise","QE2Logger","TimeRanges","VideoPlayerConnectionQuality","VideoPlayerEmsg","VideoPlayerImplementationErrors","VideoPlayerOzImplementationEnginePartsImplUtils","clearTimeout","cr:1836099","cr:1871597","cr:1947728","cr:1993377","getErrorSafe","getOzPlaybackRestrictions","gkx","md5","oz-player/configs/OzConfigUtils","oz-player/networks/OzBandwidthEstimator","oz-player/networks/OzClockSyncNetworkRequestStreamHandler","qex","setTimeout","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(e){function a(){n("clearTimeout")(ue);var e=h.current,t=I.current;if(null!=e){h.current=null,I.current=null,C.current=null;try{e&&e.closeHiveSession(),t&&t.logEndSession()}catch(e){t&&t.logHiveError(e)}}}var i,o=e.OzPlayerClass,d=e.callChain,c=e.destroyOzPlayerPartsRef,p=e.engineDebugAPI,m=e.engineExtrasAPI,_=e.getCaptionsInfo,g=e.getLatencyLevelManager,f=e.getVideoLiveTrace,y=e.handleCaptionsInfoChange,v=e.handleFatalImplementationError,h=e.hivePluginRef,P=e.initialProps,b=e.logger,S=e.machine,C=e.overrideOzRequestImplementationRef,w=e.ozBufferingDetectorRef,E=e.ozPlayerRef,I=e.p2pSessionLoggerRef,V=e.playerVersion,D=e.resolvedVideoInfo,k=e.videoElement,x={current:!1},T={current:null},R={current:null};c.current=function(e){var t=w.current;if(t&&(w.current=null,t.destroy()),t=E.current){p&&p.handleOzPlayerChanged(null),E.current=null;try{t.destroy([].concat(e,["destroyOzPlayerParts"]).join(":"))}catch(e){n("FBLogger")("comet_video_player").catching(e).mustfix("Error in ozPlayer.destroy: %s",String(e))}}(t=T.current)&&(T.current=null,t()),R.current&&(R.current=null),a(),h.current&&(h.current=null),I.current&&(I.current=null),C.current&&(C.current=null)},e=D.accessToken,c=D.audioOnly;var O=D.experimentationConfig,z=D.graphQLVideoDRMInfo,F=D.graphQLVideoP2PSettings,$=D.manifestUrl,L=D.manifestXmlStringResolved,M=D.minQualityPreference,A=D.ozPrefetchCache,B=D.videoFBID,U=P.disableLogging?null:D.VideoPlayerShakaPerformanceLoggerClass,N=Boolean(P.loggingMetaData.coreVideoPlayerMetaData.isLiveStreaming),H=Boolean(null!=(i=P.isClientTriggeredTraceEnabled)&&i),q=function(){return m.getEstimatedBandwidth()};i=function(){return m.getApproximateFBLSToPlayerDisplayLatency()};var W=function(){O.setContext("connection_quality",r("VideoPlayerConnectionQuality").evaluate(function(){return q(N)}))},Q=function(){var e=O.getNumber("connection_quality_context_throttle_frequency",0);if(0===e)return null;var t=n("CometThrottle")(W,e),r=n("oz-player/networks/OzBandwidthEstimator").addListener("bandwidth_sampled",t);return function(){r.remove(),t.cancel()}};T.current=Q(),Q=r("VideoPlayerOzImplementationEnginePartsImplUtils").createOzDrmProviders({accessToken:e,graphQLVideoDRMInfo:z,videoFBID:B}),z=function(){return S.getCurrentState().controlledState.captionsVisible};var j=[];O.getBool("use_vtt_captions_visible_buffer_strategy",!0)&&j.push(new(n("OzBufferVTTCaptionsVisibleStrategy"))(z)),z=function(){return S.getCurrentState().controlledState.dimensions};var G=function(){return S.getCurrentState().controlledState.playerFormat};if(e=r("VideoPlayerOzImplementationEnginePartsImplUtils").createOzPerfLoggerProviders({VideoPlayerShakaPerformanceLoggerClass:U,accessToken:e,disableLogging:P.disableLogging,getApproximateFBLSToPlayerDisplayLatency:i,getBandwidthEstimate:q,getPlayerDimensions:z,getPlayerFormat:G,playbackIsLiveStreaming:N,playerInstanceCount:P.loggingMetaData.playerImplementationInstanceCountRef.current,playerInstanceKey:P.loggingMetaData.instanceKey,playerSuborigin:P.loggingMetaData.coreVideoPlayerMetaData.subOrigin,playerVersion:V,videoElement:k,videoFBID:B,videoPlayerShakaPerformanceLoggerBuilder:D.videoPlayerShakaPerformanceLoggerBuilder}),null==R.current&&(R.current=new(n("OzCDNSignedQueryParams"))),F&&null!=B){i=F.community_info,G=F.config,V=F.hive_initialization_options,D=I.current=null!=(D=I.current)?D:t("cr:1871597")?new(t("cr:1871597"))(B,i):null;try{if(!h.current){D&&D.logEnableP2P();var J=function(e){var t=E.current;t&&t.injectExternalDebugEvent("P2PTech",e.tech),I.current&&I.current.logSessionActive(e.tech)},K=function(e){var t=E.current;t&&t.injectExternalDebugEvent("P2PStats",e),I.current&&I.current.setCurrentHiveStats(e)},X=function(e){e=e.state;var t=S.getCurrentState();t=(t=t.controlledState).playbackState,h.current&&"CLOSED"===e&&(a(),(e=E.current)&&"ended"!==t&&(x.current&&null!=$?e.updatePlayerRunTimeConfig({manifestUrl:$}):e.load($)))};if(K={HiveJava:{},HiveJS:{maximumTrimming:{dash:void 0,hls:void 0},renderStatsCallback:K},debugLevel:"off",hiveTechOrder:["HiveJS","StatsJS","HiveJava"],onActiveSession:J,onError:i=function(e){I.current&&I.current.logHiveError(e)},onSessionStateChange:X,telemetryId:D?D.getSessionID():0},(J=O.getNumber("hive_maximum_trimming_seconds",0))>0&&(K.HiveJS.maximumTrimming={dash:J,hls:J}),V&&(i=V.HiveJava,X=V.debugLevel,J=V.hiveTechOrder,K.hiveTechOrder=J.slice(),K.HiveJava=i?{minVersion:i.minVersion}:{},K.debugLevel=null!=(V=X)?V:K.debugLevel),n("gkx")("2047688")&&(K=babelHelpers["extends"]({},K,{testId:"fb_video_player_p2p_jest_e2e"})),!0===G.disable_hivejava_for_livevc&&null!=$&&$.startsWith("https://livestream-lookaside")&&(J=K.hiveTechOrder.indexOf("HiveJava"))>=0&&K.hiveTechOrder.splice(J,1),!s)throw n("unrecoverableViolation")("HiveConfig does not exist","comet_video_player");if(s.SensitiveInfo.restrictedConnectivityInfo=!0,!u)throw n("unrecoverableViolation")("HiveOz does not exist","comet_video_player");if(h.current=new u(K),h.current){if(!t("cr:1947728"))throw n("unrecoverableViolation")("OzConfigurableRequestImplementation does not exist","comet_video_player");C.current=t("cr:1947728")(h.current.getRequestImplementation(),{inferResponseStatusIsOK:n("gkx")("3951"),inferResponseStatusIsOk2xx:n("gkx")("277")})}}}catch(e){D&&D.logError(e),a()}}i=[new(n("OzVideoLiveTraceNetworkRequestStreamHandler"))(function(e,t,n){var r=f();null!=r&&r.handleHeadersAndBody(e,t,n)},O.getBool("live_trace_parse_emsg",!1)),new(n("oz-player/networks/OzClockSyncNetworkRequestStreamHandler"))],n("OzActiveActiveFailoverNetworkRequestStreamHandler")&&i.push(new(n("OzActiveActiveFailoverNetworkRequestStreamHandler"))(function(e,t){if(n("gkx")("1664503")){var i=E.current,o=e.headers;i&&o&&(o=parseInt(o.get("x-fb-video-replica"),10),b.logVPLEvent({eventType:"replica_switch",logDataOverrides:{error_code:e.status.toString(),error_user_info:JSON.stringify({failover_response_code:e.status.toString(),replica:o,url:t})},state:S.getCurrentState()}),null!=(e=i.getMpdUrl())&&(t=r("ConstUriUtils").getUri(e))&&(e=t.addQueryParam("replica",o))&&(a(),i.updatePlayerRunTimeConfig({manifestUrl:e.toString(),resetStreamAnchor:!0})))}}));var Z=P.expiredVideoUrlRefreshHandler,Y=P.loggingMetaData.instanceKey;X=n("gkx")("221"),V=n("gkx")("1836350")||n("gkx")("1993562");var ee=N?X:V;O.getBool("log_exposure_on_oz_initialization",!1)&&r("QE2Logger").logExposureForUser("www_videos_html5_mpeg_dash");var te=new o(G={audioOnly:null!=(G=c)&&G,bufferEndLimit:null!=P.bufferEndLimit?P.bufferEndLimit:null,bufferingDetector:null!=(J=w.current)?J:void 0,config:r("oz-player/configs/OzConfigUtils").provideConfigWithDefaults(O),configureCustomRequestParametersForSegment:function(e){var t=null;if(N&&H){var r=e.getByteRange();r=r?r.startByte+", "+(null!=r.endByte?r.endByte:"null"):"null",e=n("md5")(e.getURI().toString()+r),t=null!=(r=t)?r:{},null!=e&&(t=babelHelpers["extends"]({},t,{_nc_tsid:e})),t=babelHelpers["extends"]({},t,{_nc_e2e:"live"})}return t},customParsers:r("OzCustomParsers").createOzCustomParser(),customRepresentationParsers:r("OzCustomRepresentationParsers").createOzCustomRepresentationParsers({ozConfig:O}),customSegmentTimelineParser:O.getBool("enable_predictive_dash",!1)?new(n("OzPredictedSegmentTimelineParser")):void 0,customVTTBufferTargetStrategies:j,debugCreateInitiator:[].concat(d,["proceedWithOzPlayerCreation"]).join(":"),drmProviders:Q,getCustomRequestParametersForURI:function(e){return r("VideoPlayerOzImplementationEnginePartsImplUtils").getCustomRequestParametersForURI(e,{experimentationConfig:O,getCurrentVideoRepresentation:function(){var e=E.current;return null==e?void 0:e.getCurrentVideoRepresentation()},getOzCDNSignedQueryParams:function(){return R.current},isClientTriggeredTraceEnabled:H,playbackIsLiveStreaming:N,playbackSessionId:Y,shouldRefresh403:ee})},getOverrideOzRequestImplementation:function(){return C.current},getShouldIncludeCredentials:O.getBool("use_oz_credentials_provider",!1)?r("VideoPlayerOzImplementationEnginePartsImplUtils").checkShouldIncludeCredentials:null,getVideoDimensions:z,initialPlaybackPositionForDynamicMpd:r("VideoPlayerOzImplementationEnginePartsImplUtils").calculateInitialPlaybackPositionForDynamicMpd(O,null!=(K=P.initialDesiredLatencyMs)?K:0),initialRepresentationIDs:null!=(D=P.initialRepresentationIds)?D:[],isClientTriggeredTraceEnabled:H,liveheadFallBehindBlockMargin:r("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockMargin(O,null!=(X=P.initialDesiredLatencyMs)?X:0),liveheadFallBehindBlockThreshold:r("VideoPlayerOzImplementationEnginePartsImplUtils").calculateLiveheadFallBehindBlockThreshold(O,null!=(V=P.initialDesiredLatencyMs)?V:0,null!=(c=P.initialLatencyToleranceMs)?c:0),loggerConfig:{isOzDevConsoleEnabled:n("gkx")("722076"),observedOperationLoggers:[],perfLoggerProviders:e},mpdUrl:$,networkRequestStreamHandlers:i,networkRequestStreamRetryHandler:ee?function(e,r,a){var i=e.headers,o=null==i?void 0:i.get("x-fb-url-refresh"),l=R.current;if(403===e.status&&null!=l){b.logVPLEvent({eventType:"video_cdn_url_expired",logDataOverrides:{error_user_info:JSON.stringify({expired_url:a})},state:S.getCurrentState()});var s=null!=o&&null!=t("cr:1993377")?{name:"refreshShortExpiryVideoUrl",promise:t("cr:1993377")(o)}:null!=Z?{name:"expiredVideoUrlRefreshHandler",promise:Z(a)}:null;if(null!=s)return s.promise.then(function(e){var t;if(t=null!=(t=e.refreshedUrl)?t:null,e=null!=(e=e.reason)?e:null,null==t||n("gkx")("5837")&&""===t)throw n("unrecoverableViolation")(s.name+" refreshedUrl is "+(""===t?"an empty string":"null")+", reason: "+(null!=(t=e)?t:"null"),"comet_video_player");return b.logVPLEvent({eventType:"video_cdn_url_refreshed",logDataOverrides:{error_user_info:JSON.stringify({refresh_handler:s.name,refreshed_url:t})},state:S.getCurrentState()}),l.update(t),r(t)})["catch"](function(e){throw e=n("gkx")("5837")?n("getErrorSafe")(e):e,b.logVPLEvent({eventType:"video_cdn_url_refresh_error",logDataOverrides:{error_description:e.message,error_user_info:JSON.stringify({expired_url:a,refresh_handler:s.name,refresh_url:o})},state:S.getCurrentState()}),e})}return t("Promise").resolve(e)}:null,prefetchCache:O.getBool("use_prefetch_cache",!1)?A:null,rawMpdXml:h.current?void 0:L,seekHandler:n("gkx")("1482680")?function(e){var t=k.currentTime;S.dispatch({payload:{seekSourcePosition:t},type:"implementation_seek_requested"}),k.currentTime=e}:null,setCustomFetchStreamLoggingAttributes:function(e,t,a){e.setIsOnline(n("NetworkStatus").isOnline());var i=null==a?void 0:a.headers;if(i)try{e.setProxyStatusHeader(i.get("proxy-status")),e.setDynamicStatusHeader(i.get("x-fb-dynamic-status"))}catch(e){}r("OzOneSemanticHandlerUtils").setOneSemanticFetchStreamLoggingAttributes(e,t,a)},startTimeStamp:O.getBool("fix_start_timestamp",!1)?P.startTimestamp:0,videoAbrManagerFactory:r("VideoPlayerOzImplementationEnginePartsImplUtils").getVideoAbrManagerFactory(),videoNode:k,videoPlaybackRestrictions:n("getOzPlaybackRestrictions")(M,O)});E.current=te,w.current&&w.current.attachPerfLoggerProvider(te.getPerfLoggerProvider()),(J=P.loggingMetaData.playerImplementationInstanceCountRef).current++,te.onError(function(e){U&&U.flushQueuedLogs(),v(e,"oz_player_error")}),te.addListener("switchVideoRepresentation",function(){S.dispatch({payload:{targetVideoQuality:m.getCurrentTargetVideoQuality()},type:"representation_changed"})});var ne=function(e){O.getBool("enable_error_recovery_attempt_logging",!1)&&(e=r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError(e,"oz_player_stream_error_retry"),S.dispatch({payload:{recoverableError:e},type:"error_recovery_attempt"}))};te.addListener("manifestFetchError",function(e){r("OzOneSemanticHandler").handleManifestFetchErrorEvent(O,e)}),te.addListener("manifestFetchErrorRetry",function(e){ne(e)}),te.addListener("streamError",function(e){return r("OzOneSemanticHandler").handleStreamErrorEvent(O,e)}),te.addListener("streamErrorRetry",function(e){var t;("application"!==(null==(t=e.getExtra())?void 0:t.mimeType)||O.getBool("enable_era_logging_for_application_stream",!0))&&ne(e)}),te.addListener("streamInterruptAt",function(){S.dispatch({type:"stream_interrupted"})}),te.addListener("streamResumedAt",function(){S.dispatch({type:"stream_resumed"})}),te.addListener("streamGoneBeforeStart",function(){a(),S.dispatch({type:"stream_gone_before_start"})}),te.addListener("streamEnd",function(){a(),S.dispatch({type:"stream_ended"})}),te.addListener("videoNodeErrorRetry",function(e){O.getBool("enable_error_recovery_attempt_logging",!1)&&(e=r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromVideoNodeError(e,"oz_player_stream_error_retry"),S.dispatch({payload:{recoverableError:e},type:"error_recovery_attempt"}))}),te.addListener("enterBuffering",function(e){n("gkx")("1235655")||S.dispatch({payload:{bufferingType:e},type:"buffering_begin_requested"})}),te.addListener("leaveBuffering",function(e){S.dispatch({payload:{domEventPerfTimestamp:e.domEventPerfTimestamp},type:"buffering_end_requested"})}),p&&p.handleOzPlayerChanged(te);var re=function(){var e=_();e={inbandCaptionsAutogeneratedFromManifest:m.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:m.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:null==e?void 0:e.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:m.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:null==e?void 0:e.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:null==e?void 0:e.sideLoadCaptionsUrlFromProps};var t=S.getCurrentState();t=t.controlledState,(e.inbandCaptionsExpectedFromManifest!==t.captionsLoaded||e.inbandCaptionsAutogeneratedFromManifest!==t.inbandCaptionsAutogenerated)&&y(e)},ae=function(e,t){e="number"==typeof(e=e.getCustomField("timescale"))?e:0,S.dispatch({payload:{timescale:e,videoBytes:t},type:"cea608_bytes_received"})},ie=function(){var e=m.getVideoRepresentations();if(null!=e&&e.length>0&&null!=(e=e[0].getTimeRanges())&&e.length>0){var t=e[0].startTime;e=Math.max(e[e.length-1].endTime-O.getNumber("live_rewind_seek_to_live_delta",8),t),S.dispatch({payload:{seekableRanges:new(n("TimeRanges"))([{endTime:e,startTime:t}])},type:"seekable_ranges_changed"})}},oe=function(){var e=te.getMpd();if(e){e=e.getCustomField("loapStreamType");var t=f();"number"==typeof e&&null!=t&&t.setStreamType(e)}},le=function(e){return!(null==e||!(e=r("ConstUriUtils").getUri(e)))&&"1"===(e=e.getQueryParam("lvp"))},se=function(e){var t=function(){ie(),re(),oe()};e.addListener("updated",t),n("gkx")("1656434")&&t(),te.updatePlayerRunTimeConfig({audioStreamDataHandler:function(e,t){var n=S.getCurrentState();n.controlledState.emsgObserverTokens.size>0&&(n=function(e){b.logVPLEvent({eventType:"imf",logDataOverrides:e,state:S.getCurrentState()})},(t=r("VideoPlayerEmsg").parseEmsgBoxesFromMP4Segment(t,B,e.getID(),k.currentTime,n)).length>0&&S.dispatch({payload:{emsgBoxes:t},type:"emsg_boxes_parsed"}))},videoStreamDataHandler:ae}),m.isPredictiveDash()&&(O.setContext("streaming_implementation","pdash"),(e=g())&&e.maybeUpdateLatencyLevel()),t=_(),y({inbandCaptionsAutogeneratedFromManifest:m.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:m.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:null==t?void 0:t.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:m.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:null==t?void 0:t.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:null==t?void 0:t.sideLoadCaptionsUrlFromProps})};te.addListener("vttCaptionsUpdated",function(e,t){var n="webvtt";n!==S.getCurrentState().controlledState.captionFormat&&S.dispatch({payload:{captionFormat:n},type:"controller_set_caption_format_requested"}),S.dispatch({payload:{activeCaptions:e,captionsLocale:t},type:"controller_set_active_captions_requested"})}),te.addListener("mpdParsed",function(){m.isPredictiveDash()&&O.setContext("streaming_implementation","pdash")}),te.addListener("mpdReady",function(e){x.current=!0,se(e),S.dispatch({payload:{availableQualities:m.getAvailableVideoQualities(),selectedVideoQuality:m.getUserSelectedVideoQuality(),targetVideoQuality:m.getCurrentTargetVideoQuality(),videoProjection:null!=(e=m.getVideoProjectionType())?e:null},type:"implementation_engine_initialized"})}),te.addListener("representationBlocked",function(e){S.dispatch({payload:{availableQualities:m.getAvailableVideoQualities(),blockedRepresentationID:e},type:"implementation_engine_representation_blocked"})});var ue=null;if(j=h.current,d=null==F?void 0:F.ticket,null!=$&&F&&j&&null!=d){(Q=te.getPerfLoggerProvider())&&Q.setIsP2pPlayback(!0),z=$.substring($.indexOf("?")),K=j.initSession(d+z,te,k);var de=new(n("Deferred"));l>0&&(ue=n("setTimeout")(function(){de.reject(new Error("Hive initialization timed out after "+l+"ms"))},l)),K.then(function(e){de.resolve(e)})["catch"](function(e){de.reject(e)}),de.getPromise().then(function(e){n("clearTimeout")(ue);var t=e.manifest;e=e.tech;var r=I.current;t!==$&&r&&r.logManifestMismatch(t,$),r&&r.logSessionInit(e,t),b.setAdditionalLogData("is_p2p_playback",!0),b.setAdditionalLogData("is_live_preview",le(t)),te.load(t)})["catch"](function(e){n("clearTimeout")(ue);var t=I.current;t&&t.logError(e),a(),b.setAdditionalLogData("is_live_preview",le($)),te.load($)})}else b.setAdditionalLogData("is_p2p_playback",!1),b.setAdditionalLogData("is_live_preview",le($)),te.load($)}var l=null!=(a=n("qex")._("592"))?a:1e4,s=null,u=null;t("cr:1836099")&&(s=t("cr:1836099").getHiveConfig(),u=t("cr:1836099").HiveOz),o.proceedWithOzPlayerCreation=e},98),__d("LatencySensitiveType",["$InternalEnum"],function(e,t,n,r,a,i){n=t("$InternalEnum")({NORMAL:0,LOW:1,ULTRA_LOW:2}),i["default"]=n},66),__d("VideoPlayerOzImplementationLatencyLevelManager",["qex"],function(e,t,n,r,a,i,o){"use strict";e=function(){function e(e,t,n){this.$2="normal",this.$4=null,this.$1=e,this.$3=t,this.$6=n}var t=e.prototype;return t.updatePlayerFormat=function(e){this.$4!==e&&(this.$4=e,this.maybeUpdateLatencyLevel())},t.updateBroadcastLatencySensitivity=function(e){this.$5!==e&&(this.$5=e,this.maybeUpdateLatencyLevel())},t.maybeUpdateLatencyLevel=function(){var e;(e=this.$1.getBool("ull_use_broadcast_sensitivity_type",!1)?this.$7(this.$5):this.$8())!==this.$2&&(this.$2=e,this.$1.getBool("set_latency_context_immediately",!1)&&this.$1.setContext("latency_level",e),this.$3.dispatch({payload:{latencyLevel:e},type:"implementation_set_latency_level_requested"}))},t.$8=function(){var e=[];try{e=JSON.parse(this.$1.getString("player_formats_for_low_latency","[]"))}catch(e){}return e.includes("*")||e.includes(this.$4)?"low":"normal"},t.$9=function(){var e,t=this.$1.getNumber("ultra_low_latency_bandwidth_threshold",0),r=this.$6.getEstimatedBandwidth();return!(e=null!=(e=n("qex")._("84"))&&e)&&null!==r&&t>0&&r<t},t.$7=function(e){if(null==e)return"normal";switch(e){case 1:return"low";case 2:return this.$9()?this.$1.getBool("fall_back_to_low_latency_in_ull",!1)?"low":"normal":"ultra-low";case 0:return"normal"}},e}(),o["default"]=e},98),__d("VideoPlayerOzImplementationEngine",["CometDASHPrefetchCacheManager","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerImplementationLoadSequenceManager","VideoPlayerODS","VideoPlayerOzImplementationEngineExtrasAPI","VideoPlayerOzImplementationEnginePartsImplFunction","VideoPlayerOzImplementationEnginePartsImplUtils","VideoPlayerOzImplementationLatencyLevelManager","cr:1473549","cr:1494460","cr:1534629","cr:72","emptyFunction","gkx","promiseDone","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function e(e){function a(){var e;return null!=(e=C.current)?e:null}function i(){var e;return null!=(e=S.current)?e:null}function o(){var e;return null!=(e=null==(e=v.current)?void 0:e.experimentationConfig)?e:null}function s(){var e;return null!=(e=J.current)?e:null}function u(){var e;return null!=(e=k.current)?e:null}function d(e){var t=D.current;null!=t&&(D.current=null,t(e)),null!=V.current&&(V.current(),V.current=null)}function c(){}function p(){P.current=null,b.current=null}var m=e.debugLogId,_=e.handleFatalError,g=e.initialProps;e=e.setExposedStateInReact;var f,y={current:null},v={current:null},h={current:null},P={current:null},b={current:null},S={current:null},C={current:null},w={current:null},E={current:null},I={current:null},V={current:null},D={current:null},k={current:null};t("cr:1473549")&&(f=new(t("cr:1473549")));var x="comet_oz",T=function(e,t){return null!==t.manifestXmlStringInitial?e.manifestXmlStringInitial!==t.manifestXmlStringInitial:e.manifestUrl!==t.manifestUrl},R=function(e,t){return e.videoFBID!==t.videoFBID},O=function(e,t){return e.playerFormat!==t.playerFormat},z=function(e){return e.getBool("use_full_player_if_cached",!1)&&t("cr:1534629")?t("cr:1534629")().getModuleIfRequireable():null},F=function(e,t,n){v.current=null!=t?babelHelpers["extends"]({},e,{manifestXmlStringResolved:t}):e,G.dispatch({type:"implementation_engine_oz_manifest_downloading"}),b.current=z(e.experimentationConfig),A(b.current,[].concat(n,["proceedWithOzManifestDownloading"]))},$=function(e){var t,a,i=e.manifestUrl,o=e.manifest,l=null;if(n("CometDASHPrefetchCacheManager")&&null!=e.videoFBID&&(l=n("CometDASHPrefetchCacheManager").get(e.videoFBID)),t={VideoPlayerShakaPerformanceLoggerClass:e.VideoPlayerShakaPerformanceLoggerClass,accessToken:e.loggingMetaData.accessToken,audioOnly:e.audioOnly,experimentationConfig:e.experimentationConfig,graphQLVideoDRMInfo:e.graphQLVideoDRMInfo,graphQLVideoP2PSettings:e.graphQLVideoP2PSettings,manifestUrl:null!=(t=i)?t:null,manifestXmlStringInitial:null!=(t=o)?t:null,minQualityPreference:e.minQualityPreference,ozPrefetchCache:l,playerFormat:e.loggingMetaData.coreVideoPlayerMetaData.playerFormat,videoFBID:e.videoFBID,videoPlayerShakaPerformanceLoggerBuilder:e.videoPlayerShakaPerformanceLoggerBuilder},l=y.current,null==k.current&&(k.current=new(n("VideoPlayerOzImplementationLatencyLevelManager"))(e.experimentationConfig,G,U)),null!=t.playerFormat&&(null==l||O(t,l))&&G.dispatch({payload:{playerFormat:t.playerFormat},type:"controller_set_player_format"}),k.current.updatePlayerFormat(null!=(a=e.loggingMetaData.coreVideoPlayerMetaData.playerFormat)?a:null),null==(a=k.current)||a.updateBroadcastLatencySensitivity(e.broadcastLatencySensitivity),a=!1,null==l)a=!0;else if(null!=l&&!R(t,l)&&T(t,l))e=14,r("VideoPlayerODS").bumpEntityKey("OzImplementation","manifest_reloaded",e),a=!1;else if(null!=l&&R(t,l))throw n("unrecoverableViolation")("videoFBID changed after player initialization","comet_video_player");if(!a)return!1;if(i=t.manifestUrl,null==(o=t.manifestXmlStringInitial)&&null==i)throw n("unrecoverableViolation")("Empty manifestXmlStringInitial and manifestUrl","comet_video_player");return y.current=t,F(t,o,["handleVideoInfoChangeForOzImplementation","downloadManifestInOz"]),!0},L=function(e,t){var r=function(n){P.current===e&&(b.current=n,A(n,[].concat(t,["handleOzPlayerModuleLoadSuccess"])))},a=function(t){P.current===e&&Q(t,"oz_player_module_load_failed")};P.current=e,n("promiseDone")(e,r,a)},M=function(e){return e=r("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(e),J.current=e,e},A=function(e,n){var a=H(),i=v.current;if(null!=a&&null!=i){var o=M(a),l=i.experimentationConfig;e?B(e,a,o,i,[].concat(n,["proceedWithResolvedVideoInfo","OzPlayerModuleFromRef"])):t("cr:1494460")?B(t("cr:1494460")(),a,o,i,[].concat(n,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderSync"])):t("cr:1534629")?(l.getBool("instantiate_buffering_detector_before_quick_starter",!1)&&r("VideoPlayerOzImplementationEnginePartsImplUtils").createOzBufferingDetector(a,o,i.experimentationConfig,G,C,j),L(t("cr:1534629")().load(),[].concat(n,["proceedWithResolvedVideoInfo","VideoPlayerOzPlayerModuleLoaderAsync"]))):Q(new Error("Neither of OzPlayerModuleLoader is available."),"oz_player_module_loaders_missing")}},B=function(e,t,a,i,l){try{var s={OzPlayerClass:e,callChain:[].concat(l,["proceedWithResolvedVideoInfoAndOzPlayerModuleSync"]),destroyOzPlayerPartsRef:D,engineDebugAPI:f,engineExtrasAPI:U,getCaptionsInfo:N,getLatencyLevelManager:u,getVideoLiveTrace:q,handleCaptionsInfoChange:W,handleFatalImplementationError:Q,initialProps:g,logger:j,machine:G,ozBufferingDetectorRef:C,playerVersion:x,resolvedVideoInfo:i,videoElement:t};e=o(),l=g.loadSequence,e&&e.getNumber("load_sequence_max_delay_ms",0)>0&&null!=l?V.current=n("VideoPlayerImplementationLoadSequenceManager").schedule(e,l,function(){return r("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},s,{hivePluginRef:w,overrideOzRequestImplementationRef:I,ozPlayerRef:S,p2pSessionLoggerRef:E})),a.getCanPlayPromise()}):r("VideoPlayerOzImplementationEnginePartsImplFunction").proceedWithOzPlayerCreation(babelHelpers["extends"]({},s,{hivePluginRef:w,overrideOzRequestImplementationRef:I,ozPlayerRef:S,p2pSessionLoggerRef:E})),h.current=i}catch(e){Q(e,"oz_player_create_exception")}},U=r("VideoPlayerOzImplementationEngineExtrasAPI").createVideoPlayerOzImplementationEngineExtrasAPI({getConfig:o,getOzPlayer:i,getVideoElementAPI:s});m=(s=r("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(e){var t=e.getVideoElementAPI;return e=e.logger,f?f.createDebugAPI({engineExtrasAPI:U,getConfig:function(){var e;return null!=(e=null==(e=h.current)?void 0:e.experimentationConfig)?e:null},getManifest:function(){var e;return null!=(e=null==(e=h.current)?void 0:e.manifestXmlStringResolved)?e:null},getManifestUrl:function(){var e;return null!=(e=null==(e=h.current)?void 0:e.manifestUrl)?e:null},getOzBufferingDetector:a,getOzPlayer:i,getVideoElementAPI:t,logger:e}):null},createVideoPlayerError:r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromOzImplementationError,debugLog:l,debugLogId:m,destroyEngineParts:function(e){d([].concat(e,["destroyEngineParts"])),c(),p()},engineExtrasAPI:U,engineMetadata:{isAbrEnabled:!0,isExternalMedia:!1,playerImplementationName:"oz_v2",playerVersion:x,streamingFormat:"dash"},handleFatalError:_,handleVideoElementMounted:function(e){H();A(b.current,[].concat(e,["handleVideoElementMounted"]))},handleVideoElementUnmounted:function(e){n("gkx")("1380112")&&d([].concat(e,["handleVideoElementUnmounted"]))},handleVideoInfoChange:$,initialProps:g,setExposedStateInReact:e})).engine;var N=s.getCaptionsInfo,H=s.getVideoElement,q=s.getVideoLiveTrace,W=s.handleCaptionsInfoChange,Q=s.handleFatalImplementationError,j=s.logger,G=s.machine,J=s.videoElementAPIRef;return m}var l=n("emptyFunction");o.createVideoPlayerOzImplementationEngine=e},98),__d("VideoPlayerOzImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerOzImplementationEngine","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){return e=(e=r("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,r("VideoPlayerOzImplementationEngine").createVideoPlayerOzImplementationEngine)).reactVideoFrameAndComponents}r("react"),e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay",["requireDeferredForDisplay"],function(e,t,n,r,a,i,o){"use strict";function e(){return{getModuleIfRequireable:function(){return l.getModuleIfRequireable()||null},load:function(){return l.load()}}}var l=n("requireDeferredForDisplay")("oz-player").__setRef("VideoPlayerOzPlayerModuleLoaderDeferredForDisplay");o["default"]=e},98),__d("VideoPlayerProgressiveImplementationData",[],function(e,t,n,r,a,i){"use strict";function e(e){var t=e.hdSrc,n=e.hdSrcPreferred,r=e.isExternalMedia;return null==(e=e.sdSrc)?null:{hdSrc:t,hdSrcPreferred:n,isExternalMedia:r,sdSrc:e}}i.makeProgressiveImplementationData=e},66),__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",[],function(e,t,n,r,a,i){"use strict";function o(e){return null!==e&&-1!==e.indexOf(".m3u8")}function e(e){var t=e.getPlayingVideoInfo;return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAudioRepresentationIDAtTime:function(){return null},getAvailableVideoQualities:function(){var e;return null!=(e=null==(e=t())?void 0:e.availableQualities)?e:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingVideoQuality:function(){var e;return null!=(e=null==(e=t())?void 0:e.targetQuality)?e:""},getCurrentTargetVideoQuality:function(){var e;return null!=(e=null==(e=t())?void 0:e.targetQuality)?e:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var e=t();return null==e?"progressive":o(e.hdSrc)||o(e.sdSrc)?"hls":"progressive"},getUserSelectedVideoQuality:function(){var e;return null!=(e=null==(e=t())?void 0:e.selectedQuality)?e:"notselected"},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentationIDAtTime:function(){return"oep_hd"},getVideoRepresentations:function(){return null},isDrm:function(){var e;return null!=(null==(e=t())?void 0:e.graphQLVideoDRMInfo)},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(){},
setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:e=e.setUserSelectedVideoQuality}}i.createVideoPlayerProgressiveImplementationEngineExtrasAPI=e},66),__d("VideoPlayerProgressiveImplementationEngineUtils",[],function(e,t,n,r,a,i){"use strict";function e(e){var t=[];null!=e.sdSrc&&t.push(l),null!=e.hdSrc&&t.push(o);var n=e.hdSrcPreferred&&null!=e.hdSrc?o:l;return babelHelpers["extends"]({},e,{availableQualities:t,playingQuality:null,playingSrc:null,selectedQuality:n,targetQuality:n,targetSrc:null})}function t(e,t){var n,r,a=e.hdSrc,i=e.sdSrc;return"notselected"===t||"auto"===t?(n=null!=i?l:null!=a?o:l,r=null!=i?i:null!=a?a:null):t===o&&null!=a?(n=o,r=a):t===l&&null!=i?(n=l,r=i):(n=l,r=null),""===r&&(r=null),babelHelpers["extends"]({},e,{selectedQuality:t,targetQuality:n,targetSrc:r})}function n(e,t,n){return babelHelpers["extends"]({},e,{playingQuality:t,playingSrc:n})}var o="hd",l="sd";i.createResolvedVideoInfoProgressive=e,i.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=t,i.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=n},66),__d("VideoPlayerProgressiveImplementationEngine",["UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1473550","cr:1680308","emptyFunction","err","gkx","promiseDone","unrecoverableViolation"],function(e,t,n,r,a,i,o){"use strict";function l(e,t,n){return r("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError("PROGRESSIVE_JAVASCRIPT_NATIVE",e,t,n)}function e(e){var a=e.debugLogId,i=e.handleFatalError,o=e.initialProps;e=e.setExposedStateInReact;var u={current:null},d={current:null},c={current:null},p={current:null},m=function(){var e=h(),a=d.current;if(null!=e&&null!=a){n("gkx")("6737")&&e.addEventListener("error",function(){b(e.error,"progressive_implementation_error")});try{var i,l=a.graphQLVideoDRMInfo,s=a.videoFBID;i=l&&null!=(i=l.fairplayCert)?i:null,t("cr:1680308")&&l&&null!=i&&null!=s&&(p.current=t("cr:1680308").newIfSupported(i,e,s,l.videoLicenseUriMap),null==p.current?(i=n("err")("Fairplay not supported"),b(i,"progressive_player_fairplay_handler_missing")):p.current.addListener("error",function(e){e=n("err")(e.error),b(e,"progressive_player_fairplay_handler_error")}));var u=r("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(e,o.isExternalMedia);C.current=u,c.current=a,s=v(),P({inbandCaptionsAutogeneratedFromManifest:f.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:f.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:null==s?void 0:s.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:f.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:null==s?void 0:s.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:null==s?void 0:s.sideLoadCaptionsUrlFromProps}),S.dispatch({payload:{availableQualities:f.getAvailableVideoQualities(),selectedVideoQuality:f.getUserSelectedVideoQuality(),streamingFormat:f.getStreamType(),targetVideoQuality:f.getCurrentTargetVideoQuality(),videoProjection:f.getVideoProjectionType()},type:"implementation_engine_initialized"}),l=function(){u.setPlayheadPosition(o.startTimestamp)},n("UserAgent").isBrowser("IE11")?n("promiseDone")(u.getDOMLoadedMetadataPromise().then(l)):l()}catch(e){b(e,"progressive_player_create_exception")}}},_=function(e,t){if(null==t)return!0;if(e.videoFBID!==t.videoFBID){var n=14;return r("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",n),!1}return(e.hdSrc!==t.hdSrc||e.sdSrc!==t.sdSrc)&&(n=14,r("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",n),!1)},g=function(e){var t;if(t={graphQLVideoDRMInfo:null!=(t=e.graphQLVideoDRMInfo)?t:null,hdSrc:""===e.hdSrc?null:null!=(t=e.hdSrc)?t:null,hdSrcPreferred:e.hdSrcPreferred,sdSrc:""===e.sdSrc?null:null!=(t=e.sdSrc)?t:null,videoFBID:e.videoFBID},!_(t,u.current))return!1;if(null==t.hdSrc&&null==t.sdSrc)throw n("unrecoverableViolation")("Empty hdSrc and sdSrc","comet_video_player");return u.current=t,d.current=r("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(t),m(),!0},f=r("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){return c.current},setUserSelectedVideoQuality:function(e){var t=c.current;if(!t)throw n("unrecoverableViolation")("Attempt to switch quality when playingVideoInfo does not exist","comet_video_player");var a=C.current;if(!a)throw n("unrecoverableViolation")("Attempt to switch quality when videoElementAPI does not exist","comet_video_player");c.current=r("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(t,e),t=c.current.targetSrc,a.setSrc(t),null!=t&&((t=null!=(e=S.getCurrentState().uncontrolledState.videoElementPlayheadPosition)?e:0)>0&&a.setPlayheadPosition(t),"playing"===S.getCurrentState().controlledState.playbackState&&a.play(),S.dispatch({payload:{targetVideoQuality:f.getCurrentTargetVideoQuality()},type:"representation_changed"}))}}),y=function(){p.current&&(p.current.destroy(),p.current=null)};i=(a=r("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(e){var n=e.getVideoElementAPI;return e=e.logger,t("cr:1473550")?t("cr:1473550").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:f,getVideoElementAPI:n,logger:e}):null},createVideoPlayerError:function(e,t){return l(e,t,null==(e=c.current)?void 0:e.targetSrc)},debugLog:s,debugLogId:a,destroyEngineParts:function(){y()},engineExtrasAPI:f,engineMetadata:{isAbrEnabled:!1,isExternalMedia:o.isExternalMedia,playerImplementationName:"progressive_v2",playerVersion:"comet_progressive",streamingFormat:"progressive"},handleFatalError:i,handleVideoElementMounted:m,handleVideoElementUnmounted:function(){},handleVideoInfoChange:g,initialProps:o,setExposedStateInReact:e})).engine;var v=a.getCaptionsInfo,h=a.getVideoElement,P=a.handleCaptionsInfoChange,b=a.handleFatalImplementationError,S=a.machine,C=a.videoElementAPIRef;return i}var s=n("emptyFunction");o.createVideoPlayerProgressiveImplementationEngine=e},98),__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){return e=(e=r("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,r("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine)).reactVideoFrameAndComponents}r("react"),e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("PolarisProfileTabTaggedPhotosConstants",[],function(e,t,n,r,a,i){"use strict";e="tagged",i.TAGGED_TAB_ID=e},66),__d("polarisManifestHasUnsupportedCodecs",[],function(e,t,n,r,a,i){"use strict";function e(e){if(null==window.MediaSource||null==e||"string"!=typeof e)return!1;for(var t,n=/mimeType=\"([^\"]*)\"\s*codecs=\"([^\"]*)\"/g;t=n.exec(e);)if(t=t[1]+'; codecs="'+t[2]+'"',!window.MediaSource.isTypeSupported(t))return!0;return!1}i["default"]=e},66),__d("PolarisMobileOzConfigDefaults",[],function(e,t,n,r,a,i){"use strict";e={oz_www_abr_use_download_time:!1,oz_www_append_last_segment_if_beyond_end:!1,oz_www_allow_queueing_end_of_stream_when_update:!1,oz_www_back_off_pdash_504_retry:!1,oz_www_bandwidth_ignore_on_stream_write_samples:!1,oz_www_bandwidth_use_response_time_adjustment:!1,oz_www_buffer_when_waiting:!1,oz_www_call_end_of_stream_in_quick_starter:!1,oz_www_cancel_tracker_on_append_error:!1,oz_www_check_buffer_range_once_for_playhead_update:!1,oz_www_cleanup_video_node_on_destroy:!1,oz_www_clear_buffer_when_switch_representation_initiator_is_user:!1,oz_www_convert_dom_exception_to_oz_error:!1,oz_www_copy_new_manifest:!1,oz_www_delay_stream_end_for_sourceended:!1,oz_www_detach_media_source_manager:!1,oz_www_disable_audio_scheduler:!1,oz_www_emit_stream_error_event:!1,oz_www_enable_abr_for_first_request:!1,oz_www_enable_adaptation:!0,oz_www_enable_appends_on_wait_update_end_failure:!1,oz_www_enable_network_manager_error:!1,oz_www_enable_quickdashv2:!1,oz_www_estimate_video_bandwidth_only:!1,oz_www_exclude_prefetch_bandwidth_samples:!0,oz_www_fallback_on_append_error:!1,oz_www_fix_abr_default_representation:!1,oz_www_fix_quick_starter_overhead:!0,oz_www_fix_reload_manifest_retry:!1,oz_www_fix_seek_performance:!1,oz_www_fix_setup_video_duration_on_representation_switch:!1,oz_www_fix_source_buffer_error_logging:!1,oz_www_fix_stream_deferred_cancel:!1,oz_www_fix_template_duration_artifact_in_manifest:!1,oz_www_generate_mos_segment_buffer_diff:!1,oz_www_handle_mpd_retries_outside_oz_mpd_updater:!1,oz_www_handle_switch_to_unparsed_representation_sidx:!0,oz_www_ignore_time_to_response_start:!1,oz_www_lazy_parse_sidx:!1,oz_www_listen_for_canplay_in_buffering_detector:!1,oz_www_live_audio_ibr:!0,oz_www_live_catch_up_only_when_paused:!1,oz_www_live_disable_mpd_updates_when_paused:!1,oz_www_live_gracefully_handle_410:!1,oz_www_live_gracefully_handle_mpd_errors:!1,oz_www_live_gracefully_handle_no_network:!1,oz_www_live_no_segment_when_playhead_is_before_first_segment:!1,oz_www_live_playhead_catch_up:!1,oz_www_live_query_time_in_range:!1,oz_www_load_video_node_on_unload:!1,oz_www_log_appended_secs:!1,oz_www_maybe_end_stream_if_prepended_segments:!1,oz_www_mpd_update_cancel_current_request_tracker:!1,oz_www_no_new_loop_body_promise_when_stream_ongoing:!1,oz_www_pausable_stream_throws_error_when_aborted:!1,oz_www_playhead_manager_handle_timerange_update_on_timeupdate:!1,oz_www_queue_data_with_error_handling:!1,oz_www_reach_end_only_when_video_ended:!1,oz_www_remove_src_attr_on_unload:!1,oz_www_respect_initial_representation_on_setup:!1,oz_www_retry_fetch_on_prefetch_error:!1,oz_www_sbm_abort_on_readable_stream_error:!1,oz_www_sbm_check_source_buffer_ready_state_on_cancel:!1,oz_www_sbm_recursively_waits_for_update_end:!1,oz_www_sbm_waits_for_update_end:!0,oz_www_seek_ahead_use_native_current_time:!1,oz_www_seek_to_start_quick_starter:!1,oz_www_set_source_buffer_append_window_end:!1,oz_www_set_stream_anchor_only_on_done_status:!1,oz_www_skip_videobuffer_gaps:!0,oz_www_skip_videobuffer_gaps_on_buffer_updated:!1,oz_www_stable_buffered_timeranges_in_observedsourcebufferstate:!1,oz_www_stop_manifest_update_when_static:!1,oz_www_suppress_playing_event_while_buffering:!1,oz_www_throw_network_error_during_stream:!1,oz_www_throw_on_non_zero_r_d_mismatch:!1,oz_www_touch_cb_key:!1,oz_www_update_bandwidth_cache_on_sample:!1,oz_www_update_duration_when_init_appended:!1,oz_www_update_live_video_config_on_representation_switch:!1,oz_www_update_media_source_duration:!0,oz_www_use_abr_for_missing_default_representation:!1,oz_www_use_deferred_streaming_task:!1,oz_www_use_loose_manifest_updates:!1,oz_www_use_performance_entry_on_stream_close:!1,oz_www_use_scf_timebased_segments:!1,oz_www_use_scheduler:!0,oz_www_use_sc_timebased_segments:!1,oz_www_use_segment_request_cache:!1,oz_www_use_stream_end_time_in_segment_locator:!1,oz_www_pdash_use_pdash_segmentlocator:!1,oz_www_fix_buffer_ahead_priority_strategy:!1,oz_www_fix_prepended_segments_tagging:!1,oz_www_xmlparser_use_domparser:!1,oz_www_prevent_unnecessary_seek_stream_anchor_reset:!1,oz_www_fix_prefetch_xhr_http_status:!0},t={oz_www_abr_confidence_threshold:.9,oz_www_abr_eval_buffer_threshold:0,oz_www_abr_min_bandwidth_samples:0,oz_www_abr_prevent_down_switch_buffer_threshold:11,oz_www_abr_restrict_from_index:0,oz_www_abr_restrict_to_index:0,oz_www_append_byte_target_without_range:0,oz_www_appends_per_segment:3,oz_www_auto_seek_playhead_slack:0,oz_www_bandwidth_boundary_standard_deviation_factor:1,oz_www_bandwidth_estimator_half_life:6,oz_www_bandwidth_estimator_outlier_exclusion_factor:50,oz_www_bandwidth_estimator_std_dev_penalty_factor:0,oz_www_bandwidth_estimator_variance_penalty_down_factor:0,oz_www_bandwidth_estimator_variance_penalty_half_life:0,oz_www_bandwidth_estimator_variance_penalty_up_factor:0,oz_www_bandwidth_penalty_additional_video_start:0,oz_www_bandwidth_penalty_per_additional_video:0,oz_www_bandwidth_response_time_handicap:0,oz_www_buffer_ahead_target:19,oz_www_byte_count_per_sample:6e4,oz_www_default_bandwidth_estimate:5e5,oz_www_download_time_buffer_delta_penalty_factor:0,oz_www_initial_manifest_request_retry_count:0,oz_www_initial_switch_interval:0,oz_www_in_play_buffer_overflow_target:1,oz_www_in_play_buffer_underflow_target:.1,oz_www_live_audio_ibr_bandwidth_percentage:.05,oz_www_live_catch_up_fall_behind_threshold:20,oz_www_live_catch_up_live_head_delta:6,oz_www_live_max_try_attempts_on_404:1,oz_www_live_numerical_error_epsilon:0,oz_www_low_buffer_bandwidth_target_increase_factor:0,oz_www_low_buffer_bandwidth_target_threshold:10,oz_www_low_segment_stream_playhead_threshold:0,oz_www_max_bandwidth_sample_count:30,oz_www_max_start_eme_attempts:-1,oz_www_maximum_bandwidth_sample_bandwidth:2e6,oz_www_min_block_time_range_interval_ms:0,oz_www_min_eval_interval:1e3,oz_www_minimum_bandwidth_sample_duration:30,oz_www_minimum_bytes_to_sample_on_close:25e3,oz_www_minimum_download_additional_buffer_ms:0,oz_www_min_switch_interval:5e3,oz_www_network_seg_timeout_ms:0,oz_www_paused_stream_segments_count:2,oz_www_per_stream_duration_target:0,oz_www_playhead_nudge_slack:0,oz_www_playhead_manager_timeupdate_throttle_ms:1e3,oz_www_pixels_below_viewport_to_observe:0,oz_www_pixels_above_viewport_to_observe:0,oz_www_pre_start_buffer_ahead_target:10,oz_www_resolution_constraint_factor:2,oz_www_sbm_read_timeout_ms:0,oz_www_seconds_to_stream:0,oz_www_seconds_to_stream_near_bandwidth_boundary:0,oz_www_seek_ahead_epsilon:0,oz_www_segments_to_stream:5,oz_www_segments_to_stream_near_bandwidth_boundary:5,oz_www_segments_to_stream_under_playhead_threshold:0,oz_www_skip_videobuffer_gaps_max_gap_size_sec:0,oz_www_start_buffer_underflow_target:.1,oz_www_stream_interrupt_check_mpd_stale_count_threshold:0,oz_www_tagged_time_range_per_append_throttle:0,oz_www_timeline_offset_threshold:0,oz_www_time_to_first_byte_estimate_half_life_ms:500,oz_www_prioritize_by_viewport_static_penalty:0,oz_www_partial_playback_buffer_overflow:0},n={oz_www_bandwidth_cache_key:"bandwidthEstimate",oz_www_block_representation_status_codes_json:"[500]",oz_www_network_end_broadcasts_json:"[]",oz_www_network_reload_mpd_json:"[]",oz_www_network_retry_intervals_json:'{"0": 1000, "404": 2000, "502": 1000, "503": 1000, "504": 1000}',oz_www_network_skip_json:"[]",oz_www_stream_types_eligible_for_partial_playback:""},i.defaultBools=e,i.defaultNumbers=t,i.defaultStrings=n},66),__d("PolarisVideoHelpers",["PolarisMediaTypes","PolarisSizing","err"],function(e,t,n,r,a,i,o){"use strict";function e(e){if(null==e.dashInfo)return null;var t=(e=e.dashInfo).is_dash_eligible,n=e.number_of_qualities;return e=e.video_dash_manifest,t&&null!=e?{isDashEligible:t,videoDashManifest:e,numberOfQualities:n}:null}function l(e,t){return null==(e=e.videoResources)?void 0:e.find(function(e){return e.type===t})}function t(e){var t;return null!=(t=null==(t=l(e,r("PolarisMediaTypes").MediaVersionType.VIDEO_480_HIGH))?void 0:t.src)?t:null==(t=l(e,r("PolarisMediaTypes").MediaVersionType.VIDEO_480_LOW))?void 0:t.src}function a(e){return null==(e=l(e,r("PolarisMediaTypes").MediaVersionType.VIDEO_640_HIGH))?void 0:e.src}function i(e){return{canAutoplay:!0===e?"allow":"deny",autoplaySetting:!0===e?"default_autoplay":"off",autoplayGatingResult:"unknown"}}function s(e){var t;throw null!=e?(t=n("err")("Cannot play video: "+e.message+" and no progressive URL is available"),e.name&&(t.name=e.name)):(t=n("err")("Cannot play video: No progressive URL is available")).name="VideoImplementationsNoProgressiveURL",t.project="comet_video_player",t}function u(e,t){return null==e?100:(e=r("PolarisSizing").getHeightPercent(e),t?Math.min(e,r("PolarisSizing").CAPPED_HEIGHT_PERCENT):e)}o.getDashInfoFromPost=e,o.getSDVideoSrcFromPost=t,o.getHDVideoSrcFromPost=a,o.getVideoPlayerAutoplayProps=i,o.throwEmptyImplementationsError=s,o.getVideoPaddingPercentFromDimensions=u},98),__d("shouldUseOzOnPolaris",["PolarisODS","gkx","memoizeWithArgs","polarisManifestHasUnsupportedCodecs"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t;return n("gkx")("5754")||(t="oz_player_browser_version_failed"),n("polarisManifestHasUnsupportedCodecs")(e)&&(t="oz_player_manifest_has_unsupported_codecs"),window.MediaSource||(t="oz_player_media_source_failed"),window.fetch||(t="oz_player_no_fetch_failed"),window.ReadableStream||(t="oz_player_no_readable_stream_failed"),t?(n("PolarisODS").incr_CAREFUL_WHEN_USE_DYNAMIC_KEY("web.polaris_video_x."+t),!1):(n("PolarisODS").incr("web.polaris_video_x.oz_compatible"),!0)}t=n("memoizeWithArgs")(function(e){return l(e)},function(e){return JSON.stringify(null!=(e=e)?e:null)}),o["default"]=t},98),__d("usePolarisOzImplementation",["JSResource","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.forceProgressiveImpl;return s(function(){null==l&&!t&&n("JSResource").loadAll([n("JSResource")("VideoPlayerOzImplementationV2.react").__setRef("usePolarisOzImplementation")],function(e){l=e})},[t]),l}var l,s=r("react").useEffect;o["default"]=e},98),__d("VideoPlayerOzWWWConfig",[],function(e,t,n,r,a,i){"use strict";var o="oz_www_";e=function(){function e(e){this.$1=e}var t=e.prototype;return t.getBool=function(e,t){return this.$1.getBool(o+e,t)},t.getNumber=function(e,t){return this.$1.getNumber(o+e,t)},t.getString=function(e,t){return this.$1.getString(o+e,t)},t.setContext=function(e,t){this.$1.setContext(e,t)},t.getAllContexts=function(){return this.$1.getAllContexts()},e}(),i["default"]=e},66),__d("usePolarisOzImplementationData",["VideoPlayerOzImplementationData","VideoPlayerOzWWWConfig","react"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.dashInfo,a=e.videoPlayerConfig,i=l(function(){return new(n("VideoPlayerOzWWWConfig"))(a)},[a]);return l(function(){return r("VideoPlayerOzImplementationData").makeOzImplementationData({canUseOz:null==t?void 0:t.isDashEligible,dashManifest:null==t?void 0:t.videoDashManifest,dashUrl:null==t?void 0:t.videoDashUrl,experimentationConfig:i,minQualityPreference:null,videoFBID:""})},[null==t?void 0:t.isDashEligible,null==t?void 0:t.videoDashManifest,null==t?void 0:t.videoDashUrl,i])}var l=r("react").useMemo;o["default"]=e},98),__d("usePolarisProgressiveImplementationData",["VideoPlayerProgressiveImplementationData"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.hdSrc,n=e.hdSrcPreferred;return e=e.sdSrc,r("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:t,hdSrcPreferred:n,isExternalMedia:!1,sdSrc:e})}o["default"]=e},98),__d("VideoPlayerShakaConfigContextProvider",[],function(e,t,n,r,a,i){"use strict";e=function(){function e(){this.$1={}}var t=e.prototype;return t.setContext=function(e,t){var n;this.$1[e]!==t&&(this.$1=babelHelpers["extends"]({},this.$1,((n={})[e]=t,n)))},t.setAllContexts=function(e){this.$1=e},t.getAllContexts=function(){return this.$1},e}(),i["default"]=e},66),__d("VideoPlayerShakaConfig",["VideoPlayerContextSensitiveConfigResolver","VideoPlayerShakaConfigContextProvider"],function(e,t,n,r,a,i,o){var l={};e=function(){function e(e,t,r){this.$1=new(n("VideoPlayerShakaConfigContextProvider")),this.$2=t||null,this.$3=new(n("VideoPlayerContextSensitiveConfigResolver"))(r),this.$3.setContexts(e||{}),e&&this.$1.setAllContexts(e)}e.setGlobalOverrideConfig=function(e){l=e};var t=e.prototype;return t.setContext=function(e,t){var n=this.$1.getAllContexts();this.$1.setContext(e,t),n!==(e=this.$1.getAllContexts())&&this.$3.setContexts(e)},t.setOverrideConfig=function(e){this.$2=e},t.getBool=function(e,t){return"boolean"==typeof(e=this.$4(e,t))?e:t},t.getNumber=function(e,t){return"number"==typeof(e=this.$4(e,t))?e:t},t.getString=function(e,t){return"string"==typeof(e=this.$4(e,t))?e:t},t.getAllContexts=function(){return this.$1.getAllContexts()},t.$4=function(e,t){return l&&typeof l[e]==typeof t?l[e]:typeof this.$3.getValue(e)==typeof t?this.$3.getValue(e):this.$2&&typeof this.$2[e]==typeof t?this.$2[e]:null},e}(),o["default"]=e},98),__d("getPolarisOzConfigValues",["PolarisMobileOzConfigDefaults","PolarisUA"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t,n={};return t=babelHelpers["extends"]({},r("PolarisMobileOzConfigDefaults").defaultBools,r("PolarisMobileOzConfigDefaults").defaultNumbers,r("PolarisMobileOzConfigDefaults").defaultStrings),babelHelpers["extends"]({},e,n,t)}function s(e){return babelHelpers["extends"]({},e)}function e(){var e={oz_www_use_src_object_for_media_source:!0,oz_www_use_systemic_risk_abr:!0};return r("PolarisUA").isMobile()?l(e):s(e)}o["default"]=e},98),__d("usePolarisVideoPlayerShakaConfig",["VideoPlayerConnectionQuality","VideoPlayerOzWWWGlobalConfig","VideoPlayerShakaConfig","getPolarisOzConfigValues","oz-player/networks/OzBandwidthEstimator","useStable"],function(e,t,n,r,a,i,o){"use strict";function e(e){var t=e.isAd,a=e.isLive;return n("useStable")(function(){return new(n("VideoPlayerShakaConfig"))({connection_quality:r("VideoPlayerConnectionQuality").evaluate(function(){return n("oz-player/networks/OzBandwidthEstimator").getBandwidth(n("VideoPlayerOzWWWGlobalConfig"))}),content_category:"general",fbls_tier:"user",is_ad:!0===t,is_latency_sensitive_broadcast:!1,is_live:!0===a,is_spherical:!1,latency_level:"normal",player_format:"inline",servable_via_fmbs:!1,streaming_implementation:"default"},{},{staticValues:n("getPolarisOzConfigValues")(),contextSensitiveValues:{}})})}o["default"]=e},98),__d("usePolarisVideoImplementations",["FBLogger","PolarisVideoHelpers","VideoPlayerProgressiveImplementationV2.react","cr:1079","react","usePolarisOzImplementation","usePolarisOzImplementationData","usePolarisProgressiveImplementationData","usePolarisVideoPlayerShakaConfig"],function(e,t,n,r,a,i,o){"use strict";function e(e){var a,i=e.dashInfo,o=e.forceProgressiveImpl,s=e.hdSrc,u=e.hdSrcPreferred,d=e.isAd,c=e.isLive;e=e.sdSrc;var p=[];if(d=n("usePolarisVideoPlayerShakaConfig")({isAd:d,isLive:c}),c=n("usePolarisOzImplementation")({forceProgressiveImpl:o}),a=l(null!=(a=t("cr:1079"))?a:c),c=null,(i=n("usePolarisOzImplementationData")({dashInfo:i,videoPlayerConfig:d}))instanceof Error)c=i;else{if(null==(d=i).manifest&&null==d.manifestUrl)throw n("FBLogger")("comet_video_player").mustfixThrow("If ozImplementationData exists, it should have either manifest or manifestUrl");!o&&null!=a.current&&p.push({Component:a.current,data:d,typename:"VideoPlayerOzImplementation"})}return null!=(o=n("usePolarisProgressiveImplementationData")({hdSrc:s,sdSrc:e,hdSrcPreferred:null!=(i=u)&&i}))&&p.push({Component:n("VideoPlayerProgressiveImplementationV2.react"),data:o,typename:"VideoPlayerProgressiveImplementation"}),0===p.length&&r("PolarisVideoHelpers").throwEmptyImplementationsError(c),p}var l=r("react").useRef;o["default"]=e},98),__d("PolarisVideo.react",["PolarisConfig","PolarisVideoHelpers","VideoPlayerRetryableErrorBoundary.react","VideoPlayerSurface.react","VideoPlayerX.react","computeAspectRatio","defaultErrorBoundaryFallback","react","shouldUseOzOnPolaris","usePolarisVideoImplementations"],function(e,t,n,r,a,i,o){"use strict";function l(e){var t=e.autoplay,a=e.children,i=e.dashInfo,o=e.hdSrc,l=e.hdSrcPreferred,u=e.isAd,d=e.isLive,c=e.loopCount,p=e.mediaId,m=e.originalHeight,_=e.originalWidth,g=e.renderVideoPixelsFit;e=e.sdSrc;var f=n("shouldUseOzOnPolaris")(null==i?void 0:i.videoDashManifest);return f=r("PolarisConfig").isIOS()||!f,e=n("usePolarisVideoImplementations")({sdSrc:e,hdSrc:o,hdSrcPreferred:l,dashInfo:i,isAd:u,isLive:d,forceProgressiveImpl:f}),o=r("PolarisVideoHelpers").getVideoPlayerAutoplayProps(t),l=n("computeAspectRatio")(_,m),s.jsx(n("VideoPlayerX.react"),babelHelpers["extends"]({disableLoadingIndicator:!0,disableLogging:!0,doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn:!0,implementations:e,loopCount:c,portalingEnabled:!1,preloadForProgressiveDisabled:!0,renderVideoPixelsFit:g,subOrigin:"inline",videoFBID:p,videoPixelsAspectRatio:l},o,{children:null!=(i=a)?i:s.jsx(n("VideoPlayerSurface.react"),{})}))}function e(e){return s.jsx(n("VideoPlayerRetryableErrorBoundary.react"),{description:"PolarisVideoX",fallback:n("defaultErrorBoundaryFallback"),children:s.jsx(l,babelHelpers["extends"]({},e))})}var s=r("react");l.displayName=l.name+" [from "+i.id+"]",e.displayName=e.name+" [from "+i.id+"]",o["default"]=e},98),__d("MaybeNativePromise",["Promise"],function(e,t,n,r,a,i){"use strict";n=e.Promise||t("Promise"),t("Promise").resolve(),r=n,i["default"]=r},66);