__d("LSFlushSyncTrace",[],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e=[];return t.seq([function(){return t.fe(t.ftr(t.db.table(153).fetch(),function(e){return t.i64.eq(e.traceType,t.i64.cast([0,2]))&&e.contextOne===n[1]&&e.contextThree===n[0]}),function(n){var t=n.update;return n.item,t({shouldFlush:!0})})},function(){return t.resolve(e)}])}t=n,a["default"]=t},66),__d("LSExecuteFinallyBlockForSyncTransaction",["LSFlushSyncTrace"],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e,r=[];return t.seq([function(){return t.seq([function(){return t.fe(t.ftr(t.db.table(3).fetch([[["",n[1]]]]),function(e){return""===e.taskQueueName&&t.i64.eq(e.syncDatabaseId,n[1])&&t.i64.eq(e.epochId,n[2])}),function(r){var i=r.update;return r=r.item,i({epochId:!n[0]&&t.i64.eq(r.failureCount,t.i64.cast([-1,4294967295]))?r.epochId:e,failureCount:t.i64.eq(r.failureCount,t.i64.cast([-1,4294967295]))?t.i64.cast([0,0]):t.i64.add(r.failureCount,t.i64.cast([0,1]))})})},function(){return t.resolve()}])},function(){return t.resolve(r)}])}t=n,a["default"]=t},66),__d("LSAppendDataTraceAddon",[],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e=[],r=[];return t.seq([function(){return e[0]=t.i64.of_float(Date.now()),t.db.table(154).add({addonId:void 0,traceId:n[0],timestampMs:e[0],checkPointId:n[1],syncChannel:n[2],errorMessage:n[3],tags:n[4]})},function(){return t.resolve(r)}])}t=n,a["default"]=t},66),__d("bs_caml",[],function(n,t,e,r,i,a){"use strict";function n(n,t){return n<t?-1:n===t?0:1}function t(n,t){return n?t?0:1:t?-1:0}function e(n,t){return n===t?0:n<t?-1:n>t||n==n?1:t==t?-1:0}function r(n,t){return n===t?0:n<t?-1:1}function i(n,t){return n?t:n}function c(n,t){return n<t?n:t}function o(n,t){return n<t?n:t}function _(n,t){return n<t?n:t}function s(n,t){return n<t?n:t}function u(n,t){return n||t}function l(n,t){return n>t?n:t}function f(n,t){return n>t?n:t}function m(n,t){return n>t?n:t}function b(n,t){return n>t?n:t}function d(n,t){return n[1]===t[1]&&n[0]===t[0]}function g(n,t){var e=t[0],r=n[0];return r>e||!(r<e)&&n[1]>=t[1]}function v(n,t){return!d(n,t)}function h(n,t){return!g(n,t)}function p(n,t){return n[0]>t[0]||!(n[0]<t[0])&&n[1]>t[1]}function E(n,t){return!p(n,t)}function S(n,t){return g(n,t)?t:n}function x(n,t){return p(n,t)?n:t}a.caml_int_compare=n,a.caml_bool_compare=t,a.caml_float_compare=e,a.caml_string_compare=r,a.caml_bool_min=i,a.caml_int_min=c,a.caml_float_min=o,a.caml_string_min=_,a.caml_int32_min=s,a.caml_bool_max=u,a.caml_int_max=l,a.caml_float_max=f,a.caml_string_max=m,a.caml_int32_max=b,a.i64_eq=d,a.i64_neq=v,a.i64_lt=h,a.i64_gt=p,a.i64_le=E,a.i64_ge=g,a.i64_min=S,a.i64_max=x},null),__d("bs_caml_int64",["bs_caml"],function(n,t,e,r,i,a){"use strict";function n(n,t){return[t,n>>>0]}function c(n){return 0!=(-2147483648&n)}function o(n){return 0==(-2147483648&n)}function e(n){var t=n[1];return[(n=n[0])+(0===(t=t+1|0)?1:0)|0,t>>>0]}function _(n){var t=1+(-1^n[1])|0;return[(-1^n[0])+(0===t?1:0)|0,t>>>0]}function s(n,t,e){var r=n[1],i=r+t|0;return r=c(r)&&(c(t)||o(i))||c(t)&&o(i)?1:0,[n[0]+e+r|0,i>>>0]}function u(n,t){return s(n,t[1],t[0])}function r(n,e){return null!==e&&t("bs_caml").i64_eq(n,e)}function i(n,e){return void 0!==e&&t("bs_caml").i64_eq(n,e)}function l(n,e){return null!=e&&t("bs_caml").i64_eq(n,e)}function f(n,t,e){return s(n,t=1+(-1^t)>>>0,e=(-1^e)+(0===t?1:0)|0)}function m(n,t){return f(n,t[1],t[0])}function b(n,t){if(0===t)return n;var e=n[1];return t>=32?[e<<(t-32|0),0]:[e>>>(32-t|0)|n[0]<<t,e<<t>>>0]}function d(n,t){if(0===t)return n;var e=n[0],r=t-32|0;return 0===r?[0,e>>>0]:r>0?[0,e>>>r]:[e>>>t,(e<<(0|-r)|n[1]>>>t)>>>0]}function g(n,t){if(0===t)return n;var e=n[0];return t<32?[e>>t,(e<<(32-t|0)|n[1]>>>t)>>>0]:[e>=0?0:-1,e>>(t-32|0)>>>0]}function v(n){return 0===n[0]&&0===n[1]}function h(n,t){for(;;){var e,r,i=t,a=n,c=a[0],o=0,s=0;if(0!==c)r=4;else{if(0===a[1])return P;r=4}if(4===r)if(0!==i[0])s=3;else{if(0===i[1])return P;s=3}if(3===s&&(-2147483648!==c||0!==a[1]?o=2:e=i[1]),2===o&&(r=i[0],s=a[1],o=0,-2147483648!==r||0!==i[1]?o=3:e=s,3===o)){if(o=i[1],c<0){if(r>=0)return _(h(_(a),i));t=_(i),n=_(a);continue}if(r<0)return _(h(a,_(i)));a=c>>>16,i=65535&c,c=s>>>16;var u,l,f,m=r>>>16,b=o>>>16,d=(s&=65535)*(o&=65535);return u=(l=(l=(f=(d>>>16)+c*o)>>>16)+((f=(65535&f)+s*b)>>>16)+i*o)>>>16,u+=(l=(65535&l)+c*b)>>>16,u+=(l=(65535&l)+s*(r&=65535))>>>16,[(l&=65535)|(u=u+(a*o+i*b+c*r+s*m)&65535)<<16,(65535&d|(65535&f)<<16)>>>0]}return 0==(1&e)?P:F}}function p(n,t){return[n[0]^t[0],(n[1]^t[1])>>>0]}function E(n,t){return[n[0]|t[0],(n[1]|t[1])>>>0]}function S(n,t){return[n[0]&t[0],(n[1]&t[1])>>>0]}function x(n){return 4294967296*n[0]+n[1]}function A(n){return isNaN(n)||!isFinite(n)?P:n<=-0x8000000000000000?F:n+1>=0x8000000000000000?R:n<0?_(A(-n)):[n/4294967296|0,(n=n%4294967296|0)>>>0]}function y(n){var t=n[0],e=t>>21;return 0===e||-1===e&&!(0===n[1]&&-2097152===t)}function N(n){if(y(n))return String(x(n));if(n[0]<0)return t("bs_caml").i64_eq(n,F)?"-9223372036854775808":"-"+N(_(n));var e=A(Math.floor(x(n)/10)),r=e[1],i=e[0];return r=(n=f(f(n,r<<3,r>>>29|i<<3),r<<1,r>>>31|i<<1))[1],i=n[0],0===r&&0===i?N(e)+"0":i<0?(n=1+(-1^r)>>>0,n=10*(i=Math.ceil(n/10))-n,N(f(e,0|i,0))+String(0|n)):(n=r-10*(i=Math.floor(r/10)),N(s(e,0|i,0))+String(0|n))}function w(n,e){for(;;){var r,i=e,a=n,c=a[0],o=0;if(0===i[0]&&0===i[1])throw{RE_EXN_ID:"Division_by_zero",Error:new Error};if(2===(r=2))if(-2147483648!==c)if(0!==c)o=1;else{if(0===a[1])return P;o=1}else if(0!==a[1])o=1;else{if(t("bs_caml").i64_eq(i,z)||t("bs_caml").i64_eq(i,j))return a;if(t("bs_caml").i64_eq(i,F))return z;var s;if(0!==(r=b(w(r=g(a,1),i),1))[0])s=3;else{if(0===r[1])return i[0]<0?z:_(z);s=3}if(3===s)return u(r,w(s=m(a,h(i,r)),i))}if(1===o){if(-2147483648!==(r=i[0]))s=2;else{if(0===i[1])return P;s=2}if(2===s){if(c<0){if(r>=0)return _(w(_(a),i));e=_(i),n=_(a);continue}if(r<0)return _(w(a,_(i)));for(o=P,s=a;t("bs_caml").i64_ge(s,i);){r=1>(c=Math.floor(x(s)/x(i)))?1:c,c=(a=Math.ceil(Math.log(r)/Math.LN2))<=48?1:Math.pow(2,a-48);for(var l=h(a=A(r),i);l[0]<0||t("bs_caml").i64_gt(l,s);)l=h(a=A(r-=c),i);v(a)&&(a=z),o=u(o,a),s=m(s,l)}return o}}}}function q(n,t){return m(n,h(w(n,t),t))}function I(n,t){var e=w(n,t);return[e,m(n,h(e,t))]}function T(n,t){var e=t[0],r=n[0];return 0!==(r=r<e?-1:r===e?0:1)?r:(e=t[1],(r=n[1])<e?-1:r===e?0:1)}function k(n){return[n<0?-1:0,n>>>0]}function D(n){return 0|n[1]}function C(n){var t=n[1],e=function(n){return(n>>>0).toString(16)};if(0===(n=n[0])&&0===t)return"0";if(0===t)return e(n)+"00000000";if(0===n)return e(t);var r=8-(t=e(t)).length|0;return r<=0?e(n)+t:e(n)+("0".repeat(r)+t)}function L(n){return[2147483647&n[0],n[1]]}function M(n){return function(n,t){return new Float64Array(new Int32Array([n,t]).buffer)[0]}(n[1],n[0])}function O(n){return[(n=function(n){return new Int32Array(new Float64Array([n]).buffer)}(n))[1],n[0]>>>0]}var F=[-2147483648,0],R=[2147483647,4294967295],z=[0,1],P=[0,0],j=[-1,4294967295];a.mk=n,a.succ=e,a.min_int=F,a.max_int=R,a.one=z,a.zero=P,a.neg_one=j,a.of_int32=k,a.to_int32=D,a.add=u,a.neg=_,a.sub=m,a.lsl_=b,a.lsr_=d,a.asr_=g,a.is_zero=v,a.mul=h,a.xor=p,a.or_=E,a.and_=S,a.equal_null=r,a.equal_undefined=i,a.equal_nullable=l,a.to_float=x,a.of_float=A,a.div=w,a.mod_=q,a.compare=T,a.float_of_bits=M,a.bits_of_float=O,a.div_mod=I,a.to_hex=C,a.discard_sign=L,a.to_string=N},null),__d("bs_caml_format",["bs_caml","bs_caml_int64"],function(n,t,e,r,i,a){"use strict";function c(n){return n>=65?n>=97?n>=123?-1:n-87|0:n>=91?-1:n-55|0:n>57||n<48?-1:n-48|0}function o(n){switch(n){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function _(n){var t=1,e=2,r=0,i=n.charCodeAt(r);switch(i){case 43:r=r+1|0;break;case 44:break;case 45:t=-1,r=r+1|0}if("0"===n[r])if((i=n.charCodeAt(r+1|0))>=89)if(i>=111){if(i<121)switch(i){case 111:e=0,r=r+2|0;break;case 117:r=r+2|0;break;case 112:case 113:case 114:case 115:case 116:case 118:case 119:break;case 120:e=1,r=r+2|0}}else 98===i&&(e=3,r=r+2|0);else if(66!==i){if(i>=79)switch(i){case 79:e=0,r=r+2|0;break;case 85:r=r+2|0;break;case 80:case 81:case 82:case 83:case 84:case 86:case 87:break;case 88:e=1,r=r+2|0}}else e=3,r=r+2|0;return[r,t,e]}function n(n){var t=_(n),e=t[0],r=o(t[2]),i=4294967295,a=n.length,s=e<a?n.charCodeAt(e):0;if((s=c(s))<0||s>=r)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};var u=function(t,e){for(;;){var o=e,_=t;if(o===a)return _;var s=n.charCodeAt(o);if(95!==s){if((s=c(s))<0||s>=r)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};if((_=r*_+s)>i)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};e=o+1|0,t=_}else e=o+1|0}};if(u=0|(t=t[1]*u(s,e+1|0)),10===r&&t!==u)throw{RE_EXN_ID:"Failure",_1:"int_of_string",Error:new Error};return u}function e(n){var e,r=_(n),i=r[2],a=r[0],s=t("bs_caml_int64").of_int32(o(i));switch(r=t("bs_caml_int64").of_int32(r[1]),i){case 0:e=[536870911,4294967295];break;case 1:e=[268435455,4294967295];break;case 2:e=[429496729,2576980377];break;case 3:e=t("bs_caml_int64").max_int}var u=n.length;if(i=a<u?n.charCodeAt(a):0,i=t("bs_caml_int64").of_int32(c(i)),t("bs_caml").i64_lt(i,t("bs_caml_int64").zero)||t("bs_caml").i64_ge(i,s))throw{RE_EXN_ID:"Failure",_1:"int64_of_string",Error:new Error};var l=function(r,i){for(;;){var a=i,o=r;if(a===u)return o;var _=n.charCodeAt(a);if(95!==_){if(_=t("bs_caml_int64").of_int32(c(_)),t("bs_caml").i64_lt(_,t("bs_caml_int64").zero)||t("bs_caml").i64_ge(_,s)||t("bs_caml").i64_gt(o,e))throw{RE_EXN_ID:"Failure",_1:"int64_of_string",Error:new Error};i=a+1|0,r=o=t("bs_caml_int64").add(t("bs_caml_int64").mul(s,o),_)}else i=a+1|0}};if(r=t("bs_caml_int64").mul(r,l(i,a+1|0)),l=t("bs_caml_int64").or_(r,t("bs_caml_int64").zero),t("bs_caml").i64_eq(s,[0,10])&&t("bs_caml").i64_neq(r,l))throw{RE_EXN_ID:"Failure",_1:"int64_of_string",Error:new Error};return l}function s(n){switch(n){case 0:return 8;case 1:return 16;case 2:return 10}}function u(n){return n>=65&&n<=90||n>=192&&n<=214||n>=216&&n<=222?n+32|0:n}function l(n){var t=n.length;if(t>31)throw{RE_EXN_ID:"Invalid_argument",_1:"format_int: format too long",Error:new Error};for(var e={justify:"+",signstyle:"-",filter:" ",alternate:!1,base:2,signedconv:!1,width:0,uppercase:!1,sign:1,prec:-1,conv:"f"},r=0;;){var i=r;if(i>=t)return e;var a=n.charCodeAt(i),c=0;if(a>=69)if(a>=88)if(a>=121)c=1;else switch(a){case 88:e.base=1,e.uppercase=!0,r=i+1|0;continue;case 101:case 102:case 103:c=5;break;case 100:case 105:c=4;break;case 111:e.base=0,r=i+1|0;continue;case 117:e.base=2,r=i+1|0;continue;case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 104:case 106:case 107:case 108:case 109:case 110:case 112:case 113:case 114:case 115:case 116:case 118:case 119:c=1;break;case 120:e.base=1,r=i+1|0;continue}else{if(!(a>=72)){e.signedconv=!0,e.uppercase=!0,e.conv=String.fromCharCode(u(a)),r=i+1|0;continue}c=1}else switch(a){case 35:e.alternate=!0,r=i+1|0;continue;case 32:case 43:c=2;break;case 45:e.justify="-",r=i+1|0;continue;case 46:e.prec=0;for(var o=i+1|0;function(t){return function(){var e=n.charCodeAt(t)-48|0;return e>=0&&e<=9}}(o)();)e.prec=(Math.imul(e.prec,10)+n.charCodeAt(o)|0)-48|0,o=o+1|0;r=o;continue;case 33:case 34:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 47:c=1;break;case 48:e.filter="0",r=i+1|0;continue;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=3;break;default:c=1}switch(c){case 1:r=i+1|0;continue;case 2:e.signstyle=String.fromCharCode(a),r=i+1|0;continue;case 3:for(e.width=0,o=i;function(t){return function(){var e=n.charCodeAt(t)-48|0;return e>=0&&e<=9}}(o)();)e.width=(Math.imul(e.width,10)+n.charCodeAt(o)|0)-48|0,o=o+1|0;r=o;continue;case 4:e.signedconv=!0,e.base=2,r=i+1|0;continue;case 5:e.signedconv=!0,e.conv=String.fromCharCode(a),r=i+1|0;continue}}}function f(n,t){var e=n.justify,r=n.signstyle,i=n.filter,a=n.alternate,c=n.base,o=n.signedconv,_=n.width,s=n.uppercase;n=n.sign;var u=t.length;o&&(n<0||"-"!==r)&&(u=u+1|0),a&&(0===c?u=u+1|0:1===c&&(u=u+2|0));var l="";if("+"===e&&" "===i)for(var f=u;f<_;++f)l+=i;if(o&&(n<0?l+="-":"-"!==r&&(l+=r)),a&&0===c&&(l+="0"),a&&1===c&&(l+="0x"),"+"===e&&"0"===i)for(f=u;f<_;++f)l+=i;if(l=s?l+t.toUpperCase():l+t,"-"===e)for(o=u;o<_;++o)l+=" ";return l}function r(n,t){if("%d"===n)return String(t);if(n=l(n),t=(t=t<0?n.signedconv?(n.sign=-1,-t>>>0):t>>>0:t).toString(s(n.base)),n.prec>=0){n.filter=" ";var e=n.prec-t.length|0;e>0&&(t="0".repeat(e)+t)}return f(n,t)}function m(n){if(!t("bs_caml").i64_lt(n,t("bs_caml_int64").zero))return t("bs_caml_int64").to_string(n);var e=[0,10];return n=t("bs_caml_int64").discard_sign(n),n=t("bs_caml_int64").div_mod(n,e),e=t("bs_caml_int64").div_mod(t("bs_caml_int64").add([0,8],n[1]),e),n=t("bs_caml_int64").add(t("bs_caml_int64").add([214748364,3435973836],n[0]),e[0]),t("bs_caml_int64").to_string(n)+"0123456789"[t("bs_caml_int64").to_int32(e[1])]}function b(n){var e="",r=[0,8],i="01234567";if(t("bs_caml").i64_lt(n,t("bs_caml_int64").zero)){var a,c=(a=t("bs_caml_int64")).discard_sign(n);c=a.div_mod(c,r);var o=a.add([268435456,0],c[0]);for(c=c[1],e=i[a.to_int32(c)]+e;t("bs_caml").i64_neq(o,t("bs_caml_int64").zero);)o=(a=t("bs_caml_int64").div_mod(o,r))[0],c=a[1],e=i[t("bs_caml_int64").to_int32(c)]+e}else for(c=(a=t("bs_caml_int64").div_mod(n,r))[0],o=a[1],e=i[t("bs_caml_int64").to_int32(o)]+e;t("bs_caml").i64_neq(c,t("bs_caml_int64").zero);)c=(n=t("bs_caml_int64").div_mod(c,r))[0],o=n[1],e=i[t("bs_caml_int64").to_int32(o)]+e;return e}function i(n,e){if("%d"===n)return t("bs_caml_int64").to_string(e);e=(n=l(n)).signedconv&&t("bs_caml").i64_lt(e,t("bs_caml_int64").zero)?(n.sign=-1,t("bs_caml_int64").neg(e)):e;var r,i=n.base;switch(i){case 0:r=b(e);break;case 1:r=t("bs_caml_int64").to_hex(e);break;case 2:r=m(e)}return n.prec>=0?(n.filter=" ",e=(i=n.prec-r.length|0)>0?"0".repeat(i)+r:r):e=r,f(n,e)}function d(n,t){var e=(n=l(n)).prec<0?6:n.prec,r=t<0?(n.sign=-1,-t):t;if(t="",isNaN(r))t="nan",n.filter=" ";else if(isFinite(r)){var i=n.conv;switch(i){case"e":i=(t=r.toExponential(e)).length,"e"===t[i-3|0]&&(t=t.slice(0,i-1|0)+"0"+t.slice(i-1|0));break;case"f":t=r.toFixed(e);break;case"g":var a=0!==e?e:1;if(i=(t=r.toExponential(a-1|0)).indexOf("e"),(e=0|Number(t.slice(i+1|0)))<-4||r>=1e21||r.toFixed().length>a){for(var c=i-1|0;"0"===t[c];)c=c-1|0;"."===t[c]&&(c=c-1|0),c=(t=t.slice(0,c+1|0)+t.slice(i)).length,"e"===t[c-3|0]&&(t=t.slice(0,c-1|0)+"0"+t.slice(c-1|0))}else{var o=a;if(e<0)o=o-(e+1|0)|0,t=r.toFixed(o);else for(;(t=r.toFixed(o)).length>(a+1|0);)o=o-1|0;if(0!==o){for(i=t.length-1|0;"0"===t[i];)i=i-1|0;"."===t[i]&&(i=i-1|0),t=t.slice(0,i+1|0)}}}}else t="inf",n.filter=" ";return f(n,t)}function g(n){return h(n,{RE_EXN_ID:"Failure",_1:"float_of_string"})}var v=function(n,t,e){if(!isFinite(n))return isNaN(n)?"nan":n>0?"infinity":"-infinity";var r=0==n&&1/n==-Infinity?1:n>=0?0:1;r&&(n=-n);var i=0;if(0!=n)if(n<1)for(;n<1&&i>-1022;)n*=2,i--;else for(;n>=2;)n/=2,i++;var a=i<0?"":"+",c="";if(r)c="-";else switch(e){case 43:c="+";break;case 32:c=" "}return t>=0&&t<13&&(r=Math.pow(2,4*t),n=Math.round(n*r)/r),e=n.toString(16),t>=0&&((r=e.indexOf("."))<0?e+="."+"0".repeat(t):(n=r+1+t,e.length<n?e+="0".repeat(n-e.length):e=e.substr(0,n))),c+"0x"+e+"p"+a+i.toString(10)},h=function(n,t){var e=+n;if(n.length>0&&e==e)return e;if(e=+(n=n.replace(/_/g,"")),n.length>0&&e==e||/^[+-]?nan$/i.test(n))return e;var r=/^ *([+-]?)0x([0-9a-f]+)\.?([0-9a-f]*)p([+-]?[0-9]+)/i.exec(n);if(r){var i=r[3].replace(/0+$/,""),a=parseInt(r[1]+r[2]+i,16);return r=(0|r[4])-4*i.length,e=a*Math.pow(2,r)}if(/^\+?inf(inity)?$/i.test(n))return Infinity;if(/^-inf(inity)?$/i.test(n))return-Infinity;throw t},p=r,E=r,S=n,x=n;a.caml_format_float=d,a.caml_hexstring_of_float=v,a.caml_format_int=r,a.caml_nativeint_format=p,a.caml_int32_format=E,a.caml_float_of_string=g,a.caml_int64_format=i,a.caml_int_of_string=n,a.caml_int32_of_string=S,a.caml_int64_of_string=e,a.caml_nativeint_of_string=x},null),__d("bs_caml_exceptions",[],function(n,t,e,r,i,a){"use strict";function n(n){return c.contents=c.contents+1|0,n+"/"+c.contents}function t(n){return null!=n&&"string"==typeof n.RE_EXN_ID}function e(n){return n.RE_EXN_ID}var c={contents:0};a.id=c,a.create=n,a.caml_is_extension=t,a.caml_exn_slot_name=e},null),__d("bs_caml_option",[],function(n,t,e,r,i,a){"use strict";function n(n){return void 0!==n.BS_PRIVATE_NESTED_SOME_NONE}function c(n){return void 0===n?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==n&&void 0!==n.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:n.BS_PRIVATE_NESTED_SOME_NONE+1|0}:n}function t(n){return null==n?void 0:c(n)}function e(n){return void 0===n?void 0:c(n)}function r(n){return null===n?void 0:c(n)}function o(n){return null===n||void 0===n.BS_PRIVATE_NESTED_SOME_NONE?n:0===(n=n.BS_PRIVATE_NESTED_SOME_NONE)?void 0:{BS_PRIVATE_NESTED_SOME_NONE:n-1|0}}function i(n){return void 0===n?void 0:o(n)}function _(n){return void 0!==n?n.VAL:n}a.nullable_to_opt=t,a.undefined_to_opt=e,a.null_to_opt=r,a.valFromOption=o,a.some=c,a.isNested=n,a.option_get=i,a.option_unwrap=_},null),__d("bs_caml_js_exceptions",["bs_caml_exceptions","bs_caml_option"],function(n,t,e,r,i,a){"use strict";function n(n){return t("bs_caml_exceptions").caml_is_extension(n)?n:{RE_EXN_ID:c,_1:n}}function e(n){if(n.RE_EXN_ID===c)return t("bs_caml_option").some(n._1)}var c=t("bs_caml_exceptions").create("Caml_js_exceptions.Error");a.$$Error=c,a.internalToOCamlException=n,a.caml_as_js_exn=e},null),__d("bs_int64",["bs_caml","bs_caml_format","bs_caml_int64","bs_caml_js_exceptions"],function(n,t,e,r,i,a){"use strict";function n(n){return t("bs_caml_int64").sub(n,t("bs_caml_int64").one)}function e(n){return t("bs_caml").i64_ge(n,t("bs_caml_int64").zero)?n:t("bs_caml_int64").neg(n)}function r(n){return t("bs_caml_int64").xor(n,t("bs_caml_int64").neg_one)}function i(n){try{return t("bs_caml_format").caml_int64_of_string(n)}catch(e){if("Failure"===(n=t("bs_caml_js_exceptions").internalToOCamlException(e)).RE_EXN_ID)return;throw n}}function c(n,e){return 0===t("bs_caml_int64").compare(n,e)}var o,_=(o=t("bs_caml_int64")).compare,s=o.zero,u=o.one,l=o.neg_one,f=o.succ,m=o.max_int,b=o.min_int;o=o.to_string,a.zero=s,a.one=u,a.minus_one=l,a.succ=f,a.pred=n,a.abs=e,a.max_int=m,a.min_int=b,a.lognot=r,a.of_string_opt=i,a.to_string=o,a.compare=_,a.equal=c},null),__d("I64",["bs_caml","bs_caml_format","bs_caml_int64","bs_int64"],function(n,t,e,r,i,a,c){"use strict";function n(n){return Array.isArray(n)&&2===n.length&&Number.isInteger(n[0])&&Number.isInteger(n[1])?n:void 0}function t(n){return n}c.mk=e("bs_caml_int64").mk,c.succ=e("bs_caml_int64").succ,c.min_int=e("bs_caml_int64").min_int,c.max_int=e("bs_caml_int64").max_int,c.one=e("bs_caml_int64").one,c.zero=e("bs_caml_int64").zero,c.neg_one=e("bs_caml_int64").neg_one,c.of_int32=e("bs_caml_int64").of_int32,c.to_int32=e("bs_caml_int64").to_int32,c.add=e("bs_caml_int64").add,c.neg=e("bs_caml_int64").neg,c.sub=e("bs_caml_int64").sub,c.lsl_=e("bs_caml_int64").lsl_,c.lsr_=e("bs_caml_int64").lsr_,c.asr_=e("bs_caml_int64").asr_,c.is_zero=e("bs_caml_int64").is_zero,c.mul=e("bs_caml_int64").mul,c.xor=e("bs_caml_int64").xor,c.or_=e("bs_caml_int64").or_,c.and_=e("bs_caml_int64").and_,c.equal_null=e("bs_caml_int64").equal_null,c.equal_undefined=e("bs_caml_int64").equal_undefined,c.equal_nullable=e("bs_caml_int64").equal_nullable,c.to_float=e("bs_caml_int64").to_float,c.of_float=e("bs_caml_int64").of_float,c.div=e("bs_caml_int64").div,c.mod_=e("bs_caml_int64").mod_,c.compare=e("bs_caml_int64").compare,c.float_of_bits=e("bs_caml_int64").float_of_bits,c.bits_of_float=e("bs_caml_int64").bits_of_float,c.div_mod=e("bs_caml_int64").div_mod,c.to_hex=e("bs_caml_int64").to_hex,c.discard_sign=e("bs_caml_int64").discard_sign,c.to_string=e("bs_caml_int64").to_string,c.minus_one=e("bs_int64").minus_one,c.pred=e("bs_int64").pred,c.abs=e("bs_int64").abs,c.lognot=e("bs_int64").lognot,c.of_string_opt=e("bs_int64").of_string_opt,c.equal=e("bs_int64").equal,c.of_string=e("bs_caml_format").caml_int64_of_string,c.gt=e("bs_caml").i64_gt,c.ge=e("bs_caml").i64_ge,c.lt=e("bs_caml").i64_lt,c.le=e("bs_caml").i64_le,c.cast=n,c.asI64=t},98),__d("LSArrayGetObjectAt",["I64","Promise"],function(n,t,e,r,i,a,c){"use strict";function n(n,e,i,a){return t("Promise").resolve([i[r("I64").to_int32(a)],i])}c.call=n},98),__d("LSLogEventAnnotate.bs",["Promise"],function(n,t,e,r,i,a){"use strict";function n(){return t("Promise").resolve()}e=n,a.call=e},66),__d("LSLogEventAnnotate.nop",["LSLogEventAnnotate.bs"],function(n,t,e,r,i,a,c){"use strict";n=function(n,t,e,i,a,c){return r("LSLogEventAnnotate.bs").call(n,t,e,i,a,c)},c["default"]=n},98),__d("LSExecuteFirstBlockForSyncTransaction",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSLogEventAnnotate.nop"],function(n,t,e,r,i,a){function n(){var n=arguments,e=n[n.length-1];e.n;var r=[],i=[];return e.seq([function(){return e.seq([function(){return e.resolve()},function(){return e.ftr(e.db.table(3).fetch([[["",n[0]]]]),function(t){return""===t.taskQueueName&&e.i64.eq(t.syncDatabaseId,n[0])&&e.i64.eq(t.epochId,n[1])}).next().then(function(i,a){return a=i.done,i=i.value,a?e.seq([function(){return function(n){e.logger(n).mustfix(n)}(["epoch mismatch",",",e.i64.to_string(n[0])].join("")),r[2]=new e.Map,r[2].set("database_id",n[0]),r[2].set("epoch_id",n[1]),r[2].set("sync_status",n[4]),r[2].set("next_cursor",n[3]),r[2].set("error_msg","epoch mismatch"),n[9]?r[3]=!1:r[3]=!0,r[3]?e.resolve():(r[5]=n[9].keys(),r[6]=e.i64.of_int32(r[5].length),e.i64.gt(r[6],e.i64.cast([0,0]))?e.loopAsync(r[6],function(i){return r[7]=i,e.seq([function(){return e.ntop("Array",t("LSArrayGetObjectAt"),r[5],r[7]).then(function(n){return n=n,r[8]=n[0],r[9]=n[1],n})},function(){return r[10]=n[9].get(r[8]),n[9],r[2].set(r[8],r[10])}])}):e.resolve())},function(){return e.nop(t("LSLogEventAnnotate.nop"),e.i64.cast([0,16]),e.i64.cast([0,35]),e.i64.cast([0,0]),r[2])},function(){return r[4]=!1,r[0]=r[4]}]):(i.item,e.seq([function(){return e.ftr(e.db.table(1).fetch([[[n[0]]]]),function(t){return e.i64.eq(t.groupId,n[0])&&t.currentCursor===n[2]}).next().then(function(i,a){return a=i.done,i=i.value,a?e.seq([function(){return function(n){e.logger(n).mustfix(n)}(["cursor mismatch",",",e.i64.to_string(n[0])].join("")),r[4]=new e.Map,r[4].set("database_id",n[0]),r[4].set("epoch_id",n[1]),r[4].set("sync_status",n[4]),r[4].set("next_cursor",n[3]),r[4].set("error_msg","cursor mismatch"),n[9]?r[5]=!1:r[5]=!0,r[5]?e.resolve():(r[7]=n[9].keys(),r[8]=e.i64.of_int32(r[7].length),e.i64.gt(r[8],e.i64.cast([0,0]))?e.loopAsync(r[8],function(i){return r[9]=i,e.seq([function(){return e.ntop("Array",t("LSArrayGetObjectAt"),r[7],r[9]).then(function(n){return n=n,r[10]=n[0],r[11]=n[1],n})},function(){return r[12]=n[9].get(r[10]),n[9],r[4].set(r[10],r[12])}])}):e.resolve())},function(){return e.nop(t("LSLogEventAnnotate.nop"),e.i64.cast([0,16]),e.i64.cast([0,35]),e.i64.cast([0,0]),r[4])},function(){return r[6]=!1,r[2]=r[6]}]):(i.item,e.seq([function(){return r[4]=e.i64.of_float(Date.now()),r[5]=e.i64.of_float(Date.now()),e.fe(e.db.table(1).fetch([[[n[0]]]]),function(t){var i=t.update;return t.item,i({currentCursor:n[3],syncStatus:n[4],sendSyncParams:n[5],minTimeToSyncTimestampMs:e.i64.eq(n[6],e.i64.cast([0,0]))?e.i64.cast([0,0]):e.i64.add(r[4],n[6]),canIgnoreTimestamp:n[7],syncChannel:n[8],lastSyncCompletedTimestampMs:r[5]})})},function(){return e.fe(e.db.table(3).fetch([[["",n[0]]]]),function(n){var t=n.update;return n.item,t({failureCount:e.i64.cast([-1,4294967295])})})},function(){return r[6]=new e.Map,r[6].set("database_id",n[0]),r[6].set("epoch_id",n[1]),r[6].set("sync_status",n[4]),r[6].set("next_cursor",n[3]),n[9]?r[7]=!1:r[7]=!0,r[7]?e.resolve():(r[9]=n[9].keys(),r[10]=e.i64.of_int32(r[9].length),e.i64.gt(r[10],e.i64.cast([0,0]))?e.loopAsync(r[10],function(i){return r[11]=i,e.seq([function(){return e.ntop("Array",t("LSArrayGetObjectAt"),r[9],r[11]).then(function(n){return n=n,r[12]=n[0],r[13]=n[1],n})},function(){return r[14]=n[9].get(r[12]),n[9],r[6].set(r[12],r[14])}])}):e.resolve())},function(){return e.nop(t("LSLogEventAnnotate.nop"),e.i64.cast([0,16]),e.i64.cast([0,35]),e.i64.cast([0,0]),r[6])},function(){return r[8]=!0,r[2]=r[8]}]))})},function(){return r[0]=r[2]}]))})},function(){return i[0]=r[0]}])},function(){return e.resolve(i)}])}e=n,a["default"]=e},66),__d("LSSetRegionHint",[],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e=[];return t.seq([function(){return t.fe(t.db.table(1).fetch([[[n[0]]]]),function(t){var e=t.update;return t.item,e({regionHint:n[1]})})},function(){return t.resolve(e)}])}t=n,a["default"]=t},66),__d("LSDeleteThenInsertContactPresence",[],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e=[];return t.seq([function(){return t.db.table(186).put({contactId:n[0],status:n[1],expirationTimestampMs:n[3],lastActiveTimestampMs:n[2],capabilities:n[4],publishId:n[5]})},function(){return t.resolve(e)}])}t=n,a["default"]=t},66),__d("LSTruncatePresenceDatabase",[],function(n,t,e,r,i,a){function n(){var n=arguments,t=n[n.length-1];t.n;var e=[];return t.seq([function(){return n[0],t.fe(t.db.table(186).fetch(),function(n){return n["delete"]()})},function(){return t.resolve(e)}])}t=n,a["default"]=t},66);